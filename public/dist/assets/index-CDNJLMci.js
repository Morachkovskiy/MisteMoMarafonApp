var Vy=Object.defineProperty;var hg=i=>{throw TypeError(i)};var Wy=(i,e,t)=>e in i?Vy(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var z=(i,e,t)=>Wy(i,typeof e!="symbol"?e+"":e,t),Af=(i,e,t)=>e.has(i)||hg("Cannot "+t);var c=(i,e,t)=>(Af(i,e,"read from private field"),t?t.call(i):e.get(i)),w=(i,e,t)=>e.has(i)?hg("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),b=(i,e,t,s)=>(Af(i,e,"write to private field"),s?s.call(i,t):e.set(i,t),t),A=(i,e,t)=>(Af(i,e,"access private method"),t);var It=(i,e,t,s)=>({set _(n){b(i,e,n,t)},get _(){return c(i,e,s)}});import{j as o,V as Cx,R as _x,A as kx,C as Tx,T as Px,D as Rx,P as Gy,a as Gt,u as hu,c as ch,b as Os,d as Hi,e as $l,f as qy,g as Xy,h as Yy,i as Ht,S as Ky,O as Mx,k as Jy,l as Lx,m as Zy,n as Ix,o as Dx,p as Qy,q as ew}from"./ui-B2tsf4ei.js";import{a as Ox,r as N,R as H,v as tw,b as sw,g as nw}from"./vendor-BEqLYuye.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=t(n);fetch(n.href,r)}})();var Ff={},ug=Ox;Ff.createRoot=ug.createRoot,Ff.hydrateRoot=ug.hydrateRoot;const iw=1,rw=1e6;let Nf=0;function aw(){return Nf=(Nf+1)%Number.MAX_SAFE_INTEGER,Nf.toString()}const Sf=new Map,fg=i=>{if(Sf.has(i))return;const e=setTimeout(()=>{Sf.delete(i),Ac({type:"REMOVE_TOAST",toastId:i})},rw);Sf.set(i,e)},ow=(i,e)=>{switch(e.type){case"ADD_TOAST":return{...i,toasts:[e.toast,...i.toasts].slice(0,iw)};case"UPDATE_TOAST":return{...i,toasts:i.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?fg(t):i.toasts.forEach(s=>{fg(s.id)}),{...i,toasts:i.toasts.map(s=>s.id===t||t===void 0?{...s,open:!1}:s)}}case"REMOVE_TOAST":return e.toastId===void 0?{...i,toasts:[]}:{...i,toasts:i.toasts.filter(t=>t.id!==e.toastId)}}},Rh=[];let Mh={toasts:[]};function Ac(i){Mh=ow(Mh,i),Rh.forEach(e=>{e(Mh)})}function lw({...i}){const e=aw(),t=n=>Ac({type:"UPDATE_TOAST",toast:{...n,id:e}}),s=()=>Ac({type:"DISMISS_TOAST",toastId:e});return Ac({type:"ADD_TOAST",toast:{...i,id:e,open:!0,onOpenChange:n=>{n||s()}}}),{id:e,dismiss:s,update:t}}function Hl(){const[i,e]=N.useState(Mh);return N.useEffect(()=>(Rh.push(e),()=>{const t=Rh.indexOf(e);t>-1&&Rh.splice(t,1)}),[i]),{...i,toast:lw,dismiss:t=>Ac({type:"DISMISS_TOAST",toastId:t})}}function Fx(i){var e,t,s="";if(typeof i=="string"||typeof i=="number")s+=i;else if(typeof i=="object")if(Array.isArray(i)){var n=i.length;for(e=0;e<n;e++)i[e]&&(t=Fx(i[e]))&&(s&&(s+=" "),s+=t)}else for(t in i)i[t]&&(s&&(s+=" "),s+=t);return s}function Ul(){for(var i,e,t=0,s="",n=arguments.length;t<n;t++)(i=arguments[t])&&(e=Fx(i))&&(s&&(s+=" "),s+=e);return s}const pg=i=>typeof i=="boolean"?`${i}`:i===0?"0":i,mg=Ul,Xu=(i,e)=>t=>{var s;if((e==null?void 0:e.variants)==null)return mg(i,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:n,defaultVariants:r}=e,a=Object.keys(n).map(h=>{const u=t==null?void 0:t[h],f=r==null?void 0:r[h];if(u===null)return null;const m=pg(u)||pg(f);return n[h][m]}),l=t&&Object.entries(t).reduce((h,u)=>{let[f,m]=u;return m===void 0||(h[f]=m),h},{}),d=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((h,u)=>{let{class:f,className:m,...p}=u;return Object.entries(p).every(x=>{let[g,v]=x;return Array.isArray(v)?v.includes({...r,...l}[g]):{...r,...l}[g]===v})?[...h,f,m]:h},[]);return mg(i,a,d,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cw=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Bx=(...i)=>i.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var dw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hw=N.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:n="",children:r,iconNode:a,...l},d)=>N.createElement("svg",{ref:d,...dw,width:e,height:e,stroke:i,strokeWidth:s?Number(t)*24/Number(e):t,className:Bx("lucide",n),...l},[...a.map(([h,u])=>N.createElement(h,u)),...Array.isArray(r)?r:[r]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=(i,e)=>{const t=N.forwardRef(({className:s,...n},r)=>N.createElement(hw,{ref:r,iconNode:e,className:Bx(`lucide-${cw(i)}`,s),...n}));return t.displayName=`${i}`,t};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uw=ne("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yu=ne("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fw=ne("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pw=ne("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mw=ne("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uu=ne("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fm=ne("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gg=ne("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gw=ne("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hn=ne("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xg=ne("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bf=ne("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xw=ne("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bw=ne("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vw=ne("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jf=ne("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yw=ne("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zf=ne("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zx=ne("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $f=ne("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=ne("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ww=ne("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bg=ne("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aw=ne("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nw=ne("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=ne("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sw=ne("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jw=ne("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ew=ne("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cw=ne("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _w=ne("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vg=ne("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kw=ne("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tw=ne("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Un=ne("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wh=ne("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pw=ne("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hf=ne("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rw=ne("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mw=ne("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lw=ne("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iw=ne("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dw=ne("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ow=ne("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pm=ne("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $x=ne("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),mm="-",Fw=i=>{const e=zw(i),{conflictingClassGroups:t,conflictingClassGroupModifiers:s}=i;return{getClassGroupId:a=>{const l=a.split(mm);return l[0]===""&&l.length!==1&&l.shift(),Hx(l,e)||Bw(a)},getConflictingClassGroupIds:(a,l)=>{const d=t[a]||[];return l&&s[a]?[...d,...s[a]]:d}}},Hx=(i,e)=>{var a;if(i.length===0)return e.classGroupId;const t=i[0],s=e.nextPart.get(t),n=s?Hx(i.slice(1),s):void 0;if(n)return n;if(e.validators.length===0)return;const r=i.join(mm);return(a=e.validators.find(({validator:l})=>l(r)))==null?void 0:a.classGroupId},yg=/^\[(.+)\]$/,Bw=i=>{if(yg.test(i)){const e=yg.exec(i)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},zw=i=>{const{theme:e,prefix:t}=i,s={nextPart:new Map,validators:[]};return Hw(Object.entries(i.classGroups),t).forEach(([r,a])=>{Uf(a,s,r,e)}),s},Uf=(i,e,t,s)=>{i.forEach(n=>{if(typeof n=="string"){const r=n===""?e:wg(e,n);r.classGroupId=t;return}if(typeof n=="function"){if($w(n)){Uf(n(s),e,t,s);return}e.validators.push({validator:n,classGroupId:t});return}Object.entries(n).forEach(([r,a])=>{Uf(a,wg(e,r),t,s)})})},wg=(i,e)=>{let t=i;return e.split(mm).forEach(s=>{t.nextPart.has(s)||t.nextPart.set(s,{nextPart:new Map,validators:[]}),t=t.nextPart.get(s)}),t},$w=i=>i.isThemeGetter,Hw=(i,e)=>e?i.map(([t,s])=>{const n=s.map(r=>typeof r=="string"?e+r:typeof r=="object"?Object.fromEntries(Object.entries(r).map(([a,l])=>[e+a,l])):r);return[t,n]}):i,Uw=i=>{if(i<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,s=new Map;const n=(r,a)=>{t.set(r,a),e++,e>i&&(e=0,s=t,t=new Map)};return{get(r){let a=t.get(r);if(a!==void 0)return a;if((a=s.get(r))!==void 0)return n(r,a),a},set(r,a){t.has(r)?t.set(r,a):n(r,a)}}},Ux="!",Vw=i=>{const{separator:e,experimentalParseClassName:t}=i,s=e.length===1,n=e[0],r=e.length,a=l=>{const d=[];let h=0,u=0,f;for(let v=0;v<l.length;v++){let y=l[v];if(h===0){if(y===n&&(s||l.slice(v,v+r)===e)){d.push(l.slice(u,v)),u=v+r;continue}if(y==="/"){f=v;continue}}y==="["?h++:y==="]"&&h--}const m=d.length===0?l:l.substring(u),p=m.startsWith(Ux),x=p?m.substring(1):m,g=f&&f>u?f-u:void 0;return{modifiers:d,hasImportantModifier:p,baseClassName:x,maybePostfixModifierPosition:g}};return t?l=>t({className:l,parseClassName:a}):a},Ww=i=>{if(i.length<=1)return i;const e=[];let t=[];return i.forEach(s=>{s[0]==="["?(e.push(...t.sort(),s),t=[]):t.push(s)}),e.push(...t.sort()),e},Gw=i=>({cache:Uw(i.cacheSize),parseClassName:Vw(i),...Fw(i)}),qw=/\s+/,Xw=(i,e)=>{const{parseClassName:t,getClassGroupId:s,getConflictingClassGroupIds:n}=e,r=[],a=i.trim().split(qw);let l="";for(let d=a.length-1;d>=0;d-=1){const h=a[d],{modifiers:u,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:p}=t(h);let x=!!p,g=s(x?m.substring(0,p):m);if(!g){if(!x){l=h+(l.length>0?" "+l:l);continue}if(g=s(m),!g){l=h+(l.length>0?" "+l:l);continue}x=!1}const v=Ww(u).join(":"),y=f?v+Ux:v,S=y+g;if(r.includes(S))continue;r.push(S);const j=n(g,x);for(let E=0;E<j.length;++E){const C=j[E];r.push(y+C)}l=h+(l.length>0?" "+l:l)}return l};function Yw(){let i=0,e,t,s="";for(;i<arguments.length;)(e=arguments[i++])&&(t=Vx(e))&&(s&&(s+=" "),s+=t);return s}const Vx=i=>{if(typeof i=="string")return i;let e,t="";for(let s=0;s<i.length;s++)i[s]&&(e=Vx(i[s]))&&(t&&(t+=" "),t+=e);return t};function Kw(i,...e){let t,s,n,r=a;function a(d){const h=e.reduce((u,f)=>f(u),i());return t=Gw(h),s=t.cache.get,n=t.cache.set,r=l,l(d)}function l(d){const h=s(d);if(h)return h;const u=Xw(d,t);return n(d,u),u}return function(){return r(Yw.apply(null,arguments))}}const Me=i=>{const e=t=>t[i]||[];return e.isThemeGetter=!0,e},Wx=/^\[(?:([a-z-]+):)?(.+)\]$/i,Jw=/^\d+\/\d+$/,Zw=new Set(["px","full","screen"]),Qw=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,e1=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,t1=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,s1=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,n1=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Vn=i=>jo(i)||Zw.has(i)||Jw.test(i),Bi=i=>Vl(i,"length",h1),jo=i=>!!i&&!Number.isNaN(Number(i)),Ef=i=>Vl(i,"number",jo),Kl=i=>!!i&&Number.isInteger(Number(i)),i1=i=>i.endsWith("%")&&jo(i.slice(0,-1)),le=i=>Wx.test(i),zi=i=>Qw.test(i),r1=new Set(["length","size","percentage"]),a1=i=>Vl(i,r1,Gx),o1=i=>Vl(i,"position",Gx),l1=new Set(["image","url"]),c1=i=>Vl(i,l1,f1),d1=i=>Vl(i,"",u1),Jl=()=>!0,Vl=(i,e,t)=>{const s=Wx.exec(i);return s?s[1]?typeof e=="string"?s[1]===e:e.has(s[1]):t(s[2]):!1},h1=i=>e1.test(i)&&!t1.test(i),Gx=()=>!1,u1=i=>s1.test(i),f1=i=>n1.test(i),p1=()=>{const i=Me("colors"),e=Me("spacing"),t=Me("blur"),s=Me("brightness"),n=Me("borderColor"),r=Me("borderRadius"),a=Me("borderSpacing"),l=Me("borderWidth"),d=Me("contrast"),h=Me("grayscale"),u=Me("hueRotate"),f=Me("invert"),m=Me("gap"),p=Me("gradientColorStops"),x=Me("gradientColorStopPositions"),g=Me("inset"),v=Me("margin"),y=Me("opacity"),S=Me("padding"),j=Me("saturate"),E=Me("scale"),C=Me("sepia"),k=Me("skew"),_=Me("space"),T=Me("translate"),P=()=>["auto","contain","none"],R=()=>["auto","hidden","clip","visible","scroll"],M=()=>["auto",le,e],F=()=>[le,e],$=()=>["",Vn,Bi],B=()=>["auto",jo,le],ee=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],I=()=>["solid","dashed","dotted","double","none"],D=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],V=()=>["start","end","center","between","around","evenly","stretch"],L=()=>["","0",le],te=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ue=()=>[jo,le];return{cacheSize:500,separator:":",theme:{colors:[Jl],spacing:[Vn,Bi],blur:["none","",zi,le],brightness:ue(),borderColor:[i],borderRadius:["none","","full",zi,le],borderSpacing:F(),borderWidth:$(),contrast:ue(),grayscale:L(),hueRotate:ue(),invert:L(),gap:F(),gradientColorStops:[i],gradientColorStopPositions:[i1,Bi],inset:M(),margin:M(),opacity:ue(),padding:F(),saturate:ue(),scale:ue(),sepia:L(),skew:ue(),space:F(),translate:F()},classGroups:{aspect:[{aspect:["auto","square","video",le]}],container:["container"],columns:[{columns:[zi]}],"break-after":[{"break-after":te()}],"break-before":[{"break-before":te()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ee(),le]}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Kl,le]}],basis:[{basis:M()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",le]}],grow:[{grow:L()}],shrink:[{shrink:L()}],order:[{order:["first","last","none",Kl,le]}],"grid-cols":[{"grid-cols":[Jl]}],"col-start-end":[{col:["auto",{span:["full",Kl,le]},le]}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":[Jl]}],"row-start-end":[{row:["auto",{span:[Kl,le]},le]}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",le]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",le]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...V()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...V(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...V(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[S]}],px:[{px:[S]}],py:[{py:[S]}],ps:[{ps:[S]}],pe:[{pe:[S]}],pt:[{pt:[S]}],pr:[{pr:[S]}],pb:[{pb:[S]}],pl:[{pl:[S]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[_]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[_]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",le,e]}],"min-w":[{"min-w":[le,e,"min","max","fit"]}],"max-w":[{"max-w":[le,e,"none","full","min","max","fit","prose",{screen:[zi]},zi]}],h:[{h:[le,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[le,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[le,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[le,e,"auto","min","max","fit"]}],"font-size":[{text:["base",zi,Bi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ef]}],"font-family":[{font:[Jl]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",le]}],"line-clamp":[{"line-clamp":["none",jo,Ef]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Vn,le]}],"list-image":[{"list-image":["none",le]}],"list-style-type":[{list:["none","disc","decimal",le]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[i]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[i]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...I(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Vn,Bi]}],"underline-offset":[{"underline-offset":["auto",Vn,le]}],"text-decoration-color":[{decoration:[i]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:F()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",le]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",le]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ee(),o1]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",a1]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},c1]}],"bg-color":[{bg:[i]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[r]}],"rounded-s":[{"rounded-s":[r]}],"rounded-e":[{"rounded-e":[r]}],"rounded-t":[{"rounded-t":[r]}],"rounded-r":[{"rounded-r":[r]}],"rounded-b":[{"rounded-b":[r]}],"rounded-l":[{"rounded-l":[r]}],"rounded-ss":[{"rounded-ss":[r]}],"rounded-se":[{"rounded-se":[r]}],"rounded-ee":[{"rounded-ee":[r]}],"rounded-es":[{"rounded-es":[r]}],"rounded-tl":[{"rounded-tl":[r]}],"rounded-tr":[{"rounded-tr":[r]}],"rounded-br":[{"rounded-br":[r]}],"rounded-bl":[{"rounded-bl":[r]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...I(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:I()}],"border-color":[{border:[n]}],"border-color-x":[{"border-x":[n]}],"border-color-y":[{"border-y":[n]}],"border-color-s":[{"border-s":[n]}],"border-color-e":[{"border-e":[n]}],"border-color-t":[{"border-t":[n]}],"border-color-r":[{"border-r":[n]}],"border-color-b":[{"border-b":[n]}],"border-color-l":[{"border-l":[n]}],"divide-color":[{divide:[n]}],"outline-style":[{outline:["",...I()]}],"outline-offset":[{"outline-offset":[Vn,le]}],"outline-w":[{outline:[Vn,Bi]}],"outline-color":[{outline:[i]}],"ring-w":[{ring:$()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[i]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[Vn,Bi]}],"ring-offset-color":[{"ring-offset":[i]}],shadow:[{shadow:["","inner","none",zi,d1]}],"shadow-color":[{shadow:[Jl]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...D(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":D()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[s]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",zi,le]}],grayscale:[{grayscale:[h]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[f]}],saturate:[{saturate:[j]}],sepia:[{sepia:[C]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[h]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[j]}],"backdrop-sepia":[{"backdrop-sepia":[C]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",le]}],duration:[{duration:ue()}],ease:[{ease:["linear","in","out","in-out",le]}],delay:[{delay:ue()}],animate:[{animate:["none","spin","ping","pulse","bounce",le]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[E]}],"scale-x":[{"scale-x":[E]}],"scale-y":[{"scale-y":[E]}],rotate:[{rotate:[Kl,le]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[k]}],"skew-y":[{"skew-y":[k]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",le]}],accent:[{accent:["auto",i]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",le]}],"caret-color":[{caret:[i]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":F()}],"scroll-mx":[{"scroll-mx":F()}],"scroll-my":[{"scroll-my":F()}],"scroll-ms":[{"scroll-ms":F()}],"scroll-me":[{"scroll-me":F()}],"scroll-mt":[{"scroll-mt":F()}],"scroll-mr":[{"scroll-mr":F()}],"scroll-mb":[{"scroll-mb":F()}],"scroll-ml":[{"scroll-ml":F()}],"scroll-p":[{"scroll-p":F()}],"scroll-px":[{"scroll-px":F()}],"scroll-py":[{"scroll-py":F()}],"scroll-ps":[{"scroll-ps":F()}],"scroll-pe":[{"scroll-pe":F()}],"scroll-pt":[{"scroll-pt":F()}],"scroll-pr":[{"scroll-pr":F()}],"scroll-pb":[{"scroll-pb":F()}],"scroll-pl":[{"scroll-pl":F()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",le]}],fill:[{fill:[i,"none"]}],"stroke-w":[{stroke:[Vn,Bi,Ef]}],stroke:[{stroke:[i,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},m1=Kw(p1);function be(...i){return m1(Ul(i))}const g1=Gy,qx=N.forwardRef(({className:i,...e},t)=>o.jsx(Cx,{ref:t,className:be("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",i),...e}));qx.displayName=Cx.displayName;const x1=Xu("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Xx=N.forwardRef(({className:i,variant:e,...t},s)=>o.jsx(_x,{ref:s,className:be(x1({variant:e}),i),...t}));Xx.displayName=_x.displayName;const b1=N.forwardRef(({className:i,...e},t)=>o.jsx(kx,{ref:t,className:be("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",i),...e}));b1.displayName=kx.displayName;const Yx=N.forwardRef(({className:i,...e},t)=>o.jsx(Tx,{ref:t,className:be("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",i),"toast-close":"",...e,children:o.jsx(pm,{className:"h-4 w-4"})}));Yx.displayName=Tx.displayName;const Kx=N.forwardRef(({className:i,...e},t)=>o.jsx(Px,{ref:t,className:be("text-sm font-semibold",i),...e}));Kx.displayName=Px.displayName;const Jx=N.forwardRef(({className:i,...e},t)=>o.jsx(Rx,{ref:t,className:be("text-sm opacity-90",i),...e}));Jx.displayName=Rx.displayName;function v1(){const{toasts:i}=Hl();return o.jsxs(g1,{children:[i.map(function({id:e,title:t,description:s,action:n,...r}){return o.jsxs(Xx,{...r,children:[o.jsxs("div",{className:"grid gap-1",children:[t&&o.jsx(Kx,{children:t}),s&&o.jsx(Jx,{children:s})]}),n,o.jsx(Yx,{})]},e)}),o.jsx(qx,{})]})}var Ag=["light","dark"],y1="(prefers-color-scheme: dark)",w1=N.createContext(void 0),A1={setTheme:i=>{},themes:[]},N1=()=>{var i;return(i=N.useContext(w1))!=null?i:A1};N.memo(({forcedTheme:i,storageKey:e,attribute:t,enableSystem:s,enableColorScheme:n,defaultTheme:r,value:a,attrs:l,nonce:d})=>{let h=r==="system",u=t==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(x=>`'${x}'`).join(",")})`};`:`var d=document.documentElement,n='${t}',s='setAttribute';`,f=n?Ag.includes(r)&&r?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${r}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=(x,g=!1,v=!0)=>{let y=a?a[x]:x,S=g?x+"|| ''":`'${y}'`,j="";return n&&v&&!g&&Ag.includes(x)&&(j+=`d.style.colorScheme = '${x}';`),t==="class"?g||y?j+=`c.add(${S})`:j+="null":y&&(j+=`d[s](n,${S})`),j},p=i?`!function(){${u}${m(i)}}()`:s?`!function(){try{${u}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${h})){var t='${y1}',m=window.matchMedia(t);if(m.media!==t||m.matches){${m("dark")}}else{${m("light")}}}else if(e){${a?`var x=${JSON.stringify(a)};`:""}${m(a?"x[e]":"e",!0)}}${h?"":"else{"+m(r,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${e}');if(e){${a?`var x=${JSON.stringify(a)};`:""}${m(a?"x[e]":"e",!0)}}else{${m(r,!1,!1)};}${f}}catch(t){}}();`;return N.createElement("script",{nonce:d,dangerouslySetInnerHTML:{__html:p}})});var S1=i=>{switch(i){case"success":return C1;case"info":return k1;case"warning":return _1;case"error":return T1;default:return null}},j1=Array(12).fill(0),E1=({visible:i,className:e})=>H.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":i},H.createElement("div",{className:"sonner-spinner"},j1.map((t,s)=>H.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),C1=H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},H.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),_1=H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},H.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),k1=H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},H.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),T1=H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},H.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),P1=H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},H.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),H.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),R1=()=>{let[i,e]=H.useState(document.hidden);return H.useEffect(()=>{let t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),i},Vf=1,M1=class{constructor(){this.subscribe=i=>(this.subscribers.push(i),()=>{let e=this.subscribers.indexOf(i);this.subscribers.splice(e,1)}),this.publish=i=>{this.subscribers.forEach(e=>e(i))},this.addToast=i=>{this.publish(i),this.toasts=[...this.toasts,i]},this.create=i=>{var e;let{message:t,...s}=i,n=typeof(i==null?void 0:i.id)=="number"||((e=i.id)==null?void 0:e.length)>0?i.id:Vf++,r=this.toasts.find(l=>l.id===n),a=i.dismissible===void 0?!0:i.dismissible;return this.dismissedToasts.has(n)&&this.dismissedToasts.delete(n),r?this.toasts=this.toasts.map(l=>l.id===n?(this.publish({...l,...i,id:n,title:t}),{...l,...i,id:n,dismissible:a,title:t}):l):this.addToast({title:t,...s,dismissible:a,id:n}),n},this.dismiss=i=>(this.dismissedToasts.add(i),i||this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:i,dismiss:!0})),i),this.message=(i,e)=>this.create({...e,message:i}),this.error=(i,e)=>this.create({...e,message:i,type:"error"}),this.success=(i,e)=>this.create({...e,type:"success",message:i}),this.info=(i,e)=>this.create({...e,type:"info",message:i}),this.warning=(i,e)=>this.create({...e,type:"warning",message:i}),this.loading=(i,e)=>this.create({...e,type:"loading",message:i}),this.promise=(i,e)=>{if(!e)return;let t;e.loading!==void 0&&(t=this.create({...e,promise:i,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let s=i instanceof Promise?i:i(),n=t!==void 0,r,a=s.then(async d=>{if(r=["resolve",d],H.isValidElement(d))n=!1,this.create({id:t,type:"default",message:d});else if(I1(d)&&!d.ok){n=!1;let h=typeof e.error=="function"?await e.error(`HTTP error! status: ${d.status}`):e.error,u=typeof e.description=="function"?await e.description(`HTTP error! status: ${d.status}`):e.description;this.create({id:t,type:"error",message:h,description:u})}else if(e.success!==void 0){n=!1;let h=typeof e.success=="function"?await e.success(d):e.success,u=typeof e.description=="function"?await e.description(d):e.description;this.create({id:t,type:"success",message:h,description:u})}}).catch(async d=>{if(r=["reject",d],e.error!==void 0){n=!1;let h=typeof e.error=="function"?await e.error(d):e.error,u=typeof e.description=="function"?await e.description(d):e.description;this.create({id:t,type:"error",message:h,description:u})}}).finally(()=>{var d;n&&(this.dismiss(t),t=void 0),(d=e.finally)==null||d.call(e)}),l=()=>new Promise((d,h)=>a.then(()=>r[0]==="reject"?h(r[1]):d(r[1])).catch(h));return typeof t!="string"&&typeof t!="number"?{unwrap:l}:Object.assign(t,{unwrap:l})},this.custom=(i,e)=>{let t=(e==null?void 0:e.id)||Vf++;return this.create({jsx:i(t),id:t,...e}),t},this.getActiveToasts=()=>this.toasts.filter(i=>!this.dismissedToasts.has(i.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},es=new M1,L1=(i,e)=>{let t=(e==null?void 0:e.id)||Vf++;return es.addToast({title:i,...e,id:t}),t},I1=i=>i&&typeof i=="object"&&"ok"in i&&typeof i.ok=="boolean"&&"status"in i&&typeof i.status=="number",D1=L1,O1=()=>es.toasts,F1=()=>es.getActiveToasts(),B1=Object.assign(D1,{success:es.success,info:es.info,warning:es.warning,error:es.error,custom:es.custom,message:es.message,promise:es.promise,dismiss:es.dismiss,loading:es.loading},{getHistory:O1,getToasts:F1});function z1(i,{insertAt:e}={}){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",e==="top"&&t.firstChild?t.insertBefore(s,t.firstChild):t.appendChild(s),s.styleSheet?s.styleSheet.cssText=i:s.appendChild(document.createTextNode(i))}z1(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Ah(i){return i.label!==void 0}var $1=3,H1="32px",U1="16px",Ng=4e3,V1=356,W1=14,G1=20,q1=200;function Us(...i){return i.filter(Boolean).join(" ")}function X1(i){let[e,t]=i.split("-"),s=[];return e&&s.push(e),t&&s.push(t),s}var Y1=i=>{var e,t,s,n,r,a,l,d,h,u,f;let{invert:m,toast:p,unstyled:x,interacting:g,setHeights:v,visibleToasts:y,heights:S,index:j,toasts:E,expanded:C,removeToast:k,defaultRichColors:_,closeButton:T,style:P,cancelButtonStyle:R,actionButtonStyle:M,className:F="",descriptionClassName:$="",duration:B,position:ee,gap:I,loadingIcon:D,expandByDefault:V,classNames:L,icons:te,closeButtonAriaLabel:ue="Close toast",pauseWhenPageIsHidden:q}=i,[J,ce]=H.useState(null),[ve,Le]=H.useState(null),[Q,bt]=H.useState(!1),[Ze,ye]=H.useState(!1),[lt,Et]=H.useState(!1),[de,Ne]=H.useState(!1),[ze,$e]=H.useState(!1),[cn,Bs]=H.useState(0),[dn,vh]=H.useState(0),hn=H.useRef(p.duration||B||Ng),yh=H.useRef(null),$n=H.useRef(null),bf=j===0,vf=j+1<=y,qt=p.type,Lt=p.dismissible!==!1,Li=p.className||"",un=p.descriptionClassName||"",Ii=H.useMemo(()=>S.findIndex(ae=>ae.toastId===p.id)||0,[S,p.id]),By=H.useMemo(()=>{var ae;return(ae=p.closeButton)!=null?ae:T},[p.closeButton,T]),og=H.useMemo(()=>p.duration||B||Ng,[p.duration,B]),yf=H.useRef(0),co=H.useRef(0),lg=H.useRef(0),ho=H.useRef(null),[zy,$y]=ee.split("-"),cg=H.useMemo(()=>S.reduce((ae,je,Ie)=>Ie>=Ii?ae:ae+je.height,0),[S,Ii]),dg=R1(),Hy=p.invert||m,wf=qt==="loading";co.current=H.useMemo(()=>Ii*I+cg,[Ii,cg]),H.useEffect(()=>{hn.current=og},[og]),H.useEffect(()=>{bt(!0)},[]),H.useEffect(()=>{let ae=$n.current;if(ae){let je=ae.getBoundingClientRect().height;return vh(je),v(Ie=>[{toastId:p.id,height:je,position:p.position},...Ie]),()=>v(Ie=>Ie.filter(zs=>zs.toastId!==p.id))}},[v,p.id]),H.useLayoutEffect(()=>{if(!Q)return;let ae=$n.current,je=ae.style.height;ae.style.height="auto";let Ie=ae.getBoundingClientRect().height;ae.style.height=je,vh(Ie),v(zs=>zs.find($s=>$s.toastId===p.id)?zs.map($s=>$s.toastId===p.id?{...$s,height:Ie}:$s):[{toastId:p.id,height:Ie,position:p.position},...zs])},[Q,p.title,p.description,v,p.id]);let Di=H.useCallback(()=>{ye(!0),Bs(co.current),v(ae=>ae.filter(je=>je.toastId!==p.id)),setTimeout(()=>{k(p)},q1)},[p,k,v,co]);H.useEffect(()=>{if(p.promise&&qt==="loading"||p.duration===1/0||p.type==="loading")return;let ae;return C||g||q&&dg?(()=>{if(lg.current<yf.current){let je=new Date().getTime()-yf.current;hn.current=hn.current-je}lg.current=new Date().getTime()})():hn.current!==1/0&&(yf.current=new Date().getTime(),ae=setTimeout(()=>{var je;(je=p.onAutoClose)==null||je.call(p,p),Di()},hn.current)),()=>clearTimeout(ae)},[C,g,p,qt,q,dg,Di]),H.useEffect(()=>{p.delete&&Di()},[Di,p.delete]);function Uy(){var ae,je,Ie;return te!=null&&te.loading?H.createElement("div",{className:Us(L==null?void 0:L.loader,(ae=p==null?void 0:p.classNames)==null?void 0:ae.loader,"sonner-loader"),"data-visible":qt==="loading"},te.loading):D?H.createElement("div",{className:Us(L==null?void 0:L.loader,(je=p==null?void 0:p.classNames)==null?void 0:je.loader,"sonner-loader"),"data-visible":qt==="loading"},D):H.createElement(E1,{className:Us(L==null?void 0:L.loader,(Ie=p==null?void 0:p.classNames)==null?void 0:Ie.loader),visible:qt==="loading"})}return H.createElement("li",{tabIndex:0,ref:$n,className:Us(F,Li,L==null?void 0:L.toast,(e=p==null?void 0:p.classNames)==null?void 0:e.toast,L==null?void 0:L.default,L==null?void 0:L[qt],(t=p==null?void 0:p.classNames)==null?void 0:t[qt]),"data-sonner-toast":"","data-rich-colors":(s=p.richColors)!=null?s:_,"data-styled":!(p.jsx||p.unstyled||x),"data-mounted":Q,"data-promise":!!p.promise,"data-swiped":ze,"data-removed":Ze,"data-visible":vf,"data-y-position":zy,"data-x-position":$y,"data-index":j,"data-front":bf,"data-swiping":lt,"data-dismissible":Lt,"data-type":qt,"data-invert":Hy,"data-swipe-out":de,"data-swipe-direction":ve,"data-expanded":!!(C||V&&Q),style:{"--index":j,"--toasts-before":j,"--z-index":E.length-j,"--offset":`${Ze?cn:co.current}px`,"--initial-height":V?"auto":`${dn}px`,...P,...p.style},onDragEnd:()=>{Et(!1),ce(null),ho.current=null},onPointerDown:ae=>{wf||!Lt||(yh.current=new Date,Bs(co.current),ae.target.setPointerCapture(ae.pointerId),ae.target.tagName!=="BUTTON"&&(Et(!0),ho.current={x:ae.clientX,y:ae.clientY}))},onPointerUp:()=>{var ae,je,Ie,zs;if(de||!Lt)return;ho.current=null;let $s=Number(((ae=$n.current)==null?void 0:ae.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Oi=Number(((je=$n.current)==null?void 0:je.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Br=new Date().getTime()-((Ie=yh.current)==null?void 0:Ie.getTime()),Hs=J==="x"?$s:Oi,Fi=Math.abs(Hs)/Br;if(Math.abs(Hs)>=G1||Fi>.11){Bs(co.current),(zs=p.onDismiss)==null||zs.call(p,p),Le(J==="x"?$s>0?"right":"left":Oi>0?"down":"up"),Di(),Ne(!0),$e(!1);return}Et(!1),ce(null)},onPointerMove:ae=>{var je,Ie,zs,$s;if(!ho.current||!Lt||((je=window.getSelection())==null?void 0:je.toString().length)>0)return;let Oi=ae.clientY-ho.current.y,Br=ae.clientX-ho.current.x,Hs=(Ie=i.swipeDirections)!=null?Ie:X1(ee);!J&&(Math.abs(Br)>1||Math.abs(Oi)>1)&&ce(Math.abs(Br)>Math.abs(Oi)?"x":"y");let Fi={x:0,y:0};J==="y"?(Hs.includes("top")||Hs.includes("bottom"))&&(Hs.includes("top")&&Oi<0||Hs.includes("bottom")&&Oi>0)&&(Fi.y=Oi):J==="x"&&(Hs.includes("left")||Hs.includes("right"))&&(Hs.includes("left")&&Br<0||Hs.includes("right")&&Br>0)&&(Fi.x=Br),(Math.abs(Fi.x)>0||Math.abs(Fi.y)>0)&&$e(!0),(zs=$n.current)==null||zs.style.setProperty("--swipe-amount-x",`${Fi.x}px`),($s=$n.current)==null||$s.style.setProperty("--swipe-amount-y",`${Fi.y}px`)}},By&&!p.jsx?H.createElement("button",{"aria-label":ue,"data-disabled":wf,"data-close-button":!0,onClick:wf||!Lt?()=>{}:()=>{var ae;Di(),(ae=p.onDismiss)==null||ae.call(p,p)},className:Us(L==null?void 0:L.closeButton,(n=p==null?void 0:p.classNames)==null?void 0:n.closeButton)},(r=te==null?void 0:te.close)!=null?r:P1):null,p.jsx||N.isValidElement(p.title)?p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title:H.createElement(H.Fragment,null,qt||p.icon||p.promise?H.createElement("div",{"data-icon":"",className:Us(L==null?void 0:L.icon,(a=p==null?void 0:p.classNames)==null?void 0:a.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||Uy():null,p.type!=="loading"?p.icon||(te==null?void 0:te[qt])||S1(qt):null):null,H.createElement("div",{"data-content":"",className:Us(L==null?void 0:L.content,(l=p==null?void 0:p.classNames)==null?void 0:l.content)},H.createElement("div",{"data-title":"",className:Us(L==null?void 0:L.title,(d=p==null?void 0:p.classNames)==null?void 0:d.title)},typeof p.title=="function"?p.title():p.title),p.description?H.createElement("div",{"data-description":"",className:Us($,un,L==null?void 0:L.description,(h=p==null?void 0:p.classNames)==null?void 0:h.description)},typeof p.description=="function"?p.description():p.description):null),N.isValidElement(p.cancel)?p.cancel:p.cancel&&Ah(p.cancel)?H.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||R,onClick:ae=>{var je,Ie;Ah(p.cancel)&&Lt&&((Ie=(je=p.cancel).onClick)==null||Ie.call(je,ae),Di())},className:Us(L==null?void 0:L.cancelButton,(u=p==null?void 0:p.classNames)==null?void 0:u.cancelButton)},p.cancel.label):null,N.isValidElement(p.action)?p.action:p.action&&Ah(p.action)?H.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||M,onClick:ae=>{var je,Ie;Ah(p.action)&&((Ie=(je=p.action).onClick)==null||Ie.call(je,ae),!ae.defaultPrevented&&Di())},className:Us(L==null?void 0:L.actionButton,(f=p==null?void 0:p.classNames)==null?void 0:f.actionButton)},p.action.label):null))};function Sg(){if(typeof window>"u"||typeof document>"u")return"ltr";let i=document.documentElement.getAttribute("dir");return i==="auto"||!i?window.getComputedStyle(document.documentElement).direction:i}function K1(i,e){let t={};return[i,e].forEach((s,n)=>{let r=n===1,a=r?"--mobile-offset":"--offset",l=r?U1:H1;function d(h){["top","right","bottom","left"].forEach(u=>{t[`${a}-${u}`]=typeof h=="number"?`${h}px`:h})}typeof s=="number"||typeof s=="string"?d(s):typeof s=="object"?["top","right","bottom","left"].forEach(h=>{s[h]===void 0?t[`${a}-${h}`]=l:t[`${a}-${h}`]=typeof s[h]=="number"?`${s[h]}px`:s[h]}):d(l)}),t}var J1=N.forwardRef(function(i,e){let{invert:t,position:s="bottom-right",hotkey:n=["altKey","KeyT"],expand:r,closeButton:a,className:l,offset:d,mobileOffset:h,theme:u="light",richColors:f,duration:m,style:p,visibleToasts:x=$1,toastOptions:g,dir:v=Sg(),gap:y=W1,loadingIcon:S,icons:j,containerAriaLabel:E="Notifications",pauseWhenPageIsHidden:C}=i,[k,_]=H.useState([]),T=H.useMemo(()=>Array.from(new Set([s].concat(k.filter(q=>q.position).map(q=>q.position)))),[k,s]),[P,R]=H.useState([]),[M,F]=H.useState(!1),[$,B]=H.useState(!1),[ee,I]=H.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),D=H.useRef(null),V=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),L=H.useRef(null),te=H.useRef(!1),ue=H.useCallback(q=>{_(J=>{var ce;return(ce=J.find(ve=>ve.id===q.id))!=null&&ce.delete||es.dismiss(q.id),J.filter(({id:ve})=>ve!==q.id)})},[]);return H.useEffect(()=>es.subscribe(q=>{if(q.dismiss){_(J=>J.map(ce=>ce.id===q.id?{...ce,delete:!0}:ce));return}setTimeout(()=>{tw.flushSync(()=>{_(J=>{let ce=J.findIndex(ve=>ve.id===q.id);return ce!==-1?[...J.slice(0,ce),{...J[ce],...q},...J.slice(ce+1)]:[q,...J]})})})}),[]),H.useEffect(()=>{if(u!=="system"){I(u);return}if(u==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?I("dark"):I("light")),typeof window>"u")return;let q=window.matchMedia("(prefers-color-scheme: dark)");try{q.addEventListener("change",({matches:J})=>{I(J?"dark":"light")})}catch{q.addListener(({matches:ce})=>{try{I(ce?"dark":"light")}catch(ve){console.error(ve)}})}},[u]),H.useEffect(()=>{k.length<=1&&F(!1)},[k]),H.useEffect(()=>{let q=J=>{var ce,ve;n.every(Le=>J[Le]||J.code===Le)&&(F(!0),(ce=D.current)==null||ce.focus()),J.code==="Escape"&&(document.activeElement===D.current||(ve=D.current)!=null&&ve.contains(document.activeElement))&&F(!1)};return document.addEventListener("keydown",q),()=>document.removeEventListener("keydown",q)},[n]),H.useEffect(()=>{if(D.current)return()=>{L.current&&(L.current.focus({preventScroll:!0}),L.current=null,te.current=!1)}},[D.current]),H.createElement("section",{ref:e,"aria-label":`${E} ${V}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},T.map((q,J)=>{var ce;let[ve,Le]=q.split("-");return k.length?H.createElement("ol",{key:q,dir:v==="auto"?Sg():v,tabIndex:-1,ref:D,className:l,"data-sonner-toaster":!0,"data-theme":ee,"data-y-position":ve,"data-lifted":M&&k.length>1&&!r,"data-x-position":Le,style:{"--front-toast-height":`${((ce=P[0])==null?void 0:ce.height)||0}px`,"--width":`${V1}px`,"--gap":`${y}px`,...p,...K1(d,h)},onBlur:Q=>{te.current&&!Q.currentTarget.contains(Q.relatedTarget)&&(te.current=!1,L.current&&(L.current.focus({preventScroll:!0}),L.current=null))},onFocus:Q=>{Q.target instanceof HTMLElement&&Q.target.dataset.dismissible==="false"||te.current||(te.current=!0,L.current=Q.relatedTarget)},onMouseEnter:()=>F(!0),onMouseMove:()=>F(!0),onMouseLeave:()=>{$||F(!1)},onDragEnd:()=>F(!1),onPointerDown:Q=>{Q.target instanceof HTMLElement&&Q.target.dataset.dismissible==="false"||B(!0)},onPointerUp:()=>B(!1)},k.filter(Q=>!Q.position&&J===0||Q.position===q).map((Q,bt)=>{var Ze,ye;return H.createElement(Y1,{key:Q.id,icons:j,index:bt,toast:Q,defaultRichColors:f,duration:(Ze=g==null?void 0:g.duration)!=null?Ze:m,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:t,visibleToasts:x,closeButton:(ye=g==null?void 0:g.closeButton)!=null?ye:a,interacting:$,position:q,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:ue,toasts:k.filter(lt=>lt.position==Q.position),heights:P.filter(lt=>lt.position==Q.position),setHeights:R,expandByDefault:r,gap:y,loadingIcon:S,expanded:M,pauseWhenPageIsHidden:C,swipeDirections:i.swipeDirections})})):null}))});const Z1=({...i})=>{const{theme:e="system"}=N1();return o.jsx(J1,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...i})},Q1=["top","right","bottom","left"],Tr=Math.min,ys=Math.max,fu=Math.round,Nh=Math.floor,Dn=i=>({x:i,y:i}),eA={left:"right",right:"left",bottom:"top",top:"bottom"},tA={start:"end",end:"start"};function Wf(i,e,t){return ys(i,Tr(e,t))}function _i(i,e){return typeof i=="function"?i(e):i}function ki(i){return i.split("-")[0]}function Wl(i){return i.split("-")[1]}function gm(i){return i==="x"?"y":"x"}function xm(i){return i==="y"?"height":"width"}const sA=new Set(["top","bottom"]);function In(i){return sA.has(ki(i))?"y":"x"}function bm(i){return gm(In(i))}function nA(i,e,t){t===void 0&&(t=!1);const s=Wl(i),n=bm(i),r=xm(n);let a=n==="x"?s===(t?"end":"start")?"right":"left":s==="start"?"bottom":"top";return e.reference[r]>e.floating[r]&&(a=pu(a)),[a,pu(a)]}function iA(i){const e=pu(i);return[Gf(i),e,Gf(e)]}function Gf(i){return i.replace(/start|end/g,e=>tA[e])}const jg=["left","right"],Eg=["right","left"],rA=["top","bottom"],aA=["bottom","top"];function oA(i,e,t){switch(i){case"top":case"bottom":return t?e?Eg:jg:e?jg:Eg;case"left":case"right":return e?rA:aA;default:return[]}}function lA(i,e,t,s){const n=Wl(i);let r=oA(ki(i),t==="start",s);return n&&(r=r.map(a=>a+"-"+n),e&&(r=r.concat(r.map(Gf)))),r}function pu(i){return i.replace(/left|right|bottom|top/g,e=>eA[e])}function cA(i){return{top:0,right:0,bottom:0,left:0,...i}}function Zx(i){return typeof i!="number"?cA(i):{top:i,right:i,bottom:i,left:i}}function mu(i){const{x:e,y:t,width:s,height:n}=i;return{width:s,height:n,top:t,left:e,right:e+s,bottom:t+n,x:e,y:t}}function Cg(i,e,t){let{reference:s,floating:n}=i;const r=In(e),a=bm(e),l=xm(a),d=ki(e),h=r==="y",u=s.x+s.width/2-n.width/2,f=s.y+s.height/2-n.height/2,m=s[l]/2-n[l]/2;let p;switch(d){case"top":p={x:u,y:s.y-n.height};break;case"bottom":p={x:u,y:s.y+s.height};break;case"right":p={x:s.x+s.width,y:f};break;case"left":p={x:s.x-n.width,y:f};break;default:p={x:s.x,y:s.y}}switch(Wl(e)){case"start":p[a]-=m*(t&&h?-1:1);break;case"end":p[a]+=m*(t&&h?-1:1);break}return p}const dA=async(i,e,t)=>{const{placement:s="bottom",strategy:n="absolute",middleware:r=[],platform:a}=t,l=r.filter(Boolean),d=await(a.isRTL==null?void 0:a.isRTL(e));let h=await a.getElementRects({reference:i,floating:e,strategy:n}),{x:u,y:f}=Cg(h,s,d),m=s,p={},x=0;for(let g=0;g<l.length;g++){const{name:v,fn:y}=l[g],{x:S,y:j,data:E,reset:C}=await y({x:u,y:f,initialPlacement:s,placement:m,strategy:n,middlewareData:p,rects:h,platform:a,elements:{reference:i,floating:e}});u=S??u,f=j??f,p={...p,[v]:{...p[v],...E}},C&&x<=50&&(x++,typeof C=="object"&&(C.placement&&(m=C.placement),C.rects&&(h=C.rects===!0?await a.getElementRects({reference:i,floating:e,strategy:n}):C.rects),{x:u,y:f}=Cg(h,m,d)),g=-1)}return{x:u,y:f,placement:m,strategy:n,middlewareData:p}};async function Sc(i,e){var t;e===void 0&&(e={});const{x:s,y:n,platform:r,rects:a,elements:l,strategy:d}=i,{boundary:h="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:m=!1,padding:p=0}=_i(e,i),x=Zx(p),v=l[m?f==="floating"?"reference":"floating":f],y=mu(await r.getClippingRect({element:(t=await(r.isElement==null?void 0:r.isElement(v)))==null||t?v:v.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(l.floating)),boundary:h,rootBoundary:u,strategy:d})),S=f==="floating"?{x:s,y:n,width:a.floating.width,height:a.floating.height}:a.reference,j=await(r.getOffsetParent==null?void 0:r.getOffsetParent(l.floating)),E=await(r.isElement==null?void 0:r.isElement(j))?await(r.getScale==null?void 0:r.getScale(j))||{x:1,y:1}:{x:1,y:1},C=mu(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:S,offsetParent:j,strategy:d}):S);return{top:(y.top-C.top+x.top)/E.y,bottom:(C.bottom-y.bottom+x.bottom)/E.y,left:(y.left-C.left+x.left)/E.x,right:(C.right-y.right+x.right)/E.x}}const hA=i=>({name:"arrow",options:i,async fn(e){const{x:t,y:s,placement:n,rects:r,platform:a,elements:l,middlewareData:d}=e,{element:h,padding:u=0}=_i(i,e)||{};if(h==null)return{};const f=Zx(u),m={x:t,y:s},p=bm(n),x=xm(p),g=await a.getDimensions(h),v=p==="y",y=v?"top":"left",S=v?"bottom":"right",j=v?"clientHeight":"clientWidth",E=r.reference[x]+r.reference[p]-m[p]-r.floating[x],C=m[p]-r.reference[p],k=await(a.getOffsetParent==null?void 0:a.getOffsetParent(h));let _=k?k[j]:0;(!_||!await(a.isElement==null?void 0:a.isElement(k)))&&(_=l.floating[j]||r.floating[x]);const T=E/2-C/2,P=_/2-g[x]/2-1,R=Tr(f[y],P),M=Tr(f[S],P),F=R,$=_-g[x]-M,B=_/2-g[x]/2+T,ee=Wf(F,B,$),I=!d.arrow&&Wl(n)!=null&&B!==ee&&r.reference[x]/2-(B<F?R:M)-g[x]/2<0,D=I?B<F?B-F:B-$:0;return{[p]:m[p]+D,data:{[p]:ee,centerOffset:B-ee-D,...I&&{alignmentOffset:D}},reset:I}}}),uA=function(i){return i===void 0&&(i={}),{name:"flip",options:i,async fn(e){var t,s;const{placement:n,middlewareData:r,rects:a,initialPlacement:l,platform:d,elements:h}=e,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:g=!0,...v}=_i(i,e);if((t=r.arrow)!=null&&t.alignmentOffset)return{};const y=ki(n),S=In(l),j=ki(l)===l,E=await(d.isRTL==null?void 0:d.isRTL(h.floating)),C=m||(j||!g?[pu(l)]:iA(l)),k=x!=="none";!m&&k&&C.push(...lA(l,g,x,E));const _=[l,...C],T=await Sc(e,v),P=[];let R=((s=r.flip)==null?void 0:s.overflows)||[];if(u&&P.push(T[y]),f){const B=nA(n,a,E);P.push(T[B[0]],T[B[1]])}if(R=[...R,{placement:n,overflows:P}],!P.every(B=>B<=0)){var M,F;const B=(((M=r.flip)==null?void 0:M.index)||0)+1,ee=_[B];if(ee&&(!(f==="alignment"?S!==In(ee):!1)||R.every(V=>In(V.placement)===S?V.overflows[0]>0:!0)))return{data:{index:B,overflows:R},reset:{placement:ee}};let I=(F=R.filter(D=>D.overflows[0]<=0).sort((D,V)=>D.overflows[1]-V.overflows[1])[0])==null?void 0:F.placement;if(!I)switch(p){case"bestFit":{var $;const D=($=R.filter(V=>{if(k){const L=In(V.placement);return L===S||L==="y"}return!0}).map(V=>[V.placement,V.overflows.filter(L=>L>0).reduce((L,te)=>L+te,0)]).sort((V,L)=>V[1]-L[1])[0])==null?void 0:$[0];D&&(I=D);break}case"initialPlacement":I=l;break}if(n!==I)return{reset:{placement:I}}}return{}}}};function _g(i,e){return{top:i.top-e.height,right:i.right-e.width,bottom:i.bottom-e.height,left:i.left-e.width}}function kg(i){return Q1.some(e=>i[e]>=0)}const fA=function(i){return i===void 0&&(i={}),{name:"hide",options:i,async fn(e){const{rects:t}=e,{strategy:s="referenceHidden",...n}=_i(i,e);switch(s){case"referenceHidden":{const r=await Sc(e,{...n,elementContext:"reference"}),a=_g(r,t.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:kg(a)}}}case"escaped":{const r=await Sc(e,{...n,altBoundary:!0}),a=_g(r,t.floating);return{data:{escapedOffsets:a,escaped:kg(a)}}}default:return{}}}}},Qx=new Set(["left","top"]);async function pA(i,e){const{placement:t,platform:s,elements:n}=i,r=await(s.isRTL==null?void 0:s.isRTL(n.floating)),a=ki(t),l=Wl(t),d=In(t)==="y",h=Qx.has(a)?-1:1,u=r&&d?-1:1,f=_i(e,i);let{mainAxis:m,crossAxis:p,alignmentAxis:x}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof x=="number"&&(p=l==="end"?x*-1:x),d?{x:p*u,y:m*h}:{x:m*h,y:p*u}}const mA=function(i){return i===void 0&&(i=0),{name:"offset",options:i,async fn(e){var t,s;const{x:n,y:r,placement:a,middlewareData:l}=e,d=await pA(e,i);return a===((t=l.offset)==null?void 0:t.placement)&&(s=l.arrow)!=null&&s.alignmentOffset?{}:{x:n+d.x,y:r+d.y,data:{...d,placement:a}}}}},gA=function(i){return i===void 0&&(i={}),{name:"shift",options:i,async fn(e){const{x:t,y:s,placement:n}=e,{mainAxis:r=!0,crossAxis:a=!1,limiter:l={fn:v=>{let{x:y,y:S}=v;return{x:y,y:S}}},...d}=_i(i,e),h={x:t,y:s},u=await Sc(e,d),f=In(ki(n)),m=gm(f);let p=h[m],x=h[f];if(r){const v=m==="y"?"top":"left",y=m==="y"?"bottom":"right",S=p+u[v],j=p-u[y];p=Wf(S,p,j)}if(a){const v=f==="y"?"top":"left",y=f==="y"?"bottom":"right",S=x+u[v],j=x-u[y];x=Wf(S,x,j)}const g=l.fn({...e,[m]:p,[f]:x});return{...g,data:{x:g.x-t,y:g.y-s,enabled:{[m]:r,[f]:a}}}}}},xA=function(i){return i===void 0&&(i={}),{options:i,fn(e){const{x:t,y:s,placement:n,rects:r,middlewareData:a}=e,{offset:l=0,mainAxis:d=!0,crossAxis:h=!0}=_i(i,e),u={x:t,y:s},f=In(n),m=gm(f);let p=u[m],x=u[f];const g=_i(l,e),v=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(d){const j=m==="y"?"height":"width",E=r.reference[m]-r.floating[j]+v.mainAxis,C=r.reference[m]+r.reference[j]-v.mainAxis;p<E?p=E:p>C&&(p=C)}if(h){var y,S;const j=m==="y"?"width":"height",E=Qx.has(ki(n)),C=r.reference[f]-r.floating[j]+(E&&((y=a.offset)==null?void 0:y[f])||0)+(E?0:v.crossAxis),k=r.reference[f]+r.reference[j]+(E?0:((S=a.offset)==null?void 0:S[f])||0)-(E?v.crossAxis:0);x<C?x=C:x>k&&(x=k)}return{[m]:p,[f]:x}}}},bA=function(i){return i===void 0&&(i={}),{name:"size",options:i,async fn(e){var t,s;const{placement:n,rects:r,platform:a,elements:l}=e,{apply:d=()=>{},...h}=_i(i,e),u=await Sc(e,h),f=ki(n),m=Wl(n),p=In(n)==="y",{width:x,height:g}=r.floating;let v,y;f==="top"||f==="bottom"?(v=f,y=m===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(y=f,v=m==="end"?"top":"bottom");const S=g-u.top-u.bottom,j=x-u.left-u.right,E=Tr(g-u[v],S),C=Tr(x-u[y],j),k=!e.middlewareData.shift;let _=E,T=C;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(T=j),(s=e.middlewareData.shift)!=null&&s.enabled.y&&(_=S),k&&!m){const R=ys(u.left,0),M=ys(u.right,0),F=ys(u.top,0),$=ys(u.bottom,0);p?T=x-2*(R!==0||M!==0?R+M:ys(u.left,u.right)):_=g-2*(F!==0||$!==0?F+$:ys(u.top,u.bottom))}await d({...e,availableWidth:T,availableHeight:_});const P=await a.getDimensions(l.floating);return x!==P.width||g!==P.height?{reset:{rects:!0}}:{}}}};function Ku(){return typeof window<"u"}function Gl(i){return eb(i)?(i.nodeName||"").toLowerCase():"#document"}function As(i){var e;return(i==null||(e=i.ownerDocument)==null?void 0:e.defaultView)||window}function Bn(i){var e;return(e=(eb(i)?i.ownerDocument:i.document)||window.document)==null?void 0:e.documentElement}function eb(i){return Ku()?i instanceof Node||i instanceof As(i).Node:!1}function rn(i){return Ku()?i instanceof Element||i instanceof As(i).Element:!1}function On(i){return Ku()?i instanceof HTMLElement||i instanceof As(i).HTMLElement:!1}function Tg(i){return!Ku()||typeof ShadowRoot>"u"?!1:i instanceof ShadowRoot||i instanceof As(i).ShadowRoot}const vA=new Set(["inline","contents"]);function dh(i){const{overflow:e,overflowX:t,overflowY:s,display:n}=an(i);return/auto|scroll|overlay|hidden|clip/.test(e+s+t)&&!vA.has(n)}const yA=new Set(["table","td","th"]);function wA(i){return yA.has(Gl(i))}const AA=[":popover-open",":modal"];function Ju(i){return AA.some(e=>{try{return i.matches(e)}catch{return!1}})}const NA=["transform","translate","scale","rotate","perspective"],SA=["transform","translate","scale","rotate","perspective","filter"],jA=["paint","layout","strict","content"];function vm(i){const e=ym(),t=rn(i)?an(i):i;return NA.some(s=>t[s]?t[s]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||SA.some(s=>(t.willChange||"").includes(s))||jA.some(s=>(t.contain||"").includes(s))}function EA(i){let e=Pr(i);for(;On(e)&&!Dl(e);){if(vm(e))return e;if(Ju(e))return null;e=Pr(e)}return null}function ym(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const CA=new Set(["html","body","#document"]);function Dl(i){return CA.has(Gl(i))}function an(i){return As(i).getComputedStyle(i)}function Zu(i){return rn(i)?{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}:{scrollLeft:i.scrollX,scrollTop:i.scrollY}}function Pr(i){if(Gl(i)==="html")return i;const e=i.assignedSlot||i.parentNode||Tg(i)&&i.host||Bn(i);return Tg(e)?e.host:e}function tb(i){const e=Pr(i);return Dl(e)?i.ownerDocument?i.ownerDocument.body:i.body:On(e)&&dh(e)?e:tb(e)}function jc(i,e,t){var s;e===void 0&&(e=[]),t===void 0&&(t=!0);const n=tb(i),r=n===((s=i.ownerDocument)==null?void 0:s.body),a=As(n);if(r){const l=qf(a);return e.concat(a,a.visualViewport||[],dh(n)?n:[],l&&t?jc(l):[])}return e.concat(n,jc(n,[],t))}function qf(i){return i.parent&&Object.getPrototypeOf(i.parent)?i.frameElement:null}function sb(i){const e=an(i);let t=parseFloat(e.width)||0,s=parseFloat(e.height)||0;const n=On(i),r=n?i.offsetWidth:t,a=n?i.offsetHeight:s,l=fu(t)!==r||fu(s)!==a;return l&&(t=r,s=a),{width:t,height:s,$:l}}function wm(i){return rn(i)?i:i.contextElement}function Eo(i){const e=wm(i);if(!On(e))return Dn(1);const t=e.getBoundingClientRect(),{width:s,height:n,$:r}=sb(e);let a=(r?fu(t.width):t.width)/s,l=(r?fu(t.height):t.height)/n;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const _A=Dn(0);function nb(i){const e=As(i);return!ym()||!e.visualViewport?_A:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function kA(i,e,t){return e===void 0&&(e=!1),!t||e&&t!==As(i)?!1:e}function no(i,e,t,s){e===void 0&&(e=!1),t===void 0&&(t=!1);const n=i.getBoundingClientRect(),r=wm(i);let a=Dn(1);e&&(s?rn(s)&&(a=Eo(s)):a=Eo(i));const l=kA(r,t,s)?nb(r):Dn(0);let d=(n.left+l.x)/a.x,h=(n.top+l.y)/a.y,u=n.width/a.x,f=n.height/a.y;if(r){const m=As(r),p=s&&rn(s)?As(s):s;let x=m,g=qf(x);for(;g&&s&&p!==x;){const v=Eo(g),y=g.getBoundingClientRect(),S=an(g),j=y.left+(g.clientLeft+parseFloat(S.paddingLeft))*v.x,E=y.top+(g.clientTop+parseFloat(S.paddingTop))*v.y;d*=v.x,h*=v.y,u*=v.x,f*=v.y,d+=j,h+=E,x=As(g),g=qf(x)}}return mu({width:u,height:f,x:d,y:h})}function Qu(i,e){const t=Zu(i).scrollLeft;return e?e.left+t:no(Bn(i)).left+t}function ib(i,e){const t=i.getBoundingClientRect(),s=t.left+e.scrollLeft-Qu(i,t),n=t.top+e.scrollTop;return{x:s,y:n}}function TA(i){let{elements:e,rect:t,offsetParent:s,strategy:n}=i;const r=n==="fixed",a=Bn(s),l=e?Ju(e.floating):!1;if(s===a||l&&r)return t;let d={scrollLeft:0,scrollTop:0},h=Dn(1);const u=Dn(0),f=On(s);if((f||!f&&!r)&&((Gl(s)!=="body"||dh(a))&&(d=Zu(s)),On(s))){const p=no(s);h=Eo(s),u.x=p.x+s.clientLeft,u.y=p.y+s.clientTop}const m=a&&!f&&!r?ib(a,d):Dn(0);return{width:t.width*h.x,height:t.height*h.y,x:t.x*h.x-d.scrollLeft*h.x+u.x+m.x,y:t.y*h.y-d.scrollTop*h.y+u.y+m.y}}function PA(i){return Array.from(i.getClientRects())}function RA(i){const e=Bn(i),t=Zu(i),s=i.ownerDocument.body,n=ys(e.scrollWidth,e.clientWidth,s.scrollWidth,s.clientWidth),r=ys(e.scrollHeight,e.clientHeight,s.scrollHeight,s.clientHeight);let a=-t.scrollLeft+Qu(i);const l=-t.scrollTop;return an(s).direction==="rtl"&&(a+=ys(e.clientWidth,s.clientWidth)-n),{width:n,height:r,x:a,y:l}}const Pg=25;function MA(i,e){const t=As(i),s=Bn(i),n=t.visualViewport;let r=s.clientWidth,a=s.clientHeight,l=0,d=0;if(n){r=n.width,a=n.height;const u=ym();(!u||u&&e==="fixed")&&(l=n.offsetLeft,d=n.offsetTop)}const h=Qu(s);if(h<=0){const u=s.ownerDocument,f=u.body,m=getComputedStyle(f),p=u.compatMode==="CSS1Compat"&&parseFloat(m.marginLeft)+parseFloat(m.marginRight)||0,x=Math.abs(s.clientWidth-f.clientWidth-p);x<=Pg&&(r-=x)}else h<=Pg&&(r+=h);return{width:r,height:a,x:l,y:d}}const LA=new Set(["absolute","fixed"]);function IA(i,e){const t=no(i,!0,e==="fixed"),s=t.top+i.clientTop,n=t.left+i.clientLeft,r=On(i)?Eo(i):Dn(1),a=i.clientWidth*r.x,l=i.clientHeight*r.y,d=n*r.x,h=s*r.y;return{width:a,height:l,x:d,y:h}}function Rg(i,e,t){let s;if(e==="viewport")s=MA(i,t);else if(e==="document")s=RA(Bn(i));else if(rn(e))s=IA(e,t);else{const n=nb(i);s={x:e.x-n.x,y:e.y-n.y,width:e.width,height:e.height}}return mu(s)}function rb(i,e){const t=Pr(i);return t===e||!rn(t)||Dl(t)?!1:an(t).position==="fixed"||rb(t,e)}function DA(i,e){const t=e.get(i);if(t)return t;let s=jc(i,[],!1).filter(l=>rn(l)&&Gl(l)!=="body"),n=null;const r=an(i).position==="fixed";let a=r?Pr(i):i;for(;rn(a)&&!Dl(a);){const l=an(a),d=vm(a);!d&&l.position==="fixed"&&(n=null),(r?!d&&!n:!d&&l.position==="static"&&!!n&&LA.has(n.position)||dh(a)&&!d&&rb(i,a))?s=s.filter(u=>u!==a):n=l,a=Pr(a)}return e.set(i,s),s}function OA(i){let{element:e,boundary:t,rootBoundary:s,strategy:n}=i;const a=[...t==="clippingAncestors"?Ju(e)?[]:DA(e,this._c):[].concat(t),s],l=a[0],d=a.reduce((h,u)=>{const f=Rg(e,u,n);return h.top=ys(f.top,h.top),h.right=Tr(f.right,h.right),h.bottom=Tr(f.bottom,h.bottom),h.left=ys(f.left,h.left),h},Rg(e,l,n));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function FA(i){const{width:e,height:t}=sb(i);return{width:e,height:t}}function BA(i,e,t){const s=On(e),n=Bn(e),r=t==="fixed",a=no(i,!0,r,e);let l={scrollLeft:0,scrollTop:0};const d=Dn(0);function h(){d.x=Qu(n)}if(s||!s&&!r)if((Gl(e)!=="body"||dh(n))&&(l=Zu(e)),s){const p=no(e,!0,r,e);d.x=p.x+e.clientLeft,d.y=p.y+e.clientTop}else n&&h();r&&!s&&n&&h();const u=n&&!s&&!r?ib(n,l):Dn(0),f=a.left+l.scrollLeft-d.x-u.x,m=a.top+l.scrollTop-d.y-u.y;return{x:f,y:m,width:a.width,height:a.height}}function Cf(i){return an(i).position==="static"}function Mg(i,e){if(!On(i)||an(i).position==="fixed")return null;if(e)return e(i);let t=i.offsetParent;return Bn(i)===t&&(t=t.ownerDocument.body),t}function ab(i,e){const t=As(i);if(Ju(i))return t;if(!On(i)){let n=Pr(i);for(;n&&!Dl(n);){if(rn(n)&&!Cf(n))return n;n=Pr(n)}return t}let s=Mg(i,e);for(;s&&wA(s)&&Cf(s);)s=Mg(s,e);return s&&Dl(s)&&Cf(s)&&!vm(s)?t:s||EA(i)||t}const zA=async function(i){const e=this.getOffsetParent||ab,t=this.getDimensions,s=await t(i.floating);return{reference:BA(i.reference,await e(i.floating),i.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function $A(i){return an(i).direction==="rtl"}const HA={convertOffsetParentRelativeRectToViewportRelativeRect:TA,getDocumentElement:Bn,getClippingRect:OA,getOffsetParent:ab,getElementRects:zA,getClientRects:PA,getDimensions:FA,getScale:Eo,isElement:rn,isRTL:$A};function ob(i,e){return i.x===e.x&&i.y===e.y&&i.width===e.width&&i.height===e.height}function UA(i,e){let t=null,s;const n=Bn(i);function r(){var l;clearTimeout(s),(l=t)==null||l.disconnect(),t=null}function a(l,d){l===void 0&&(l=!1),d===void 0&&(d=1),r();const h=i.getBoundingClientRect(),{left:u,top:f,width:m,height:p}=h;if(l||e(),!m||!p)return;const x=Nh(f),g=Nh(n.clientWidth-(u+m)),v=Nh(n.clientHeight-(f+p)),y=Nh(u),j={rootMargin:-x+"px "+-g+"px "+-v+"px "+-y+"px",threshold:ys(0,Tr(1,d))||1};let E=!0;function C(k){const _=k[0].intersectionRatio;if(_!==d){if(!E)return a();_?a(!1,_):s=setTimeout(()=>{a(!1,1e-7)},1e3)}_===1&&!ob(h,i.getBoundingClientRect())&&a(),E=!1}try{t=new IntersectionObserver(C,{...j,root:n.ownerDocument})}catch{t=new IntersectionObserver(C,j)}t.observe(i)}return a(!0),r}function VA(i,e,t,s){s===void 0&&(s={});const{ancestorScroll:n=!0,ancestorResize:r=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:d=!1}=s,h=wm(i),u=n||r?[...h?jc(h):[],...jc(e)]:[];u.forEach(y=>{n&&y.addEventListener("scroll",t,{passive:!0}),r&&y.addEventListener("resize",t)});const f=h&&l?UA(h,t):null;let m=-1,p=null;a&&(p=new ResizeObserver(y=>{let[S]=y;S&&S.target===h&&p&&(p.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var j;(j=p)==null||j.observe(e)})),t()}),h&&!d&&p.observe(h),p.observe(e));let x,g=d?no(i):null;d&&v();function v(){const y=no(i);g&&!ob(g,y)&&t(),g=y,x=requestAnimationFrame(v)}return t(),()=>{var y;u.forEach(S=>{n&&S.removeEventListener("scroll",t),r&&S.removeEventListener("resize",t)}),f==null||f(),(y=p)==null||y.disconnect(),p=null,d&&cancelAnimationFrame(x)}}const WA=mA,GA=gA,qA=uA,XA=bA,YA=fA,Lg=hA,KA=xA,JA=(i,e,t)=>{const s=new Map,n={platform:HA,...t},r={...n.platform,_c:s};return dA(i,e,{...n,platform:r})};var ZA=typeof document<"u",QA=function(){},Lh=ZA?N.useLayoutEffect:QA;function gu(i,e){if(i===e)return!0;if(typeof i!=typeof e)return!1;if(typeof i=="function"&&i.toString()===e.toString())return!0;let t,s,n;if(i&&e&&typeof i=="object"){if(Array.isArray(i)){if(t=i.length,t!==e.length)return!1;for(s=t;s--!==0;)if(!gu(i[s],e[s]))return!1;return!0}if(n=Object.keys(i),t=n.length,t!==Object.keys(e).length)return!1;for(s=t;s--!==0;)if(!{}.hasOwnProperty.call(e,n[s]))return!1;for(s=t;s--!==0;){const r=n[s];if(!(r==="_owner"&&i.$$typeof)&&!gu(i[r],e[r]))return!1}return!0}return i!==i&&e!==e}function lb(i){return typeof window>"u"?1:(i.ownerDocument.defaultView||window).devicePixelRatio||1}function Ig(i,e){const t=lb(i);return Math.round(e*t)/t}function _f(i){const e=N.useRef(i);return Lh(()=>{e.current=i}),e}function eN(i){i===void 0&&(i={});const{placement:e="bottom",strategy:t="absolute",middleware:s=[],platform:n,elements:{reference:r,floating:a}={},transform:l=!0,whileElementsMounted:d,open:h}=i,[u,f]=N.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[m,p]=N.useState(s);gu(m,s)||p(s);const[x,g]=N.useState(null),[v,y]=N.useState(null),S=N.useCallback(V=>{V!==k.current&&(k.current=V,g(V))},[]),j=N.useCallback(V=>{V!==_.current&&(_.current=V,y(V))},[]),E=r||x,C=a||v,k=N.useRef(null),_=N.useRef(null),T=N.useRef(u),P=d!=null,R=_f(d),M=_f(n),F=_f(h),$=N.useCallback(()=>{if(!k.current||!_.current)return;const V={placement:e,strategy:t,middleware:m};M.current&&(V.platform=M.current),JA(k.current,_.current,V).then(L=>{const te={...L,isPositioned:F.current!==!1};B.current&&!gu(T.current,te)&&(T.current=te,Ox.flushSync(()=>{f(te)}))})},[m,e,t,M,F]);Lh(()=>{h===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,f(V=>({...V,isPositioned:!1})))},[h]);const B=N.useRef(!1);Lh(()=>(B.current=!0,()=>{B.current=!1}),[]),Lh(()=>{if(E&&(k.current=E),C&&(_.current=C),E&&C){if(R.current)return R.current(E,C,$);$()}},[E,C,$,R,P]);const ee=N.useMemo(()=>({reference:k,floating:_,setReference:S,setFloating:j}),[S,j]),I=N.useMemo(()=>({reference:E,floating:C}),[E,C]),D=N.useMemo(()=>{const V={position:t,left:0,top:0};if(!I.floating)return V;const L=Ig(I.floating,u.x),te=Ig(I.floating,u.y);return l?{...V,transform:"translate("+L+"px, "+te+"px)",...lb(I.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:L,top:te}},[t,l,I.floating,u.x,u.y]);return N.useMemo(()=>({...u,update:$,refs:ee,elements:I,floatingStyles:D}),[u,$,ee,I,D])}const tN=i=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:i,fn(t){const{element:s,padding:n}=typeof i=="function"?i(t):i;return s&&e(s)?s.current!=null?Lg({element:s.current,padding:n}).fn(t):{}:s?Lg({element:s,padding:n}).fn(t):{}}}},sN=(i,e)=>({...WA(i),options:[i,e]}),nN=(i,e)=>({...GA(i),options:[i,e]}),iN=(i,e)=>({...KA(i),options:[i,e]}),rN=(i,e)=>({...qA(i),options:[i,e]}),aN=(i,e)=>({...XA(i),options:[i,e]}),oN=(i,e)=>({...YA(i),options:[i,e]}),lN=(i,e)=>({...tN(i),options:[i,e]});var cN="Arrow",cb=N.forwardRef((i,e)=>{const{children:t,width:s=10,height:n=5,...r}=i;return o.jsx(Gt.svg,{...r,ref:e,width:s,height:n,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:i.asChild?t:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});cb.displayName=cN;var dN=cb;function db(i){const[e,t]=N.useState(void 0);return hu(()=>{if(i){t({width:i.offsetWidth,height:i.offsetHeight});const s=new ResizeObserver(n=>{if(!Array.isArray(n)||!n.length)return;const r=n[0];let a,l;if("borderBoxSize"in r){const d=r.borderBoxSize,h=Array.isArray(d)?d[0]:d;a=h.inlineSize,l=h.blockSize}else a=i.offsetWidth,l=i.offsetHeight;t({width:a,height:l})});return s.observe(i,{box:"border-box"}),()=>s.unobserve(i)}else t(void 0)},[i]),e}var hb="Popper",[ub,fb]=ch(hb),[j_,pb]=ub(hb),mb="PopperAnchor",gb=N.forwardRef((i,e)=>{const{__scopePopper:t,virtualRef:s,...n}=i,r=pb(mb,t),a=N.useRef(null),l=Os(e,a),d=N.useRef(null);return N.useEffect(()=>{const h=d.current;d.current=(s==null?void 0:s.current)||a.current,h!==d.current&&r.onAnchorChange(d.current)}),s?null:o.jsx(Gt.div,{...n,ref:l})});gb.displayName=mb;var Am="PopperContent",[hN,uN]=ub(Am),xb=N.forwardRef((i,e)=>{var Q,bt,Ze,ye,lt,Et;const{__scopePopper:t,side:s="bottom",sideOffset:n=0,align:r="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:d=!0,collisionBoundary:h=[],collisionPadding:u=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:p="optimized",onPlaced:x,...g}=i,v=pb(Am,t),[y,S]=N.useState(null),j=Os(e,de=>S(de)),[E,C]=N.useState(null),k=db(E),_=(k==null?void 0:k.width)??0,T=(k==null?void 0:k.height)??0,P=s+(r!=="center"?"-"+r:""),R=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},M=Array.isArray(h)?h:[h],F=M.length>0,$={padding:R,boundary:M.filter(pN),altBoundary:F},{refs:B,floatingStyles:ee,placement:I,isPositioned:D,middlewareData:V}=eN({strategy:"fixed",placement:P,whileElementsMounted:(...de)=>VA(...de,{animationFrame:p==="always"}),elements:{reference:v.anchor},middleware:[sN({mainAxis:n+T,alignmentAxis:a}),d&&nN({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?iN():void 0,...$}),d&&rN({...$}),aN({...$,apply:({elements:de,rects:Ne,availableWidth:ze,availableHeight:$e})=>{const{width:cn,height:Bs}=Ne.reference,dn=de.floating.style;dn.setProperty("--radix-popper-available-width",`${ze}px`),dn.setProperty("--radix-popper-available-height",`${$e}px`),dn.setProperty("--radix-popper-anchor-width",`${cn}px`),dn.setProperty("--radix-popper-anchor-height",`${Bs}px`)}}),E&&lN({element:E,padding:l}),mN({arrowWidth:_,arrowHeight:T}),m&&oN({strategy:"referenceHidden",...$})]}),[L,te]=yb(I),ue=Hi(x);hu(()=>{D&&(ue==null||ue())},[D,ue]);const q=(Q=V.arrow)==null?void 0:Q.x,J=(bt=V.arrow)==null?void 0:bt.y,ce=((Ze=V.arrow)==null?void 0:Ze.centerOffset)!==0,[ve,Le]=N.useState();return hu(()=>{y&&Le(window.getComputedStyle(y).zIndex)},[y]),o.jsx("div",{ref:B.setFloating,"data-radix-popper-content-wrapper":"",style:{...ee,transform:D?ee.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ve,"--radix-popper-transform-origin":[(ye=V.transformOrigin)==null?void 0:ye.x,(lt=V.transformOrigin)==null?void 0:lt.y].join(" "),...((Et=V.hide)==null?void 0:Et.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:i.dir,children:o.jsx(hN,{scope:t,placedSide:L,onArrowChange:C,arrowX:q,arrowY:J,shouldHideArrow:ce,children:o.jsx(Gt.div,{"data-side":L,"data-align":te,...g,ref:j,style:{...g.style,animation:D?void 0:"none"}})})})});xb.displayName=Am;var bb="PopperArrow",fN={top:"bottom",right:"left",bottom:"top",left:"right"},vb=N.forwardRef(function(e,t){const{__scopePopper:s,...n}=e,r=uN(bb,s),a=fN[r.placedSide];return o.jsx("span",{ref:r.onArrowChange,style:{position:"absolute",left:r.arrowX,top:r.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[r.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[r.placedSide],visibility:r.shouldHideArrow?"hidden":void 0},children:o.jsx(dN,{...n,ref:t,style:{...n.style,display:"block"}})})});vb.displayName=bb;function pN(i){return i!==null}var mN=i=>({name:"transformOrigin",options:i,fn(e){var v,y,S;const{placement:t,rects:s,middlewareData:n}=e,a=((v=n.arrow)==null?void 0:v.centerOffset)!==0,l=a?0:i.arrowWidth,d=a?0:i.arrowHeight,[h,u]=yb(t),f={start:"0%",center:"50%",end:"100%"}[u],m=(((y=n.arrow)==null?void 0:y.x)??0)+l/2,p=(((S=n.arrow)==null?void 0:S.y)??0)+d/2;let x="",g="";return h==="bottom"?(x=a?f:`${m}px`,g=`${-d}px`):h==="top"?(x=a?f:`${m}px`,g=`${s.floating.height+d}px`):h==="right"?(x=`${-d}px`,g=a?f:`${p}px`):h==="left"&&(x=`${s.floating.width+d}px`,g=a?f:`${p}px`),{data:{x,y:g}}}});function yb(i){const[e,t="center"]=i.split("-");return[e,t]}var gN=gb,xN=xb,bN=vb,[ef,E_]=ch("Tooltip",[fb]),Nm=fb(),wb="TooltipProvider",vN=700,Dg="tooltip.open",[yN,Ab]=ef(wb),Nb=i=>{const{__scopeTooltip:e,delayDuration:t=vN,skipDelayDuration:s=300,disableHoverableContent:n=!1,children:r}=i,a=N.useRef(!0),l=N.useRef(!1),d=N.useRef(0);return N.useEffect(()=>{const h=d.current;return()=>window.clearTimeout(h)},[]),o.jsx(yN,{scope:e,isOpenDelayedRef:a,delayDuration:t,onOpen:N.useCallback(()=>{window.clearTimeout(d.current),a.current=!1},[]),onClose:N.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>a.current=!0,s)},[s]),isPointerInTransitRef:l,onPointerInTransitChange:N.useCallback(h=>{l.current=h},[]),disableHoverableContent:n,children:r})};Nb.displayName=wb;var Sb="Tooltip",[C_,tf]=ef(Sb),Xf="TooltipTrigger",wN=N.forwardRef((i,e)=>{const{__scopeTooltip:t,...s}=i,n=tf(Xf,t),r=Ab(Xf,t),a=Nm(t),l=N.useRef(null),d=Os(e,l,n.onTriggerChange),h=N.useRef(!1),u=N.useRef(!1),f=N.useCallback(()=>h.current=!1,[]);return N.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),o.jsx(gN,{asChild:!0,...a,children:o.jsx(Gt.button,{"aria-describedby":n.open?n.contentId:void 0,"data-state":n.stateAttribute,...s,ref:d,onPointerMove:Ht(i.onPointerMove,m=>{m.pointerType!=="touch"&&!u.current&&!r.isPointerInTransitRef.current&&(n.onTriggerEnter(),u.current=!0)}),onPointerLeave:Ht(i.onPointerLeave,()=>{n.onTriggerLeave(),u.current=!1}),onPointerDown:Ht(i.onPointerDown,()=>{n.open&&n.onClose(),h.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:Ht(i.onFocus,()=>{h.current||n.onOpen()}),onBlur:Ht(i.onBlur,n.onClose),onClick:Ht(i.onClick,n.onClose)})})});wN.displayName=Xf;var AN="TooltipPortal",[__,NN]=ef(AN,{forceMount:void 0}),Ol="TooltipContent",jb=N.forwardRef((i,e)=>{const t=NN(Ol,i.__scopeTooltip),{forceMount:s=t.forceMount,side:n="top",...r}=i,a=tf(Ol,i.__scopeTooltip);return o.jsx($l,{present:s||a.open,children:a.disableHoverableContent?o.jsx(Eb,{side:n,...r,ref:e}):o.jsx(SN,{side:n,...r,ref:e})})}),SN=N.forwardRef((i,e)=>{const t=tf(Ol,i.__scopeTooltip),s=Ab(Ol,i.__scopeTooltip),n=N.useRef(null),r=Os(e,n),[a,l]=N.useState(null),{trigger:d,onClose:h}=t,u=n.current,{onPointerInTransitChange:f}=s,m=N.useCallback(()=>{l(null),f(!1)},[f]),p=N.useCallback((x,g)=>{const v=x.currentTarget,y={x:x.clientX,y:x.clientY},S=kN(y,v.getBoundingClientRect()),j=TN(y,S),E=PN(g.getBoundingClientRect()),C=MN([...j,...E]);l(C),f(!0)},[f]);return N.useEffect(()=>()=>m(),[m]),N.useEffect(()=>{if(d&&u){const x=v=>p(v,u),g=v=>p(v,d);return d.addEventListener("pointerleave",x),u.addEventListener("pointerleave",g),()=>{d.removeEventListener("pointerleave",x),u.removeEventListener("pointerleave",g)}}},[d,u,p,m]),N.useEffect(()=>{if(a){const x=g=>{const v=g.target,y={x:g.clientX,y:g.clientY},S=(d==null?void 0:d.contains(v))||(u==null?void 0:u.contains(v)),j=!RN(y,a);S?m():j&&(m(),h())};return document.addEventListener("pointermove",x),()=>document.removeEventListener("pointermove",x)}},[d,u,a,h,m]),o.jsx(Eb,{...i,ref:r})}),[jN,EN]=ef(Sb,{isInside:!1}),CN=Xy("TooltipContent"),Eb=N.forwardRef((i,e)=>{const{__scopeTooltip:t,children:s,"aria-label":n,onEscapeKeyDown:r,onPointerDownOutside:a,...l}=i,d=tf(Ol,t),h=Nm(t),{onClose:u}=d;return N.useEffect(()=>(document.addEventListener(Dg,u),()=>document.removeEventListener(Dg,u)),[u]),N.useEffect(()=>{if(d.trigger){const f=m=>{const p=m.target;p!=null&&p.contains(d.trigger)&&u()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[d.trigger,u]),o.jsx(qy,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:f=>f.preventDefault(),onDismiss:u,children:o.jsxs(xN,{"data-state":d.stateAttribute,...h,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[o.jsx(CN,{children:s}),o.jsx(jN,{scope:t,isInside:!0,children:o.jsx(Yy,{id:d.contentId,role:"tooltip",children:n||s})})]})})});jb.displayName=Ol;var Cb="TooltipArrow",_N=N.forwardRef((i,e)=>{const{__scopeTooltip:t,...s}=i,n=Nm(t);return EN(Cb,t).isInside?null:o.jsx(bN,{...n,...s,ref:e})});_N.displayName=Cb;function kN(i,e){const t=Math.abs(e.top-i.y),s=Math.abs(e.bottom-i.y),n=Math.abs(e.right-i.x),r=Math.abs(e.left-i.x);switch(Math.min(t,s,n,r)){case r:return"left";case n:return"right";case t:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function TN(i,e,t=5){const s=[];switch(e){case"top":s.push({x:i.x-t,y:i.y+t},{x:i.x+t,y:i.y+t});break;case"bottom":s.push({x:i.x-t,y:i.y-t},{x:i.x+t,y:i.y-t});break;case"left":s.push({x:i.x+t,y:i.y-t},{x:i.x+t,y:i.y+t});break;case"right":s.push({x:i.x-t,y:i.y-t},{x:i.x-t,y:i.y+t});break}return s}function PN(i){const{top:e,right:t,bottom:s,left:n}=i;return[{x:n,y:e},{x:t,y:e},{x:t,y:s},{x:n,y:s}]}function RN(i,e){const{x:t,y:s}=i;let n=!1;for(let r=0,a=e.length-1;r<e.length;a=r++){const l=e[r],d=e[a],h=l.x,u=l.y,f=d.x,m=d.y;u>s!=m>s&&t<(f-h)*(s-u)/(m-u)+h&&(n=!n)}return n}function MN(i){const e=i.slice();return e.sort((t,s)=>t.x<s.x?-1:t.x>s.x?1:t.y<s.y?-1:t.y>s.y?1:0),LN(e)}function LN(i){if(i.length<=1)return i.slice();const e=[];for(let s=0;s<i.length;s++){const n=i[s];for(;e.length>=2;){const r=e[e.length-1],a=e[e.length-2];if((r.x-a.x)*(n.y-a.y)>=(r.y-a.y)*(n.x-a.x))e.pop();else break}e.push(n)}e.pop();const t=[];for(let s=i.length-1;s>=0;s--){const n=i[s];for(;t.length>=2;){const r=t[t.length-1],a=t[t.length-2];if((r.x-a.x)*(n.y-a.y)>=(r.y-a.y)*(n.x-a.x))t.pop();else break}t.push(n)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var IN=Nb,_b=jb;const DN=IN,ON=N.forwardRef(({className:i,sideOffset:e=4,...t},s)=>o.jsx(_b,{ref:s,sideOffset:e,className:be("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",i),...t}));ON.displayName=_b.displayName;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ec(){return Ec=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(i[s]=t[s])}return i},Ec.apply(this,arguments)}var Cr;(function(i){i.Pop="POP",i.Push="PUSH",i.Replace="REPLACE"})(Cr||(Cr={}));const Og="popstate";function FN(i){i===void 0&&(i={});function e(s,n){let{pathname:r,search:a,hash:l}=s.location;return Yf("",{pathname:r,search:a,hash:l},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function t(s,n){return typeof n=="string"?n:xu(n)}return zN(e,t,null,i)}function Ke(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function kb(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function BN(){return Math.random().toString(36).substr(2,8)}function Fg(i,e){return{usr:i.state,key:i.key,idx:e}}function Yf(i,e,t,s){return t===void 0&&(t=null),Ec({pathname:typeof i=="string"?i:i.pathname,search:"",hash:""},typeof e=="string"?ql(e):e,{state:t,key:e&&e.key||s||BN()})}function xu(i){let{pathname:e="/",search:t="",hash:s=""}=i;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function ql(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substr(t),i=i.substr(0,t));let s=i.indexOf("?");s>=0&&(e.search=i.substr(s),i=i.substr(0,s)),i&&(e.pathname=i)}return e}function zN(i,e,t,s){s===void 0&&(s={});let{window:n=document.defaultView,v5Compat:r=!1}=s,a=n.history,l=Cr.Pop,d=null,h=u();h==null&&(h=0,a.replaceState(Ec({},a.state,{idx:h}),""));function u(){return(a.state||{idx:null}).idx}function f(){l=Cr.Pop;let v=u(),y=v==null?null:v-h;h=v,d&&d({action:l,location:g.location,delta:y})}function m(v,y){l=Cr.Push;let S=Yf(g.location,v,y);h=u()+1;let j=Fg(S,h),E=g.createHref(S);try{a.pushState(j,"",E)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;n.location.assign(E)}r&&d&&d({action:l,location:g.location,delta:1})}function p(v,y){l=Cr.Replace;let S=Yf(g.location,v,y);h=u();let j=Fg(S,h),E=g.createHref(S);a.replaceState(j,"",E),r&&d&&d({action:l,location:g.location,delta:0})}function x(v){let y=n.location.origin!=="null"?n.location.origin:n.location.href,S=typeof v=="string"?v:xu(v);return S=S.replace(/ $/,"%20"),Ke(y,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,y)}let g={get action(){return l},get location(){return i(n,a)},listen(v){if(d)throw new Error("A history only accepts one active listener");return n.addEventListener(Og,f),d=v,()=>{n.removeEventListener(Og,f),d=null}},createHref(v){return e(n,v)},createURL:x,encodeLocation(v){let y=x(v);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:m,replace:p,go(v){return a.go(v)}};return g}var Bg;(function(i){i.data="data",i.deferred="deferred",i.redirect="redirect",i.error="error"})(Bg||(Bg={}));function $N(i,e,t){return t===void 0&&(t="/"),HN(i,e,t)}function HN(i,e,t,s){let n=typeof e=="string"?ql(e):e,r=Sm(n.pathname||"/",t);if(r==null)return null;let a=Tb(i);UN(a);let l=null;for(let d=0;l==null&&d<a.length;++d){let h=tS(r);l=ZN(a[d],h)}return l}function Tb(i,e,t,s){e===void 0&&(e=[]),t===void 0&&(t=[]),s===void 0&&(s="");let n=(r,a,l)=>{let d={relativePath:l===void 0?r.path||"":l,caseSensitive:r.caseSensitive===!0,childrenIndex:a,route:r};d.relativePath.startsWith("/")&&(Ke(d.relativePath.startsWith(s),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(s.length));let h=_r([s,d.relativePath]),u=t.concat(d);r.children&&r.children.length>0&&(Ke(r.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),Tb(r.children,e,u,h)),!(r.path==null&&!r.index)&&e.push({path:h,score:KN(h,r.index),routesMeta:u})};return i.forEach((r,a)=>{var l;if(r.path===""||!((l=r.path)!=null&&l.includes("?")))n(r,a);else for(let d of Pb(r.path))n(r,a,d)}),e}function Pb(i){let e=i.split("/");if(e.length===0)return[];let[t,...s]=e,n=t.endsWith("?"),r=t.replace(/\?$/,"");if(s.length===0)return n?[r,""]:[r];let a=Pb(s.join("/")),l=[];return l.push(...a.map(d=>d===""?r:[r,d].join("/"))),n&&l.push(...a),l.map(d=>i.startsWith("/")&&d===""?"/":d)}function UN(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:JN(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}const VN=/^:[\w-]+$/,WN=3,GN=2,qN=1,XN=10,YN=-2,zg=i=>i==="*";function KN(i,e){let t=i.split("/"),s=t.length;return t.some(zg)&&(s+=YN),e&&(s+=GN),t.filter(n=>!zg(n)).reduce((n,r)=>n+(VN.test(r)?WN:r===""?qN:XN),s)}function JN(i,e){return i.length===e.length&&i.slice(0,-1).every((s,n)=>s===e[n])?i[i.length-1]-e[e.length-1]:0}function ZN(i,e,t){let{routesMeta:s}=i,n={},r="/",a=[];for(let l=0;l<s.length;++l){let d=s[l],h=l===s.length-1,u=r==="/"?e:e.slice(r.length)||"/",f=QN({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},u),m=d.route;if(!f)return null;Object.assign(n,f.params),a.push({params:n,pathname:_r([r,f.pathname]),pathnameBase:rS(_r([r,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(r=_r([r,f.pathnameBase]))}return a}function QN(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,s]=eS(i.path,i.caseSensitive,i.end),n=e.match(t);if(!n)return null;let r=n[0],a=r.replace(/(.)\/+$/,"$1"),l=n.slice(1);return{params:s.reduce((h,u,f)=>{let{paramName:m,isOptional:p}=u;if(m==="*"){let g=l[f]||"";a=r.slice(0,r.length-g.length).replace(/(.)\/+$/,"$1")}const x=l[f];return p&&!x?h[m]=void 0:h[m]=(x||"").replace(/%2F/g,"/"),h},{}),pathname:r,pathnameBase:a,pattern:i}}function eS(i,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),kb(i==="*"||!i.endsWith("*")||i.endsWith("/*"),'Route path "'+i+'" will be treated as if it were '+('"'+i.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+i.replace(/\*$/,"/*")+'".'));let s=[],n="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,d)=>(s.push({paramName:l,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(s.push({paramName:"*"}),n+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?n+="\\/*$":i!==""&&i!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,e?void 0:"i"),s]}function tS(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return kb(!1,'The URL path "'+i+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),i}}function Sm(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=i.charAt(t);return s&&s!=="/"?null:i.slice(t)||"/"}function sS(i,e){e===void 0&&(e="/");let{pathname:t,search:s="",hash:n=""}=typeof i=="string"?ql(i):i;return{pathname:t?t.startsWith("/")?t:nS(t,e):e,search:aS(s),hash:oS(n)}}function nS(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(n=>{n===".."?t.length>1&&t.pop():n!=="."&&t.push(n)}),t.length>1?t.join("/"):"/"}function kf(i,e,t,s){return"Cannot include a '"+i+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function iS(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function jm(i,e){let t=iS(i);return e?t.map((s,n)=>n===t.length-1?s.pathname:s.pathnameBase):t.map(s=>s.pathnameBase)}function Em(i,e,t,s){s===void 0&&(s=!1);let n;typeof i=="string"?n=ql(i):(n=Ec({},i),Ke(!n.pathname||!n.pathname.includes("?"),kf("?","pathname","search",n)),Ke(!n.pathname||!n.pathname.includes("#"),kf("#","pathname","hash",n)),Ke(!n.search||!n.search.includes("#"),kf("#","search","hash",n)));let r=i===""||n.pathname==="",a=r?"/":n.pathname,l;if(a==null)l=t;else{let f=e.length-1;if(!s&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),f-=1;n.pathname=m.join("/")}l=f>=0?e[f]:"/"}let d=sS(n,l),h=a&&a!=="/"&&a.endsWith("/"),u=(r||a===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(h||u)&&(d.pathname+="/"),d}const _r=i=>i.join("/").replace(/\/\/+/g,"/"),rS=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),aS=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,oS=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function lS(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}const Rb=["post","put","patch","delete"];new Set(Rb);const cS=["get",...Rb];new Set(cS);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cc(){return Cc=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(i[s]=t[s])}return i},Cc.apply(this,arguments)}const Cm=N.createContext(null),dS=N.createContext(null),Or=N.createContext(null),sf=N.createContext(null),Fr=N.createContext({outlet:null,matches:[],isDataRoute:!1}),Mb=N.createContext(null);function hS(i,e){let{relative:t}=e===void 0?{}:e;Xl()||Ke(!1);let{basename:s,navigator:n}=N.useContext(Or),{hash:r,pathname:a,search:l}=Ib(i,{relative:t}),d=a;return s!=="/"&&(d=a==="/"?s:_r([s,a])),n.createHref({pathname:d,search:l,hash:r})}function Xl(){return N.useContext(sf)!=null}function ao(){return Xl()||Ke(!1),N.useContext(sf).location}function Lb(i){N.useContext(Or).static||N.useLayoutEffect(i)}function Ss(){let{isDataRoute:i}=N.useContext(Fr);return i?SS():uS()}function uS(){Xl()||Ke(!1);let i=N.useContext(Cm),{basename:e,future:t,navigator:s}=N.useContext(Or),{matches:n}=N.useContext(Fr),{pathname:r}=ao(),a=JSON.stringify(jm(n,t.v7_relativeSplatPath)),l=N.useRef(!1);return Lb(()=>{l.current=!0}),N.useCallback(function(h,u){if(u===void 0&&(u={}),!l.current)return;if(typeof h=="number"){s.go(h);return}let f=Em(h,JSON.parse(a),r,u.relative==="path");i==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:_r([e,f.pathname])),(u.replace?s.replace:s.push)(f,u.state,u)},[e,s,a,r,i])}function Ib(i,e){let{relative:t}=e===void 0?{}:e,{future:s}=N.useContext(Or),{matches:n}=N.useContext(Fr),{pathname:r}=ao(),a=JSON.stringify(jm(n,s.v7_relativeSplatPath));return N.useMemo(()=>Em(i,JSON.parse(a),r,t==="path"),[i,a,r,t])}function fS(i,e){return pS(i,e)}function pS(i,e,t,s){Xl()||Ke(!1);let{navigator:n}=N.useContext(Or),{matches:r}=N.useContext(Fr),a=r[r.length-1],l=a?a.params:{};a&&a.pathname;let d=a?a.pathnameBase:"/";a&&a.route;let h=ao(),u;if(e){var f;let v=typeof e=="string"?ql(e):e;d==="/"||(f=v.pathname)!=null&&f.startsWith(d)||Ke(!1),u=v}else u=h;let m=u.pathname||"/",p=m;if(d!=="/"){let v=d.replace(/^\//,"").split("/");p="/"+m.replace(/^\//,"").split("/").slice(v.length).join("/")}let x=$N(i,{pathname:p}),g=vS(x&&x.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:_r([d,n.encodeLocation?n.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?d:_r([d,n.encodeLocation?n.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),r,t,s);return e&&g?N.createElement(sf.Provider,{value:{location:Cc({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Cr.Pop}},g):g}function mS(){let i=NS(),e=lS(i)?i.status+" "+i.statusText:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),t?N.createElement("pre",{style:n},t):null,null)}const gS=N.createElement(mS,null);class xS extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?N.createElement(Fr.Provider,{value:this.props.routeContext},N.createElement(Mb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function bS(i){let{routeContext:e,match:t,children:s}=i,n=N.useContext(Cm);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),N.createElement(Fr.Provider,{value:e},s)}function vS(i,e,t,s){var n;if(e===void 0&&(e=[]),t===void 0&&(t=null),s===void 0&&(s=null),i==null){var r;if(!t)return null;if(t.errors)i=t.matches;else if((r=s)!=null&&r.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let a=i,l=(n=t)==null?void 0:n.errors;if(l!=null){let u=a.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);u>=0||Ke(!1),a=a.slice(0,Math.min(a.length,u+1))}let d=!1,h=-1;if(t&&s&&s.v7_partialHydration)for(let u=0;u<a.length;u++){let f=a[u];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(h=u),f.route.id){let{loaderData:m,errors:p}=t,x=f.route.loader&&m[f.route.id]===void 0&&(!p||p[f.route.id]===void 0);if(f.route.lazy||x){d=!0,h>=0?a=a.slice(0,h+1):a=[a[0]];break}}}return a.reduceRight((u,f,m)=>{let p,x=!1,g=null,v=null;t&&(p=l&&f.route.id?l[f.route.id]:void 0,g=f.route.errorElement||gS,d&&(h<0&&m===0?(jS("route-fallback"),x=!0,v=null):h===m&&(x=!0,v=f.route.hydrateFallbackElement||null)));let y=e.concat(a.slice(0,m+1)),S=()=>{let j;return p?j=g:x?j=v:f.route.Component?j=N.createElement(f.route.Component,null):f.route.element?j=f.route.element:j=u,N.createElement(bS,{match:f,routeContext:{outlet:u,matches:y,isDataRoute:t!=null},children:j})};return t&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?N.createElement(xS,{location:t.location,revalidation:t.revalidation,component:g,error:p,children:S(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):S()},null)}var Db=function(i){return i.UseBlocker="useBlocker",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i}(Db||{}),Ob=function(i){return i.UseBlocker="useBlocker",i.UseLoaderData="useLoaderData",i.UseActionData="useActionData",i.UseRouteError="useRouteError",i.UseNavigation="useNavigation",i.UseRouteLoaderData="useRouteLoaderData",i.UseMatches="useMatches",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i.UseRouteId="useRouteId",i}(Ob||{});function yS(i){let e=N.useContext(Cm);return e||Ke(!1),e}function wS(i){let e=N.useContext(dS);return e||Ke(!1),e}function AS(i){let e=N.useContext(Fr);return e||Ke(!1),e}function Fb(i){let e=AS(),t=e.matches[e.matches.length-1];return t.route.id||Ke(!1),t.route.id}function NS(){var i;let e=N.useContext(Mb),t=wS(),s=Fb();return e!==void 0?e:(i=t.errors)==null?void 0:i[s]}function SS(){let{router:i}=yS(Db.UseNavigateStable),e=Fb(Ob.UseNavigateStable),t=N.useRef(!1);return Lb(()=>{t.current=!0}),N.useCallback(function(n,r){r===void 0&&(r={}),t.current&&(typeof n=="number"?i.navigate(n):i.navigate(n,Cc({fromRouteId:e},r)))},[i,e])}const $g={};function jS(i,e,t){$g[i]||($g[i]=!0)}function ES(i,e){i==null||i.v7_startTransition,i==null||i.v7_relativeSplatPath}function Sh(i){let{to:e,replace:t,state:s,relative:n}=i;Xl()||Ke(!1);let{future:r,static:a}=N.useContext(Or),{matches:l}=N.useContext(Fr),{pathname:d}=ao(),h=Ss(),u=Em(e,jm(l,r.v7_relativeSplatPath),d,n==="path"),f=JSON.stringify(u);return N.useEffect(()=>h(JSON.parse(f),{replace:t,state:s,relative:n}),[h,f,n,t,s]),null}function ct(i){Ke(!1)}function CS(i){let{basename:e="/",children:t=null,location:s,navigationType:n=Cr.Pop,navigator:r,static:a=!1,future:l}=i;Xl()&&Ke(!1);let d=e.replace(/^\/*/,"/"),h=N.useMemo(()=>({basename:d,navigator:r,static:a,future:Cc({v7_relativeSplatPath:!1},l)}),[d,l,r,a]);typeof s=="string"&&(s=ql(s));let{pathname:u="/",search:f="",hash:m="",state:p=null,key:x="default"}=s,g=N.useMemo(()=>{let v=Sm(u,d);return v==null?null:{location:{pathname:v,search:f,hash:m,state:p,key:x},navigationType:n}},[d,u,f,m,p,x,n]);return g==null?null:N.createElement(Or.Provider,{value:h},N.createElement(sf.Provider,{children:t,value:g}))}function _S(i){let{children:e,location:t}=i;return fS(Kf(e),t)}new Promise(()=>{});function Kf(i,e){e===void 0&&(e=[]);let t=[];return N.Children.forEach(i,(s,n)=>{if(!N.isValidElement(s))return;let r=[...e,n];if(s.type===N.Fragment){t.push.apply(t,Kf(s.props.children,r));return}s.type!==ct&&Ke(!1),!s.props.index||!s.props.children||Ke(!1);let a={id:s.props.id||r.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(a.children=Kf(s.props.children,r)),t.push(a)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jf(){return Jf=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(i[s]=t[s])}return i},Jf.apply(this,arguments)}function kS(i,e){if(i==null)return{};var t={},s=Object.keys(i),n,r;for(r=0;r<s.length;r++)n=s[r],!(e.indexOf(n)>=0)&&(t[n]=i[n]);return t}function TS(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function PS(i,e){return i.button===0&&(!e||e==="_self")&&!TS(i)}const RS=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],MS="6";try{window.__reactRouterVersion=MS}catch{}const LS="startTransition",Hg=sw[LS];function IS(i){let{basename:e,children:t,future:s,window:n}=i,r=N.useRef();r.current==null&&(r.current=FN({window:n,v5Compat:!0}));let a=r.current,[l,d]=N.useState({action:a.action,location:a.location}),{v7_startTransition:h}=s||{},u=N.useCallback(f=>{h&&Hg?Hg(()=>d(f)):d(f)},[d,h]);return N.useLayoutEffect(()=>a.listen(u),[a,u]),N.useEffect(()=>ES(s),[s]),N.createElement(CS,{basename:e,children:t,location:l.location,navigationType:l.action,navigator:a,future:s})}const DS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",OS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Bb=N.forwardRef(function(e,t){let{onClick:s,relative:n,reloadDocument:r,replace:a,state:l,target:d,to:h,preventScrollReset:u,viewTransition:f}=e,m=kS(e,RS),{basename:p}=N.useContext(Or),x,g=!1;if(typeof h=="string"&&OS.test(h)&&(x=h,DS))try{let j=new URL(window.location.href),E=h.startsWith("//")?new URL(j.protocol+h):new URL(h),C=Sm(E.pathname,p);E.origin===j.origin&&C!=null?h=C+E.search+E.hash:g=!0}catch{}let v=hS(h,{relative:n}),y=FS(h,{replace:a,state:l,target:d,preventScrollReset:u,relative:n,viewTransition:f});function S(j){s&&s(j),j.defaultPrevented||y(j)}return N.createElement("a",Jf({},m,{href:x||v,onClick:g||r?s:S,ref:t,target:d}))});var Ug;(function(i){i.UseScrollRestoration="useScrollRestoration",i.UseSubmit="useSubmit",i.UseSubmitFetcher="useSubmitFetcher",i.UseFetcher="useFetcher",i.useViewTransitionState="useViewTransitionState"})(Ug||(Ug={}));var Vg;(function(i){i.UseFetcher="useFetcher",i.UseFetchers="useFetchers",i.UseScrollRestoration="useScrollRestoration"})(Vg||(Vg={}));function FS(i,e){let{target:t,replace:s,state:n,preventScrollReset:r,relative:a,viewTransition:l}=e===void 0?{}:e,d=Ss(),h=ao(),u=Ib(i,{relative:a});return N.useCallback(f=>{if(PS(f,t)){f.preventDefault();let m=s!==void 0?s:xu(h)===xu(u);d(i,{replace:m,state:n,preventScrollReset:r,relative:a,viewTransition:l})}},[h,d,u,s,n,t,i,r,a,l])}const BS=[{icon:yw,label:"Главная",path:"/"},{icon:Tw,label:"Магазин",path:"/shop"},{icon:jw,label:"Сканер",path:"/scanner",highlight:!0},{icon:ns,label:"Чат",path:"/chat"},{icon:Mw,label:"Профиль",path:"/profile"}];function zS(){const i=ao(),e=Ss();return o.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-dark-surface border-t border-border z-50",children:o.jsx("div",{className:"flex justify-around items-center py-2 px-4 max-w-md mx-auto",children:BS.map(t=>{const s=i.pathname===t.path,n=t.icon;return o.jsxs("button",{onClick:()=>{t.label==="Магазин"?window.open("https://mistermo.kz","_blank"):e(t.path)},className:be("flex flex-col items-center gap-1 p-2 rounded-xl transition-all duration-300 min-w-0 flex-1",s?"text-primary":"text-muted-foreground hover:text-foreground",t.highlight&&!s&&"bg-primary/10"),children:[o.jsx("div",{className:be("p-2 rounded-full transition-all duration-300",t.highlight&&!s&&"bg-primary text-primary-foreground",t.highlight&&s&&"bg-primary text-primary-foreground scale-110"),children:o.jsx(n,{size:20})}),o.jsx("span",{className:"text-xs font-medium truncate",children:t.label})]},t.path)})})})}const uo="https://morachkovskiyapp.com/api",Xr={async authWithTelegram(i){try{const e=await fetch(`${uo}/auth/telegram`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({init_data:i})});if(!e.ok)throw new Error("Auth failed");return await e.json()}catch(e){throw console.error("Telegram auth error:",e),e}},async getUserState(i){try{const e=await fetch(`${uo}/user/state?user_id=${encodeURIComponent(i)}`);if(!e.ok)throw new Error("Failed to fetch user state");return await e.json()}catch(e){return console.error("Error fetching user state:",e),{onboarding_done:!1,subscription_tier:null}}},async getDailyProgress(i,e){try{const t=await fetch(`${uo}/progress/today?user_id=${encodeURIComponent(i)}`);if(!t.ok)throw new Error("Failed to fetch progress");return await t.json()}catch(t){return console.error("Error fetching daily progress:",t),null}},async updateProgress(i,e){try{const t=await fetch(`${uo}/progress/update`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:i,...e})});if(!t.ok)throw new Error("Failed to update progress");return await t.json()}catch(t){return console.error("Error updating progress:",t),null}},async saveOnboarding(i,e){try{const t=await fetch(`${uo}/onboarding/save`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:i,data:e})});if(!t.ok)throw new Error("Failed to save onboarding");return await t.json()}catch(t){return console.error("Error saving onboarding:",t),null}},async updateUserState(i,e){try{const t=await fetch(`${uo}/user/state`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:i,...e})});if(!t.ok)throw new Error("Failed to update user state");return await t.json()}catch(t){return console.error("Error updating user state:",t),null}}},$S=()=>{var i;return(i=window.Telegram)!=null&&i.WebApp?(window.Telegram.WebApp.ready(),window.Telegram.WebApp.expand(),window.Telegram.WebApp):null};function Mi(){const[i,e]=N.useState(null),[t,s]=N.useState(!0),[n,r]=N.useState(!1),[a,l]=N.useState(null);N.useEffect(()=>{$S(),(async()=>{var p,x;try{const g=(x=(p=window==null?void 0:window.Telegram)==null?void 0:p.WebApp)==null?void 0:x.initData;if(g&&g.length>0)await d(g);else{const v=localStorage.getItem("telegram_user");if(v){const y=JSON.parse(v);e(y),r(localStorage.getItem("onboarding_done")==="true"),l(localStorage.getItem("subscription_tier"))}}}catch(g){console.error("Auth error:",g)}finally{s(!1)}})()},[]);const d=async m=>{try{const x=(await Xr.authWithTelegram(m)).user,g={id:x.id,telegram_id:x.telegram_id,telegram_username:x.username,first_name:x.first_name,last_name:x.last_name,subscription_tier:x.subscription_tier||"basic",created_at:x.created_at||new Date().toISOString(),updated_at:x.updated_at||new Date().toISOString()};e(g),localStorage.setItem("telegram_user",JSON.stringify(g));const v=await Xr.getUserState(x.id);return v.onboarding_done?(r(!0),localStorage.setItem("onboarding_done","true")):(r(!1),localStorage.setItem("onboarding_done","false")),v.subscription_tier&&(l(v.subscription_tier),localStorage.setItem("subscription_tier",v.subscription_tier)),g}catch(p){throw console.error("Telegram auth error:",p),p}};return{user:i,loading:t,onboardingDone:n,subscriptionTier:a,signInWithTelegram:d,signOut:()=>{e(null),r(!1),l(null),localStorage.removeItem("telegram_user"),localStorage.removeItem("onboarding_done"),localStorage.removeItem("subscription_tier")},updateSubscriptionTier:async m=>{if(i)try{await Xr.updateUserState(i.id,{subscription_tier:m});const p={...i,subscription_tier:m};e(p),l(m),localStorage.setItem("telegram_user",JSON.stringify(p)),localStorage.setItem("subscription_tier",m)}catch(p){console.error("Error updating subscription tier:",p)}},completeOnboarding:async()=>{if(i)try{await Xr.updateUserState(i.id,{onboarding_done:!0}),r(!0),localStorage.setItem("onboarding_done","true")}catch(m){console.error("Error completing onboarding:",m)}}}}const Y=N.forwardRef(({className:i,...e},t)=>o.jsx("div",{ref:t,className:be("rounded-lg border bg-card text-card-foreground shadow-sm",i),...e}));Y.displayName="Card";const _m=N.forwardRef(({className:i,...e},t)=>o.jsx("div",{ref:t,className:be("flex flex-col space-y-1.5 p-6",i),...e}));_m.displayName="CardHeader";const km=N.forwardRef(({className:i,...e},t)=>o.jsx("h3",{ref:t,className:be("text-2xl font-semibold leading-none tracking-tight",i),...e}));km.displayName="CardTitle";const Tm=N.forwardRef(({className:i,...e},t)=>o.jsx("p",{ref:t,className:be("text-sm text-muted-foreground",i),...e}));Tm.displayName="CardDescription";const Pm=N.forwardRef(({className:i,...e},t)=>o.jsx("div",{ref:t,className:be("p-6 pt-0",i),...e}));Pm.displayName="CardContent";const HS=N.forwardRef(({className:i,...e},t)=>o.jsx("div",{ref:t,className:be("flex items-center p-6 pt-0",i),...e}));HS.displayName="CardFooter";const US=Xu("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),O=N.forwardRef(({className:i,variant:e,size:t,asChild:s=!1,...n},r)=>{const a=s?Ky:"button";return o.jsx(a,{className:be(US({variant:e,size:t,className:i})),ref:r,...n})});O.displayName="Button";function VS(){const{signInWithTelegram:i,loading:e}=Mi(),{toast:t}=Hl(),[s,n]=N.useState(!1);N.useEffect(()=>{var l,d,h,u,f,m;if((l=window.Telegram)!=null&&l.WebApp){(h=(d=window.Telegram.WebApp).ready)==null||h.call(d),(f=(u=window.Telegram.WebApp).expand)==null||f.call(u);const p=(m=window.Telegram.WebApp.initDataUnsafe)==null?void 0:m.user;p&&r(p)}},[]);const r=async l=>{n(!0);try{console.log("Attempting login with:",l),await i(l),t({title:"Успешный вход",description:`Добро пожаловать, ${l.first_name}!`})}catch(d){console.error("Telegram login failed:",d),t({title:"Ошибка входа",description:"Проблема с подключением к базе данных. Пожалуйста, попробуйте позже.",variant:"destructive"})}finally{n(!1)}},a=()=>{r({id:123456789,first_name:"Никита",username:"nikita_test"})};return o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:o.jsxs(Y,{className:"w-full max-w-md p-6 space-y-6 text-center",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"w-20 h-20 mx-auto rounded-full overflow-hidden",children:o.jsx("img",{src:"/lovable-uploads/f013bf5a-7942-4ed0-aaac-dbe0ac8b7022.png",alt:"MisterMO Health",className:"w-full h-full object-cover"})}),o.jsx("p",{className:"text-muted-foreground",children:"Генетическая система здоровья Морачковского"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Войдите в систему для доступа к персональным программам оздоровления"}),o.jsx(O,{onClick:a,disabled:e||s,className:"w-full",children:e||s?"Выполняется вход...":"Войти через Telegram"})]}),o.jsxs("div",{className:"text-xs text-muted-foreground",children:[o.jsx("p",{children:"✓ Безопасная авторизация"}),o.jsx("p",{children:"✓ Персональные программы"}),o.jsx("p",{children:"✓ Круглосуточная поддержка"})]})]})})}function WS(){return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:o.jsxs(Y,{className:"mx-auto max-w-sm",children:[o.jsxs(_m,{children:[o.jsx(km,{className:"text-2xl",children:"Вход"}),o.jsx(Tm,{children:"Введите ваш email и пароль, чтобы войти"})]}),o.jsxs(Pm,{children:[o.jsx(VS,{}),o.jsxs("div",{className:"mt-4 text-center text-sm",children:["Нет аккаунта?"," ",o.jsx(Bb,{to:"/register",className:"underline",children:"Зарегистрироваться"})]})]})]})})}const et=N.forwardRef(({className:i,type:e,...t},s)=>o.jsx("input",{type:e,className:be("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",i),ref:s,...t}));et.displayName="Input";var GS="Label",zb=N.forwardRef((i,e)=>o.jsx(Gt.label,{...i,ref:e,onMouseDown:t=>{var n;t.target.closest("button, input, select, textarea")||((n=i.onMouseDown)==null||n.call(i,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));zb.displayName=GS;var $b=zb;const qS=Xu("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),tt=N.forwardRef(({className:i,...e},t)=>o.jsx($b,{ref:t,className:be(qS(),i),...e}));tt.displayName=$b.displayName;function XS(){const i=Ss(),[e,t]=N.useState(""),[s,n]=N.useState(""),r=()=>{console.log("Registering with:",{email:e,password:s}),i("/login")};return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:o.jsxs(Y,{className:"mx-auto max-w-sm",children:[o.jsxs(_m,{children:[o.jsx(km,{className:"text-2xl",children:"Регистрация"}),o.jsx(Tm,{children:"Введите ваши данные, чтобы создать аккаунт"})]}),o.jsxs(Pm,{children:[o.jsxs("div",{className:"grid gap-4",children:[o.jsxs("div",{className:"grid gap-2",children:[o.jsx(tt,{htmlFor:"email",children:"Email"}),o.jsx(et,{id:"email",type:"email",placeholder:"m@example.com",required:!0,value:e,onChange:a=>t(a.target.value)})]}),o.jsxs("div",{className:"grid gap-2",children:[o.jsx(tt,{htmlFor:"password",children:"Пароль"}),o.jsx(et,{id:"password",type:"password",required:!0,value:s,onChange:a=>n(a.target.value)})]}),o.jsx(O,{type:"submit",className:"w-full",onClick:r,children:"Создать аккаунт"})]}),o.jsxs("div",{className:"mt-4 text-center text-sm",children:["Уже есть аккаунт?"," ",o.jsx(Bb,{to:"/login",className:"underline",children:"Войти"})]})]})]})})}var Rm="Progress",Mm=100,[YS,k_]=ch(Rm),[KS,JS]=YS(Rm),Hb=N.forwardRef((i,e)=>{const{__scopeProgress:t,value:s=null,max:n,getValueLabel:r=ZS,...a}=i;(n||n===0)&&!Wg(n)&&console.error(QS(`${n}`,"Progress"));const l=Wg(n)?n:Mm;s!==null&&!Gg(s,l)&&console.error(ej(`${s}`,"Progress"));const d=Gg(s,l)?s:null,h=bu(d)?r(d,l):void 0;return o.jsx(KS,{scope:t,value:d,max:l,children:o.jsx(Gt.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":bu(d)?d:void 0,"aria-valuetext":h,role:"progressbar","data-state":Wb(d,l),"data-value":d??void 0,"data-max":l,...a,ref:e})})});Hb.displayName=Rm;var Ub="ProgressIndicator",Vb=N.forwardRef((i,e)=>{const{__scopeProgress:t,...s}=i,n=JS(Ub,t);return o.jsx(Gt.div,{"data-state":Wb(n.value,n.max),"data-value":n.value??void 0,"data-max":n.max,...s,ref:e})});Vb.displayName=Ub;function ZS(i,e){return`${Math.round(i/e*100)}%`}function Wb(i,e){return i==null?"indeterminate":i===e?"complete":"loading"}function bu(i){return typeof i=="number"}function Wg(i){return bu(i)&&!isNaN(i)&&i>0}function Gg(i,e){return bu(i)&&!isNaN(i)&&i<=e&&i>=0}function QS(i,e){return`Invalid prop \`max\` of value \`${i}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Mm}\`.`}function ej(i,e){return`Invalid prop \`value\` of value \`${i}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Mm} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Gb=Hb,tj=Vb;const nf=N.forwardRef(({className:i,value:e,...t},s)=>o.jsx(Gb,{ref:s,className:be("relative h-4 w-full overflow-hidden rounded-full bg-secondary",i),...t,children:o.jsx(tj,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));nf.displayName=Gb.displayName;function Lm(){const{user:i}=Mi(),[e,t]=N.useState(null),[s,n]=N.useState(!0),r=new Date().toISOString().split("T")[0];N.useEffect(()=>{i!=null&&i.id&&a()},[i==null?void 0:i.id]);const a=async()=>{if(i!=null&&i.id){n(!0);try{const u=await Xr.getDailyProgress(i.id,r);t(u||{id:`${i.id}_${r}`,user_id:i.id,date:r,weight:null,calories_consumed:0,calories_target:1050,steps:0,steps_target:8e3,water_intake:0,water_target:2.5,completed_tasks:[],created_at:new Date().toISOString(),updated_at:new Date().toISOString()})}catch(u){console.error("Error loading daily progress:",u),t({id:`${i.id}_${r}`,user_id:i.id,date:r,weight:null,calories_consumed:0,calories_target:1050,steps:0,steps_target:8e3,water_intake:0,water_target:2.5,completed_tasks:[],created_at:new Date().toISOString(),updated_at:new Date().toISOString()})}finally{n(!1)}}},l=async u=>{if(i!=null&&i.id)try{const f=await Xr.updateProgress(i.id,u);return f&&t(m=>({...m,...f})),f}catch(f){return console.error("Error updating progress:",f),null}};return{todayProgress:e,loading:s,updateProgress:l,toggleTask:async u=>{if(!e)return;const f=e.completed_tasks||[],p=f.includes(u)?f.filter(x=>x!==u):[...f,u];await l({completed_tasks:p})},getProgressPercentage:()=>{if(!(e!=null&&e.completed_tasks))return 0;const u=e.completed_tasks.length;return Math.min(Math.round(u/10*100),100)},refresh:a}}function sj(){var h;const i=Ss(),{user:e}=Mi(),{todayProgress:t,loading:s,updateProgress:n,getProgressPercentage:r}=Lm(),[a,l]=N.useState(null),d=async(u,f)=>{if(t){l(u);try{await n({[u]:f})}catch(m){console.error(`Error updating ${u}:`,m)}finally{l(null)}}};return s?o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"Загрузка прогресса..."})]})}):o.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[o.jsxs("div",{className:"bg-gradient-to-br from-lime-400 via-lime-500 to-green-500 px-4 py-6 rounded-b-3xl",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-white font-bold text-lg",children:((h=e==null?void 0:e.first_name)==null?void 0:h.charAt(0))||"U"})}),o.jsxs("div",{children:[o.jsxs("h1",{className:"text-white font-semibold",children:["Привет, ",(e==null?void 0:e.first_name)||"пользователь","!"]}),o.jsx("p",{className:"text-white/80 text-sm",children:new Date().toLocaleDateString("ru-RU",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),!1]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-20 h-16 mx-auto mb-3",children:o.jsx("img",{src:"/lovable-uploads/f013bf5a-7942-4ed0-aaac-dbe0ac8b7022.png",alt:"MisterMO Health",className:"w-full h-full object-contain drop-shadow-lg"})}),o.jsx("h2",{className:"text-lg font-bold text-gray-800",children:"Генетическая система здоровья"})]})]}),o.jsxs("div",{className:"px-4 py-6 space-y-6",children:[o.jsxs(Y,{className:"bg-dark-surface p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Прогресс дня"}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Pw,{size:16,className:"text-muted-foreground"}),o.jsxs("span",{className:"text-sm text-muted-foreground",children:[r(),"%"]})]})]}),o.jsx(nf,{value:r(),className:"h-3"})]}),o.jsxs(Y,{className:"bg-dark-surface p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Вес"}),o.jsxs(O,{size:"sm",variant:"outline",onClick:()=>i("/scanner"),className:"text-xs",children:[o.jsx(uu,{size:12,className:"mr-1"}),"Сканировать"]})]}),o.jsxs("div",{className:"text-center mb-4",children:[o.jsxs("div",{className:"text-3xl font-bold text-foreground",children:[(t==null?void 0:t.weight)||"--"," кг"]}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Текущий вес"})]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx(O,{size:"sm",variant:"outline",onClick:()=>d("weight",((t==null?void 0:t.weight)||0)-.1),disabled:a==="weight",className:"flex-1",children:o.jsx(ww,{size:16})}),o.jsx(O,{size:"sm",variant:"outline",onClick:()=>d("weight",((t==null?void 0:t.weight)||0)+.1),disabled:a==="weight",className:"flex-1",children:o.jsx(Sw,{size:16})})]})]}),o.jsxs(Y,{className:"bg-dark-surface p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Вода"}),o.jsx(xw,{size:20,className:"text-blue-500"})]}),o.jsxs("div",{className:"text-center mb-4",children:[o.jsxs("div",{className:"text-3xl font-bold text-foreground",children:[(t==null?void 0:t.water_intake)||0," / ",(t==null?void 0:t.water_target)||2.5," л"]}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Выпито / Цель"})]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx(O,{size:"sm",variant:"outline",onClick:()=>d("water_intake",((t==null?void 0:t.water_intake)||0)+.25),disabled:a==="water_intake",className:"flex-1",children:"+0.25л"}),o.jsx(O,{size:"sm",variant:"outline",onClick:()=>d("water_intake",((t==null?void 0:t.water_intake)||0)+.5),disabled:a==="water_intake",className:"flex-1",children:"+0.5л"})]})]}),o.jsxs(Y,{className:"bg-dark-surface p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Шаги"}),o.jsx(uw,{size:20,className:"text-green-500"})]}),o.jsxs("div",{className:"text-center mb-4",children:[o.jsxs("div",{className:"text-3xl font-bold text-foreground",children:[(t==null?void 0:t.steps)||0," / ",(t==null?void 0:t.steps_target)||8e3]}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Пройдено / Цель"})]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx(O,{size:"sm",variant:"outline",onClick:()=>d("steps",((t==null?void 0:t.steps)||0)+100),disabled:a==="steps",className:"flex-1",children:"+100"}),o.jsx(O,{size:"sm",variant:"outline",onClick:()=>d("steps",((t==null?void 0:t.steps)||0)+500),disabled:a==="steps",className:"flex-1",children:"+500"})]})]}),o.jsxs(Y,{className:"bg-dark-surface p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Калории"}),o.jsx(Hf,{size:20,className:"text-orange-500"})]}),o.jsxs("div",{className:"text-center mb-4",children:[o.jsxs("div",{className:"text-3xl font-bold text-foreground",children:[(t==null?void 0:t.calories_consumed)||0," / ",(t==null?void 0:t.calories_target)||1050]}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Съедено / Цель"})]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx(O,{size:"sm",variant:"outline",onClick:()=>d("calories_consumed",((t==null?void 0:t.calories_consumed)||0)+50),disabled:a==="calories_consumed",className:"flex-1",children:"+50"}),o.jsx(O,{size:"sm",variant:"outline",onClick:()=>d("calories_consumed",((t==null?void 0:t.calories_consumed)||0)+100),disabled:a==="calories_consumed",className:"flex-1",children:"+100"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs(O,{onClick:()=>i("/scanner"),className:"h-16 bg-gradient-to-r from-blue-500 to-purple-600 text-white",children:[o.jsx(uu,{size:20,className:"mr-2"}),"Сканировать еду"]}),o.jsxs(O,{onClick:()=>i("/chat"),className:"h-16 bg-gradient-to-r from-green-500 to-teal-600 text-white",children:[o.jsx($x,{size:20,className:"mr-2"}),"Чат с AI"]})]}),(e==null?void 0:e.subscription_tier)&&o.jsx(Y,{className:"bg-dark-surface p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg font-semibold text-foreground",children:["Тариф: ",e.subscription_tier==="basic"?"Базовый":e.subscription_tier==="advanced"?"Продвинутый":"Премиум"]}),o.jsx("p",{className:"text-sm text-muted-foreground",children:e.subscription_tier==="basic"?"Доступ к базовым функциям":e.subscription_tier==="advanced"?"Расширенный функционал":"Полный доступ"})]}),o.jsx($f,{size:20,className:"text-yellow-500"})]})})]})]})}function nj(){const i=Ss(),e=["Диабет 2 типа","Проблемы с желчным пузырем","Панкреатит","Гепатоз печени","Цирроз печени","Инсулинорезистентность","Кортикорезистентность","Синдром Поликистозных яичников","Щитовидная железа","Гипертония","Акне и Псориаз","и др. заболевания"];return o.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[o.jsx("div",{className:"bg-primary px-4 py-8 rounded-b-3xl",children:o.jsxs("div",{className:"text-center space-y-4",children:[o.jsx("div",{className:"w-28 h-20 mx-auto",children:o.jsx("img",{src:"/lovable-uploads/f013bf5a-7942-4ed0-aaac-dbe0ac8b7022.png",alt:"MisterMO Health",className:"w-full h-full object-contain"})}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-center gap-2",children:[o.jsx("span",{className:"text-2xl",children:"👋"}),o.jsx("p",{className:"text-lg font-semibold text-primary-foreground",children:"Привет Никита!"})]}),o.jsx("p",{className:"text-sm text-primary-foreground/80",children:"Сегодня тот самый день!"})]})]})}),o.jsxs("div",{className:"px-4 py-6 space-y-6",children:[o.jsx(Y,{className:"bg-dark-surface p-4",children:o.jsxs("p",{className:"text-center text-foreground font-medium",children:["Привет Никита!",o.jsx("br",{}),"Я рад тебя приветствовать в нашем",o.jsx("br",{}),"Мире Генетического здоровья"]})}),o.jsxs(Y,{className:"bg-gradient-to-br from-lime-400 via-lime-500 to-green-500 p-6 space-y-4",children:[o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsxs("div",{className:"flex-1 space-y-3",children:[o.jsxs("h2",{className:"text-xl font-bold text-gray-800",children:["Морачковский",o.jsx("br",{}),"Никита"]}),o.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[o.jsx("p",{children:"Ученый-исследователь."}),o.jsx("p",{children:"Автор книг и методик."}),o.jsx("p",{children:"Эксперт в области генетики и эндокринологии."}),o.jsx("p",{children:"Студент Stanford Medicine."}),o.jsx("p",{children:"Создатель одноименной системы Генетического здоровья."}),o.jsx("p",{children:"Создатель системы по выходу из голода за один день."})]})]}),o.jsx("div",{className:"w-32 h-40 flex-shrink-0",children:o.jsx("img",{src:"/lovable-uploads/6f88d9a0-7f1c-4af4-9f5a-35cfcbb2839f.png",alt:"Никита Морачковский",className:"w-full h-full object-cover rounded-lg"})})]}),o.jsxs("div",{className:"flex items-center justify-between pt-4",children:[o.jsx("div",{className:"w-20 h-10",children:o.jsx("img",{src:"/lovable-uploads/920abd2a-2881-431f-b7e6-2c8ee98a4591.png",alt:"Morachkovsky Academy",className:"w-full h-full object-contain"})}),o.jsx("div",{className:"w-20 h-8",children:o.jsx("img",{src:"/lovable-uploads/f8e46835-07e7-4d2d-97d1-6c4c12bd0248.png",alt:"Stanford Medicine",className:"w-full h-full object-contain"})})]})]}),o.jsxs(Y,{className:"bg-dark-surface p-6 space-y-4",children:[o.jsxs("h3",{className:"text-lg font-bold text-primary text-center",children:["Генетическая система",o.jsx("br",{}),"Морачковского"]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"text-sm font-medium text-foreground",children:"Помогает Вам решить проблемы:"}),o.jsx("div",{className:"space-y-1",children:e.map((t,s)=>o.jsxs("p",{className:"text-sm text-muted-foreground",children:["• ",t]},s))})]})]}),o.jsx(O,{onClick:()=>i("/questionnaire"),className:"w-full h-14 text-lg font-semibold",children:"НАЧАТЬ ИЗУЧЕНИЕ"})]})]})}function ij(){const i=Ss(),{user:e,completeOnboarding:t}=Mi(),{toast:s}=Hl(),[n,r]=N.useState({firstName:(e==null?void 0:e.first_name)||"",lastName:"",phone:"",email:"",height:"",weight:"",age:"",liverProblems:"",diabetes:"",thyroidProblems:"",hypertension:"",formations:"",goals:"",source:""}),[a,l]=N.useState(!1),d=(f,m)=>{r(p=>({...p,[f]:m}))},h=async()=>{if(!(e!=null&&e.id)){s({title:"Ошибка",description:"Пользователь не авторизован",variant:"destructive"});return}l(!0);try{if(console.log("Submitting onboarding form for user:",e.id),await Xr.saveOnboarding(e.id,n))console.log("Onboarding saved successfully"),await t(),s({title:"Анкета заполнена!",description:"Добро пожаловать в систему здоровья Морачковского!"}),i("/pricing");else throw new Error("Failed to save onboarding data")}catch(f){console.error("Onboarding save failed:",f),s({title:"Ошибка",description:"Не удалось сохранить анкету. Попробуйте еще раз.",variant:"destructive"})}finally{l(!1)}},u=n.firstName&&n.height&&n.weight&&n.age&&n.liverProblems&&n.diabetes&&n.thyroidProblems&&n.hypertension&&n.formations&&n.goals&&n.source;return o.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[o.jsx("div",{className:"bg-gradient-to-br from-lime-400 via-lime-500 to-green-500 px-4 py-6 rounded-b-3xl",children:o.jsxs("div",{className:"text-center space-y-4",children:[o.jsx("div",{className:"w-24 h-16 mx-auto",children:o.jsx("img",{src:"/lovable-uploads/f013bf5a-7942-4ed0-aaac-dbe0ac8b7022.png",alt:"MisterMO Health",className:"w-full h-full object-contain drop-shadow-lg"})}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Генетическая система здоровья"}),o.jsx("p",{className:"text-sm text-gray-700",children:"Заполните анкету для персональной программы"})]})]})}),o.jsxs("div",{className:"px-4 py-6 space-y-6",children:[o.jsx(Y,{className:"bg-dark-surface p-4",children:o.jsx("p",{className:"text-center text-foreground font-medium mb-6",children:"Что бы я мог помочь тебе с Похудением и Оздоровлением, я должен задать тебе вопросы!"})}),o.jsxs(Y,{className:"bg-dark-surface p-4 space-y-4",children:[o.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Личные данные"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(tt,{htmlFor:"firstName",children:"Имя *"}),o.jsx(et,{id:"firstName",value:n.firstName,onChange:f=>d("firstName",f.target.value),placeholder:"Введите ваше имя"})]}),o.jsxs("div",{children:[o.jsx(tt,{htmlFor:"lastName",children:"Фамилия"}),o.jsx(et,{id:"lastName",value:n.lastName,onChange:f=>d("lastName",f.target.value),placeholder:"Введите вашу фамилию"})]}),o.jsxs("div",{children:[o.jsx(tt,{htmlFor:"phone",children:"Номер телефона"}),o.jsx(et,{id:"phone",type:"tel",value:n.phone,onChange:f=>d("phone",f.target.value),placeholder:"+7 (999) 123-45-67"})]}),o.jsxs("div",{children:[o.jsx(tt,{htmlFor:"email",children:"Email"}),o.jsx(et,{id:"email",type:"email",value:n.email,onChange:f=>d("email",f.target.value),placeholder:"example@email.com"})]})]})]}),o.jsxs(Y,{className:"bg-dark-surface p-4 space-y-4",children:[o.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Физические данные"}),o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx(tt,{htmlFor:"height",children:"Рост *"}),o.jsx(et,{id:"height",type:"number",value:n.height,onChange:f=>d("height",f.target.value),placeholder:"175"})]}),o.jsxs("div",{children:[o.jsx(tt,{htmlFor:"weight",children:"Вес *"}),o.jsx(et,{id:"weight",type:"number",value:n.weight,onChange:f=>d("weight",f.target.value),placeholder:"75"})]}),o.jsxs("div",{children:[o.jsx(tt,{htmlFor:"age",children:"Возраст *"}),o.jsx(et,{id:"age",type:"number",value:n.age,onChange:f=>d("age",f.target.value),placeholder:"38"})]})]})]}),o.jsx("div",{className:"space-y-4",children:[{field:"liverProblems",title:"Проблемы печени или ЖКТ"},{field:"diabetes",title:"Диабет или инсулинорезистентность"},{field:"thyroidProblems",title:"Проблемы щитовидной железы"},{field:"hypertension",title:"Гипертония (Давление)"},{field:"formations",title:"Образования (миома, киста, опухоль)"}].map(f=>o.jsxs(Y,{className:"bg-dark-surface p-4",children:[o.jsx("h3",{className:"text-sm font-medium text-foreground mb-3",children:f.title}),o.jsx("div",{className:"grid grid-cols-3 gap-3",children:["Да","Нет","Незнаю"].map(m=>o.jsx(O,{variant:n[f.field]===m?"default":"outline",size:"sm",onClick:()=>d(f.field,m),className:"h-auto py-3 text-xs",children:m},m))})]},f.field))}),o.jsxs(Y,{className:"bg-dark-surface p-4",children:[o.jsx("h3",{className:"text-sm font-medium text-foreground mb-3",children:"Ваши цели"}),o.jsx("div",{className:"grid grid-cols-1 gap-3",children:["Похудеть и оздоровиться","Похудеть"].map(f=>o.jsx(O,{variant:n.goals===f?"default":"outline",size:"sm",onClick:()=>d("goals",f),className:"h-auto py-3 text-xs",children:f},f))})]}),o.jsxs(Y,{className:"bg-dark-surface p-4",children:[o.jsx("h3",{className:"text-sm font-medium text-foreground mb-3",children:"Откуда Вы узнали о Системе Морачковского"}),o.jsx("div",{className:"grid grid-cols-1 gap-3",children:["Интернет","Друзья","Посоветовал врач"].map(f=>o.jsx(O,{variant:n.source===f?"default":"outline",size:"sm",onClick:()=>d("source",f),className:"h-auto py-3 text-xs",children:f},f))})]}),o.jsx(O,{onClick:h,disabled:!u||a,className:"w-full h-12 text-lg font-semibold",children:a?"Сохранение...":"НАЧАТЬ ИЗУЧЕНИЕ"})]})]})}const rj=Xu("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function sc({className:i,variant:e,...t}){return o.jsx("div",{className:be(rj({variant:e}),i),...t})}function aj(){const i=Ss(),e=[{name:"БАЗОВЫЙ",price:"БЕСПЛАТНО",features:["Меню","Чеклист","Расписание дня","Справочник продуктов","Дыхательная гимнастика","Зарядки"],buttonText:"НАЧАТЬ БАЗОВЫЙ КУРС",buttonAction:()=>{localStorage.setItem("subscription_tier","basic"),i("/dashboard")},popular:!1},{name:"ПРОДВИНУТЫЙ",price:"30 000тг",subtitle:"(или покупка витаминов на 30000тг)",features:["Все из БАЗОВОГО +","Чат общения и поддержки","Рецепты","Сканер еды (сам определяет калории по фото)","Семинары и статьи","Дополнительные темы (разбор питания, анализы)"],buttonText:"КУПИТЬ ПРОДВИНУТЫЙ КУРС",secondButtonText:"КУПИТЬ ВИТАМИНЫ И ПОЛУЧИТЬ ДОСТУП",buttonAction:()=>{localStorage.setItem("subscription_tier","advanced"),i("/dashboard")},popular:!0},{name:"ПРЕМИУМ",price:"50 000тг",subtitle:"(или покупка витаминов на 50000тг)",features:["Все из ПРОДВИНУТОГО +","Связь со мной","Фейсбилдинг"],buttonText:"КУПИТЬ ПРЕМИУМ КУРС",secondButtonText:"КУПИТЬ ВИТАМИНЫ И ПОЛУЧИТЬ ДОСТУП",buttonAction:()=>{localStorage.setItem("subscription_tier","premium"),i("/dashboard")},popular:!1}];return o.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[o.jsx("div",{className:"bg-primary px-4 py-6 rounded-b-3xl",children:o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx("div",{className:"w-20 h-16 mx-auto",children:o.jsx("img",{src:"/lovable-uploads/f013bf5a-7942-4ed0-aaac-dbe0ac8b7022.png",alt:"MisterMO Health",className:"w-full h-full object-contain"})}),o.jsx("h1",{className:"text-xl font-bold text-primary-foreground",children:"Выберите свой тариф"}),o.jsx("p",{className:"text-sm text-primary-foreground/80",children:"Начните путь к здоровью уже сегодня"})]})}),o.jsx("div",{className:"px-4 py-6 space-y-4",children:e.map((t,s)=>o.jsxs(Y,{className:`bg-dark-surface p-6 relative ${t.popular?"border-primary":"border-border"}`,children:[t.popular&&o.jsx(sc,{className:"absolute -top-2 left-4 bg-primary text-primary-foreground",children:"Популярный"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx("h2",{className:"text-xl font-bold text-foreground",children:t.name}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-2xl font-bold text-primary",children:t.price}),t.subtitle&&o.jsx("p",{className:"text-xs text-muted-foreground",children:t.subtitle})]})]}),o.jsx("div",{className:"space-y-3",children:t.features.map((n,r)=>o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(fm,{size:16,className:"text-primary mt-0.5 flex-shrink-0"}),o.jsx("span",{className:"text-sm text-foreground",children:n})]},r))}),o.jsxs("div",{className:"space-y-3 pt-4",children:[o.jsx(O,{onClick:t.buttonAction,className:"w-full h-12 font-semibold",variant:t.popular?"default":"outline",children:t.buttonText}),t.secondButtonText&&o.jsx(O,{onClick:t.buttonAction,variant:"outline",className:"w-full h-12 font-semibold",children:t.secondButtonText})]})]})]},s))})]})}function oj({title:i,subtitle:e,price:t,originalPrice:s,features:n,buttonText:r,isPopular:a,className:l,onPurchase:d,disabled:h}){return o.jsxs("div",{className:be("bg-dark-surface rounded-xl p-6 border border-border space-y-6","shadow-[var(--shadow-card)] relative overflow-hidden",a&&"border-primary/30",l),children:[a&&o.jsx("div",{className:"absolute -top-px left-4 right-4 h-px bg-gradient-to-r from-transparent via-primary to-transparent"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"text-lg font-bold text-primary uppercase",children:i}),e&&o.jsx("p",{className:"text-sm text-muted-foreground",children:e}),t&&o.jsxs("div",{className:"flex items-baseline gap-2",children:[o.jsx("span",{className:"text-2xl font-bold text-foreground",children:t}),s&&o.jsx("span",{className:"text-lg text-muted-foreground line-through",children:s})]})]}),o.jsx("div",{className:"space-y-3",children:n.map((u,f)=>o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:be("flex-shrink-0 w-5 h-5 rounded border-2 flex items-center justify-center",u.included?"bg-primary border-primary":"border-muted-foreground/30"),children:u.included&&o.jsx(fm,{size:12,className:"text-primary-foreground"})}),o.jsx("span",{className:be("text-sm",u.included?"text-foreground":"text-muted-foreground"),children:u.text})]},f))}),o.jsx(O,{className:"w-full h-12 text-sm font-semibold",variant:a?"default":"outline",onClick:d,disabled:h,children:r})]})}const lj=[{title:"БАЗОВЫЙ - БЕСПЛАТНО",subtitle:"Темы / Меню / Чеклист / Расписание дня / Справочник продуктов / Дыхательная гимнастика / Зарядка",features:[{text:"Разрешенный или запрещенный КБЖУ",included:!0},{text:"MisterMo Genetics Пройти генетическое тестирование",included:!0},{text:"Узнай себя! Участник",included:!0},{text:"ДЕСЕРТЫ ФРАНШИЗА ПАРТНЕРСТВО",included:!0},{text:"ДОСТАВКА ПИТАНИЯ В Казахстане ПОЛУЧИ СКИДКУ",included:!0},{text:"РЕФЕРАЛЬНОЙ ССЫЛКОЙ получи доступ во всех функциях",included:!1}],buttonText:"НАЧАТЬ БАЗОВЫЙ КУРС"},{title:"ПРОДВИНУТЫЙ - 30 000тг",subtitle:"(или покупка витаминов на 30000тг)",originalPrice:"50000тг",price:"30 000тг",features:[{text:"ТОЖЕ САМОЕ ЧТО БАЗОВЫЙ + ЧАТ общения и поддержки",included:!0},{text:"Рецепты",included:!0},{text:"Сканер еды",included:!0},{text:"(сам определяет калории по фото)",included:!0},{text:"Аналитика и статистика",included:!0},{text:"Дополнительные темы",included:!0},{text:"Вечный доступ к темам",included:!0}],buttonText:"КУПИТЬ ПРОДВИНУТЫЙ КУРС",isPopular:!0},{title:"ПРЕМИУМ - 50 000тг",subtitle:"(или покупка витаминов на 50000тг)",price:"50 000тг",features:[{text:"ТОЖЕ САМОЕ ЧТО ПРОДВИНУТЫЙ + Фитнес",included:!0},{text:"Фейсбилдинг",included:!0},{text:"MisterMo Genetics Пройти генетическое тестирование",included:!0},{text:"Узнай себя! Участник",included:!0},{text:"ДЕСЕРТЫ ФРАНШИЗА ПАРТНЕРСТВО",included:!0},{text:"ДОСТАВКА ПИТАНИЯ В Казахстане ПОЛУЧИ СКИДКУ",included:!0},{text:"РЕФЕРАЛЬНОЙ ССЫЛКОЙ получи доступ во всех функциях",included:!0}],buttonText:"КУПИТЬ ПРЕМИУМ КУРС"}];function cj(){const{user:i,updateSubscriptionTier:e}=Mi(),{toast:t}=Hl(),[s,n]=N.useState(!1),r=async a=>{n(!0);try{await e(a),t({title:"Тариф обновлен!",description:`Вы успешно приобрели ${a} тариф`}),window.location.href="/"}catch{t({title:"Ошибка",description:"Не удалось обновить тариф",variant:"destructive"})}finally{n(!1)}};return o.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[o.jsx("div",{className:"bg-primary px-4 py-6 rounded-b-3xl",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-white/10 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-lg",children:"💰"})}),o.jsxs("div",{children:[o.jsxs("p",{className:"text-sm text-primary-foreground/80",children:["Привет ",(i==null?void 0:i.first_name)||"Никита","!"]}),o.jsx("p",{className:"text-xs text-primary-foreground/60",children:"Сегодня тот самый день!"})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-sm font-medium text-primary-foreground",children:"mister°"}),o.jsx("p",{className:"text-lg font-bold text-primary-foreground",children:"MO"})]})]})}),o.jsxs("div",{className:"px-4 py-6",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:"Выберите тариф"}),o.jsx("p",{className:"text-muted-foreground",children:"Получите доступ к системе Морачковского"})]}),o.jsx("div",{className:"space-y-6",children:lj.map((a,l)=>{const d=a.title.includes("БАЗОВЫЙ")&&(i==null?void 0:i.subscription_tier)==="basic"||a.title.includes("ПРОДВИНУТЫЙ")&&(i==null?void 0:i.subscription_tier)==="advanced"||a.title.includes("ПРЕМИУМ")&&(i==null?void 0:i.subscription_tier)==="premium",h=a.title.includes("ПРОДВИНУТЫЙ")?"advanced":a.title.includes("ПРЕМИУМ")?"premium":"basic";return o.jsx(oj,{title:a.title,subtitle:a.subtitle,price:a.price,originalPrice:a.originalPrice,features:a.features,buttonText:d?"ТЕКУЩИЙ ТАРИФ":a.buttonText,isPopular:a.isPopular,onPurchase:()=>!d&&r(h),disabled:d||s},l)})}),o.jsxs("div",{className:"mt-8 text-center",children:[o.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Выберите подходящий план и начните свой путь к здоровью"}),o.jsxs("div",{className:"text-xs text-muted-foreground",children:[o.jsx("p",{children:"✓ Безопасная оплата"}),o.jsx("p",{children:"✓ Моментальный доступ"}),o.jsx("p",{children:"✓ Поддержка 24/7"})]})]})]})]})}function dj(){const i=Ss(),{user:e}=Mi(),{updateProgress:t}=Lm(),{toast:s}=Hl(),[n,r]=N.useState(!1),[a,l]=N.useState(!1),[d,h]=N.useState(!1),[u,f]=N.useState({name:"",calories:"",protein:"",carbs:"",fat:"",weight:""}),m=async()=>{if(!e){s({title:"Ошибка",description:"Пользователь не авторизован",variant:"destructive"});return}r(!0);try{await new Promise(v=>setTimeout(v,2e3)),f({name:"Яблоко",calories:"52",protein:"0.3",carbs:"14",fat:"0.2",weight:"150"}),s({title:"Сканирование завершено!",description:"Продукт распознан как яблоко"})}catch{s({title:"Ошибка сканирования",description:"Не удалось распознать продукт",variant:"destructive"})}finally{r(!1)}},p=async()=>{if(!e){s({title:"Ошибка",description:"Пользователь не авторизован",variant:"destructive"});return}l(!0);try{await new Promise(v=>setTimeout(v,1500)),f({name:"Банан",calories:"89",protein:"1.1",carbs:"23",fat:"0.3",weight:"120"}),s({title:"Фото загружено!",description:"Продукт распознан как банан"})}catch{s({title:"Ошибка загрузки",description:"Не удалось загрузить фото",variant:"destructive"})}finally{l(!1)}},x=async()=>{if(!e||!u.calories||!u.weight){s({title:"Ошибка",description:"Заполните все обязательные поля",variant:"destructive"});return}try{const v=parseFloat(u.calories),y=parseFloat(u.weight);await t({calories_consumed:v,weight:y}),s({title:"Успешно!",description:"Данные сохранены в дневник питания"}),i("/dashboard")}catch{s({title:"Ошибка",description:"Не удалось сохранить данные",variant:"destructive"})}},g=(v,y)=>{f(S=>({...S,[v]:y}))};return o.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[o.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-purple-600 px-4 py-6 rounded-b-3xl",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx(O,{variant:"ghost",size:"sm",onClick:()=>i(-1),className:"text-white hover:bg-white/20",children:o.jsx(Yu,{size:20})}),o.jsx("h1",{className:"text-xl font-bold text-white",children:"Сканер еды"}),o.jsx("div",{className:"w-8"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-16 h-16 mx-auto mb-3 bg-white/20 rounded-full flex items-center justify-center",children:o.jsx(uu,{size:32,className:"text-white"})}),o.jsx("h2",{className:"text-lg font-semibold text-white",children:"Определите калории и КБЖУ"}),o.jsx("p",{className:"text-white/80 text-sm",children:"Сканируйте или загружайте фото продуктов"})]})]}),o.jsxs("div",{className:"px-4 py-6 space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsx(O,{onClick:m,disabled:n,className:"h-20 bg-gradient-to-r from-green-500 to-teal-600 text-white",children:o.jsxs("div",{className:"text-center",children:[o.jsx(uu,{size:24,className:"mx-auto mb-2"}),o.jsx("span",{className:"text-sm font-medium",children:n?"Сканирую...":"Сканировать"})]})}),o.jsx(O,{onClick:p,disabled:a,className:"h-20 bg-gradient-to-r from-purple-500 to-pink-600 text-white",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Rw,{size:24,className:"mx-auto mb-2"}),o.jsx("span",{className:"text-sm font-medium",children:a?"Загружаю...":"Загрузить фото"})]})})]}),o.jsx(Y,{className:"bg-dark-surface p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Ручной ввод"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Введите данные о продукте вручную"})]}),o.jsx(O,{variant:d?"default":"outline",size:"sm",onClick:()=>h(!d),children:d?"Скрыть":"Показать"})]})}),d&&o.jsxs(Y,{className:"bg-dark-surface p-4 space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Информация о продукте"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(tt,{htmlFor:"name",children:"Название продукта"}),o.jsx(et,{id:"name",value:u.name,onChange:v=>g("name",v.target.value),placeholder:"Например: Яблоко"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(tt,{htmlFor:"calories",children:"Калории *"}),o.jsx(et,{id:"calories",type:"number",value:u.calories,onChange:v=>g("calories",v.target.value),placeholder:"52"})]}),o.jsxs("div",{children:[o.jsx(tt,{htmlFor:"weight",children:"Вес (г) *"}),o.jsx(et,{id:"weight",type:"number",value:u.weight,onChange:v=>g("weight",v.target.value),placeholder:"150"})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx(tt,{htmlFor:"protein",children:"Белки (г)"}),o.jsx(et,{id:"protein",type:"number",step:"0.1",value:u.protein,onChange:v=>g("protein",v.target.value),placeholder:"0.3"})]}),o.jsxs("div",{children:[o.jsx(tt,{htmlFor:"carbs",children:"Углеводы (г)"}),o.jsx(et,{id:"carbs",type:"number",step:"0.1",value:u.carbs,onChange:v=>g("carbs",v.target.value),placeholder:"14"})]}),o.jsxs("div",{children:[o.jsx(tt,{htmlFor:"fat",children:"Жиры (г)"}),o.jsx(et,{id:"fat",type:"number",step:"0.1",value:u.fat,onChange:v=>g("fat",v.target.value),placeholder:"0.2"})]})]})]})]}),(u.name||u.calories)&&o.jsxs(Y,{className:"bg-dark-surface p-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Результат анализа"}),o.jsxs("div",{className:"space-y-3",children:[u.name&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-muted-foreground",children:"Продукт:"}),o.jsx("span",{className:"font-medium text-foreground",children:u.name})]}),u.calories&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-muted-foreground",children:"Калории:"}),o.jsxs("span",{className:"font-bold text-primary",children:[u.calories," ккал"]})]}),u.weight&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-muted-foreground",children:"Вес:"}),o.jsxs("span",{className:"font-medium text-foreground",children:[u.weight," г"]})]}),(u.protein||u.carbs||u.fat)&&o.jsx("div",{className:"pt-3 border-t border-border",children:o.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-muted-foreground",children:"Белки"}),o.jsxs("div",{className:"font-medium text-foreground",children:[u.protein||"0"," г"]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-muted-foreground",children:"Углеводы"}),o.jsxs("div",{className:"font-medium text-foreground",children:[u.carbs||"0"," г"]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-muted-foreground",children:"Жиры"}),o.jsxs("div",{className:"font-medium text-foreground",children:[u.fat||"0"," г"]})]})]})})]})]}),u.calories&&u.weight&&o.jsxs(O,{onClick:x,className:"w-full h-12 text-lg font-semibold bg-gradient-to-r from-green-500 to-teal-600",children:[o.jsx(Ew,{size:20,className:"mr-2"}),"Сохранить в дневник"]}),o.jsx(Y,{className:"bg-dark-surface p-4",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-500 to-pink-600 rounded-full flex items-center justify-center",children:o.jsx($x,{size:20,className:"text-white"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-medium text-foreground",children:"Нужна помощь?"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Спросите AI о питании и здоровье"})]}),o.jsx(O,{size:"sm",variant:"outline",onClick:()=>i("/chat"),children:"Чат"})]})})]})]})}function hj(){const i=()=>{window.open("https://t.me/mistermo_chat","_blank")};return o.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[o.jsx("div",{className:"bg-primary px-4 py-6 rounded-b-3xl",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-12 h-12 bg-white/10 rounded-full flex items-center justify-center",children:o.jsx(ns,{size:24,className:"text-white"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl font-bold text-white",children:"Общение"}),o.jsx("p",{className:"text-sm text-white/80",children:"Групповой чат участников"})]})]})}),o.jsxs("div",{className:"px-4 py-6 space-y-6",children:[o.jsxs(Y,{className:"bg-dark-surface p-6 text-center space-y-4",children:[o.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto",children:o.jsx(Lw,{size:32,className:"text-primary"})}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("h2",{className:"text-xl font-bold text-foreground",children:"Telegram чат сообщества"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Присоединяйтесь к нашему Telegram каналу для общения с экспертом и другими участниками программы Морачковского"})]}),o.jsxs(O,{onClick:i,className:"w-full bg-primary text-black font-semibold hover:bg-primary/90",size:"lg",children:[o.jsx(ns,{size:20,className:"mr-2"}),"Присоединиться к чату",o.jsx(bw,{size:16,className:"ml-2"})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"В нашем чате вы получите:"}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(Y,{className:"bg-dark-surface p-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-primary font-bold",children:"👨‍⚕️"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-foreground",children:"Прямой контакт с экспертом"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Ответы на ваши вопросы от Никиты Морачковского"})]})]})}),o.jsx(Y,{className:"bg-dark-surface p-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-primary font-bold",children:"🤝"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-foreground",children:"Поддержка сообщества"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Общение с единомышленниками и обмен опытом"})]})]})}),o.jsx(Y,{className:"bg-dark-surface p-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-primary font-bold",children:"📚"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-foreground",children:"Эксклюзивные материалы"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Дополнительные советы и рекомендации"})]})]})}),o.jsx(Y,{className:"bg-dark-surface p-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-primary font-bold",children:"⚡"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-foreground",children:"Быстрые ответы"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Активное сообщество отвечает 24/7"})]})]})})]})]}),o.jsxs(Y,{className:"bg-dark-surface p-4 space-y-3",children:[o.jsx("h3",{className:"text-sm font-semibold text-foreground",children:"Правила чата"}),o.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[o.jsx("p",{children:"• Будьте вежливы и уважительны к другим участникам"}),o.jsx("p",{children:"• Задавайте вопросы по программе и делитесь опытом"}),o.jsx("p",{children:"• Никакого спама и рекламы сторонних продуктов"}),o.jsx("p",{children:"• Эксперт отвечает с 9:00 до 21:00 (МСК)"})]})]}),o.jsxs(Y,{className:"bg-primary/5 border-primary/20 p-4 text-center",children:[o.jsx("p",{className:"text-sm text-foreground mb-3",children:"Не упустите возможность получить поддержку и советы от эксперта!"}),o.jsxs(O,{onClick:i,variant:"outline",className:"border-primary text-primary hover:bg-primary hover:text-black",children:["Присоединиться сейчас",o.jsx(fw,{size:16,className:"ml-2"})]})]})]})]})}const Wr=Qy,uj=Jy,qb=N.forwardRef(({className:i,...e},t)=>o.jsx(Mx,{ref:t,className:be("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",i),...e}));qb.displayName=Mx.displayName;const Ui=N.forwardRef(({className:i,children:e,...t},s)=>o.jsxs(uj,{children:[o.jsx(qb,{}),o.jsxs(Lx,{ref:s,className:be("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",i),...t,children:[e,o.jsxs(Zy,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[o.jsx(pm,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ui.displayName=Lx.displayName;const yo=({className:i,...e})=>o.jsx("div",{className:be("flex flex-col space-y-1.5 text-center sm:text-left",i),...e});yo.displayName="DialogHeader";const wo=N.forwardRef(({className:i,...e},t)=>o.jsx(Ix,{ref:t,className:be("text-lg font-semibold leading-none tracking-tight",i),...e}));wo.displayName=Ix.displayName;const fj=N.forwardRef(({className:i,...e},t)=>o.jsx(Dx,{ref:t,className:be("text-sm text-muted-foreground",i),...e}));fj.displayName=Dx.displayName;function pj({achievement:i,isOpen:e,onClose:t}){const{toast:s}=Hl(),n=()=>{var l;const a=`🎉 Новое достижение!

${i.icon} ${i.title}
${i.description}

#МистерМО #ЗдоровыйОбразЖизни #Достижение`;if((l=window.Telegram)!=null&&l.WebApp){const d=`https://www.instagram.com/stories/camera/?text=${encodeURIComponent(a)}`;window.open(d,"_blank")}else navigator.clipboard.writeText(a),s({title:"Текст скопирован!",description:"Вставьте его в Instagram Stories"})},r=()=>{const a=`🎉 Новое достижение!

${i.icon} ${i.title}
${i.description}

#МистерМО #ЗдоровыйОбразЖизни #Достижение`;navigator.clipboard.writeText(a),s({title:"Скопировано!",description:"Поделитесь своим достижением в социальных сетях"})};return i.unlocked?o.jsx(Wr,{open:e,onOpenChange:t,children:o.jsx(Ui,{className:"bg-gradient-to-br from-yellow-400 via-yellow-500 to-amber-600 border-yellow-300 max-w-sm mx-auto",children:o.jsxs("div",{className:"text-center space-y-6 py-6",children:[o.jsx("div",{className:"w-24 h-16 mx-auto",children:o.jsx("img",{src:"/lovable-uploads/f013bf5a-7942-4ed0-aaac-dbe0ac8b7022.png",alt:"MisterMO Health",className:"w-full h-full object-contain"})}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"text-6xl",children:"🏆"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("h2",{className:"text-2xl font-bold text-amber-900",children:"Поздравляем!"}),o.jsx("h3",{className:"text-lg font-semibold text-amber-800",children:i.title}),o.jsx("p",{className:"text-sm text-amber-700",children:i.description})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("p",{className:"text-sm font-medium text-amber-900",children:"🌟 Поделитесь своим успехом!"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs(O,{onClick:n,className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white",children:[o.jsx(zx,{size:18,className:"mr-2"}),"Поделиться в Instagram Stories"]}),o.jsxs(O,{onClick:r,variant:"outline",className:"w-full bg-white/20 border-amber-300 text-amber-900 hover:bg-white/30",children:[o.jsx(kw,{size:18,className:"mr-2"}),"Скопировать для других соцсетей"]})]})]}),o.jsx(O,{onClick:t,variant:"ghost",size:"sm",className:"absolute top-4 right-4 text-amber-800 hover:bg-white/20",children:o.jsx(pm,{size:20})})]})})}):null}function mj(){const[i,e]=N.useState(null),t=[{id:"early-sleep",icon:"🌙",title:"Неделя раннего сна",description:"7 дней ложились спать до 23:00",unlocked:!0},{id:"no-breakfast",icon:"🌅",title:"2 недели без завтрака",description:"14 дней интервального голодания",unlocked:!0},{id:"vitamins",icon:"💊",title:"10 дней приема витаминов",description:"Не пропускали витамины 10 дней подряд",unlocked:!0},{id:"weight-loss",icon:"⚖️",title:"Первые результаты",description:"Потеряли первые 2 кг",unlocked:!1},{id:"month-program",icon:"📅",title:"Месяц в программе",description:"30 дней следования системе",unlocked:!1}],s=[{label:"Дней в программе",value:"23",trend:"+5"},{label:"Потеря веса (кг)",value:"4.2",trend:"-1.2"},{label:"Выполнено заданий",value:"89%",trend:"+12%"},{label:"Средний балл",value:"8.7",trend:"+0.3"}];return o.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[o.jsx("div",{className:"bg-primary px-4 py-6 rounded-b-3xl",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-16 h-16 bg-white/10 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-xl text-white",children:"Н"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-lg font-bold text-primary-foreground",children:"Никита"}),o.jsx("p",{className:"text-sm text-primary-foreground/80",children:"Премиум участник"}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[o.jsx(xg,{size:14,className:"text-yellow-400"}),o.jsx("span",{className:"text-xs text-primary-foreground/60",children:"Уровень 3"})]})]})]}),o.jsx(O,{size:"sm",variant:"ghost",className:"text-white",children:o.jsx(vg,{size:18})})]})}),o.jsxs("div",{className:"px-4 py-6 space-y-6",children:[o.jsxs(Y,{className:"bg-dark-surface p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Ваш тариф"}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(xg,{size:16,className:"text-yellow-400"}),o.jsx("span",{className:"text-sm font-medium text-primary",children:"ПРЕМИУМ"})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-muted-foreground",children:"Действует до"}),o.jsx("span",{className:"text-foreground font-medium",children:"15.02.2024"})]}),o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-muted-foreground",children:"Осталось дней"}),o.jsx("span",{className:"text-primary font-medium",children:"42 дня"})]}),o.jsx(nf,{value:73,className:"h-2"})]}),o.jsx(O,{className:"w-full mt-4",children:"ПРОДЛИТЬ ПОДПИСКУ"})]}),o.jsxs(Y,{className:"bg-dark-surface p-4",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(Hf,{size:20,className:"text-primary"}),o.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Статистика"})]}),o.jsx("div",{className:"grid grid-cols-2 gap-4",children:s.map((n,r)=>o.jsxs("div",{className:"text-center p-3 bg-background rounded-lg",children:[o.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:n.label}),o.jsx("p",{className:"text-xl font-bold text-foreground",children:n.value}),o.jsx("p",{className:`text-xs ${n.trend.startsWith("+")?"text-primary":"text-red-400"}`,children:n.trend})]},r))})]}),o.jsxs(Y,{className:"bg-dark-surface p-4",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(pw,{size:20,className:"text-primary"}),o.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Достижения"})]}),o.jsx("div",{className:"space-y-3",children:t.map((n,r)=>o.jsxs("div",{onClick:()=>n.unlocked&&e(n),className:`flex items-center gap-4 p-3 rounded-lg border cursor-pointer transition-all ${n.unlocked?"bg-primary/5 border-primary/20 hover:bg-primary/10":"bg-background border-border opacity-60"}`,children:[o.jsx("div",{className:"text-2xl",children:n.icon}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-sm font-medium text-foreground",children:n.title}),o.jsx("p",{className:"text-xs text-muted-foreground",children:n.description})]}),n.unlocked&&o.jsx("div",{className:"w-6 h-6 bg-primary rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-primary-foreground text-xs",children:"✓"})})]},r))})]}),o.jsxs(Y,{className:"bg-dark-surface p-4",children:[o.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"Быстрые действия"}),o.jsx("div",{className:"space-y-3",children:[{icon:mw,label:"Календарь питания",color:"text-blue-400"},{icon:Hf,label:"Отчеты и аналитика",color:"text-green-400"},{icon:vg,label:"Настройки профиля",color:"text-gray-400"}].map((n,r)=>o.jsxs(O,{variant:"outline",className:"w-full justify-start gap-3 h-12",children:[o.jsx(n.icon,{size:20,className:n.color}),o.jsx("span",{children:n.label})]},r))})]}),o.jsxs(Y,{className:"bg-dark-surface p-4",children:[o.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"Поддержка"}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(O,{variant:"outline",className:"w-full justify-start",children:"📞 Связаться с экспертом"}),o.jsx(O,{variant:"outline",className:"w-full justify-start",children:"❓ Частые вопросы"})]})]})]}),i&&o.jsx(pj,{achievement:i,isOpen:!!i,onClose:()=>e(null)})]})}const $t=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Zf=[.001,0,0,.001,0,0],Tf=1.35,bs={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Mn={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Xb="pdfjs_internal_editor_",ie={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},me={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},Yb={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Ct={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Nc={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Ge={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},fo={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},hh={ERRORS:0,WARNINGS:1,INFOS:5},_c={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},jh={moveTo:0,lineTo:1,curveTo:2,closePath:3},Kb={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let rf=hh.WARNINGS;function gj(i){Number.isInteger(i)&&(rf=i)}function xj(){return rf}function af(i){rf>=hh.INFOS&&console.log(`Info: ${i}`)}function re(i){rf>=hh.WARNINGS&&console.log(`Warning: ${i}`)}function _e(i){throw new Error(i)}function st(i,e){i||_e(e)}function bj(i){switch(i==null?void 0:i.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Im(i,e=null,t=null){if(!i)return null;if(t&&typeof i=="string"){if(t.addDefaultProtocol&&i.startsWith("www.")){const n=i.match(/\./g);(n==null?void 0:n.length)>=2&&(i=`http://${i}`)}if(t.tryConvertEncoding)try{i=Nj(i)}catch{}}const s=e?URL.parse(i,e):URL.parse(i);return bj(s)?s:null}function Dm(i,e,t=!1){const s=URL.parse(i);return s?(s.hash=e,s.href):t&&Im(i,"http://example.com")?i.split("#",1)[0]+`${e?`#${e}`:""}`:""}function pe(i,e,t,s=!1){return Object.defineProperty(i,e,{value:t,enumerable:!s,configurable:!0,writable:!1}),t}const oo=function(){function e(t,s){this.message=t,this.name=s}return e.prototype=new Error,e.constructor=e,e}();class qg extends oo{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Pf extends oo{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class vu extends oo{constructor(e){super(e,"InvalidPDFException")}}class kc extends oo{constructor(e,t,s){super(e,"ResponseException"),this.status=t,this.missing=s}}class vj extends oo{constructor(e){super(e,"FormatError")}}class Ti extends oo{constructor(e){super(e,"AbortException")}}function Jb(i){(typeof i!="object"||(i==null?void 0:i.length)===void 0)&&_e("Invalid argument for bytesToString");const e=i.length,t=8192;if(e<t)return String.fromCharCode.apply(null,i);const s=[];for(let n=0;n<e;n+=t){const r=Math.min(n+t,e),a=i.subarray(n,r);s.push(String.fromCharCode.apply(null,a))}return s.join("")}function uh(i){typeof i!="string"&&_e("Invalid argument for stringToBytes");const e=i.length,t=new Uint8Array(e);for(let s=0;s<e;++s)t[s]=i.charCodeAt(s)&255;return t}function yj(i){return String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,i&255)}function wj(){const i=new Uint8Array(4);return i[0]=1,new Uint32Array(i.buffer,0,1)[0]===1}function Aj(){try{return new Function(""),!0}catch{return!1}}class xt{static get isLittleEndian(){return pe(this,"isLittleEndian",wj())}static get isEvalSupported(){return pe(this,"isEvalSupported",Aj())}static get isOffscreenCanvasSupported(){return pe(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return pe(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return pe(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return pe(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const Rf=Array.from(Array(256).keys(),i=>i.toString(16).padStart(2,"0"));var Ei,Ih,Qf;class Z{static makeHexColor(e,t,s){return`#${Rf[e]}${Rf[t]}${Rf[s]}`}static scaleMinMax(e,t){let s;e[0]?(e[0]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[3],t[3]*=e[3]):(s=t[0],t[0]=t[1],t[1]=s,s=t[2],t[2]=t[3],t[3]=s,e[1]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t,s=0){const n=e[s],r=e[s+1];e[s]=n*t[0]+r*t[2]+t[4],e[s+1]=n*t[1]+r*t[3]+t[5]}static applyTransformToBezier(e,t,s=0){const n=t[0],r=t[1],a=t[2],l=t[3],d=t[4],h=t[5];for(let u=0;u<6;u+=2){const f=e[s+u],m=e[s+u+1];e[s+u]=f*n+m*a+d,e[s+u+1]=f*r+m*l+h}}static applyInverseTransform(e,t){const s=e[0],n=e[1],r=t[0]*t[3]-t[1]*t[2];e[0]=(s*t[3]-n*t[2]+t[2]*t[5]-t[4]*t[3])/r,e[1]=(-s*t[1]+n*t[0]+t[4]*t[1]-t[5]*t[0])/r}static axialAlignedBoundingBox(e,t,s){const n=t[0],r=t[1],a=t[2],l=t[3],d=t[4],h=t[5],u=e[0],f=e[1],m=e[2],p=e[3];let x=n*u+d,g=x,v=n*m+d,y=v,S=l*f+h,j=S,E=l*p+h,C=E;if(r!==0||a!==0){const k=r*u,_=r*m,T=a*f,P=a*p;x+=T,y+=T,v+=P,g+=P,S+=k,C+=k,E+=_,j+=_}s[0]=Math.min(s[0],x,v,g,y),s[1]=Math.min(s[1],S,E,j,C),s[2]=Math.max(s[2],x,v,g,y),s[3]=Math.max(s[3],S,E,j,C)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const s=e[0],n=e[1],r=e[2],a=e[3],l=s**2+n**2,d=s*r+n*a,h=r**2+a**2,u=(l+h)/2,f=Math.sqrt(u**2-(l*h-d**2));t[0]=Math.sqrt(u+f||1),t[1]=Math.sqrt(u-f||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const s=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),n=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(s>n)return null;const r=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return r>a?null:[s,r,n,a]}static pointBoundingBox(e,t,s){s[0]=Math.min(s[0],e),s[1]=Math.min(s[1],t),s[2]=Math.max(s[2],e),s[3]=Math.max(s[3],t)}static rectBoundingBox(e,t,s,n,r){r[0]=Math.min(r[0],e,s),r[1]=Math.min(r[1],t,n),r[2]=Math.max(r[2],e,s),r[3]=Math.max(r[3],t,n)}static bezierBoundingBox(e,t,s,n,r,a,l,d,h){h[0]=Math.min(h[0],e,l),h[1]=Math.min(h[1],t,d),h[2]=Math.max(h[2],e,l),h[3]=Math.max(h[3],t,d),A(this,Ei,Qf).call(this,e,s,r,l,t,n,a,d,3*(-e+3*(s-r)+l),6*(e-2*s+r),3*(s-e),h),A(this,Ei,Qf).call(this,e,s,r,l,t,n,a,d,3*(-t+3*(n-a)+d),6*(t-2*n+a),3*(n-t),h)}}Ei=new WeakSet,Ih=function(e,t,s,n,r,a,l,d,h,u){if(h<=0||h>=1)return;const f=1-h,m=h*h,p=m*h,x=f*(f*(f*e+3*h*t)+3*m*s)+p*n,g=f*(f*(f*r+3*h*a)+3*m*l)+p*d;u[0]=Math.min(u[0],x),u[1]=Math.min(u[1],g),u[2]=Math.max(u[2],x),u[3]=Math.max(u[3],g)},Qf=function(e,t,s,n,r,a,l,d,h,u,f,m){if(Math.abs(h)<1e-12){Math.abs(u)>=1e-12&&A(this,Ei,Ih).call(this,e,t,s,n,r,a,l,d,-f/u,m);return}const p=u**2-4*f*h;if(p<0)return;const x=Math.sqrt(p),g=2*h;A(this,Ei,Ih).call(this,e,t,s,n,r,a,l,d,(-u+x)/g,m),A(this,Ei,Ih).call(this,e,t,s,n,r,a,l,d,(-u-x)/g,m)},w(Z,Ei);function Nj(i){return decodeURIComponent(escape(i))}let Mf=null,Xg=null;function Zb(i){return Mf||(Mf=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Xg=new Map([["ﬅ","ſt"]])),i.replaceAll(Mf,(e,t,s)=>t?t.normalize("NFKC"):Xg.get(s))}function Om(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const i=new Uint8Array(32);return crypto.getRandomValues(i),Jb(i)}const Fm="pdfjs_internal_id_";function Sj(i,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[s,n,...r]=t;if(!i(s)&&!Number.isInteger(s)||!e(n))return!1;const a=r.length;let l=!0;switch(n.name){case"XYZ":if(a<2||a>3)return!1;break;case"Fit":case"FitB":return a===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(a>1)return!1;break;case"FitR":if(a!==4)return!1;l=!1;break;default:return!1}for(const d of r)if(!(typeof d=="number"||l&&d===null))return!1;return!0}function Rt(i,e,t){return Math.min(Math.max(i,e),t)}function Qb(i){return Uint8Array.prototype.toBase64?i.toBase64():btoa(Jb(i))}function jj(i){return Uint8Array.fromBase64?Uint8Array.fromBase64(i):uh(atob(i))}typeof Promise.try!="function"&&(Promise.try=function(i,...e){return new Promise(t=>{t(i(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(i){return i.reduce((e,t)=>e+t,0)});const Wn="http://www.w3.org/2000/svg",Gr=class Gr{};z(Gr,"CSS",96),z(Gr,"PDF",72),z(Gr,"PDF_TO_CSS_UNITS",Gr.CSS/Gr.PDF);let Pi=Gr;async function Yl(i,e="text"){if(nc(i,document.baseURI)){const t=await fetch(i);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,s)=>{const n=new XMLHttpRequest;n.open("GET",i,!0),n.responseType=e,n.onreadystatechange=()=>{if(n.readyState===XMLHttpRequest.DONE){if(n.status===200||n.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(n.response);return}t(n.responseText);return}s(new Error(n.statusText))}},n.send(null)})}class fh{constructor({viewBox:e,userUnit:t,scale:s,rotation:n,offsetX:r=0,offsetY:a=0,dontFlip:l=!1}){this.viewBox=e,this.userUnit=t,this.scale=s,this.rotation=n,this.offsetX=r,this.offsetY=a,s*=t;const d=(e[2]+e[0])/2,h=(e[3]+e[1])/2;let u,f,m,p;switch(n%=360,n<0&&(n+=360),n){case 180:u=-1,f=0,m=0,p=1;break;case 90:u=0,f=1,m=1,p=0;break;case 270:u=0,f=-1,m=-1,p=0;break;case 0:u=1,f=0,m=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}l&&(m=-m,p=-p);let x,g,v,y;u===0?(x=Math.abs(h-e[1])*s+r,g=Math.abs(d-e[0])*s+a,v=(e[3]-e[1])*s,y=(e[2]-e[0])*s):(x=Math.abs(d-e[0])*s+r,g=Math.abs(h-e[1])*s+a,v=(e[2]-e[0])*s,y=(e[3]-e[1])*s),this.transform=[u*s,f*s,m*s,p*s,x-u*s*d-m*s*h,g-f*s*d-p*s*h],this.width=v,this.height=y}get rawDims(){const e=this.viewBox;return pe(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:s=this.offsetX,offsetY:n=this.offsetY,dontFlip:r=!1}={}){return new fh({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:n,dontFlip:r})}convertToViewportPoint(e,t){const s=[e,t];return Z.applyTransform(s,this.transform),s}convertToViewportRectangle(e){const t=[e[0],e[1]];Z.applyTransform(t,this.transform);const s=[e[2],e[3]];return Z.applyTransform(s,this.transform),[t[0],t[1],s[0],s[1]]}convertToPdfPoint(e,t){const s=[e,t];return Z.applyInverseTransform(s,this.transform),s}}class of extends oo{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function ph(i){const e=i.length;let t=0;for(;t<e&&i[t].trim()==="";)t++;return i.substring(t,t+5).toLowerCase()==="data:"}function lf(i){return typeof i=="string"&&/\.pdf$/i.test(i)}function e0(i){return[i]=i.split(/[#?]/,1),i.substring(i.lastIndexOf("/")+1)}function t0(i,e="document.pdf"){if(typeof i!="string")return e;if(ph(i))return re('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const s=(l=>{try{return new URL(l)}catch{try{return new URL(decodeURIComponent(l))}catch{try{return new URL(l,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(l),"https://foo.bar")}catch{return null}}}}})(i);if(!s)return e;const n=l=>{try{let d=decodeURIComponent(l);return d.includes("/")?(d=d.split("/").at(-1),d.test(/^\.pdf$/i)?d:l):d}catch{return l}},r=/\.pdf$/i,a=s.pathname.split("/").at(-1);if(r.test(a))return n(a);if(s.searchParams.size>0){const l=Array.from(s.searchParams.values()).reverse();for(const h of l)if(r.test(h))return n(h);const d=Array.from(s.searchParams.keys()).reverse();for(const h of d)if(r.test(h))return n(h)}if(s.hash){const d=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(s.hash);if(d)return n(d[0])}return e}class Yg{constructor(){z(this,"started",Object.create(null));z(this,"times",[])}time(e){e in this.started&&re(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||re(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:s}of this.times)t=Math.max(s.length,t);for(const{name:s,start:n,end:r}of this.times)e.push(`${s.padEnd(t)} ${r-n}ms
`);return e.join("")}}function nc(i,e){const t=e?URL.parse(i,e):URL.parse(i);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function Ds(i){i.preventDefault()}function Ye(i){i.preventDefault(),i.stopPropagation()}function Ej(i){console.log("Deprecated API usage: "+i)}var Ic;class cf{static toDateObject(e){if(!e||typeof e!="string")return null;c(this,Ic)||b(this,Ic,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=c(this,Ic).exec(e);if(!t)return null;const s=parseInt(t[1],10);let n=parseInt(t[2],10);n=n>=1&&n<=12?n-1:0;let r=parseInt(t[3],10);r=r>=1&&r<=31?r:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let l=parseInt(t[5],10);l=l>=0&&l<=59?l:0;let d=parseInt(t[6],10);d=d>=0&&d<=59?d:0;const h=t[7]||"Z";let u=parseInt(t[8],10);u=u>=0&&u<=23?u:0;let f=parseInt(t[9],10)||0;return f=f>=0&&f<=59?f:0,h==="-"?(a+=u,l+=f):h==="+"&&(a-=u,l-=f),new Date(Date.UTC(s,n,r,a,l,d))}}Ic=new WeakMap,w(cf,Ic);function s0(i,{scale:e=1,rotation:t=0}){const{width:s,height:n}=i.attributes.style,r=[0,0,parseInt(s),parseInt(n)];return new fh({viewBox:r,userUnit:1,scale:e,rotation:t})}function Bm(i){if(i.startsWith("#")){const e=parseInt(i.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return i.startsWith("rgb(")?i.slice(4,-1).split(",").map(e=>parseInt(e)):i.startsWith("rgba(")?i.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(re(`Not a valid color format: "${i}"`),[0,0,0])}function Cj(i){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of i.keys()){e.style.color=t;const s=window.getComputedStyle(e).color;i.set(t,Bm(s))}e.remove()}function Ue(i){const{a:e,b:t,c:s,d:n,e:r,f:a}=i.getTransform();return[e,t,s,n,r,a]}function fn(i){const{a:e,b:t,c:s,d:n,e:r,f:a}=i.getTransform().invertSelf();return[e,t,s,n,r,a]}function Rr(i,e,t=!1,s=!0){if(e instanceof fh){const{pageWidth:n,pageHeight:r}=e.rawDims,{style:a}=i,l=xt.isCSSRoundSupported,d=`var(--total-scale-factor) * ${n}px`,h=`var(--total-scale-factor) * ${r}px`,u=l?`round(down, ${d}, var(--scale-round-x))`:`calc(${d})`,f=l?`round(down, ${h}, var(--scale-round-y))`:`calc(${h})`;!t||e.rotation%180===0?(a.width=u,a.height=f):(a.width=f,a.height=u)}s&&i.setAttribute("data-main-rotation",e.rotation)}class on{constructor(){const{pixelRatio:e}=on;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,s,n,r=-1){let a=1/0,l=1/0,d=1/0;s=on.capPixels(s,r),s>0&&(a=Math.sqrt(s/(e*t))),n!==-1&&(l=n/e,d=n/t);const h=Math.min(a,l,d);return this.sx>h||this.sy>h?(this.sx=h,this.sy=h,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,s):s}return e}}const yu=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var Vi,Yr,Es,Wi,Dc,To,Oc,ku,n0,Ut,i0,r0,ic,Dh;const Xn=class Xn{constructor(e){w(this,Ut);w(this,Vi,null);w(this,Yr,null);w(this,Es);w(this,Wi,null);w(this,Dc,null);w(this,To,null);b(this,Es,e),c(Xn,Oc)||b(Xn,Oc,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=b(this,Vi,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=c(this,Es)._uiManager._signal;e.addEventListener("contextmenu",Ds,{signal:t}),e.addEventListener("pointerdown",A(Xn,ku,n0),{signal:t});const s=b(this,Wi,document.createElement("div"));s.className="buttons",e.append(s);const n=c(this,Es).toolbarPosition;if(n){const{style:r}=e,a=c(this,Es)._uiManager.direction==="ltr"?1-n[0]:n[0];r.insetInlineEnd=`${100*a}%`,r.top=`calc(${100*n[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return c(this,Vi)}hide(){var e;c(this,Vi).classList.add("hidden"),(e=c(this,Yr))==null||e.hideDropdown()}show(){var e;c(this,Vi).classList.remove("hidden"),(e=c(this,Dc))==null||e.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=c(this,Es),s=document.createElement("button");s.className="delete",s.tabIndex=0,s.setAttribute("data-l10n-id",c(Xn,Oc)[e]),A(this,Ut,ic).call(this,s),s.addEventListener("click",n=>{t.delete()},{signal:t._signal}),c(this,Wi).append(s)}async addAltText(e){const t=await e.render();A(this,Ut,ic).call(this,t),c(this,Wi).append(t,c(this,Ut,Dh)),b(this,Dc,e)}addColorPicker(e){b(this,Yr,e);const t=e.renderButton();A(this,Ut,ic).call(this,t),c(this,Wi).append(t,c(this,Ut,Dh))}async addEditSignatureButton(e){const t=b(this,To,await e.renderEditButton(c(this,Es)));A(this,Ut,ic).call(this,t),c(this,Wi).append(t,c(this,Ut,Dh))}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break}}updateEditSignatureButton(e){c(this,To)&&(c(this,To).title=e)}remove(){var e;c(this,Vi).remove(),(e=c(this,Yr))==null||e.destroy(),b(this,Yr,null)}};Vi=new WeakMap,Yr=new WeakMap,Es=new WeakMap,Wi=new WeakMap,Dc=new WeakMap,To=new WeakMap,Oc=new WeakMap,ku=new WeakSet,n0=function(e){e.stopPropagation()},Ut=new WeakSet,i0=function(e){c(this,Es)._focusEventsAllowed=!1,Ye(e)},r0=function(e){c(this,Es)._focusEventsAllowed=!0,Ye(e)},ic=function(e){const t=c(this,Es)._uiManager._signal;e.addEventListener("focusin",A(this,Ut,i0).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",A(this,Ut,r0).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Ds,{signal:t})},Dh=function(){const e=document.createElement("div");return e.className="divider",e},w(Xn,ku),w(Xn,Oc,null);let ep=Xn;var Fc,Kr,Jr,Lr,a0,o0,l0;class _j{constructor(e){w(this,Lr);w(this,Fc,null);w(this,Kr,null);w(this,Jr);b(this,Jr,e)}show(e,t,s){const[n,r]=A(this,Lr,o0).call(this,t,s),{style:a}=c(this,Kr)||b(this,Kr,A(this,Lr,a0).call(this));e.append(c(this,Kr)),a.insetInlineEnd=`${100*n}%`,a.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){c(this,Kr).remove()}}Fc=new WeakMap,Kr=new WeakMap,Jr=new WeakMap,Lr=new WeakSet,a0=function(){const e=b(this,Kr,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Ds,{signal:c(this,Jr)._signal});const t=b(this,Fc,document.createElement("div"));return t.className="buttons",e.append(t),A(this,Lr,l0).call(this),e},o0=function(e,t){let s=0,n=0;for(const r of e){const a=r.y+r.height;if(a<s)continue;const l=r.x+(t?r.width:0);if(a>s){n=l,s=a;continue}t?l>n&&(n=l):l<n&&(n=l)}return[t?1-n:n,s]},l0=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const s=c(this,Jr)._signal;e.addEventListener("contextmenu",Ds,{signal:s}),e.addEventListener("click",()=>{c(this,Jr).highlightSelection("floating_button")},{signal:s}),c(this,Fc).append(e)};function c0(i,e,t){for(const s of t)e.addEventListener(s,i[s].bind(i))}var Tu;class kj{constructor(){w(this,Tu,0)}get id(){return`${Xb}${It(this,Tu)._++}`}}Tu=new WeakMap;var Po,Bc,kt,Ro,Oh;const ng=class ng{constructor(){w(this,Ro);w(this,Po,Om());w(this,Bc,0);w(this,kt,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),n=new Image;n.src=e;const r=n.decode().then(()=>(s.drawImage(n,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return pe(this,"_isSVGFittingCanvas",r)}async getFromFile(e){const{lastModified:t,name:s,size:n,type:r}=e;return A(this,Ro,Oh).call(this,`${t}_${s}_${n}_${r}`,e)}async getFromUrl(e){return A(this,Ro,Oh).call(this,e,e)}async getFromBlob(e,t){const s=await t;return A(this,Ro,Oh).call(this,e,s)}async getFromId(e){c(this,kt)||b(this,kt,new Map);const t=c(this,kt).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:s}=t;return delete t.blobPromise,this.getFromBlob(t.id,s)}return this.getFromUrl(t.url)}getFromCanvas(e,t){c(this,kt)||b(this,kt,new Map);let s=c(this,kt).get(e);if(s!=null&&s.bitmap)return s.refCounter+=1,s;const n=new OffscreenCanvas(t.width,t.height);return n.getContext("2d").drawImage(t,0,0),s={bitmap:n.transferToImageBitmap(),id:`image_${c(this,Po)}_${It(this,Bc)._++}`,refCounter:1,isSvg:!1},c(this,kt).set(e,s),c(this,kt).set(s.id,s),s}getSvgUrl(e){const t=c(this,kt).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var n;c(this,kt)||b(this,kt,new Map);const t=c(this,kt).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:s}=t;if(!t.url&&!t.file){const r=new OffscreenCanvas(s.width,s.height);r.getContext("bitmaprenderer").transferFromImageBitmap(s),t.blobPromise=r.convertToBlob()}(n=s.close)==null||n.call(s),t.bitmap=null}isValidId(e){return e.startsWith(`image_${c(this,Po)}_`)}};Po=new WeakMap,Bc=new WeakMap,kt=new WeakMap,Ro=new WeakSet,Oh=async function(e,t){c(this,kt)||b(this,kt,new Map);let s=c(this,kt).get(e);if(s===null)return null;if(s!=null&&s.bitmap)return s.refCounter+=1,s;try{s||(s={bitmap:null,id:`image_${c(this,Po)}_${It(this,Bc)._++}`,refCounter:0,isSvg:!1});let n;if(typeof t=="string"?(s.url=t,n=await Yl(t,"blob")):t instanceof File?n=s.file=t:t instanceof Blob&&(n=t),n.type==="image/svg+xml"){const r=ng._isSVGFittingCanvas,a=new FileReader,l=new Image,d=new Promise((h,u)=>{l.onload=()=>{s.bitmap=l,s.isSvg=!0,h()},a.onload=async()=>{const f=s.svgUrl=a.result;l.src=await r?`${f}#svgView(preserveAspectRatio(none))`:f},l.onerror=a.onerror=u});a.readAsDataURL(n),await d}else s.bitmap=await createImageBitmap(n);s.refCounter=1}catch(n){re(n),s=null}return c(this,kt).set(e,s),s&&c(this,kt).set(s.id,s),s};let tp=ng;var qe,Gi,zc,He;class Tj{constructor(e=128){w(this,qe,[]);w(this,Gi,!1);w(this,zc);w(this,He,-1);b(this,zc,e)}add({cmd:e,undo:t,post:s,mustExec:n,type:r=NaN,overwriteIfSameType:a=!1,keepUndo:l=!1}){if(n&&e(),c(this,Gi))return;const d={cmd:e,undo:t,post:s,type:r};if(c(this,He)===-1){c(this,qe).length>0&&(c(this,qe).length=0),b(this,He,0),c(this,qe).push(d);return}if(a&&c(this,qe)[c(this,He)].type===r){l&&(d.undo=c(this,qe)[c(this,He)].undo),c(this,qe)[c(this,He)]=d;return}const h=c(this,He)+1;h===c(this,zc)?c(this,qe).splice(0,1):(b(this,He,h),h<c(this,qe).length&&c(this,qe).splice(h)),c(this,qe).push(d)}undo(){if(c(this,He)===-1)return;b(this,Gi,!0);const{undo:e,post:t}=c(this,qe)[c(this,He)];e(),t==null||t(),b(this,Gi,!1),b(this,He,c(this,He)-1)}redo(){if(c(this,He)<c(this,qe).length-1){b(this,He,c(this,He)+1),b(this,Gi,!0);const{cmd:e,post:t}=c(this,qe)[c(this,He)];e(),t==null||t(),b(this,Gi,!1)}}hasSomethingToUndo(){return c(this,He)!==-1}hasSomethingToRedo(){return c(this,He)<c(this,qe).length-1}cleanType(e){if(c(this,He)!==-1){for(let t=c(this,He);t>=0;t--)if(c(this,qe)[t].type!==e){c(this,qe).splice(t+1,c(this,He)-t),b(this,He,t);return}c(this,qe).length=0,b(this,He,-1)}}destroy(){b(this,qe,null)}}qe=new WeakMap,Gi=new WeakMap,zc=new WeakMap,He=new WeakMap;var Pu,d0;class mh{constructor(e){w(this,Pu);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=xt.platform;for(const[s,n,r={}]of e)for(const a of s){const l=a.startsWith("mac+");t&&l?(this.callbacks.set(a.slice(4),{callback:n,options:r}),this.allKeys.add(a.split("+").at(-1))):!t&&!l&&(this.callbacks.set(a,{callback:n,options:r}),this.allKeys.add(a.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const s=this.callbacks.get(A(this,Pu,d0).call(this,t));if(!s)return;const{callback:n,options:{bubbles:r=!1,args:a=[],checker:l=null}}=s;l&&!l(e,t)||(n.bind(e,...a,t)(),r||Ye(t))}}Pu=new WeakSet,d0=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const Ru=class Ru{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return Cj(e),pe(this,"_colors",e)}convert(e){const t=Bm(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[s,n]of this._colors)if(n.every((r,a)=>r===t[a]))return Ru._colorsMapping.get(s);return t}getHexCode(e){const t=this._colors.get(e);return t?Z.makeHexColor(...t):e}};z(Ru,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let sp=Ru;var Mo,is,rt,vt,Lo,Kn,Io,Cs,qi,Xi,Do,Zr,gn,Ws,Qr,$c,Hc,Oo,Uc,xn,Yi,Fo,Ki,bn,Mu,Ji,Vc,Zi,ea,ta,Qi,Wc,dt,Se,Jn,er,sa,Gc,qc,tr,vn,Zn,Xc,Yc,_s,U,Fh,np,h0,u0,Bh,f0,p0,m0,ip,g0,rp,ap,x0,Dt,Gn,b0,v0,op,y0,rc,lp;const No=class No{constructor(e,t,s,n,r,a,l,d,h,u,f,m,p,x,g){w(this,U);w(this,Mo,new AbortController);w(this,is,null);w(this,rt,new Map);w(this,vt,new Map);w(this,Lo,null);w(this,Kn,null);w(this,Io,null);w(this,Cs,new Tj);w(this,qi,null);w(this,Xi,null);w(this,Do,0);w(this,Zr,new Set);w(this,gn,null);w(this,Ws,null);w(this,Qr,new Set);z(this,"_editorUndoBar",null);w(this,$c,!1);w(this,Hc,!1);w(this,Oo,!1);w(this,Uc,null);w(this,xn,null);w(this,Yi,null);w(this,Fo,null);w(this,Ki,!1);w(this,bn,null);w(this,Mu,new kj);w(this,Ji,!1);w(this,Vc,!1);w(this,Zi,null);w(this,ea,null);w(this,ta,null);w(this,Qi,null);w(this,Wc,null);w(this,dt,ie.NONE);w(this,Se,new Set);w(this,Jn,null);w(this,er,null);w(this,sa,null);w(this,Gc,null);w(this,qc,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});w(this,tr,[0,0]);w(this,vn,null);w(this,Zn,null);w(this,Xc,null);w(this,Yc,null);w(this,_s,null);const v=this._signal=c(this,Mo).signal;b(this,Zn,e),b(this,Xc,t),b(this,Yc,s),b(this,Lo,n),b(this,er,r),this._eventBus=a,a._on("editingaction",this.onEditingAction.bind(this),{signal:v}),a._on("pagechanging",this.onPageChanging.bind(this),{signal:v}),a._on("scalechanging",this.onScaleChanging.bind(this),{signal:v}),a._on("rotationchanging",this.onRotationChanging.bind(this),{signal:v}),a._on("setpreference",this.onSetPreference.bind(this),{signal:v}),a._on("switchannotationeditorparams",y=>this.updateParams(y.type,y.value),{signal:v}),A(this,U,f0).call(this),A(this,U,x0).call(this),A(this,U,ip).call(this),b(this,Kn,l.annotationStorage),b(this,Uc,l.filterFactory),b(this,sa,d),b(this,Fo,h||null),b(this,$c,u),b(this,Hc,f),b(this,Oo,m),b(this,Wc,p||null),this.viewParameters={realScale:Pi.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=x||null,this._supportsPinchToZoom=g!==!1}static get _keyboardManager(){const e=No.prototype,t=a=>c(a,Zn).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),s=(a,{target:l})=>{if(l instanceof HTMLInputElement){const{type:d}=l;return d!=="text"&&d!=="number"}return!0},n=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return pe(this,"_keyboardManager",new mh([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],e.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:s}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&c(a,Zn).contains(l)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&c(a,Zn).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-n,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[n,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-n],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,n],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}]]))}destroy(){var e,t,s,n,r,a,l,d;(e=c(this,_s))==null||e.resolve(),b(this,_s,null),(t=c(this,Mo))==null||t.abort(),b(this,Mo,null),this._signal=null;for(const h of c(this,vt).values())h.destroy();c(this,vt).clear(),c(this,rt).clear(),c(this,Qr).clear(),(s=c(this,Qi))==null||s.clear(),b(this,is,null),c(this,Se).clear(),c(this,Cs).destroy(),(n=c(this,Lo))==null||n.destroy(),(r=c(this,er))==null||r.destroy(),(a=c(this,bn))==null||a.hide(),b(this,bn,null),(l=c(this,ta))==null||l.destroy(),b(this,ta,null),c(this,xn)&&(clearTimeout(c(this,xn)),b(this,xn,null)),c(this,vn)&&(clearTimeout(c(this,vn)),b(this,vn,null)),(d=this._editorUndoBar)==null||d.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return c(this,Wc)}get useNewAltTextFlow(){return c(this,Hc)}get useNewAltTextWhenAddingImage(){return c(this,Oo)}get hcmFilter(){return pe(this,"hcmFilter",c(this,sa)?c(this,Uc).addHCMFilter(c(this,sa).foreground,c(this,sa).background):"none")}get direction(){return pe(this,"direction",getComputedStyle(c(this,Zn)).direction)}get highlightColors(){return pe(this,"highlightColors",c(this,Fo)?new Map(c(this,Fo).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColorNames(){return pe(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),b(this,Xi,e)}setMainHighlightColorPicker(e){b(this,ta,e)}editAltText(e,t=!1){var s;(s=c(this,Lo))==null||s.editAltText(this,e,t)}getSignature(e){var t;(t=c(this,er))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return c(this,er)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":b(this,Oo,t);break}}onPageChanging({pageNumber:e}){b(this,Do,e-1)}focusMainContainer(){c(this,Zn).focus()}findParent(e,t){for(const s of c(this,vt).values()){const{x:n,y:r,width:a,height:l}=s.div.getBoundingClientRect();if(e>=n&&e<=n+a&&t>=r&&t<=r+l)return s}return null}disableUserSelect(e=!1){c(this,Xc).classList.toggle("noUserSelect",e)}addShouldRescale(e){c(this,Qr).add(e)}removeShouldRescale(e){c(this,Qr).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*Pi.PDF_TO_CSS_UNITS;for(const s of c(this,Qr))s.onScaleChanging();(t=c(this,Xi))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:s,anchorOffset:n,focusNode:r,focusOffset:a}=t,l=t.toString(),h=A(this,U,Fh).call(this,t).closest(".textLayer"),u=this.getSelectionBoxes(h);if(!u)return;t.empty();const f=A(this,U,np).call(this,h),m=c(this,dt)===ie.NONE,p=()=>{f==null||f.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:u,anchorNode:s,anchorOffset:n,focusNode:r,focusOffset:a,text:l}),m&&this.showAllEditors("highlight",!0,!0)};if(m){this.switchToMode(ie.HIGHLIGHT,p);return}p()}addToAnnotationStorage(e){!e.isEmpty()&&c(this,Kn)&&!c(this,Kn).has(e.id)&&c(this,Kn).setValue(e.id,e)}a11yAlert(e,t=null){const s=c(this,Yc);s&&(s.setAttribute("data-l10n-id",e),t?s.setAttribute("data-l10n-args",JSON.stringify(t)):s.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,c(this,Ki)&&(b(this,Ki,!1),A(this,U,Bh).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of c(this,Se))if(t.div.contains(e)){b(this,ea,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!c(this,ea))return;const[e,t]=c(this,ea);b(this,ea,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){A(this,U,ip).call(this),A(this,U,rp).call(this)}removeEditListeners(){A(this,U,g0).call(this),A(this,U,ap).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const s of c(this,Ws))if(s.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const s of c(this,Ws))if(s.isHandlingMimeForPasting(t.type)){s.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var s;if(e.preventDefault(),(s=c(this,is))==null||s.commitOrRemove(),!this.hasSelection)return;const t=[];for(const n of c(this,Se)){const r=n.serialize(!0);r&&t.push(r)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const r of t.items)for(const a of c(this,Ws))if(a.isHandlingMimeForPasting(r.type)){a.paste(r,this.currentLayer);return}let s=t.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(r){re(`paste: "${r.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const n=this.currentLayer;try{const r=[];for(const d of s){const h=await n.deserialize(d);if(!h)return;r.push(h)}const a=()=>{for(const d of r)A(this,U,op).call(this,d);A(this,U,lp).call(this,r)},l=()=>{for(const d of r)d.remove()};this.addCommands({cmd:a,undo:l,mustExec:!0})}catch(r){re(`paste: "${r.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),c(this,dt)!==ie.NONE&&!this.isEditorHandlingKeyboard&&No._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,c(this,Ki)&&(b(this,Ki,!1),A(this,U,Bh).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(A(this,U,p0).call(this),A(this,U,rp).call(this),A(this,U,Dt).call(this,{isEditing:c(this,dt)!==ie.NONE,isEmpty:A(this,U,rc).call(this),hasSomethingToUndo:c(this,Cs).hasSomethingToUndo(),hasSomethingToRedo:c(this,Cs).hasSomethingToRedo(),hasSelectedEditor:!1})):(A(this,U,m0).call(this),A(this,U,ap).call(this),A(this,U,Dt).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!c(this,Ws)){b(this,Ws,e);for(const t of c(this,Ws))A(this,U,Gn).call(this,t.defaultPropertiesToUpdate)}}getId(){return c(this,Mu).id}get currentLayer(){return c(this,vt).get(c(this,Do))}getLayer(e){return c(this,vt).get(e)}get currentPageIndex(){return c(this,Do)}addLayer(e){c(this,vt).set(e.pageIndex,e),c(this,Ji)?e.enable():e.disable()}removeLayer(e){c(this,vt).delete(e.pageIndex)}async updateMode(e,t=null,s=!1,n=!1){var r,a,l;if(c(this,dt)!==e&&!(c(this,_s)&&(await c(this,_s).promise,!c(this,_s)))){if(b(this,_s,Promise.withResolvers()),(r=c(this,Xi))==null||r.commitOrRemove(),b(this,dt,e),e===ie.NONE){this.setEditingState(!1),A(this,U,v0).call(this),(a=this._editorUndoBar)==null||a.hide(),c(this,_s).resolve();return}e===ie.SIGNATURE&&await((l=c(this,er))==null?void 0:l.loadSignatures()),this.setEditingState(!0),await A(this,U,b0).call(this),this.unselectAll();for(const d of c(this,vt).values())d.updateMode(e);if(!t){s&&this.addNewEditorFromKeyboard(),c(this,_s).resolve();return}for(const d of c(this,rt).values())d.annotationElementId===t||d.id===t?(this.setSelected(d),n&&d.enterInEditMode()):d.unselect();c(this,_s).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==c(this,dt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){var s;if(c(this,Ws)){switch(e){case me.CREATE:this.currentLayer.addNewEditor(t);return;case me.HIGHLIGHT_DEFAULT_COLOR:(s=c(this,ta))==null||s.updateColor(t);break;case me.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(c(this,Gc)||b(this,Gc,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const n of c(this,Se))n.updateParams(e,t);for(const n of c(this,Ws))n.updateDefaultParams(e,t)}}showAllEditors(e,t,s=!1){var r;for(const a of c(this,rt).values())a.editorType===e&&a.show(t);(((r=c(this,Gc))==null?void 0:r.get(me.HIGHLIGHT_SHOW_ALL))??!0)!==t&&A(this,U,Gn).call(this,[[me.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(c(this,Vc)!==e){b(this,Vc,e);for(const t of c(this,vt).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const s of c(this,rt).values())s.pageIndex===e&&t.push(s);return t}getEditor(e){return c(this,rt).get(e)}addEditor(e){c(this,rt).set(e.id,e)}removeEditor(e){var t,s;e.div.contains(document.activeElement)&&(c(this,xn)&&clearTimeout(c(this,xn)),b(this,xn,setTimeout(()=>{this.focusMainContainer(),b(this,xn,null)},0))),c(this,rt).delete(e.id),e.annotationElementId&&((t=c(this,Qi))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!c(this,Zr).has(e.annotationElementId))&&((s=c(this,Kn))==null||s.remove(e.id))}addDeletedAnnotationElement(e){c(this,Zr).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return c(this,Zr).has(e)}removeDeletedAnnotationElement(e){c(this,Zr).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){c(this,is)!==e&&(b(this,is,e),e&&A(this,U,Gn).call(this,e.propertiesToUpdate))}updateUI(e){c(this,U,y0)===e&&A(this,U,Gn).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){A(this,U,Gn).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(c(this,Se).has(e)){c(this,Se).delete(e),e.unselect(),A(this,U,Dt).call(this,{hasSelectedEditor:this.hasSelection});return}c(this,Se).add(e),e.select(),A(this,U,Gn).call(this,e.propertiesToUpdate),A(this,U,Dt).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.id}),(t=c(this,Xi))==null||t.commitOrRemove();for(const s of c(this,Se))s!==e&&s.unselect();c(this,Se).clear(),c(this,Se).add(e),e.select(),A(this,U,Gn).call(this,e.propertiesToUpdate),A(this,U,Dt).call(this,{hasSelectedEditor:!0})}isSelected(e){return c(this,Se).has(e)}get firstSelectedEditor(){return c(this,Se).values().next().value}unselect(e){e.unselect(),c(this,Se).delete(e),A(this,U,Dt).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return c(this,Se).size!==0}get isEnterHandled(){return c(this,Se).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;c(this,Cs).undo(),A(this,U,Dt).call(this,{hasSomethingToUndo:c(this,Cs).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:A(this,U,rc).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){c(this,Cs).redo(),A(this,U,Dt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:c(this,Cs).hasSomethingToRedo(),isEmpty:A(this,U,rc).call(this)})}addCommands(e){c(this,Cs).add(e),A(this,U,Dt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:A(this,U,rc).call(this)})}cleanUndoStack(e){c(this,Cs).cleanType(e)}delete(){var r;this.commitOrRemove();const e=(r=this.currentLayer)==null?void 0:r.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...c(this,Se)],s=()=>{var a;(a=this._editorUndoBar)==null||a.show(n,t.length===1?t[0].editorType:t.length);for(const l of t)l.remove()},n=()=>{for(const a of t)A(this,U,op).call(this,a)};this.addCommands({cmd:s,undo:n,mustExec:!0})}commitOrRemove(){var e;(e=c(this,is))==null||e.commitOrRemove()}hasSomethingToControl(){return c(this,is)||this.hasSelection}selectAll(){for(const e of c(this,Se))e.commit();A(this,U,lp).call(this,c(this,rt).values())}unselectAll(){var e;if(!(c(this,is)&&(c(this,is).commitOrRemove(),c(this,dt)!==ie.NONE))&&!((e=c(this,Xi))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of c(this,Se))t.unselect();c(this,Se).clear(),A(this,U,Dt).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;c(this,tr)[0]+=e,c(this,tr)[1]+=t;const[n,r]=c(this,tr),a=[...c(this,Se)],l=1e3;c(this,vn)&&clearTimeout(c(this,vn)),b(this,vn,setTimeout(()=>{b(this,vn,null),c(this,tr)[0]=c(this,tr)[1]=0,this.addCommands({cmd:()=>{for(const d of a)c(this,rt).has(d.id)&&(d.translateInPage(n,r),d.translationDone())},undo:()=>{for(const d of a)c(this,rt).has(d.id)&&(d.translateInPage(-n,-r),d.translationDone())},mustExec:!1})},l));for(const d of a)d.translateInPage(e,t),d.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),b(this,gn,new Map);for(const e of c(this,Se))c(this,gn).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!c(this,gn))return!1;this.disableUserSelect(!1);const e=c(this,gn);b(this,gn,null);let t=!1;for(const[{x:n,y:r,pageIndex:a},l]of e)l.newX=n,l.newY=r,l.newPageIndex=a,t||(t=n!==l.savedX||r!==l.savedY||a!==l.savedPageIndex);if(!t)return!1;const s=(n,r,a,l)=>{if(c(this,rt).has(n.id)){const d=c(this,vt).get(l);d?n._setParentAndPosition(d,r,a):(n.pageIndex=l,n.x=r,n.y=a)}};return this.addCommands({cmd:()=>{for(const[n,{newX:r,newY:a,newPageIndex:l}]of e)s(n,r,a,l)},undo:()=>{for(const[n,{savedX:r,savedY:a,savedPageIndex:l}]of e)s(n,r,a,l)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(c(this,gn))for(const s of c(this,gn).keys())s.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||c(this,Se).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return c(this,is)===e}getActive(){return c(this,is)}getMode(){return c(this,dt)}get imageManager(){return pe(this,"imageManager",new tp)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let h=0,u=t.rangeCount;h<u;h++)if(!e.contains(t.getRangeAt(h).commonAncestorContainer))return null;const{x:s,y:n,width:r,height:a}=e.getBoundingClientRect();let l;switch(e.getAttribute("data-main-rotation")){case"90":l=(h,u,f,m)=>({x:(u-n)/a,y:1-(h+f-s)/r,width:m/a,height:f/r});break;case"180":l=(h,u,f,m)=>({x:1-(h+f-s)/r,y:1-(u+m-n)/a,width:f/r,height:m/a});break;case"270":l=(h,u,f,m)=>({x:1-(u+m-n)/a,y:(h-s)/r,width:m/a,height:f/r});break;default:l=(h,u,f,m)=>({x:(h-s)/r,y:(u-n)/a,width:f/r,height:m/a});break}const d=[];for(let h=0,u=t.rangeCount;h<u;h++){const f=t.getRangeAt(h);if(!f.collapsed)for(const{x:m,y:p,width:x,height:g}of f.getClientRects())x===0||g===0||d.push(l(m,p,x,g))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:e,id:t}){(c(this,Io)||b(this,Io,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=c(this,Io))==null||t.delete(e)}renderAnnotationElement(e){var n;const t=(n=c(this,Io))==null?void 0:n.get(e.data.id);if(!t)return;const s=c(this,Kn).getRawValue(t);s&&(c(this,dt)===ie.NONE&&!s.hasBeenModified||s.renderAnnotationElement(e))}setMissingCanvas(e,t,s){var r;const n=(r=c(this,Qi))==null?void 0:r.get(e);n&&(n.setCanvas(t,s),c(this,Qi).delete(e))}addMissingCanvas(e,t){(c(this,Qi)||b(this,Qi,new Map)).set(e,t)}};Mo=new WeakMap,is=new WeakMap,rt=new WeakMap,vt=new WeakMap,Lo=new WeakMap,Kn=new WeakMap,Io=new WeakMap,Cs=new WeakMap,qi=new WeakMap,Xi=new WeakMap,Do=new WeakMap,Zr=new WeakMap,gn=new WeakMap,Ws=new WeakMap,Qr=new WeakMap,$c=new WeakMap,Hc=new WeakMap,Oo=new WeakMap,Uc=new WeakMap,xn=new WeakMap,Yi=new WeakMap,Fo=new WeakMap,Ki=new WeakMap,bn=new WeakMap,Mu=new WeakMap,Ji=new WeakMap,Vc=new WeakMap,Zi=new WeakMap,ea=new WeakMap,ta=new WeakMap,Qi=new WeakMap,Wc=new WeakMap,dt=new WeakMap,Se=new WeakMap,Jn=new WeakMap,er=new WeakMap,sa=new WeakMap,Gc=new WeakMap,qc=new WeakMap,tr=new WeakMap,vn=new WeakMap,Zn=new WeakMap,Xc=new WeakMap,Yc=new WeakMap,_s=new WeakMap,U=new WeakSet,Fh=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},np=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const s of c(this,vt).values())if(s.hasTextLayer(e))return s;return null},h0=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const s=A(this,U,Fh).call(this,e).closest(".textLayer"),n=this.getSelectionBoxes(s);n&&(c(this,bn)||b(this,bn,new _j(this)),c(this,bn).show(s,n,this.direction==="ltr"))},u0=function(){var r,a,l;const e=document.getSelection();if(!e||e.isCollapsed){c(this,Jn)&&((r=c(this,bn))==null||r.hide(),b(this,Jn,null),A(this,U,Dt).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===c(this,Jn))return;const n=A(this,U,Fh).call(this,e).closest(".textLayer");if(!n){c(this,Jn)&&((a=c(this,bn))==null||a.hide(),b(this,Jn,null),A(this,U,Dt).call(this,{hasSelectedText:!1}));return}if((l=c(this,bn))==null||l.hide(),b(this,Jn,t),A(this,U,Dt).call(this,{hasSelectedText:!0}),!(c(this,dt)!==ie.HIGHLIGHT&&c(this,dt)!==ie.NONE)&&(c(this,dt)===ie.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),b(this,Ki,this.isShiftKeyDown),!this.isShiftKeyDown)){const d=c(this,dt)===ie.HIGHLIGHT?A(this,U,np).call(this,n):null;d==null||d.toggleDrawing();const h=new AbortController,u=this.combinedSignal(h),f=m=>{m.type==="pointerup"&&m.button!==0||(h.abort(),d==null||d.toggleDrawing(!0),m.type==="pointerup"&&A(this,U,Bh).call(this,"main_toolbar"))};window.addEventListener("pointerup",f,{signal:u}),window.addEventListener("blur",f,{signal:u})}},Bh=function(e=""){c(this,dt)===ie.HIGHLIGHT?this.highlightSelection(e):c(this,$c)&&A(this,U,h0).call(this)},f0=function(){document.addEventListener("selectionchange",A(this,U,u0).bind(this),{signal:this._signal})},p0=function(){if(c(this,Yi))return;b(this,Yi,new AbortController);const e=this.combinedSignal(c(this,Yi));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},m0=function(){var e;(e=c(this,Yi))==null||e.abort(),b(this,Yi,null)},ip=function(){if(c(this,Zi))return;b(this,Zi,new AbortController);const e=this.combinedSignal(c(this,Zi));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},g0=function(){var e;(e=c(this,Zi))==null||e.abort(),b(this,Zi,null)},rp=function(){if(c(this,qi))return;b(this,qi,new AbortController);const e=this.combinedSignal(c(this,qi));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},ap=function(){var e;(e=c(this,qi))==null||e.abort(),b(this,qi,null)},x0=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Dt=function(e){Object.entries(e).some(([s,n])=>c(this,qc)[s]!==n)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(c(this,qc),e)}),c(this,dt)===ie.HIGHLIGHT&&e.hasSelectedEditor===!1&&A(this,U,Gn).call(this,[[me.HIGHLIGHT_FREE,!0]]))},Gn=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},b0=async function(){if(!c(this,Ji)){b(this,Ji,!0);const e=[];for(const t of c(this,vt).values())e.push(t.enable());await Promise.all(e);for(const t of c(this,rt).values())t.enable()}},v0=function(){if(this.unselectAll(),c(this,Ji)){b(this,Ji,!1);for(const e of c(this,vt).values())e.disable();for(const e of c(this,rt).values())e.disable()}},op=function(e){const t=c(this,vt).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},y0=function(){let e=null;for(e of c(this,Se));return e},rc=function(){if(c(this,rt).size===0)return!0;if(c(this,rt).size===1)for(const e of c(this,rt).values())return e.isEmpty();return!1},lp=function(e){for(const t of c(this,Se))t.unselect();c(this,Se).clear();for(const t of e)t.isEmpty()||(c(this,Se).add(t),t.select());A(this,U,Dt).call(this,{hasSelectedEditor:this.hasSelection})},z(No,"TRANSLATE_SMALL",1),z(No,"TRANSLATE_BIG",10);let Mr=No;var ht,yn,Gs,Bo,wn,rs,zo,An,Jt,Qn,na,Nn,sr,nn,ac,zh;const Ot=class Ot{constructor(e){w(this,nn);w(this,ht,null);w(this,yn,!1);w(this,Gs,null);w(this,Bo,null);w(this,wn,null);w(this,rs,null);w(this,zo,!1);w(this,An,null);w(this,Jt,null);w(this,Qn,null);w(this,na,null);w(this,Nn,!1);b(this,Jt,e),b(this,Nn,e._uiManager.useNewAltTextFlow),c(Ot,sr)||b(Ot,sr,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){Ot._l10n??(Ot._l10n=e)}async render(){const e=b(this,Gs,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=b(this,Bo,document.createElement("span"));e.append(t),c(this,Nn)?(e.classList.add("new"),e.setAttribute("data-l10n-id",c(Ot,sr).missing),t.setAttribute("data-l10n-id",c(Ot,sr)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=c(this,Jt)._uiManager._signal;e.addEventListener("contextmenu",Ds,{signal:s}),e.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:s});const n=r=>{r.preventDefault(),c(this,Jt)._uiManager.editAltText(c(this,Jt)),c(this,Nn)&&c(this,Jt)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:c(this,nn,ac)}})};return e.addEventListener("click",n,{capture:!0,signal:s}),e.addEventListener("keydown",r=>{r.target===e&&r.key==="Enter"&&(b(this,zo,!0),n(r))},{signal:s}),await A(this,nn,zh).call(this),e}finish(){c(this,Gs)&&(c(this,Gs).focus({focusVisible:c(this,zo)}),b(this,zo,!1))}isEmpty(){return c(this,Nn)?c(this,ht)===null:!c(this,ht)&&!c(this,yn)}hasData(){return c(this,Nn)?c(this,ht)!==null||!!c(this,Qn):this.isEmpty()}get guessedText(){return c(this,Qn)}async setGuessedText(e){c(this,ht)===null&&(b(this,Qn,e),b(this,na,await Ot._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),A(this,nn,zh).call(this))}toggleAltTextBadge(e=!1){var t;if(!c(this,Nn)||c(this,ht)){(t=c(this,An))==null||t.remove(),b(this,An,null);return}if(!c(this,An)){const s=b(this,An,document.createElement("div"));s.className="noAltTextBadge",c(this,Jt).div.append(s)}c(this,An).classList.toggle("hidden",!e)}serialize(e){let t=c(this,ht);return!e&&c(this,Qn)===t&&(t=c(this,na)),{altText:t,decorative:c(this,yn),guessedText:c(this,Qn),textWithDisclaimer:c(this,na)}}get data(){return{altText:c(this,ht),decorative:c(this,yn)}}set data({altText:e,decorative:t,guessedText:s,textWithDisclaimer:n,cancel:r=!1}){s&&(b(this,Qn,s),b(this,na,n)),!(c(this,ht)===e&&c(this,yn)===t)&&(r||(b(this,ht,e),b(this,yn,t)),A(this,nn,zh).call(this))}toggle(e=!1){c(this,Gs)&&(!e&&c(this,rs)&&(clearTimeout(c(this,rs)),b(this,rs,null)),c(this,Gs).disabled=!e)}shown(){c(this,Jt)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:c(this,nn,ac)}})}destroy(){var e,t;(e=c(this,Gs))==null||e.remove(),b(this,Gs,null),b(this,Bo,null),b(this,wn,null),(t=c(this,An))==null||t.remove(),b(this,An,null)}};ht=new WeakMap,yn=new WeakMap,Gs=new WeakMap,Bo=new WeakMap,wn=new WeakMap,rs=new WeakMap,zo=new WeakMap,An=new WeakMap,Jt=new WeakMap,Qn=new WeakMap,na=new WeakMap,Nn=new WeakMap,sr=new WeakMap,nn=new WeakSet,ac=function(){return c(this,ht)&&"added"||c(this,ht)===null&&this.guessedText&&"review"||"missing"},zh=async function(){var n,r,a;const e=c(this,Gs);if(!e)return;if(c(this,Nn)){if(e.classList.toggle("done",!!c(this,ht)),e.setAttribute("data-l10n-id",c(Ot,sr)[c(this,nn,ac)]),(n=c(this,Bo))==null||n.setAttribute("data-l10n-id",c(Ot,sr)[`${c(this,nn,ac)}-label`]),!c(this,ht)){(r=c(this,wn))==null||r.remove();return}}else{if(!c(this,ht)&&!c(this,yn)){e.classList.remove("done"),(a=c(this,wn))==null||a.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=c(this,wn);if(!t){b(this,wn,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${c(this,Jt).id}`;const l=100,d=c(this,Jt)._uiManager._signal;d.addEventListener("abort",()=>{clearTimeout(c(this,rs)),b(this,rs,null)},{once:!0}),e.addEventListener("mouseenter",()=>{b(this,rs,setTimeout(()=>{b(this,rs,null),c(this,wn).classList.add("show"),c(this,Jt)._reportTelemetry({action:"alt_text_tooltip"})},l))},{signal:d}),e.addEventListener("mouseleave",()=>{var h;c(this,rs)&&(clearTimeout(c(this,rs)),b(this,rs,null)),(h=c(this,wn))==null||h.classList.remove("show")},{signal:d})}c(this,yn)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=c(this,ht)),t.parentNode||e.append(t);const s=c(this,Jt).getElementForAltText();s==null||s.setAttribute("aria-describedby",t.id)},w(Ot,sr,null),z(Ot,"_l10n",null);let wu=Ot;var $o,ia,Kc,Jc,Zc,Qc,ed,ei,ra,ti,aa,si,Ir,w0,A0,N0;const ig=class ig{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:s=null,onPinchStart:n=null,onPinching:r=null,onPinchEnd:a=null,signal:l}){w(this,Ir);w(this,$o);w(this,ia,!1);w(this,Kc,null);w(this,Jc);w(this,Zc);w(this,Qc);w(this,ed);w(this,ei,null);w(this,ra);w(this,ti,null);w(this,aa);w(this,si,null);b(this,$o,e),b(this,Kc,s),b(this,Jc,t),b(this,Zc,n),b(this,Qc,r),b(this,ed,a),b(this,aa,new AbortController),b(this,ra,AbortSignal.any([l,c(this,aa).signal])),e.addEventListener("touchstart",A(this,Ir,w0).bind(this),{passive:!1,signal:c(this,ra)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/on.pixelRatio}destroy(){var e,t;(e=c(this,aa))==null||e.abort(),b(this,aa,null),(t=c(this,ei))==null||t.abort(),b(this,ei,null)}};$o=new WeakMap,ia=new WeakMap,Kc=new WeakMap,Jc=new WeakMap,Zc=new WeakMap,Qc=new WeakMap,ed=new WeakMap,ei=new WeakMap,ra=new WeakMap,ti=new WeakMap,aa=new WeakMap,si=new WeakMap,Ir=new WeakSet,w0=function(e){var n,r,a;if((n=c(this,Jc))!=null&&n.call(this))return;if(e.touches.length===1){if(c(this,ei))return;const l=b(this,ei,new AbortController),d=AbortSignal.any([c(this,ra),l.signal]),h=c(this,$o),u={capture:!0,signal:d,passive:!1},f=m=>{var p;m.pointerType==="touch"&&((p=c(this,ei))==null||p.abort(),b(this,ei,null))};h.addEventListener("pointerdown",m=>{m.pointerType==="touch"&&(Ye(m),f(m))},u),h.addEventListener("pointerup",f,u),h.addEventListener("pointercancel",f,u);return}if(!c(this,si)){b(this,si,new AbortController);const l=AbortSignal.any([c(this,ra),c(this,si).signal]),d=c(this,$o),h={signal:l,capture:!1,passive:!1};d.addEventListener("touchmove",A(this,Ir,A0).bind(this),h);const u=A(this,Ir,N0).bind(this);d.addEventListener("touchend",u,h),d.addEventListener("touchcancel",u,h),h.capture=!0,d.addEventListener("pointerdown",Ye,h),d.addEventListener("pointermove",Ye,h),d.addEventListener("pointercancel",Ye,h),d.addEventListener("pointerup",Ye,h),(r=c(this,Zc))==null||r.call(this)}if(Ye(e),e.touches.length!==2||(a=c(this,Kc))!=null&&a.call(this)){b(this,ti,null);return}let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]),b(this,ti,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:s.screenX,touch1Y:s.screenY})},A0=function(e){var E;if(!c(this,ti)||e.touches.length!==2)return;Ye(e);let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]);const{screenX:n,screenY:r}=t,{screenX:a,screenY:l}=s,d=c(this,ti),{touch0X:h,touch0Y:u,touch1X:f,touch1Y:m}=d,p=f-h,x=m-u,g=a-n,v=l-r,y=Math.hypot(g,v)||1,S=Math.hypot(p,x)||1;if(!c(this,ia)&&Math.abs(S-y)<=ig.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=n,d.touch0Y=r,d.touch1X=a,d.touch1Y=l,!c(this,ia)){b(this,ia,!0);return}const j=[(n+a)/2,(r+l)/2];(E=c(this,Qc))==null||E.call(this,j,S,y)},N0=function(e){var t;e.touches.length>=2||(c(this,si)&&(c(this,si).abort(),b(this,si,null),(t=c(this,ed))==null||t.call(this)),c(this,ti)&&(Ye(e),b(this,ti,null),b(this,ia,!1)))};let Tc=ig;var oa,qs,Oe,Ho,nr,td,la,yt,ca,ni,ir,sd,da,as,nd,ha,ii,Sn,Uo,Vo,ks,ua,id,Lu,se,cp,rd,dp,$h,S0,j0,hp,Hh,up,E0,C0,_0,fp,k0,pp,T0,P0,R0,mp,oc;const he=class he{constructor(e){w(this,se);w(this,oa,null);w(this,qs,null);w(this,Oe,null);w(this,Ho,!1);w(this,nr,null);w(this,td,"");w(this,la,!1);w(this,yt,null);w(this,ca,null);w(this,ni,null);w(this,ir,null);w(this,sd,"");w(this,da,!1);w(this,as,null);w(this,nd,!1);w(this,ha,!1);w(this,ii,!1);w(this,Sn,null);w(this,Uo,0);w(this,Vo,0);w(this,ks,null);w(this,ua,null);z(this,"isSelected",!1);z(this,"_isCopy",!1);z(this,"_editToolbar",null);z(this,"_initialOptions",Object.create(null));z(this,"_initialData",null);z(this,"_isVisible",!0);z(this,"_uiManager",null);z(this,"_focusEventsAllowed",!0);w(this,id,!1);w(this,Lu,he._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null;const{rotation:t,rawDims:{pageWidth:s,pageHeight:n,pageX:r,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,n],this.pageTranslation=[r,a];const[l,d]=this.parentDimensions;this.x=e.x/l,this.y=e.y/d,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=he.prototype._resizeWithKeyboard,t=Mr.TRANSLATE_SMALL,s=Mr.TRANSLATE_BIG;return pe(this,"_resizerKeyboardManager",new mh([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,s]}],[["Escape","mac+Escape"],he.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return pe(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new Pj({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(he._l10n??(he._l10n=e),he._l10nResizer||(he._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),he._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);he._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){_e("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return c(this,id)}set _isDraggable(e){var t;b(this,id,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=c(this,Lu)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):A(this,se,oc).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(c(this,da)?b(this,da,!1):this.parent.setSelected(this))}focusout(e){var s;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(s=this.parent)!=null&&s.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,s,n){const[r,a]=this.parentDimensions;[s,n]=this.screenToPageTranslation(s,n),this.x=(e+s)/r,this.y=(t+n)/a,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[s,n]=this.parentDimensions;this.setAt(e*s,t*n,this.width*s,this.height*n),this._onTranslated()}translate(e,t){A(this,se,cp).call(this,this.parentDimensions,e,t)}translateInPage(e,t){c(this,as)||b(this,as,[this.x,this.y,this.width,this.height]),A(this,se,cp).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){c(this,as)||b(this,as,[this.x,this.y,this.width,this.height]);const{div:s,parentDimensions:[n,r]}=this;if(this.x+=e/n,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:f,y:m}=this.div.getBoundingClientRect();this.parent.findNewParent(this,f,m)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:l}=this;const[d,h]=this.getBaseTranslation();a+=d,l+=h;const{style:u}=s;u.left=`${(100*a).toFixed(2)}%`,u.top=`${(100*l).toFixed(2)}%`,this._onTranslating(a,l),s.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!c(this,as)&&(c(this,as)[0]!==this.x||c(this,as)[1]!==this.y)}get _hasBeenResized(){return!!c(this,as)&&(c(this,as)[2]!==this.width||c(this,as)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:s}=he,n=s/e,r=s/t;switch(this.rotation){case 90:return[-n,r];case 180:return[n,r];case 270:return[n,-r];default:return[-n,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[s,n]}=this;let{x:r,y:a,width:l,height:d}=this;if(l*=s,d*=n,r*=s,a*=n,this._mustFixPosition)switch(e){case 0:r=Rt(r,0,s-l),a=Rt(a,0,n-d);break;case 90:r=Rt(r,0,s-d),a=Rt(a,l,n);break;case 180:r=Rt(r,l,s),a=Rt(a,d,n);break;case 270:r=Rt(r,d,s),a=Rt(a,0,n-l);break}this.x=r/=s,this.y=a/=n;const[h,u]=this.getBaseTranslation();r+=h,a+=u,t.left=`${(100*r).toFixed(2)}%`,t.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var s;return A(s=he,rd,dp).call(s,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var s;return A(s=he,rd,dp).call(s,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,s]}=this;return[t*e,s*e]}setDims(e,t){const[s,n]=this.parentDimensions,{style:r}=this.div;r.width=`${(100*e/s).toFixed(2)}%`,c(this,la)||(r.height=`${(100*t/n).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:s}=e,n=s.endsWith("%"),r=!c(this,la)&&t.endsWith("%");if(n&&r)return;const[a,l]=this.parentDimensions;n||(e.width=`${(100*parseFloat(s)/a).toFixed(2)}%`),!c(this,la)&&!r&&(e.height=`${(100*parseFloat(t)/l).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=c(this,Oe))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||c(this,ha))return this._editToolbar;this._editToolbar=new ep(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,s]of e)await this._editToolbar.addButton(t,s);return this._editToolbar.addButton("delete"),this._editToolbar}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=c(this,Oe))==null||e.destroy())}addContainer(e){var s;const t=(s=this._editToolbar)==null?void 0:s.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return c(this,Oe)||(wu.initialize(he._l10n),b(this,Oe,new wu(this)),c(this,oa)&&(c(this,Oe).data=c(this,oa),b(this,oa,null))),c(this,Oe)}get altTextData(){var e;return(e=c(this,Oe))==null?void 0:e.data}set altTextData(e){c(this,Oe)&&(c(this,Oe).data=e)}get guessedAltText(){var e;return(e=c(this,Oe))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=c(this,Oe))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=c(this,Oe))==null?void 0:t.serialize(e)}hasAltText(){return!!c(this,Oe)&&!c(this,Oe).isEmpty()}hasAltTextData(){var e;return((e=c(this,Oe))==null?void 0:e.hasData())??!1}render(){var a;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=c(this,Ho)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),A(this,se,pp).call(this);const[t,s]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*s/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/s).toFixed(2)}%`);const[n,r]=this.getInitialTranslation();return this.translate(n,r),c0(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(c(this,ua)||b(this,ua,new Tc({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:A(this,se,E0).bind(this),onPinching:A(this,se,C0).bind(this),onPinchEnd:A(this,se,_0).bind(this),signal:this._uiManager._signal}))),(a=this._uiManager._editorUndoBar)==null||a.hide(),e}pointerdown(e){const{isMac:t}=xt.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(b(this,da,!0),this._isDraggable){A(this,se,k0).call(this,e);return}A(this,se,fp).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){c(this,Sn)&&clearTimeout(c(this,Sn)),b(this,Sn,setTimeout(()=>{var e;b(this,Sn,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,s){e.changeParent(this),this.x=t,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,s=this.rotation){const n=this.parentScale,[r,a]=this.pageDimensions,[l,d]=this.pageTranslation,h=e/n,u=t/n,f=this.x*r,m=this.y*a,p=this.width*r,x=this.height*a;switch(s){case 0:return[f+h+l,a-m-u-x+d,f+h+p+l,a-m-u+d];case 90:return[f+u+l,a-m+h+d,f+u+x+l,a-m+h+p+d];case 180:return[f-h-p+l,a-m+u+d,f-h+l,a-m+u+x+d];case 270:return[f-u-x+l,a-m-h-p+d,f-u+l,a-m-h+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[s,n,r,a]=e,l=r-s,d=a-n;switch(this.rotation){case 0:return[s,t-a,l,d];case 90:return[s,t-n,d,l];case 180:return[r,t-n,l,d];case 270:return[r,t-a,d,l];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),b(this,ha,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),b(this,ha,!1),!0):!1}isInEditMode(){return c(this,ha)}shouldGetKeyboardEvents(){return c(this,ii)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:s,right:n}=this.getClientDimensions(),{innerHeight:r,innerWidth:a}=window;return t<a&&n>0&&e<r&&s>0}rebuild(){A(this,se,pp).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){_e("An editor must be serializable")}static async deserialize(e,t,s){const n=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:s,annotationElementId:e.annotationElementId});n.rotation=e.rotation,b(n,oa,e.accessibilityData),n._isCopy=e.isCopy||!1;const[r,a]=n.pageDimensions,[l,d,h,u]=n.getRectInCurrentCoords(e.rect,a);return n.x=l/r,n.y=d/a,n.width=h/r,n.height=u/a,n}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=c(this,ir))==null||e.abort(),b(this,ir,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),c(this,Sn)&&(clearTimeout(c(this,Sn)),b(this,Sn,null)),A(this,se,oc).call(this),this.removeEditToolbar(),c(this,ks)){for(const s of c(this,ks).values())clearTimeout(s);b(this,ks,null)}this.parent=null,(t=c(this,ua))==null||t.destroy(),b(this,ua,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(A(this,se,S0).call(this),c(this,yt).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),b(this,ni,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=c(this,yt).children;if(!c(this,qs)){b(this,qs,Array.from(t));const a=A(this,se,T0).bind(this),l=A(this,se,P0).bind(this),d=this._uiManager._signal;for(const h of c(this,qs)){const u=h.getAttribute("data-resizer-name");h.setAttribute("role","spinbutton"),h.addEventListener("keydown",a,{signal:d}),h.addEventListener("blur",l,{signal:d}),h.addEventListener("focus",A(this,se,R0).bind(this,u),{signal:d}),h.setAttribute("data-l10n-id",he._l10nResizer[u])}}const s=c(this,qs)[0];let n=0;for(const a of t){if(a===s)break;n++}const r=(360-this.rotation+this.parentRotation)%360/90*(c(this,qs).length/4);if(r!==n){if(r<n)for(let l=0;l<n-r;l++)c(this,yt).append(c(this,yt).firstChild);else if(r>n)for(let l=0;l<r-n;l++)c(this,yt).firstChild.before(c(this,yt).lastChild);let a=0;for(const l of t){const h=c(this,qs)[a++].getAttribute("data-resizer-name");l.setAttribute("data-l10n-id",he._l10nResizer[h])}}A(this,se,mp).call(this,0),b(this,ii,!0),c(this,yt).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){c(this,ii)&&A(this,se,up).call(this,c(this,sd),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){A(this,se,oc).call(this),this.div.focus()}select(){var e,t,s;if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var n,r;(n=this.div)!=null&&n.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(t=this._editToolbar)==null||t.show(),(s=c(this,Oe))==null||s.toggleAltTextBadge(!1)}}unselect(){var e,t,s,n,r;this.isSelected&&(this.isSelected=!1,(e=c(this,yt))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(s=this.div)!=null&&s.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(n=this._editToolbar)==null||n.hide(),(r=c(this,Oe))==null||r.toggleAltTextBadge(!0))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return c(this,nd)}set isEditing(e){b(this,nd,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){b(this,la,!0);const s=e/t,{style:n}=this.div;n.aspectRatio=s,n.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){c(this,ks)||b(this,ks,new Map);const{action:s}=e;let n=c(this,ks).get(s);n&&clearTimeout(n),n=setTimeout(()=>{this._reportTelemetry(e),c(this,ks).delete(s),c(this,ks).size===0&&b(this,ks,null)},he._telemetryTimeout),c(this,ks).set(s,n);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),b(this,Ho,!1)}disable(){this.div&&(this.div.tabIndex=-1),b(this,Ho,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const s=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),s.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};oa=new WeakMap,qs=new WeakMap,Oe=new WeakMap,Ho=new WeakMap,nr=new WeakMap,td=new WeakMap,la=new WeakMap,yt=new WeakMap,ca=new WeakMap,ni=new WeakMap,ir=new WeakMap,sd=new WeakMap,da=new WeakMap,as=new WeakMap,nd=new WeakMap,ha=new WeakMap,ii=new WeakMap,Sn=new WeakMap,Uo=new WeakMap,Vo=new WeakMap,ks=new WeakMap,ua=new WeakMap,id=new WeakMap,Lu=new WeakMap,se=new WeakSet,cp=function([e,t],s,n){[s,n]=this.screenToPageTranslation(s,n),this.x+=s/e,this.y+=n/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},rd=new WeakSet,dp=function(e,t,s){switch(s){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},$h=function(e){switch(e){case 90:{const[t,s]=this.pageDimensions;return[0,-t/s,s/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,s]=this.pageDimensions;return[0,t/s,-s/t,0]}default:return[1,0,0,1]}},S0=function(){if(c(this,yt))return;b(this,yt,document.createElement("div")),c(this,yt).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const s of e){const n=document.createElement("div");c(this,yt).append(n),n.classList.add("resizer",s),n.setAttribute("data-resizer-name",s),n.addEventListener("pointerdown",A(this,se,j0).bind(this,s),{signal:t}),n.addEventListener("contextmenu",Ds,{signal:t}),n.tabIndex=-1}this.div.prepend(c(this,yt))},j0=function(e,t){var u;t.preventDefault();const{isMac:s}=xt.platform;if(t.button!==0||t.ctrlKey&&s)return;(u=c(this,Oe))==null||u.toggle(!1);const n=this._isDraggable;this._isDraggable=!1,b(this,ca,[t.screenX,t.screenY]);const r=new AbortController,a=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",A(this,se,up).bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",Ye,{passive:!1,signal:a}),window.addEventListener("contextmenu",Ds,{signal:a}),b(this,ni,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const l=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const h=()=>{var f;r.abort(),this.parent.togglePointerEvents(!0),(f=c(this,Oe))==null||f.toggle(!0),this._isDraggable=n,this.parent.div.style.cursor=l,this.div.style.cursor=d,A(this,se,Hh).call(this)};window.addEventListener("pointerup",h,{signal:a}),window.addEventListener("blur",h,{signal:a})},hp=function(e,t,s,n){this.width=s,this.height=n,this.x=e,this.y=t;const[r,a]=this.parentDimensions;this.setDims(r*s,a*n),this.fixAndSetPosition(),this._onResized()},Hh=function(){if(!c(this,ni))return;const{savedX:e,savedY:t,savedWidth:s,savedHeight:n}=c(this,ni);b(this,ni,null);const r=this.x,a=this.y,l=this.width,d=this.height;r===e&&a===t&&l===s&&d===n||this.addCommands({cmd:A(this,se,hp).bind(this,r,a,l,d),undo:A(this,se,hp).bind(this,e,t,s,n),mustExec:!0})},up=function(e,t){const[s,n]=this.parentDimensions,r=this.x,a=this.y,l=this.width,d=this.height,h=he.MIN_SIZE/s,u=he.MIN_SIZE/n,f=A(this,se,$h).call(this,this.rotation),m=(I,D)=>[f[0]*I+f[2]*D,f[1]*I+f[3]*D],p=A(this,se,$h).call(this,360-this.rotation),x=(I,D)=>[p[0]*I+p[2]*D,p[1]*I+p[3]*D];let g,v,y=!1,S=!1;switch(e){case"topLeft":y=!0,g=(I,D)=>[0,0],v=(I,D)=>[I,D];break;case"topMiddle":g=(I,D)=>[I/2,0],v=(I,D)=>[I/2,D];break;case"topRight":y=!0,g=(I,D)=>[I,0],v=(I,D)=>[0,D];break;case"middleRight":S=!0,g=(I,D)=>[I,D/2],v=(I,D)=>[0,D/2];break;case"bottomRight":y=!0,g=(I,D)=>[I,D],v=(I,D)=>[0,0];break;case"bottomMiddle":g=(I,D)=>[I/2,D],v=(I,D)=>[I/2,0];break;case"bottomLeft":y=!0,g=(I,D)=>[0,D],v=(I,D)=>[I,0];break;case"middleLeft":S=!0,g=(I,D)=>[0,D/2],v=(I,D)=>[I,D/2];break}const j=g(l,d),E=v(l,d);let C=m(...E);const k=he._round(r+C[0]),_=he._round(a+C[1]);let T=1,P=1,R,M;if(t.fromKeyboard)({deltaX:R,deltaY:M}=t);else{const{screenX:I,screenY:D}=t,[V,L]=c(this,ca);[R,M]=this.screenToPageTranslation(I-V,D-L),c(this,ca)[0]=I,c(this,ca)[1]=D}if([R,M]=x(R/s,M/n),y){const I=Math.hypot(l,d);T=P=Math.max(Math.min(Math.hypot(E[0]-j[0]-R,E[1]-j[1]-M)/I,1/l,1/d),h/l,u/d)}else S?T=Rt(Math.abs(E[0]-j[0]-R),h,1)/l:P=Rt(Math.abs(E[1]-j[1]-M),u,1)/d;const F=he._round(l*T),$=he._round(d*P);C=m(...v(F,$));const B=k-C[0],ee=_-C[1];c(this,as)||b(this,as,[this.x,this.y,this.width,this.height]),this.width=F,this.height=$,this.x=B,this.y=ee,this.setDims(s*F,n*$),this.fixAndSetPosition(),this._onResizing()},E0=function(){var e;b(this,ni,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=c(this,Oe))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},C0=function(e,t,s){let r=.7*(s/t)+1-.7;if(r===1)return;const a=A(this,se,$h).call(this,this.rotation),l=(k,_)=>[a[0]*k+a[2]*_,a[1]*k+a[3]*_],[d,h]=this.parentDimensions,u=this.x,f=this.y,m=this.width,p=this.height,x=he.MIN_SIZE/d,g=he.MIN_SIZE/h;r=Math.max(Math.min(r,1/m,1/p),x/m,g/p);const v=he._round(m*r),y=he._round(p*r);if(v===m&&y===p)return;c(this,as)||b(this,as,[u,f,m,p]);const S=l(m/2,p/2),j=he._round(u+S[0]),E=he._round(f+S[1]),C=l(v/2,y/2);this.x=j-C[0],this.y=E-C[1],this.width=v,this.height=y,this.setDims(d*v,h*y),this.fixAndSetPosition(),this._onResizing()},_0=function(){var e;(e=c(this,Oe))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),A(this,se,Hh).call(this)},fp=function(e){const{isMac:t}=xt.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},k0=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let s=!1;const n=new AbortController,r=this._uiManager.combinedSignal(n),a={capture:!0,passive:!1,signal:r},l=h=>{n.abort(),b(this,nr,null),b(this,da,!1),this._uiManager.endDragSession()||A(this,se,fp).call(this,h),s&&this._onStopDragging()};t&&(b(this,Uo,e.clientX),b(this,Vo,e.clientY),b(this,nr,e.pointerId),b(this,td,e.pointerType),window.addEventListener("pointermove",h=>{s||(s=!0,this._onStartDragging());const{clientX:u,clientY:f,pointerId:m}=h;if(m!==c(this,nr)){Ye(h);return}const[p,x]=this.screenToPageTranslation(u-c(this,Uo),f-c(this,Vo));b(this,Uo,u),b(this,Vo,f),this._uiManager.dragSelectedEditors(p,x)},a),window.addEventListener("touchmove",Ye,a),window.addEventListener("pointerdown",h=>{h.pointerType===c(this,td)&&(c(this,ua)||h.isPrimary)&&l(h),Ye(h)},a));const d=h=>{if(!c(this,nr)||c(this,nr)===h.pointerId){l(h);return}Ye(h)};window.addEventListener("pointerup",d,{signal:r}),window.addEventListener("blur",d,{signal:r})},pp=function(){if(c(this,ir)||!this.div)return;b(this,ir,new AbortController);const e=this._uiManager.combinedSignal(c(this,ir));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},T0=function(e){he._resizerKeyboardManager.exec(this,e)},P0=function(e){var t;c(this,ii)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==c(this,yt)&&A(this,se,oc).call(this)},R0=function(e){b(this,sd,c(this,ii)?e:"")},mp=function(e){if(c(this,qs))for(const t of c(this,qs))t.tabIndex=e},oc=function(){b(this,ii,!1),A(this,se,mp).call(this,-1),A(this,se,Hh).call(this)},w(he,rd),z(he,"_l10n",null),z(he,"_l10nResizer",null),z(he,"_borderLineWidth",-1),z(he,"_colorManager",new sp),z(he,"_zIndex",1),z(he,"_telemetryTimeout",1e3);let Re=he;class Pj extends Re{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Kg=3285377520,js=4294901760,pn=65535;class M0{constructor(e){this.h1=e?e&4294967295:Kg,this.h2=e?e&4294967295:Kg}update(e){let t,s;if(typeof e=="string"){t=new Uint8Array(e.length*2),s=0;for(let g=0,v=e.length;g<v;g++){const y=e.charCodeAt(g);y<=255?t[s++]=y:(t[s++]=y>>>8,t[s++]=y&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),s=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const n=s>>2,r=s-n*4,a=new Uint32Array(t.buffer,0,n);let l=0,d=0,h=this.h1,u=this.h2;const f=3432918353,m=461845907,p=f&pn,x=m&pn;for(let g=0;g<n;g++)g&1?(l=a[g],l=l*f&js|l*p&pn,l=l<<15|l>>>17,l=l*m&js|l*x&pn,h^=l,h=h<<13|h>>>19,h=h*5+3864292196):(d=a[g],d=d*f&js|d*p&pn,d=d<<15|d>>>17,d=d*m&js|d*x&pn,u^=d,u=u<<13|u>>>19,u=u*5+3864292196);switch(l=0,r){case 3:l^=t[n*4+2]<<16;case 2:l^=t[n*4+1]<<8;case 1:l^=t[n*4],l=l*f&js|l*p&pn,l=l<<15|l>>>17,l=l*m&js|l*x&pn,n&1?h^=l:u^=l}this.h1=h,this.h2=u}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&js|e*36045&pn,t=t*4283543511&js|((t<<16|e>>>16)*2950163797&js)>>>16,e^=t>>>1,e=e*444984403&js|e*60499&pn,t=t*3301882366&js|((t<<16|e>>>16)*3120437893&js)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const gp=Object.freeze({map:null,hash:"",transfer:void 0});var fa,pa,wt,Iu,L0;class zm{constructor(){w(this,Iu);w(this,fa,!1);w(this,pa,null);w(this,wt,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const s=c(this,wt).get(e);return s===void 0?t:Object.assign(t,s)}getRawValue(e){return c(this,wt).get(e)}remove(e){if(c(this,wt).delete(e),c(this,wt).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of c(this,wt).values())if(t instanceof Re)return;this.onAnnotationEditor(null)}}setValue(e,t){const s=c(this,wt).get(e);let n=!1;if(s!==void 0)for(const[r,a]of Object.entries(t))s[r]!==a&&(n=!0,s[r]=a);else n=!0,c(this,wt).set(e,t);n&&A(this,Iu,L0).call(this),t instanceof Re&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return c(this,wt).has(e)}get size(){return c(this,wt).size}resetModified(){c(this,fa)&&(b(this,fa,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new I0(this)}get serializable(){if(c(this,wt).size===0)return gp;const e=new Map,t=new M0,s=[],n=Object.create(null);let r=!1;for(const[a,l]of c(this,wt)){const d=l instanceof Re?l.serialize(!1,n):l;d&&(e.set(a,d),t.update(`${a}:${JSON.stringify(d)}`),r||(r=!!d.bitmap))}if(r)for(const a of e.values())a.bitmap&&s.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:s}:gp}get editorStats(){let e=null;const t=new Map;for(const s of c(this,wt).values()){if(!(s instanceof Re))continue;const n=s.telemetryFinalData;if(!n)continue;const{type:r}=n;t.has(r)||t.set(r,Object.getPrototypeOf(s).constructor),e||(e=Object.create(null));const a=e[r]||(e[r]=new Map);for(const[l,d]of Object.entries(n)){if(l==="type")continue;let h=a.get(l);h||(h=new Map,a.set(l,h));const u=h.get(d)??0;h.set(d,u+1)}}for(const[s,n]of t)e[s]=n.computeTelemetryFinalData(e[s]);return e}resetModifiedIds(){b(this,pa,null)}get modifiedIds(){if(c(this,pa))return c(this,pa);const e=[];for(const t of c(this,wt).values())!(t instanceof Re)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return b(this,pa,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return c(this,wt).entries()}}fa=new WeakMap,pa=new WeakMap,wt=new WeakMap,Iu=new WeakSet,L0=function(){c(this,fa)||(b(this,fa,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var ad;class I0 extends zm{constructor(t){super();w(this,ad);const{map:s,hash:n,transfer:r}=t.serializable,a=structuredClone(s,r?{transfer:r}:null);b(this,ad,{map:a,hash:n,transfer:r})}get print(){_e("Should not call PrintAnnotationStorage.print")}get serializable(){return c(this,ad)}get modifiedIds(){return pe(this,"modifiedIds",{ids:new Set,hash:""})}}ad=new WeakMap;var Wo;class Rj{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){w(this,Wo,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),c(this,Wo).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:s}){if(!(!e||c(this,Wo).has(e.loadedName))){if(st(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:r,style:a}=e,l=new FontFace(n,r,a);this.addNativeFontFace(l);try{await l.load(),c(this,Wo).add(n),s==null||s(e)}catch{re(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}_e("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const s=e.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(n){throw re(`Failed to load font '${s.family}': '${n}'.`),e.disableFontFace=!0,n}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const n=this._queueLoadingCallback(s);this._prepareFontLoadEvent(e,n)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return pe(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return pe(this,"isSyncFontLoadingSupported",$t||xt.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(st(!n.done,"completeRequest() cannot be called twice."),n.done=!0;s.length>0&&s[0].done;){const r=s.shift();setTimeout(r.callback,0)}}const{loadingRequests:s}=this,n={done:!1,complete:t,callback:e};return s.push(n),n}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return pe(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function s(E,C){return E.charCodeAt(C)<<24|E.charCodeAt(C+1)<<16|E.charCodeAt(C+2)<<8|E.charCodeAt(C+3)&255}function n(E,C,k,_){const T=E.substring(0,C),P=E.substring(C+k);return T+_+P}let r,a;const l=this._document.createElement("canvas");l.width=1,l.height=1;const d=l.getContext("2d");let h=0;function u(E,C){if(++h>30){re("Load test font never loaded."),C();return}if(d.font="30px "+E,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){C();return}setTimeout(u.bind(null,E,C))}const f=`lt${Date.now()}${this.loadTestFontId++}`;let m=this._loadTestFont;m=n(m,976,f.length,f);const x=16,g=1482184792;let v=s(m,x);for(r=0,a=f.length-3;r<a;r+=4)v=v-g+s(f,r)|0;r<f.length&&(v=v-g+s(f+"XXX",r)|0),m=n(m,x,4,yj(v));const y=`url(data:font/opentype;base64,${btoa(m)});`,S=`@font-face {font-family:"${f}";src:${y}}`;this.insertRule(S);const j=this._document.createElement("div");j.style.visibility="hidden",j.style.width=j.style.height="10px",j.style.position="absolute",j.style.top=j.style.left="0px";for(const E of[e.loadedName,f]){const C=this._document.createElement("span");C.textContent="Hi",C.style.fontFamily=E,j.append(C)}this._document.body.append(j),u(f,()=>{j.remove(),t.complete()})}}Wo=new WeakMap;class Mj{constructor(e,t=null){this.compiledGlyphs=Object.create(null);for(const s in e)this[s]=e[s];this._inspectFont=t}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const s={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(s.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,s)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var s;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${Qb(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${e}}`}return(s=this._inspectFont)==null||s.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const s=this.loadedName+"_path_"+t;let n;try{n=e.get(s)}catch(a){re(`getPathGenerator - ignoring character: "${a}".`)}const r=new Path2D(n||"");return this.fontExtraProperties||e.delete(s),this.compiledGlyphs[t]=r}}function Lj(i){if(i instanceof URL)return i.href;if(typeof i=="string"){if($t)return i;const e=URL.parse(i,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function Ij(i){if($t&&typeof Buffer<"u"&&i instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength)return i;if(typeof i=="string")return uh(i);if(i instanceof ArrayBuffer||ArrayBuffer.isView(i)||typeof i=="object"&&!isNaN(i==null?void 0:i.length))return new Uint8Array(i);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Eh(i){if(typeof i!="string")return null;if(i.endsWith("/"))return i;throw new Error(`Invalid factory url: "${i}" must include trailing slash.`)}const xp=i=>typeof i=="object"&&Number.isInteger(i==null?void 0:i.num)&&i.num>=0&&Number.isInteger(i==null?void 0:i.gen)&&i.gen>=0,Dj=i=>typeof i=="object"&&typeof(i==null?void 0:i.name)=="string",D0=Sj.bind(null,xp,Dj);var ri,Du;class Oj{constructor(){w(this,ri,new Map);w(this,Du,Promise.resolve())}postMessage(e,t){const s={data:structuredClone(e,t?{transfer:t}:null)};c(this,Du).then(()=>{for(const[n]of c(this,ri))n.call(this,s)})}addEventListener(e,t,s=null){let n=null;if((s==null?void 0:s.signal)instanceof AbortSignal){const{signal:r}=s;if(r.aborted){re("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(e,t);n=()=>r.removeEventListener("abort",a),r.addEventListener("abort",a)}c(this,ri).set(t,n)}removeEventListener(e,t){const s=c(this,ri).get(t);s==null||s(),c(this,ri).delete(t)}terminate(){for(const[,e]of c(this,ri))e==null||e();c(this,ri).clear()}}ri=new WeakMap,Du=new WeakMap;const Ch={DATA:1,ERROR:2},Qe={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Jg(){}function Yt(i){if(i instanceof Ti||i instanceof vu||i instanceof qg||i instanceof kc||i instanceof Pf)return i;switch(i instanceof Error||typeof i=="object"&&i!==null||_e('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),i.name){case"AbortException":return new Ti(i.message);case"InvalidPDFException":return new vu(i.message);case"PasswordException":return new qg(i.message,i.code);case"ResponseException":return new kc(i.message,i.status,i.missing);case"UnknownErrorException":return new Pf(i.message,i.details)}return new Pf(i.message,i.toString())}var Go,Is,O0,F0,B0,Uh;class lc{constructor(e,t,s){w(this,Is);w(this,Go,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",A(this,Is,O0).bind(this),{signal:c(this,Go).signal})}on(e,t){const s=this.actionHandler;if(s[e])throw new Error(`There is already an actionName called "${e}"`);s[e]=t}send(e,t,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},s)}sendWithPromise(e,t,s){const n=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[n]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:n,data:t},s)}catch(a){r.reject(a)}return r.promise}sendWithStream(e,t,s,n){const r=this.streamId++,a=this.sourceName,l=this.targetName,d=this.comObj;return new ReadableStream({start:h=>{const u=Promise.withResolvers();return this.streamControllers[r]={controller:h,startCall:u,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:a,targetName:l,action:e,streamId:r,data:t,desiredSize:h.desiredSize},n),u.promise},pull:h=>{const u=Promise.withResolvers();return this.streamControllers[r].pullCall=u,d.postMessage({sourceName:a,targetName:l,stream:Qe.PULL,streamId:r,desiredSize:h.desiredSize}),u.promise},cancel:h=>{st(h instanceof Error,"cancel must have a valid reason");const u=Promise.withResolvers();return this.streamControllers[r].cancelCall=u,this.streamControllers[r].isClosed=!0,d.postMessage({sourceName:a,targetName:l,stream:Qe.CANCEL,streamId:r,reason:Yt(h)}),u.promise}},s)}destroy(){var e;(e=c(this,Go))==null||e.abort(),b(this,Go,null)}}Go=new WeakMap,Is=new WeakSet,O0=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){A(this,Is,B0).call(this,e);return}if(e.callback){const s=e.callbackId,n=this.callbackCapabilities[s];if(!n)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],e.callback===Ch.DATA)n.resolve(e.data);else if(e.callback===Ch.ERROR)n.reject(Yt(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const s=this.sourceName,n=e.sourceName,r=this.comObj;Promise.try(t,e.data).then(function(a){r.postMessage({sourceName:s,targetName:n,callback:Ch.DATA,callbackId:e.callbackId,data:a})},function(a){r.postMessage({sourceName:s,targetName:n,callback:Ch.ERROR,callbackId:e.callbackId,reason:Yt(a)})});return}if(e.streamId){A(this,Is,F0).call(this,e);return}t(e.data)},F0=function(e){const t=e.streamId,s=this.sourceName,n=e.sourceName,r=this.comObj,a=this,l=this.actionHandler[e.action],d={enqueue(h,u=1,f){if(this.isCancelled)return;const m=this.desiredSize;this.desiredSize-=u,m>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:s,targetName:n,stream:Qe.ENQUEUE,streamId:t,chunk:h},f)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:n,stream:Qe.CLOSE,streamId:t}),delete a.streamSinks[t])},error(h){st(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:n,stream:Qe.ERROR,streamId:t,reason:Yt(h)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[t]=d,Promise.try(l,e.data,d).then(function(){r.postMessage({sourceName:s,targetName:n,stream:Qe.START_COMPLETE,streamId:t,success:!0})},function(h){r.postMessage({sourceName:s,targetName:n,stream:Qe.START_COMPLETE,streamId:t,reason:Yt(h)})})},B0=function(e){const t=e.streamId,s=this.sourceName,n=e.sourceName,r=this.comObj,a=this.streamControllers[t],l=this.streamSinks[t];switch(e.stream){case Qe.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(Yt(e.reason));break;case Qe.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(Yt(e.reason));break;case Qe.PULL:if(!l){r.postMessage({sourceName:s,targetName:n,stream:Qe.PULL_COMPLETE,streamId:t,success:!0});break}l.desiredSize<=0&&e.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=e.desiredSize,Promise.try(l.onPull||Jg).then(function(){r.postMessage({sourceName:s,targetName:n,stream:Qe.PULL_COMPLETE,streamId:t,success:!0})},function(h){r.postMessage({sourceName:s,targetName:n,stream:Qe.PULL_COMPLETE,streamId:t,reason:Yt(h)})});break;case Qe.ENQUEUE:if(st(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case Qe.CLOSE:if(st(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),A(this,Is,Uh).call(this,a,t);break;case Qe.ERROR:st(a,"error should have stream controller"),a.controller.error(Yt(e.reason)),A(this,Is,Uh).call(this,a,t);break;case Qe.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(Yt(e.reason)),A(this,Is,Uh).call(this,a,t);break;case Qe.CANCEL:if(!l)break;const d=Yt(e.reason);Promise.try(l.onCancel||Jg,d).then(function(){r.postMessage({sourceName:s,targetName:n,stream:Qe.CANCEL_COMPLETE,streamId:t,success:!0})},function(h){r.postMessage({sourceName:s,targetName:n,stream:Qe.CANCEL_COMPLETE,streamId:t,reason:Yt(h)})}),l.sinkCapability.reject(d),l.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},Uh=async function(e,t){var s,n,r;await Promise.allSettled([(s=e.startCall)==null?void 0:s.promise,(n=e.pullCall)==null?void 0:n.promise,(r=e.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[t]};var od;class z0{constructor({enableHWA:e=!1}){w(this,od,!1);b(this,od,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(e,t);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!c(this,od)})}}reset(e,t,s){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||s<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=s}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){_e("Abstract method `_createCanvas` called.")}}od=new WeakMap;class Fj extends z0{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const s=this._document.createElement("canvas");return s.width=e,s.height=t,s}}class $0{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){_e("Abstract method `_fetch` called.")}}class Zg extends $0{async _fetch(e){const t=await Yl(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):uh(t)}}class H0{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,s,n,r){return"none"}destroy(e=!1){}}var ma,qo,ai,oi,Tt,ga,xa,W,_t,cc,po,Vh,mo,U0,bp,go,dc,hc,vp,uc;class Bj extends H0{constructor({docId:t,ownerDocument:s=globalThis.document}){super();w(this,W);w(this,ma);w(this,qo);w(this,ai);w(this,oi);w(this,Tt);w(this,ga);w(this,xa,0);b(this,oi,t),b(this,Tt,s)}addFilter(t){if(!t)return"none";let s=c(this,W,_t).get(t);if(s)return s;const[n,r,a]=A(this,W,Vh).call(this,t),l=t.length===1?n:`${n}${r}${a}`;if(s=c(this,W,_t).get(l),s)return c(this,W,_t).set(t,s),s;const d=`g_${c(this,oi)}_transfer_map_${It(this,xa)._++}`,h=A(this,W,mo).call(this,d);c(this,W,_t).set(t,h),c(this,W,_t).set(l,h);const u=A(this,W,go).call(this,d);return A(this,W,hc).call(this,n,r,a,u),h}addHCMFilter(t,s){var x;const n=`${t}-${s}`,r="base";let a=c(this,W,cc).get(r);if((a==null?void 0:a.key)===n||(a?((x=a.filter)==null||x.remove(),a.key=n,a.url="none",a.filter=null):(a={key:n,url:"none",filter:null},c(this,W,cc).set(r,a)),!t||!s))return a.url;const l=A(this,W,uc).call(this,t);t=Z.makeHexColor(...l);const d=A(this,W,uc).call(this,s);if(s=Z.makeHexColor(...d),c(this,W,po).style.color="",t==="#000000"&&s==="#ffffff"||t===s)return a.url;const h=new Array(256);for(let g=0;g<=255;g++){const v=g/255;h[g]=v<=.03928?v/12.92:((v+.055)/1.055)**2.4}const u=h.join(","),f=`g_${c(this,oi)}_hcm_filter`,m=a.filter=A(this,W,go).call(this,f);A(this,W,hc).call(this,u,u,u,m),A(this,W,bp).call(this,m);const p=(g,v)=>{const y=l[g]/255,S=d[g]/255,j=new Array(v+1);for(let E=0;E<=v;E++)j[E]=y+E/v*(S-y);return j.join(",")};return A(this,W,hc).call(this,p(0,5),p(1,5),p(2,5),m),a.url=A(this,W,mo).call(this,f),a.url}addAlphaFilter(t){let s=c(this,W,_t).get(t);if(s)return s;const[n]=A(this,W,Vh).call(this,[t]),r=`alpha_${n}`;if(s=c(this,W,_t).get(r),s)return c(this,W,_t).set(t,s),s;const a=`g_${c(this,oi)}_alpha_map_${It(this,xa)._++}`,l=A(this,W,mo).call(this,a);c(this,W,_t).set(t,l),c(this,W,_t).set(r,l);const d=A(this,W,go).call(this,a);return A(this,W,vp).call(this,n,d),l}addLuminosityFilter(t){let s=c(this,W,_t).get(t||"luminosity");if(s)return s;let n,r;if(t?([n]=A(this,W,Vh).call(this,[t]),r=`luminosity_${n}`):r="luminosity",s=c(this,W,_t).get(r),s)return c(this,W,_t).set(t,s),s;const a=`g_${c(this,oi)}_luminosity_map_${It(this,xa)._++}`,l=A(this,W,mo).call(this,a);c(this,W,_t).set(t,l),c(this,W,_t).set(r,l);const d=A(this,W,go).call(this,a);return A(this,W,U0).call(this,d),t&&A(this,W,vp).call(this,n,d),l}addHighlightHCMFilter(t,s,n,r,a){var S;const l=`${s}-${n}-${r}-${a}`;let d=c(this,W,cc).get(t);if((d==null?void 0:d.key)===l||(d?((S=d.filter)==null||S.remove(),d.key=l,d.url="none",d.filter=null):(d={key:l,url:"none",filter:null},c(this,W,cc).set(t,d)),!s||!n))return d.url;const[h,u]=[s,n].map(A(this,W,uc).bind(this));let f=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),m=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),[p,x]=[r,a].map(A(this,W,uc).bind(this));m<f&&([f,m,p,x]=[m,f,x,p]),c(this,W,po).style.color="";const g=(j,E,C)=>{const k=new Array(256),_=(m-f)/C,T=j/255,P=(E-j)/(255*C);let R=0;for(let M=0;M<=C;M++){const F=Math.round(f+M*_),$=T+M*P;for(let B=R;B<=F;B++)k[B]=$;R=F+1}for(let M=R;M<256;M++)k[M]=k[R-1];return k.join(",")},v=`g_${c(this,oi)}_hcm_${t}_filter`,y=d.filter=A(this,W,go).call(this,v);return A(this,W,bp).call(this,y),A(this,W,hc).call(this,g(p[0],x[0],5),g(p[1],x[1],5),g(p[2],x[2],5),y),d.url=A(this,W,mo).call(this,v),d.url}destroy(t=!1){var s,n,r,a;t&&((s=c(this,ga))!=null&&s.size)||((n=c(this,ai))==null||n.parentNode.parentNode.remove(),b(this,ai,null),(r=c(this,qo))==null||r.clear(),b(this,qo,null),(a=c(this,ga))==null||a.clear(),b(this,ga,null),b(this,xa,0))}}ma=new WeakMap,qo=new WeakMap,ai=new WeakMap,oi=new WeakMap,Tt=new WeakMap,ga=new WeakMap,xa=new WeakMap,W=new WeakSet,_t=function(){return c(this,qo)||b(this,qo,new Map)},cc=function(){return c(this,ga)||b(this,ga,new Map)},po=function(){if(!c(this,ai)){const t=c(this,Tt).createElement("div"),{style:s}=t;s.visibility="hidden",s.contain="strict",s.width=s.height=0,s.position="absolute",s.top=s.left=0,s.zIndex=-1;const n=c(this,Tt).createElementNS(Wn,"svg");n.setAttribute("width",0),n.setAttribute("height",0),b(this,ai,c(this,Tt).createElementNS(Wn,"defs")),t.append(n),n.append(c(this,ai)),c(this,Tt).body.append(t)}return c(this,ai)},Vh=function(t){if(t.length===1){const h=t[0],u=new Array(256);for(let m=0;m<256;m++)u[m]=h[m]/255;const f=u.join(",");return[f,f,f]}const[s,n,r]=t,a=new Array(256),l=new Array(256),d=new Array(256);for(let h=0;h<256;h++)a[h]=s[h]/255,l[h]=n[h]/255,d[h]=r[h]/255;return[a.join(","),l.join(","),d.join(",")]},mo=function(t){if(c(this,ma)===void 0){b(this,ma,"");const s=c(this,Tt).URL;s!==c(this,Tt).baseURI&&(ph(s)?re('#createUrl: ignore "data:"-URL for performance reasons.'):b(this,ma,Dm(s,"")))}return`url(${c(this,ma)}#${t})`},U0=function(t){const s=c(this,Tt).createElementNS(Wn,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(s)},bp=function(t){const s=c(this,Tt).createElementNS(Wn,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(s)},go=function(t){const s=c(this,Tt).createElementNS(Wn,"filter");return s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("id",t),c(this,W,po).append(s),s},dc=function(t,s,n){const r=c(this,Tt).createElementNS(Wn,s);r.setAttribute("type","discrete"),r.setAttribute("tableValues",n),t.append(r)},hc=function(t,s,n,r){const a=c(this,Tt).createElementNS(Wn,"feComponentTransfer");r.append(a),A(this,W,dc).call(this,a,"feFuncR",t),A(this,W,dc).call(this,a,"feFuncG",s),A(this,W,dc).call(this,a,"feFuncB",n)},vp=function(t,s){const n=c(this,Tt).createElementNS(Wn,"feComponentTransfer");s.append(n),A(this,W,dc).call(this,n,"feFuncA",t)},uc=function(t){return c(this,W,po).style.color=t,Bm(getComputedStyle(c(this,W,po)).getPropertyValue("color"))};class V0{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){_e("Abstract method `_fetch` called.")}}class Qg extends V0{async _fetch(e){const t=await Yl(e,"arraybuffer");return new Uint8Array(t)}}class W0{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){_e("Abstract method `_fetch` called.")}}class ex extends W0{async _fetch(e){const t=await Yl(e,"arraybuffer");return new Uint8Array(t)}}$t&&re("Please use the `legacy` build in Node.js environments.");async function $m(i){const t=await process.getBuiltinModule("fs").promises.readFile(i);return new Uint8Array(t)}class zj extends H0{}class $j extends z0{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class Hj extends $0{async _fetch(e){return $m(e)}}class Uj extends V0{async _fetch(e){return $m(e)}}class Vj extends W0{async _fetch(e){return $m(e)}}const St={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function yp(i,e){if(!e)return;const t=e[2]-e[0],s=e[3]-e[1],n=new Path2D;n.rect(e[0],e[1],t,s),i.clip(n)}class Hm{isModifyingCurrentTransform(){return!1}getPattern(){_e("Abstract method `getPattern` called.")}}class Wj extends Hm{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)t.addColorStop(s[0],s[1]);return t}getPattern(e,t,s,n){let r;if(n===St.STROKE||n===St.FILL){const a=t.current.getClippedPathBoundingBox(n,Ue(e))||[0,0,0,0],l=Math.ceil(a[2]-a[0])||1,d=Math.ceil(a[3]-a[1])||1,h=t.cachedCanvases.getCanvas("pattern",l,d),u=h.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-a[0],-a[1]),s=Z.transform(s,[1,0,0,1,a[0],a[1]]),u.transform(...t.baseTransform),this.matrix&&u.transform(...this.matrix),yp(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),r=e.createPattern(h.canvas,"no-repeat");const f=new DOMMatrix(s);r.setTransform(f)}else yp(e,this._bbox),r=this._createGradient(e);return r}}function Lf(i,e,t,s,n,r,a,l){const d=e.coords,h=e.colors,u=i.data,f=i.width*4;let m;d[t+1]>d[s+1]&&(m=t,t=s,s=m,m=r,r=a,a=m),d[s+1]>d[n+1]&&(m=s,s=n,n=m,m=a,a=l,l=m),d[t+1]>d[s+1]&&(m=t,t=s,s=m,m=r,r=a,a=m);const p=(d[t]+e.offsetX)*e.scaleX,x=(d[t+1]+e.offsetY)*e.scaleY,g=(d[s]+e.offsetX)*e.scaleX,v=(d[s+1]+e.offsetY)*e.scaleY,y=(d[n]+e.offsetX)*e.scaleX,S=(d[n+1]+e.offsetY)*e.scaleY;if(x>=S)return;const j=h[r],E=h[r+1],C=h[r+2],k=h[a],_=h[a+1],T=h[a+2],P=h[l],R=h[l+1],M=h[l+2],F=Math.round(x),$=Math.round(S);let B,ee,I,D,V,L,te,ue;for(let q=F;q<=$;q++){if(q<v){const Q=q<x?0:(x-q)/(x-v);B=p-(p-g)*Q,ee=j-(j-k)*Q,I=E-(E-_)*Q,D=C-(C-T)*Q}else{let Q;q>S?Q=1:v===S?Q=0:Q=(v-q)/(v-S),B=g-(g-y)*Q,ee=k-(k-P)*Q,I=_-(_-R)*Q,D=T-(T-M)*Q}let J;q<x?J=0:q>S?J=1:J=(x-q)/(x-S),V=p-(p-y)*J,L=j-(j-P)*J,te=E-(E-R)*J,ue=C-(C-M)*J;const ce=Math.round(Math.min(B,V)),ve=Math.round(Math.max(B,V));let Le=f*q+ce*4;for(let Q=ce;Q<=ve;Q++)J=(B-Q)/(B-V),J<0?J=0:J>1&&(J=1),u[Le++]=ee-(ee-L)*J|0,u[Le++]=I-(I-te)*J|0,u[Le++]=D-(D-ue)*J|0,u[Le++]=255}}function Gj(i,e,t){const s=e.coords,n=e.colors;let r,a;switch(e.type){case"lattice":const l=e.verticesPerRow,d=Math.floor(s.length/l)-1,h=l-1;for(r=0;r<d;r++){let u=r*l;for(let f=0;f<h;f++,u++)Lf(i,t,s[u],s[u+1],s[u+l],n[u],n[u+1],n[u+l]),Lf(i,t,s[u+l+1],s[u+1],s[u+l],n[u+l+1],n[u+1],n[u+l])}break;case"triangles":for(r=0,a=s.length;r<a;r+=3)Lf(i,t,s[r],s[r+1],s[r+2],n[r],n[r+1],n[r+2]);break;default:throw new Error("illegal figure")}}class qj extends Hm{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,s){const l=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),h=Math.ceil(this._bounds[2])-l,u=Math.ceil(this._bounds[3])-d,f=Math.min(Math.ceil(Math.abs(h*e[0]*1.1)),3e3),m=Math.min(Math.ceil(Math.abs(u*e[1]*1.1)),3e3),p=h/f,x=u/m,g={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-d,scaleX:1/p,scaleY:1/x},v=f+2*2,y=m+2*2,S=s.getCanvas("mesh",v,y),j=S.context,E=j.createImageData(f,m);if(t){const k=E.data;for(let _=0,T=k.length;_<T;_+=4)k[_]=t[0],k[_+1]=t[1],k[_+2]=t[2],k[_+3]=255}for(const k of this._figures)Gj(E,k,g);return j.putImageData(E,2,2),{canvas:S.canvas,offsetX:l-2*p,offsetY:d-2*x,scaleX:p,scaleY:x}}isModifyingCurrentTransform(){return!0}getPattern(e,t,s,n){yp(e,this._bbox);const r=new Float32Array(2);if(n===St.SHADING)Z.singularValueDecompose2dScale(Ue(e),r);else if(this.matrix){Z.singularValueDecompose2dScale(this.matrix,r);const[l,d]=r;Z.singularValueDecompose2dScale(t.baseTransform,r),r[0]*=l,r[1]*=d}else Z.singularValueDecompose2dScale(t.baseTransform,r);const a=this._createMeshCanvas(r,n===St.SHADING?null:this._background,t.cachedCanvases);return n!==St.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class Xj extends Hm{getPattern(){return"hotpink"}}function Yj(i){switch(i[0]){case"RadialAxial":return new Wj(i);case"Mesh":return new qj(i);case"Dummy":return new Xj}throw new Error(`Unknown IR type: ${i[0]}`)}const tx={COLORED:1,UNCOLORED:2},Ou=class Ou{constructor(e,t,s,n){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=s,this.baseTransform=n}createPatternCanvas(e){const{bbox:t,operatorList:s,paintType:n,tilingType:r,color:a,canvasGraphicsFactory:l}=this;let{xstep:d,ystep:h}=this;d=Math.abs(d),h=Math.abs(h),af("TilingType: "+r);const u=t[0],f=t[1],m=t[2],p=t[3],x=m-u,g=p-f,v=new Float32Array(2);Z.singularValueDecompose2dScale(this.matrix,v);const[y,S]=v;Z.singularValueDecompose2dScale(this.baseTransform,v);const j=y*v[0],E=S*v[1];let C=x,k=g,_=!1,T=!1;const P=Math.ceil(d*j),R=Math.ceil(h*E),M=Math.ceil(x*j),F=Math.ceil(g*E);P>=M?C=d:_=!0,R>=F?k=h:T=!0;const $=this.getSizeAndScale(C,this.ctx.canvas.width,j),B=this.getSizeAndScale(k,this.ctx.canvas.height,E),ee=e.cachedCanvases.getCanvas("pattern",$.size,B.size),I=ee.context,D=l.createCanvasGraphics(I);if(D.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(D,n,a),I.translate(-$.scale*u,-B.scale*f),D.transform($.scale,0,0,B.scale,0,0),I.save(),this.clipBbox(D,u,f,m,p),D.baseTransform=Ue(D.ctx),D.executeOperatorList(s),D.endDrawing(),I.restore(),_||T){const V=ee.canvas;_&&(C=d),T&&(k=h);const L=this.getSizeAndScale(C,this.ctx.canvas.width,j),te=this.getSizeAndScale(k,this.ctx.canvas.height,E),ue=L.size,q=te.size,J=e.cachedCanvases.getCanvas("pattern-workaround",ue,q),ce=J.context,ve=_?Math.floor(x/d):0,Le=T?Math.floor(g/h):0;for(let Q=0;Q<=ve;Q++)for(let bt=0;bt<=Le;bt++)ce.drawImage(V,ue*Q,q*bt,ue,q,0,0,ue,q);return{canvas:J.canvas,scaleX:L.scale,scaleY:te.scale,offsetX:u,offsetY:f}}return{canvas:ee.canvas,scaleX:$.scale,scaleY:B.scale,offsetX:u,offsetY:f}}getSizeAndScale(e,t,s){const n=Math.max(Ou.MAX_PATTERN_SIZE,t);let r=Math.ceil(e*s);return r>=n?r=n:s=r/e,{scale:s,size:r}}clipBbox(e,t,s,n,r){const a=n-t,l=r-s;e.ctx.rect(t,s,a,l),Z.axialAlignedBoundingBox([t,s,n,r],Ue(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,s){const n=e.ctx,r=e.current;switch(t){case tx.COLORED:const{fillStyle:a,strokeStyle:l}=this.ctx;n.fillStyle=r.fillColor=a,n.strokeStyle=r.strokeColor=l;break;case tx.UNCOLORED:n.fillStyle=n.strokeStyle=s,r.fillColor=r.strokeColor=s;break;default:throw new vj(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,s,n){let r=s;n!==St.SHADING&&(r=Z.transform(r,t.baseTransform),this.matrix&&(r=Z.transform(r,this.matrix)));const a=this.createPatternCanvas(t);let l=new DOMMatrix(r);l=l.translate(a.offsetX,a.offsetY),l=l.scale(1/a.scaleX,1/a.scaleY);const d=e.createPattern(a.canvas,"repeat");return d.setTransform(l),d}};z(Ou,"MAX_PATTERN_SIZE",3e3);let wp=Ou;function Kj({src:i,srcPos:e=0,dest:t,width:s,height:n,nonBlackColor:r=4294967295,inverseDecode:a=!1}){const l=xt.isLittleEndian?4278190080:255,[d,h]=a?[r,l]:[l,r],u=s>>3,f=s&7,m=i.length;t=new Uint32Array(t.buffer);let p=0;for(let x=0;x<n;x++){for(const v=e+u;e<v;e++){const y=e<m?i[e]:255;t[p++]=y&128?h:d,t[p++]=y&64?h:d,t[p++]=y&32?h:d,t[p++]=y&16?h:d,t[p++]=y&8?h:d,t[p++]=y&4?h:d,t[p++]=y&2?h:d,t[p++]=y&1?h:d}if(f===0)continue;const g=e<m?i[e++]:255;for(let v=0;v<f;v++)t[p++]=g&1<<7-v?h:d}return{srcPos:e,destPos:p}}const sx=16,nx=100,Jj=15,ix=10,ts=16,If=new DOMMatrix,vs=new Float32Array(2),Ao=new Float32Array([1/0,1/0,-1/0,-1/0]);function Zj(i,e){if(i._removeMirroring)throw new Error("Context is already forwarding operations.");i.__originalSave=i.save,i.__originalRestore=i.restore,i.__originalRotate=i.rotate,i.__originalScale=i.scale,i.__originalTranslate=i.translate,i.__originalTransform=i.transform,i.__originalSetTransform=i.setTransform,i.__originalResetTransform=i.resetTransform,i.__originalClip=i.clip,i.__originalMoveTo=i.moveTo,i.__originalLineTo=i.lineTo,i.__originalBezierCurveTo=i.bezierCurveTo,i.__originalRect=i.rect,i.__originalClosePath=i.closePath,i.__originalBeginPath=i.beginPath,i._removeMirroring=()=>{i.save=i.__originalSave,i.restore=i.__originalRestore,i.rotate=i.__originalRotate,i.scale=i.__originalScale,i.translate=i.__originalTranslate,i.transform=i.__originalTransform,i.setTransform=i.__originalSetTransform,i.resetTransform=i.__originalResetTransform,i.clip=i.__originalClip,i.moveTo=i.__originalMoveTo,i.lineTo=i.__originalLineTo,i.bezierCurveTo=i.__originalBezierCurveTo,i.rect=i.__originalRect,i.closePath=i.__originalClosePath,i.beginPath=i.__originalBeginPath,delete i._removeMirroring},i.save=function(){e.save(),this.__originalSave()},i.restore=function(){e.restore(),this.__originalRestore()},i.translate=function(t,s){e.translate(t,s),this.__originalTranslate(t,s)},i.scale=function(t,s){e.scale(t,s),this.__originalScale(t,s)},i.transform=function(t,s,n,r,a,l){e.transform(t,s,n,r,a,l),this.__originalTransform(t,s,n,r,a,l)},i.setTransform=function(t,s,n,r,a,l){e.setTransform(t,s,n,r,a,l),this.__originalSetTransform(t,s,n,r,a,l)},i.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},i.rotate=function(t){e.rotate(t),this.__originalRotate(t)},i.clip=function(t){e.clip(t),this.__originalClip(t)},i.moveTo=function(t,s){e.moveTo(t,s),this.__originalMoveTo(t,s)},i.lineTo=function(t,s){e.lineTo(t,s),this.__originalLineTo(t,s)},i.bezierCurveTo=function(t,s,n,r,a,l){e.bezierCurveTo(t,s,n,r,a,l),this.__originalBezierCurveTo(t,s,n,r,a,l)},i.rect=function(t,s,n,r){e.rect(t,s,n,r),this.__originalRect(t,s,n,r)},i.closePath=function(){e.closePath(),this.__originalClosePath()},i.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class Qj{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,s){let n;return this.cache[e]!==void 0?(n=this.cache[e],this.canvasFactory.reset(n,t,s)):(n=this.canvasFactory.create(t,s),this.cache[e]=n),n}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function _h(i,e,t,s,n,r,a,l,d,h){const[u,f,m,p,x,g]=Ue(i);if(f===0&&m===0){const S=a*u+x,j=Math.round(S),E=l*p+g,C=Math.round(E),k=(a+d)*u+x,_=Math.abs(Math.round(k)-j)||1,T=(l+h)*p+g,P=Math.abs(Math.round(T)-C)||1;return i.setTransform(Math.sign(u),0,0,Math.sign(p),j,C),i.drawImage(e,t,s,n,r,0,0,_,P),i.setTransform(u,f,m,p,x,g),[_,P]}if(u===0&&p===0){const S=l*m+x,j=Math.round(S),E=a*f+g,C=Math.round(E),k=(l+h)*m+x,_=Math.abs(Math.round(k)-j)||1,T=(a+d)*f+g,P=Math.abs(Math.round(T)-C)||1;return i.setTransform(0,Math.sign(f),Math.sign(m),0,j,C),i.drawImage(e,t,s,n,r,0,0,P,_),i.setTransform(u,f,m,p,x,g),[P,_]}i.drawImage(e,t,s,n,r,a,l,d,h);const v=Math.hypot(u,f),y=Math.hypot(m,p);return[v*d,y*h]}class rx{constructor(e,t){z(this,"alphaIsShape",!1);z(this,"fontSize",0);z(this,"fontSizeScale",1);z(this,"textMatrix",null);z(this,"textMatrixScale",1);z(this,"fontMatrix",Zf);z(this,"leading",0);z(this,"x",0);z(this,"y",0);z(this,"lineX",0);z(this,"lineY",0);z(this,"charSpacing",0);z(this,"wordSpacing",0);z(this,"textHScale",1);z(this,"textRenderingMode",Ct.FILL);z(this,"textRise",0);z(this,"fillColor","#000000");z(this,"strokeColor","#000000");z(this,"patternFill",!1);z(this,"patternStroke",!1);z(this,"fillAlpha",1);z(this,"strokeAlpha",1);z(this,"lineWidth",1);z(this,"activeSMask",null);z(this,"transferMaps","none");this.clipBox=new Float32Array([0,0,e,t]),this.minMax=Ao.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=St.FILL,t=null){const s=this.minMax.slice();if(e===St.STROKE){t||_e("Stroke bounding box must include transform."),Z.singularValueDecompose2dScale(t,vs);const n=vs[0]*this.lineWidth/2,r=vs[1]*this.lineWidth/2;s[0]-=n,s[1]-=r,s[2]+=n,s[3]+=r}return s}updateClipFromPath(){const e=Z.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(Ao,0)}getClippedPathBoundingBox(e=St.FILL,t=null){return Z.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function ax(i,e){if(e instanceof ImageData){i.putImageData(e,0,0);return}const t=e.height,s=e.width,n=t%ts,r=(t-n)/ts,a=n===0?r:r+1,l=i.createImageData(s,ts);let d=0,h;const u=e.data,f=l.data;let m,p,x,g;if(e.kind===Nc.GRAYSCALE_1BPP){const v=u.byteLength,y=new Uint32Array(f.buffer,0,f.byteLength>>2),S=y.length,j=s+7>>3,E=4294967295,C=xt.isLittleEndian?4278190080:255;for(m=0;m<a;m++){for(x=m<r?ts:n,h=0,p=0;p<x;p++){const k=v-d;let _=0;const T=k>j?s:k*8-7,P=T&-8;let R=0,M=0;for(;_<P;_+=8)M=u[d++],y[h++]=M&128?E:C,y[h++]=M&64?E:C,y[h++]=M&32?E:C,y[h++]=M&16?E:C,y[h++]=M&8?E:C,y[h++]=M&4?E:C,y[h++]=M&2?E:C,y[h++]=M&1?E:C;for(;_<T;_++)R===0&&(M=u[d++],R=128),y[h++]=M&R?E:C,R>>=1}for(;h<S;)y[h++]=0;i.putImageData(l,0,m*ts)}}else if(e.kind===Nc.RGBA_32BPP){for(p=0,g=s*ts*4,m=0;m<r;m++)f.set(u.subarray(d,d+g)),d+=g,i.putImageData(l,0,p),p+=ts;m<a&&(g=s*n*4,f.set(u.subarray(d,d+g)),i.putImageData(l,0,p))}else if(e.kind===Nc.RGB_24BPP)for(x=ts,g=s*x,m=0;m<a;m++){for(m>=r&&(x=n,g=s*x),h=0,p=g;p--;)f[h++]=u[d++],f[h++]=u[d++],f[h++]=u[d++],f[h++]=255;i.putImageData(l,0,m*ts)}else throw new Error(`bad image kind: ${e.kind}`)}function ox(i,e){if(e.bitmap){i.drawImage(e.bitmap,0,0);return}const t=e.height,s=e.width,n=t%ts,r=(t-n)/ts,a=n===0?r:r+1,l=i.createImageData(s,ts);let d=0;const h=e.data,u=l.data;for(let f=0;f<a;f++){const m=f<r?ts:n;({srcPos:d}=Kj({src:h,srcPos:d,dest:u,width:s,height:m,nonBlackColor:0})),i.putImageData(l,0,f*ts)}}function Zl(i,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of t)i[s]!==void 0&&(e[s]=i[s]);i.setLineDash!==void 0&&(e.setLineDash(i.getLineDash()),e.lineDashOffset=i.lineDashOffset)}function kh(i){i.strokeStyle=i.fillStyle="#000000",i.fillRule="nonzero",i.globalAlpha=1,i.lineWidth=1,i.lineCap="butt",i.lineJoin="miter",i.miterLimit=10,i.globalCompositeOperation="source-over",i.font="10px sans-serif",i.setLineDash!==void 0&&(i.setLineDash([]),i.lineDashOffset=0);const{filter:e}=i;e!=="none"&&e!==""&&(i.filter="none")}function lx(i,e){if(e)return!0;Z.singularValueDecompose2dScale(i,vs);const t=Math.fround(on.pixelRatio*Pi.PDF_TO_CSS_UNITS);return vs[0]<=t&&vs[1]<=t}const eE=["butt","round","square"],tE=["miter","round","bevel"],sE={},cx={};var ln,Ap,Np,Sp;const rg=class rg{constructor(e,t,s,n,r,{optionalContentConfig:a,markedContentStack:l=null},d,h){w(this,ln);this.ctx=e,this.current=new rx(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=s,this.canvasFactory=n,this.filterFactory=r,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=a,this.cachedCanvases=new Qj(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=h,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:s=!1,background:n=null}){const r=this.ctx.canvas.width,a=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=n||"#ffffff",this.ctx.fillRect(0,0,r,a),this.ctx.fillStyle=l,s){const d=this.cachedCanvases.getCanvas("transparent",r,a);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...Ue(this.compositeCtx))}this.ctx.save(),kh(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Ue(this.ctx)}executeOperatorList(e,t,s,n){const r=e.argsArray,a=e.fnArray;let l=t||0;const d=r.length;if(d===l)return l;const h=d-l>ix&&typeof s=="function",u=h?Date.now()+Jj:0;let f=0;const m=this.commonObjs,p=this.objs;let x;for(;;){if(n!==void 0&&l===n.nextBreakPoint)return n.breakIt(l,s),l;if(x=a[l],x!==_c.dependency)this[x].apply(this,r[l]);else for(const g of r[l]){const v=g.startsWith("g_")?m:p;if(!v.has(g))return v.get(g,s),l}if(l++,l===d)return l;if(h&&++f>ix){if(Date.now()>u)return s(),l;f=0}}}endDrawing(){A(this,ln,Ap).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),A(this,ln,Np).call(this)}_scaleImage(e,t){const s=e.width??e.displayWidth,n=e.height??e.displayHeight;let r=Math.max(Math.hypot(t[0],t[1]),1),a=Math.max(Math.hypot(t[2],t[3]),1),l=s,d=n,h="prescale1",u,f;for(;r>2&&l>1||a>2&&d>1;){let m=l,p=d;r>2&&l>1&&(m=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),r/=l/m),a>2&&d>1&&(p=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,a/=d/p),u=this.cachedCanvases.getCanvas(h,m,p),f=u.context,f.clearRect(0,0,m,p),f.drawImage(e,0,0,l,d,0,0,m,p),e=u.canvas,l=m,d=p,h=h==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:l,paintHeight:d}}_createMaskCanvas(e){const t=this.ctx,{width:s,height:n}=e,r=this.current.fillColor,a=this.current.patternFill,l=Ue(t);let d,h,u,f;if((e.bitmap||e.data)&&e.count>1){const P=e.bitmap||e.data.buffer;h=JSON.stringify(a?l:[l.slice(0,4),r]),d=this._cachedBitmapsMap.get(P),d||(d=new Map,this._cachedBitmapsMap.set(P,d));const R=d.get(h);if(R&&!a){const M=Math.round(Math.min(l[0],l[2])+l[4]),F=Math.round(Math.min(l[1],l[3])+l[5]);return{canvas:R,offsetX:M,offsetY:F}}u=R}u||(f=this.cachedCanvases.getCanvas("maskCanvas",s,n),ox(f.context,e));let m=Z.transform(l,[1/s,0,0,-1/n,0,0]);m=Z.transform(m,[1,0,0,1,0,-n]);const p=Ao.slice();Z.axialAlignedBoundingBox([0,0,s,n],m,p);const[x,g,v,y]=p,S=Math.round(v-x)||1,j=Math.round(y-g)||1,E=this.cachedCanvases.getCanvas("fillCanvas",S,j),C=E.context,k=x,_=g;C.translate(-k,-_),C.transform(...m),u||(u=this._scaleImage(f.canvas,fn(C)),u=u.img,d&&a&&d.set(h,u)),C.imageSmoothingEnabled=lx(Ue(C),e.interpolate),_h(C,u,0,0,u.width,u.height,0,0,s,n),C.globalCompositeOperation="source-in";const T=Z.transform(fn(C),[1,0,0,1,-k,-_]);return C.fillStyle=a?r.getPattern(t,this,T,St.FILL):r,C.fillRect(0,0,s,n),d&&!a&&(this.cachedCanvases.delete("fillCanvas"),d.set(h,E.canvas)),{canvas:E.canvas,offsetX:Math.round(k),offsetY:Math.round(_)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=eE[e]}setLineJoin(e){this.ctx.lineJoin=tE[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(e),s.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,s]of e)switch(t){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s[0],s[1]);break;case"CA":this.current.strokeAlpha=s;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=s;break;case"BM":this.ctx.globalCompositeOperation=s;break;case"SMask":this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,n=this.cachedCanvases.getCanvas(s,e,t);this.suspendedCtx=this.ctx;const r=this.ctx=n.context;r.setTransform(this.suspendedCtx.getTransform()),Zl(this.suspendedCtx,r),Zj(r,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Zl(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,s,n){const r=n[0],a=n[1],l=n[2]-r,d=n[3]-a;l===0||d===0||(this.genericComposeSMask(t.context,s,l,d,t.subtype,t.backdrop,t.transferMap,r,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(s.canvas,0,0),e.restore())}genericComposeSMask(e,t,s,n,r,a,l,d,h,u,f){let m=e.canvas,p=d-u,x=h-f;if(a)if(p<0||x<0||p+s>m.width||x+n>m.height){const v=this.cachedCanvases.getCanvas("maskExtension",s,n),y=v.context;y.drawImage(m,-p,-x),y.globalCompositeOperation="destination-atop",y.fillStyle=a,y.fillRect(0,0,s,n),y.globalCompositeOperation="source-over",m=v.canvas,p=x=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const v=new Path2D;v.rect(p,x,s,n),e.clip(v),e.globalCompositeOperation="destination-atop",e.fillStyle=a,e.fillRect(p,x,s,n),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),r==="Alpha"&&l?t.filter=this.filterFactory.addAlphaFilter(l):r==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(l));const g=new Path2D;g.rect(d,h,s,n),t.clip(g),t.globalCompositeOperation="destination-in",t.drawImage(m,p,x,s,n,d,h,s,n),t.restore()}save(){this.inSMaskMode&&Zl(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Zl(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,s,n,r,a){this.ctx.transform(e,t,s,n,r,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,s){let[n]=t;if(!s){n||(n=t[0]=new Path2D),this[e](n);return}if(!(n instanceof Path2D)){const r=t[0]=new Path2D;for(let a=0,l=n.length;a<l;)switch(n[a++]){case jh.moveTo:r.moveTo(n[a++],n[a++]);break;case jh.lineTo:r.lineTo(n[a++],n[a++]);break;case jh.curveTo:r.bezierCurveTo(n[a++],n[a++],n[a++],n[a++],n[a++],n[a++]);break;case jh.closePath:r.closePath();break;default:re(`Unrecognized drawing path operator: ${n[a-1]}`);break}n=r}Z.axialAlignedBoundingBox(s,Ue(this.ctx),this.current.minMax),this[e](n)}closePath(){this.ctx.closePath()}stroke(e,t=!0){const s=this.ctx,n=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof n=="object"&&(n!=null&&n.getPattern)){const r=n.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=n.getPattern(s,this,fn(s),St.STROKE),r){const a=new Path2D;a.addPath(e,s.getTransform().invertSelf().multiplySelf(r)),e=a}this.rescaleAndStroke(e,!1),s.restore()}else this.rescaleAndStroke(e,!0);t&&this.consumePath(e,this.current.getClippedPathBoundingBox(St.STROKE,Ue(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(e){this.stroke(e)}fill(e,t=!0){const s=this.ctx,n=this.current.fillColor,r=this.current.patternFill;let a=!1;if(r){const d=n.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.fillStyle=n.getPattern(s,this,fn(s),St.FILL),d){const h=new Path2D;h.addPath(e,s.getTransform().invertSelf().multiplySelf(d)),e=h}a=!0}const l=this.current.getClippedPathBoundingBox();this.contentVisible&&l!==null&&(this.pendingEOFill?(s.fill(e,"evenodd"),this.pendingEOFill=!1):s.fill(e)),a&&s.restore(),t&&this.consumePath(e,l)}eoFill(e){this.pendingEOFill=!0,this.fill(e)}fillStroke(e){this.fill(e,!1),this.stroke(e,!1),this.consumePath(e)}eoFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}closeFillStroke(e){this.fillStroke(e)}closeEOFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}endPath(e){this.consumePath(e)}rawFillPath(e){this.ctx.fill(e)}clip(){this.pendingClip=sE}eoClip(){this.pendingClip=cx}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0)return;const s=new Path2D,n=t.getTransform().invertSelf();for(const{transform:r,x:a,y:l,fontSize:d,path:h}of e)s.addPath(h,new DOMMatrix(r).preMultiplySelf(n).translate(a,l).scale(d,-d));t.clip(s),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var u;const s=this.commonObjs.get(e),n=this.current;if(!s)throw new Error(`Can't find font for ${e}`);if(n.fontMatrix=s.fontMatrix||Zf,(n.fontMatrix[0]===0||n.fontMatrix[3]===0)&&re("Invalid font matrix for font "+e),t<0?(t=-t,n.fontDirection=-1):n.fontDirection=1,this.current.font=s,this.current.fontSize=t,s.isType3Font)return;const r=s.loadedName||"sans-serif",a=((u=s.systemFontInfo)==null?void 0:u.css)||`"${r}", ${s.fallbackName}`;let l="normal";s.black?l="900":s.bold&&(l="bold");const d=s.italic?"italic":"normal";let h=t;t<sx?h=sx:t>nx&&(h=nx),this.current.fontSizeScale=t/h,this.ctx.font=`${d} ${l} ${h}px ${a}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e){const{current:t}=this;t.textMatrix=e,t.textMatrixScale=Math.hypot(e[0],e[1]),t.x=t.lineX=0,t.y=t.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,s,n,r){const a=this.ctx,l=this.current,d=l.font,h=l.textRenderingMode,u=l.fontSize/l.fontSizeScale,f=h&Ct.FILL_STROKE_MASK,m=!!(h&Ct.ADD_TO_PATH_FLAG),p=l.patternFill&&!d.missingFile,x=l.patternStroke&&!d.missingFile;let g;if((d.disableFontFace||m||p||x)&&(g=d.getPathGenerator(this.commonObjs,e)),d.disableFontFace||p||x){a.save(),a.translate(t,s),a.scale(u,-u);let v;if((f===Ct.FILL||f===Ct.FILL_STROKE)&&(n?(v=a.getTransform(),a.setTransform(...n),a.fill(A(this,ln,Sp).call(this,g,v,n))):a.fill(g)),f===Ct.STROKE||f===Ct.FILL_STROKE)if(r){v||(v=a.getTransform()),a.setTransform(...r);const{a:y,b:S,c:j,d:E}=v,C=Z.inverseTransform(r),k=Z.transform([y,S,j,E,0,0],C);Z.singularValueDecompose2dScale(k,vs),a.lineWidth*=Math.max(vs[0],vs[1])/u,a.stroke(A(this,ln,Sp).call(this,g,v,r))}else a.lineWidth/=u,a.stroke(g);a.restore()}else(f===Ct.FILL||f===Ct.FILL_STROKE)&&a.fillText(e,t,s),(f===Ct.STROKE||f===Ct.FILL_STROKE)&&a.strokeText(e,t,s);m&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Ue(a),x:t,y:s,fontSize:u,path:g})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let s=!1;for(let n=3;n<t.length;n+=4)if(t[n]>0&&t[n]<255){s=!0;break}return pe(this,"isFontSubpixelAAEnabled",s)}showText(e){const t=this.current,s=t.font;if(s.isType3Font)return this.showType3Text(e);const n=t.fontSize;if(n===0)return;const r=this.ctx,a=t.fontSizeScale,l=t.charSpacing,d=t.wordSpacing,h=t.fontDirection,u=t.textHScale*h,f=e.length,m=s.vertical,p=m?1:-1,x=s.defaultVMetrics,g=n*t.fontMatrix[0],v=t.textRenderingMode===Ct.FILL&&!s.disableFontFace&&!t.patternFill;r.save(),t.textMatrix&&r.transform(...t.textMatrix),r.translate(t.x,t.y+t.textRise),h>0?r.scale(u,-1):r.scale(u,1);let y,S;if(t.patternFill){r.save();const _=t.fillColor.getPattern(r,this,fn(r),St.FILL);y=Ue(r),r.restore(),r.fillStyle=_}if(t.patternStroke){r.save();const _=t.strokeColor.getPattern(r,this,fn(r),St.STROKE);S=Ue(r),r.restore(),r.strokeStyle=_}let j=t.lineWidth;const E=t.textMatrixScale;if(E===0||j===0){const _=t.textRenderingMode&Ct.FILL_STROKE_MASK;(_===Ct.STROKE||_===Ct.FILL_STROKE)&&(j=this.getSinglePixelWidth())}else j/=E;if(a!==1&&(r.scale(a,a),j/=a),r.lineWidth=j,s.isInvalidPDFjsFont){const _=[];let T=0;for(const P of e)_.push(P.unicode),T+=P.width;r.fillText(_.join(""),0,0),t.x+=T*g*u,r.restore(),this.compose();return}let C=0,k;for(k=0;k<f;++k){const _=e[k];if(typeof _=="number"){C+=p*_*n/1e3;continue}let T=!1;const P=(_.isSpace?d:0)+l,R=_.fontChar,M=_.accent;let F,$,B=_.width;if(m){const I=_.vmetric||x,D=-(_.vmetric?I[1]:B*.5)*g,V=I[2]*g;B=I?-I[0]:B,F=D/a,$=(C+V)/a}else F=C/a,$=0;if(s.remeasure&&B>0){const I=r.measureText(R).width*1e3/n*a;if(B<I&&this.isFontSubpixelAAEnabled){const D=B/I;T=!0,r.save(),r.scale(D,1),F/=D}else B!==I&&(F+=(B-I)/2e3*n/a)}if(this.contentVisible&&(_.isInFont||s.missingFile)){if(v&&!M)r.fillText(R,F,$);else if(this.paintChar(R,F,$,y,S),M){const I=F+n*M.offset.x/a,D=$-n*M.offset.y/a;this.paintChar(M.fontChar,I,D,y,S)}}const ee=m?B*g-P*h:B*g+P*h;C+=ee,T&&r.restore()}m?t.y-=C:t.x+=C*u,r.restore(),this.compose()}showType3Text(e){const t=this.ctx,s=this.current,n=s.font,r=s.fontSize,a=s.fontDirection,l=n.vertical?1:-1,d=s.charSpacing,h=s.wordSpacing,u=s.textHScale*a,f=s.fontMatrix||Zf,m=e.length,p=s.textRenderingMode===Ct.INVISIBLE;let x,g,v,y;if(!(p||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),s.textMatrix&&t.transform(...s.textMatrix),t.translate(s.x,s.y+s.textRise),t.scale(u,a),x=0;x<m;++x){if(g=e[x],typeof g=="number"){y=l*g*r/1e3,this.ctx.translate(y,0),s.x+=y*u;continue}const S=(g.isSpace?h:0)+d,j=n.charProcOperatorList[g.operatorListId];j?this.contentVisible&&(this.save(),t.scale(r,r),t.transform(...f),this.executeOperatorList(j),this.restore()):re(`Type3 character "${g.operatorListId}" is not available.`);const E=[g.width,0];Z.applyTransform(E,f),v=E[0]*r+S,t.translate(v,0),s.x+=v*u}t.restore()}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,s,n,r,a){const l=new Path2D;l.rect(s,n,r-s,a-n),this.ctx.clip(l),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const s=this.baseTransform||Ue(this.ctx),n={createCanvasGraphics:r=>new rg(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new wp(e,this.ctx,n,s)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e){this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e){this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let s;return this.cachedPatterns.has(e)?s=this.cachedPatterns.get(e):(s=Yj(this.getObject(e)),this.cachedPatterns.set(e,s)),t&&(s.matrix=t),s}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const s=this._getPattern(e);t.fillStyle=s.getPattern(t,this,fn(t),St.SHADING);const n=fn(t);if(n){const{width:r,height:a}=t.canvas,l=Ao.slice();Z.axialAlignedBoundingBox([0,0,r,a],n,l);const[d,h,u,f]=l;this.ctx.fillRect(d,h,u-d,f-h)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){_e("Should not call beginInlineImage")}beginImageData(){_e("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=Ue(this.ctx),t)){Z.axialAlignedBoundingBox(t,this.baseTransform,this.current.minMax);const[s,n,r,a]=t,l=new Path2D;l.rect(s,n,r-s,a-n),this.ctx.clip(l),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||af("TODO: Support non-isolated groups."),e.knockout&&re("Knockout groups not supported.");const s=Ue(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let n=Ao.slice();Z.axialAlignedBoundingBox(e.bbox,Ue(t),n);const r=[0,0,t.canvas.width,t.canvas.height];n=Z.intersect(n,r)||[0,0,0,0];const a=Math.floor(n[0]),l=Math.floor(n[1]),d=Math.max(Math.ceil(n[2])-a,1),h=Math.max(Math.ceil(n[3])-l,1);this.current.startNewPathAndClipBox([0,0,d,h]);let u="groupAt"+this.groupLevel;e.smask&&(u+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(u,d,h),m=f.context;m.translate(-a,-l),m.transform(...s);let p=new Path2D;const[x,g,v,y]=e.bbox;if(p.rect(x,g,v-x,y-g),e.matrix){const S=new Path2D;S.addPath(p,new DOMMatrix(e.matrix)),p=S}m.clip(p),e.smask?this.smaskStack.push({canvas:f.canvas,context:m,offsetX:a,offsetY:l,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(a,l),t.save()),Zl(t,m),this.ctx=m,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const n=Ue(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...n);const r=Ao.slice();Z.axialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],n,r),this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(e,t,s,n,r){if(A(this,ln,Ap).call(this),kh(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const a=t[2]-t[0],l=t[3]-t[1];if(r&&this.annotationCanvasMap){s=s.slice(),s[4]-=t[0],s[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=a,t[3]=l,Z.singularValueDecompose2dScale(Ue(this.ctx),vs);const{viewportScale:d}=this,h=Math.ceil(a*this.outputScaleX*d),u=Math.ceil(l*this.outputScaleY*d);this.annotationCanvas=this.canvasFactory.create(h,u);const{canvas:f,context:m}=this.annotationCanvas;this.annotationCanvasMap.set(e,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=m,this.ctx.save(),this.ctx.setTransform(vs[0],0,0,-vs[1],0,l*vs[1]),kh(this.ctx)}else{kh(this.ctx),this.endPath();const d=new Path2D;d.rect(t[0],t[1],a,l),this.ctx.clip(d)}}this.current=new rx(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...s),this.transform(...n)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),A(this,ln,Np).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const s=this.ctx,n=this._createMaskCanvas(e),r=n.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(r,n.offsetX,n.offsetY),s.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,s=0,n=0,r,a){if(!this.contentVisible)return;e=this.getObject(e.data,e);const l=this.ctx;l.save();const d=Ue(l);l.transform(t,s,n,r,0,0);const h=this._createMaskCanvas(e);l.setTransform(1,0,0,1,h.offsetX-d[4],h.offsetY-d[5]);for(let u=0,f=a.length;u<f;u+=2){const m=Z.transform(d,[t,s,n,r,a[u],a[u+1]]);l.drawImage(h.canvas,m[4],m[5])}l.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,s=this.current.fillColor,n=this.current.patternFill;for(const r of e){const{data:a,width:l,height:d,transform:h}=r,u=this.cachedCanvases.getCanvas("maskCanvas",l,d),f=u.context;f.save();const m=this.getObject(a,r);ox(f,m),f.globalCompositeOperation="source-in",f.fillStyle=n?s.getPattern(f,this,fn(t),St.FILL):s,f.fillRect(0,0,l,d),f.restore(),t.save(),t.transform(...h),t.scale(1,-1),_h(t,u.canvas,0,0,l,d,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){re("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,s,n){if(!this.contentVisible)return;const r=this.getObject(e);if(!r){re("Dependent image isn't ready yet");return}const a=r.width,l=r.height,d=[];for(let h=0,u=n.length;h<u;h+=2)d.push({transform:[t,0,0,s,n[h],n[h+1]],x:0,y:0,w:a,h:l});this.paintInlineImageXObjectGroup(r,d)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:s,height:n}=e,r=this.cachedCanvases.getCanvas("inlineImage",s,n),a=r.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",r.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,s=e.height,n=this.ctx;this.save();const{filter:r}=n;r!=="none"&&r!==""&&(n.filter="none"),n.scale(1/t,-1/s);let a;if(e.bitmap)a=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)a=e;else{const h=this.cachedCanvases.getCanvas("inlineImage",t,s).context;ax(h,e),a=this.applyTransferMapsToCanvas(h)}const l=this._scaleImage(a,fn(n));n.imageSmoothingEnabled=lx(Ue(n),e.interpolate),_h(n,l.img,0,0,l.paintWidth,l.paintHeight,0,-s,t,s),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const s=this.ctx;let n;if(e.bitmap)n=e.bitmap;else{const r=e.width,a=e.height,d=this.cachedCanvases.getCanvas("inlineImage",r,a).context;ax(d,e),n=this.applyTransferMapsToCanvas(d)}for(const r of t)s.save(),s.transform(...r.transform),s.scale(1,-1),_h(s,n,r.x,r.y,r.w,r.h,0,-1,1,1),s.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e,t){const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const n=this.ctx;this.pendingClip&&(s||(this.pendingClip===cx?n.clip(e,"evenodd"):n.clip(e)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Ue(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),s=Math.hypot(e[0],e[2]),n=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(s,n)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:s,c:n,d:r}=this.ctx.getTransform();let a,l;if(s===0&&n===0){const d=Math.abs(t),h=Math.abs(r);if(d===h)if(e===0)a=l=1/d;else{const u=d*e;a=l=u<1?1/u:1}else if(e===0)a=1/d,l=1/h;else{const u=d*e,f=h*e;a=u<1?1/u:1,l=f<1?1/f:1}}else{const d=Math.abs(t*r-s*n),h=Math.hypot(t,s),u=Math.hypot(n,r);if(e===0)a=u/d,l=h/d;else{const f=e*d;a=u>f?u/f:1,l=h>f?h/f:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:s,current:{lineWidth:n}}=this,[r,a]=this.getScaleForStroking();if(r===a){s.lineWidth=(n||1)*r,s.stroke(e);return}const l=s.getLineDash();t&&s.save(),s.scale(r,a),If.a=1/r,If.d=1/a;const d=new Path2D;if(d.addPath(e,If),l.length>0){const h=Math.max(r,a);s.setLineDash(l.map(u=>u/h)),s.lineDashOffset/=h}s.lineWidth=n||1,s.stroke(d),t&&s.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};ln=new WeakSet,Ap=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Np=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},Sp=function(e,t,s){const n=new Path2D;return n.addPath(e,new DOMMatrix(s).invertSelf().multiplySelf(t)),n};let Co=rg;for(const i in _c)Co.prototype[i]!==void 0&&(Co.prototype[_c[i]]=Co.prototype[i]);var ld,cd;class Ms{static get workerPort(){return c(this,ld)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");b(this,ld,e)}static get workerSrc(){return c(this,cd)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");b(this,cd,e)}}ld=new WeakMap,cd=new WeakMap,w(Ms,ld,null),w(Ms,cd,"");var Xo,dd;class nE{constructor({parsedData:e,rawData:t}){w(this,Xo);w(this,dd);b(this,Xo,e),b(this,dd,t)}getRaw(){return c(this,dd)}get(e){return c(this,Xo).get(e)??null}[Symbol.iterator](){return c(this,Xo).entries()}}Xo=new WeakMap,dd=new WeakMap;const xo=Symbol("INTERNAL");var hd,ud,fd,Yo;class iE{constructor(e,{name:t,intent:s,usage:n,rbGroups:r}){w(this,hd,!1);w(this,ud,!1);w(this,fd,!1);w(this,Yo,!0);b(this,hd,!!(e&bs.DISPLAY)),b(this,ud,!!(e&bs.PRINT)),this.name=t,this.intent=s,this.usage=n,this.rbGroups=r}get visible(){if(c(this,fd))return c(this,Yo);if(!c(this,Yo))return!1;const{print:e,view:t}=this.usage;return c(this,hd)?(t==null?void 0:t.viewState)!=="OFF":c(this,ud)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,s=!1){e!==xo&&_e("Internal method `_setVisible` called."),b(this,fd,s),b(this,Yo,t)}}hd=new WeakMap,ud=new WeakMap,fd=new WeakMap,Yo=new WeakMap;var rr,Ee,Ko,Jo,pd,jp;class rE{constructor(e,t=bs.DISPLAY){w(this,pd);w(this,rr,null);w(this,Ee,new Map);w(this,Ko,null);w(this,Jo,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,b(this,Jo,e.order);for(const s of e.groups)c(this,Ee).set(s.id,new iE(t,s));if(e.baseState==="OFF")for(const s of c(this,Ee).values())s._setVisible(xo,!1);for(const s of e.on)c(this,Ee).get(s)._setVisible(xo,!0);for(const s of e.off)c(this,Ee).get(s)._setVisible(xo,!1);b(this,Ko,this.getHash())}}isVisible(e){if(c(this,Ee).size===0)return!0;if(!e)return af("Optional content group not defined."),!0;if(e.type==="OCG")return c(this,Ee).has(e.id)?c(this,Ee).get(e.id).visible:(re(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return A(this,pd,jp).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!c(this,Ee).has(t))return re(`Optional content group not found: ${t}`),!0;if(c(this,Ee).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!c(this,Ee).has(t))return re(`Optional content group not found: ${t}`),!0;if(!c(this,Ee).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!c(this,Ee).has(t))return re(`Optional content group not found: ${t}`),!0;if(!c(this,Ee).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!c(this,Ee).has(t))return re(`Optional content group not found: ${t}`),!0;if(c(this,Ee).get(t).visible)return!1}return!0}return re(`Unknown optional content policy ${e.policy}.`),!0}return re(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,s=!0){var r;const n=c(this,Ee).get(e);if(!n){re(`Optional content group not found: ${e}`);return}if(s&&t&&n.rbGroups.length)for(const a of n.rbGroups)for(const l of a)l!==e&&((r=c(this,Ee).get(l))==null||r._setVisible(xo,!1,!0));n._setVisible(xo,!!t,!0),b(this,rr,null)}setOCGState({state:e,preserveRB:t}){let s;for(const n of e){switch(n){case"ON":case"OFF":case"Toggle":s=n;continue}const r=c(this,Ee).get(n);if(r)switch(s){case"ON":this.setVisibility(n,!0,t);break;case"OFF":this.setVisibility(n,!1,t);break;case"Toggle":this.setVisibility(n,!r.visible,t);break}}b(this,rr,null)}get hasInitialVisibility(){return c(this,Ko)===null||this.getHash()===c(this,Ko)}getOrder(){return c(this,Ee).size?c(this,Jo)?c(this,Jo).slice():[...c(this,Ee).keys()]:null}getGroup(e){return c(this,Ee).get(e)||null}getHash(){if(c(this,rr)!==null)return c(this,rr);const e=new M0;for(const[t,s]of c(this,Ee))e.update(`${t}:${s.visible}`);return b(this,rr,e.hexdigest())}[Symbol.iterator](){return c(this,Ee).entries()}}rr=new WeakMap,Ee=new WeakMap,Ko=new WeakMap,Jo=new WeakMap,pd=new WeakSet,jp=function(e){const t=e.length;if(t<2)return!0;const s=e[0];for(let n=1;n<t;n++){const r=e[n];let a;if(Array.isArray(r))a=A(this,pd,jp).call(this,r);else if(c(this,Ee).has(r))a=c(this,Ee).get(r).visible;else return re(`Optional content group not found: ${r}`),!0;switch(s){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return s==="And"};class aE{constructor(e,{disableRange:t=!1,disableStream:s=!1}){st(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:n,initialData:r,progressiveDone:a,contentDispositionFilename:l}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=l,(r==null?void 0:r.length)>0){const d=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!s,this._isRangeSupported=!t,this._contentLength=n,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((d,h)=>{this._onReceiveData({begin:d,chunk:h})}),e.addProgressListener((d,h)=>{this._onProgress({loaded:d,total:h})}),e.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const s=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const n=this._rangeReaders.some(function(r){return r._begin!==e?!1:(r._enqueue(s),!0)});st(n,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,s,n,r;e.total===void 0?(s=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||s.call(t,{loaded:e.loaded}):(r=(n=this._fullRequestReader)==null?void 0:n.onProgress)==null||r.call(n,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){st(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new oE(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new lE(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeReaders.slice(0))s.cancel(e);this._pdfDataRangeTransport.abort()}}class oE{constructor(e,t,s=!1,n=null){this._stream=e,this._done=s||!1,this._filename=lf(n)?n:null,this._queuedChunks=t||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class lE{constructor(e,t,s){this._stream=e,this._begin=t,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function cE(i){let e=!0,t=s("filename\\*","i").exec(i);if(t){t=t[1];let u=l(t);return u=unescape(u),u=d(u),u=h(u),r(u)}if(t=a(i),t){const u=h(t);return r(u)}if(t=s("filename","i").exec(i),t){t=t[1];let u=l(t);return u=h(u),r(u)}function s(u,f){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',f)}function n(u,f){if(u){if(!/^[\x00-\xFF]+$/.test(f))return f;try{const m=new TextDecoder(u,{fatal:!0}),p=uh(f);f=m.decode(p),e=!1}catch{}}return f}function r(u){return e&&/[\x80-\xff]/.test(u)&&(u=n("utf-8",u),e&&(u=n("iso-8859-1",u))),u}function a(u){const f=[];let m;const p=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(m=p.exec(u))!==null;){let[,g,v,y]=m;if(g=parseInt(g,10),g in f){if(g===0)break;continue}f[g]=[v,y]}const x=[];for(let g=0;g<f.length&&g in f;++g){let[v,y]=f[g];y=l(y),v&&(y=unescape(y),g===0&&(y=d(y))),x.push(y)}return x.join("")}function l(u){if(u.startsWith('"')){const f=u.slice(1).split('\\"');for(let m=0;m<f.length;++m){const p=f[m].indexOf('"');p!==-1&&(f[m]=f[m].slice(0,p),f.length=m+1),f[m]=f[m].replaceAll(/\\(.)/g,"$1")}u=f.join('"')}return u}function d(u){const f=u.indexOf("'");if(f===-1)return u;const m=u.slice(0,f),x=u.slice(f+1).replace(/^[^']*'/,"");return n(m,x)}function h(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(f,m,p,x){if(p==="q"||p==="Q")return x=x.replaceAll("_"," "),x=x.replaceAll(/=([0-9a-fA-F]{2})/g,function(g,v){return String.fromCharCode(parseInt(v,16))}),n(m,x);try{x=atob(x)}catch{}return n(m,x)})}return""}function G0(i,e){const t=new Headers;if(!i||!e||typeof e!="object")return t;for(const s in e){const n=e[s];n!==void 0&&t.append(s,n)}return t}function df(i){var e;return((e=URL.parse(i))==null?void 0:e.origin)??null}function q0({responseHeaders:i,isHttp:e,rangeChunkSize:t,disableRange:s}){const n={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(i.get("Content-Length"),10);return!Number.isInteger(r)||(n.suggestedLength=r,r<=2*t)||s||!e||i.get("Accept-Ranges")!=="bytes"||(i.get("Content-Encoding")||"identity")!=="identity"||(n.allowRangeRequests=!0),n}function X0(i){const e=i.get("Content-Disposition");if(e){let t=cE(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(lf(t))return t}return null}function gh(i,e){return new kc(`Unexpected server response (${i}) while retrieving PDF "${e}".`,i,i===404||i===0&&e.startsWith("file:"))}function Y0(i){return i===200||i===206}function K0(i,e,t){return{method:"GET",headers:i,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function J0(i){return i instanceof Uint8Array?i.buffer:i instanceof ArrayBuffer?i:(re(`getArrayBuffer - unexpected data format: ${i}`),new Uint8Array(i).buffer)}class dE{constructor(e){z(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=G0(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return st(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new hE(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new uE(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class hE{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const s=new Headers(e.headers),n=t.url;fetch(n,K0(s,this._withCredentials,this._abortController)).then(r=>{if(e._responseOrigin=df(r.url),!Y0(r.status))throw gh(r.status,n);this._reader=r.body.getReader(),this._headersCapability.resolve();const a=r.headers,{allowRangeRequests:l,suggestedLength:d}=q0({responseHeaders:a,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=d||this._contentLength,this._filename=X0(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ti("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:J0(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class uE{constructor(e,t,s){this._stream=e,this._reader=null,this._loaded=0;const n=e.source;this._withCredentials=n.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!n.disableStream,this._abortController=new AbortController;const r=new Headers(e.headers);r.append("Range",`bytes=${t}-${s-1}`);const a=n.url;fetch(a,K0(r,this._withCredentials,this._abortController)).then(l=>{const d=df(l.url);if(d!==e._responseOrigin)throw new Error(`Expected range response-origin "${d}" to match "${e._responseOrigin}".`);if(!Y0(l.status))throw gh(l.status,a);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:J0(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const Df=200,Of=206;function fE(i){const e=i.response;return typeof e!="string"?e:uh(e).buffer}class pE{constructor({url:e,httpHeaders:t,withCredentials:s}){z(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=G0(this.isHttp,t),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,s=this.currXhrId++,n=this.pendingRequests[s]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[r,a]of this.headers)t.setRequestHeader(r,a);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),n.expectedStatus=Of):n.expectedStatus=Df,t.responseType="arraybuffer",st(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,s),t.onprogress=this.onProgress.bind(this,s),n.onHeadersReceived=e.onHeadersReceived,n.onDone=e.onDone,n.onError=e.onError,n.onProgress=e.onProgress,t.send(null),s}onProgress(e,t){var n;const s=this.pendingRequests[e];s&&((n=s.onProgress)==null||n.call(s,t))}onStateChange(e,t){const s=this.pendingRequests[e];if(!s)return;const n=s.xhr;if(n.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),n.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],n.status===0&&this.isHttp){s.onError(n.status);return}const r=n.status||Df;if(!(r===Df&&s.expectedStatus===Of)&&r!==s.expectedStatus){s.onError(n.status);return}const l=fE(n);if(r===Of){const d=n.getResponseHeader("Content-Range"),h=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);h?s.onDone({begin:parseInt(h[1],10),chunk:l}):(re('Missing or invalid "Content-Range" header.'),s.onError(0))}else l?s.onDone({begin:0,chunk:l}):s.onError(n.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class mE{constructor(e){this._source=e,this._manager=new pE(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return st(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new gE(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const s=new xE(this._manager,e,t);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class gE{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=df(t.responseURL);const s=t.getAllResponseHeaders(),n=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(l=>{const[d,...h]=l.split(": ");return[d,h.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:a}=q0({responseHeaders:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=X0(n),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=gh(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class xE{constructor(e,t,s){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=df((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=gh(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const bE=/^[a-z][a-z0-9\-+.]+:/i;function vE(i){if(bE.test(i))return new URL(i);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(i))}class yE{constructor(e){this.source=e,this.url=vE(e.url),st(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return st(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new wE(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new AE(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class wE{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(n=>{this._contentLength=n.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},n=>{n.code==="ENOENT"&&(n=gh(0,this._url.href)),this._storedError=n,this._headersCapability.reject(n)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Ti("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class AE{constructor(e,t,s){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const n=e.source;this._isStreamingSupported=!n.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:t,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Ql=Symbol("INITIAL_DATA");var os,md,Ep;class Z0{constructor(){w(this,md);w(this,os,Object.create(null))}get(e,t=null){if(t){const n=A(this,md,Ep).call(this,e);return n.promise.then(()=>t(n.data)),null}const s=c(this,os)[e];if(!s||s.data===Ql)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return s.data}has(e){const t=c(this,os)[e];return!!t&&t.data!==Ql}delete(e){const t=c(this,os)[e];return!t||t.data===Ql?!1:(delete c(this,os)[e],!0)}resolve(e,t=null){const s=A(this,md,Ep).call(this,e);s.data=t,s.resolve()}clear(){var e;for(const t in c(this,os)){const{data:s}=c(this,os)[t];(e=s==null?void 0:s.bitmap)==null||e.close()}b(this,os,Object.create(null))}*[Symbol.iterator](){for(const e in c(this,os)){const{data:t}=c(this,os)[e];t!==Ql&&(yield[e,t])}}}os=new WeakMap,md=new WeakSet,Ep=function(e){var t;return(t=c(this,os))[e]||(t[e]={...Promise.withResolvers(),data:Ql})};const NE=1e5,dx=30;var jx,ar,Zt,gd,xd,ba,li,bd,vd,va,Zo,Qo,or,el,yd,tl,ya,wd,Ad,We,sl,wa,Nd,lr,nl,Ri,Q0,ev,Cp,Ns,Wh,_p,tv,sv;let Pc=(We=class{constructor({textContentSource:e,container:t,viewport:s}){w(this,Ri);w(this,ar,Promise.withResolvers());w(this,Zt,null);w(this,gd,!1);w(this,xd,!!((jx=globalThis.FontInspector)!=null&&jx.enabled));w(this,ba,null);w(this,li,null);w(this,bd,0);w(this,vd,0);w(this,va,null);w(this,Zo,null);w(this,Qo,0);w(this,or,0);w(this,el,Object.create(null));w(this,yd,[]);w(this,tl,null);w(this,ya,[]);w(this,wd,new WeakMap);w(this,Ad,null);var d;if(e instanceof ReadableStream)b(this,tl,e);else if(typeof e=="object")b(this,tl,new ReadableStream({start(h){h.enqueue(e),h.close()}}));else throw new Error('No "textContentSource" parameter specified.');b(this,Zt,b(this,Zo,t)),b(this,or,s.scale*on.pixelRatio),b(this,Qo,s.rotation),b(this,li,{div:null,properties:null,ctx:null});const{pageWidth:n,pageHeight:r,pageX:a,pageY:l}=s.rawDims;b(this,Ad,[1,0,0,-1,-a,l+r]),b(this,vd,n),b(this,bd,r),A(d=We,Ns,tv).call(d),Rr(t,s),c(this,ar).promise.finally(()=>{c(We,nl).delete(this),b(this,li,null),b(this,el,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=xt.platform;return pe(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{c(this,va).read().then(({value:t,done:s})=>{if(s){c(this,ar).resolve();return}c(this,ba)??b(this,ba,t.lang),Object.assign(c(this,el),t.styles),A(this,Ri,Q0).call(this,t.items),e()},c(this,ar).reject)};return b(this,va,c(this,tl).getReader()),c(We,nl).add(this),e(),c(this,ar).promise}update({viewport:e,onBefore:t=null}){var r;const s=e.scale*on.pixelRatio,n=e.rotation;if(n!==c(this,Qo)&&(t==null||t(),b(this,Qo,n),Rr(c(this,Zo),{rotation:n})),s!==c(this,or)){t==null||t(),b(this,or,s);const a={div:null,properties:null,ctx:A(r=We,Ns,Wh).call(r,c(this,ba))};for(const l of c(this,ya))a.properties=c(this,wd).get(l),a.div=l,A(this,Ri,Cp).call(this,a)}}cancel(){var t;const e=new Ti("TextLayer task cancelled.");(t=c(this,va))==null||t.cancel(e).catch(()=>{}),b(this,va,null),c(this,ar).reject(e)}get textDivs(){return c(this,ya)}get textContentItemsStr(){return c(this,yd)}static cleanup(){if(!(c(this,nl).size>0)){c(this,sl).clear();for(const{canvas:e}of c(this,wa).values())e.remove();c(this,wa).clear()}}},ar=new WeakMap,Zt=new WeakMap,gd=new WeakMap,xd=new WeakMap,ba=new WeakMap,li=new WeakMap,bd=new WeakMap,vd=new WeakMap,va=new WeakMap,Zo=new WeakMap,Qo=new WeakMap,or=new WeakMap,el=new WeakMap,yd=new WeakMap,tl=new WeakMap,ya=new WeakMap,wd=new WeakMap,Ad=new WeakMap,sl=new WeakMap,wa=new WeakMap,Nd=new WeakMap,lr=new WeakMap,nl=new WeakMap,Ri=new WeakSet,Q0=function(e){var n,r;if(c(this,gd))return;(r=c(this,li)).ctx??(r.ctx=A(n=We,Ns,Wh).call(n,c(this,ba)));const t=c(this,ya),s=c(this,yd);for(const a of e){if(t.length>NE){re("Ignoring additional textDivs for performance reasons."),b(this,gd,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const l=c(this,Zt);b(this,Zt,document.createElement("span")),c(this,Zt).classList.add("markedContent"),a.id!==null&&c(this,Zt).setAttribute("id",`${a.id}`),l.append(c(this,Zt))}else a.type==="endMarkedContent"&&b(this,Zt,c(this,Zt).parentNode);continue}s.push(a.str),A(this,Ri,ev).call(this,a)}},ev=function(e){var g;const t=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};c(this,ya).push(t);const n=Z.transform(c(this,Ad),e.transform);let r=Math.atan2(n[1],n[0]);const a=c(this,el)[e.fontName];a.vertical&&(r+=Math.PI/2);let l=c(this,xd)&&a.fontSubstitution||a.fontFamily;l=We.fontFamilyMap.get(l)||l;const d=Math.hypot(n[2],n[3]),h=d*A(g=We,Ns,sv).call(g,l,a,c(this,ba));let u,f;r===0?(u=n[4],f=n[5]-h):(u=n[4]+h*Math.sin(r),f=n[5]-h*Math.cos(r));const m="calc(var(--total-scale-factor) *",p=t.style;c(this,Zt)===c(this,Zo)?(p.left=`${(100*u/c(this,vd)).toFixed(2)}%`,p.top=`${(100*f/c(this,bd)).toFixed(2)}%`):(p.left=`${m}${u.toFixed(2)}px)`,p.top=`${m}${f.toFixed(2)}px)`),p.fontSize=`${m}${(c(We,lr)*d).toFixed(2)}px)`,p.fontFamily=l,s.fontSize=d,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,c(this,xd)&&(t.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),r!==0&&(s.angle=r*(180/Math.PI));let x=!1;if(e.str.length>1)x=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const v=Math.abs(e.transform[0]),y=Math.abs(e.transform[3]);v!==y&&Math.max(v,y)/Math.min(v,y)>1.5&&(x=!0)}if(x&&(s.canvasWidth=a.vertical?e.height:e.width),c(this,wd).set(t,s),c(this,li).div=t,c(this,li).properties=s,A(this,Ri,Cp).call(this,c(this,li)),s.hasText&&c(this,Zt).append(t),s.hasEOL){const v=document.createElement("br");v.setAttribute("role","presentation"),c(this,Zt).append(v)}},Cp=function(e){var l;const{div:t,properties:s,ctx:n}=e,{style:r}=t;let a="";if(c(We,lr)>1&&(a=`scale(${1/c(We,lr)})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:d}=r,{canvasWidth:h,fontSize:u}=s;A(l=We,Ns,_p).call(l,n,u*c(this,or),d);const{width:f}=n.measureText(t.textContent);f>0&&(a=`scaleX(${h*c(this,or)/f}) ${a}`)}s.angle!==0&&(a=`rotate(${s.angle}deg) ${a}`),a.length>0&&(r.transform=a)},Ns=new WeakSet,Wh=function(e=null){let t=c(this,wa).get(e||(e=""));if(!t){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=e,document.body.append(s),t=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),c(this,wa).set(e,t),c(this,Nd).set(t,{size:0,family:""})}return t},_p=function(e,t,s){const n=c(this,Nd).get(e);t===n.size&&s===n.family||(e.font=`${t}px ${s}`,n.size=t,n.family=s)},tv=function(){if(c(this,lr)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),b(this,lr,e.getBoundingClientRect().height),e.remove()},sv=function(e,t,s){const n=c(this,sl).get(e);if(n)return n;const r=A(this,Ns,Wh).call(this,s);r.canvas.width=r.canvas.height=dx,A(this,Ns,_p).call(this,r,dx,e);const a=r.measureText(""),l=a.fontBoundingBoxAscent,d=Math.abs(a.fontBoundingBoxDescent);r.canvas.width=r.canvas.height=0;let h=.8;return l?h=l/(l+d):(xt.platform.isFirefox&&re("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?h=t.ascent:t.descent&&(h=1+t.descent)),c(this,sl).set(e,h),h},w(We,Ns),w(We,sl,new Map),w(We,wa,new Map),w(We,Nd,new WeakMap),w(We,lr,null),w(We,nl,new Set),We);class Rc{static textContent(e){const t=[],s={items:t,styles:Object.create(null)};function n(r){var d;if(!r)return;let a=null;const l=r.name;if(l==="#text")a=r.value;else if(Rc.shouldBuildText(l))(d=r==null?void 0:r.attributes)!=null&&d.textContent?a=r.attributes.textContent:r.value&&(a=r.value);else return;if(a!==null&&t.push({str:a}),!!r.children)for(const h of r.children)n(h)}return n(e),s}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const SE=100;function Um(i={}){typeof i=="string"||i instanceof URL?i={url:i}:(i instanceof ArrayBuffer||ArrayBuffer.isView(i))&&(i={data:i});const e=new kp,{docId:t}=e,s=i.url?Lj(i.url):null,n=i.data?Ij(i.data):null,r=i.httpHeaders||null,a=i.withCredentials===!0,l=i.password??null,d=i.range instanceof Vm?i.range:null,h=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:2**16;let u=i.worker instanceof Fl?i.worker:null;const f=i.verbosity,m=typeof i.docBaseUrl=="string"&&!ph(i.docBaseUrl)?i.docBaseUrl:null,p=Eh(i.cMapUrl),x=i.cMapPacked!==!1,g=i.CMapReaderFactory||($t?Hj:Zg),v=Eh(i.iccUrl),y=Eh(i.standardFontDataUrl),S=i.StandardFontDataFactory||($t?Uj:Qg),j=Eh(i.wasmUrl),E=i.WasmFactory||($t?Vj:ex),C=i.stopAtErrors!==!0,k=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,_=i.isEvalSupported!==!1,T=typeof i.isOffscreenCanvasSupported=="boolean"?i.isOffscreenCanvasSupported:!$t,P=typeof i.isImageDecoderSupported=="boolean"?i.isImageDecoderSupported:!$t&&(xt.platform.isFirefox||!globalThis.chrome),R=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,M=typeof i.disableFontFace=="boolean"?i.disableFontFace:$t,F=i.fontExtraProperties===!0,$=i.enableXfa===!0,B=i.ownerDocument||globalThis.document,ee=i.disableRange===!0,I=i.disableStream===!0,D=i.disableAutoFetch===!0,V=i.pdfBug===!0,L=i.CanvasFactory||($t?$j:Fj),te=i.FilterFactory||($t?zj:Bj),ue=i.enableHWA===!0,q=i.useWasm!==!1,J=d?d.length:i.length??NaN,ce=typeof i.useSystemFonts=="boolean"?i.useSystemFonts:!$t&&!M,ve=typeof i.useWorkerFetch=="boolean"?i.useWorkerFetch:!!(g===Zg&&S===Qg&&E===ex&&p&&y&&j&&nc(p,document.baseURI)&&nc(y,document.baseURI)&&nc(j,document.baseURI)),Le=null;gj(f);const Q={canvasFactory:new L({ownerDocument:B,enableHWA:ue}),filterFactory:new te({docId:t,ownerDocument:B}),cMapReaderFactory:ve?null:new g({baseUrl:p,isCompressed:x}),standardFontDataFactory:ve?null:new S({baseUrl:y}),wasmFactory:ve?null:new E({baseUrl:j})};u||(u=Fl.create({verbosity:f,port:Ms.workerPort}),e._worker=u);const bt={docId:t,apiVersion:"5.3.93",data:n,password:l,disableAutoFetch:D,rangeChunkSize:h,length:J,docBaseUrl:m,enableXfa:$,evaluatorOptions:{maxImageSize:k,disableFontFace:M,ignoreErrors:C,isEvalSupported:_,isOffscreenCanvasSupported:T,isImageDecoderSupported:P,canvasMaxAreaInBytes:R,fontExtraProperties:F,useSystemFonts:ce,useWasm:q,useWorkerFetch:ve,cMapUrl:p,iccUrl:v,standardFontDataUrl:y,wasmUrl:j}},Ze={ownerDocument:B,pdfBug:V,styleElement:Le,loadingParams:{disableAutoFetch:D,enableXfa:$}};return u.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const ye=u.messageHandler.sendWithPromise("GetDocRequest",bt,n?[n.buffer]:null);let lt;if(d)lt=new aE(d,{disableRange:ee,disableStream:I});else if(!n){if(!s)throw new Error("getDocument - no `url` parameter provided.");const Et=nc(s)?dE:$t?yE:mE;lt=new Et({url:s,length:J,httpHeaders:r,withCredentials:a,rangeChunkSize:h,disableRange:ee,disableStream:I})}return ye.then(Et=>{if(e.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const de=new lc(t,Et,u.port),Ne=new CE(de,e,lt,Ze,Q);e._transport=Ne,de.send("Ready",null)})}).catch(e._capability.reject),e}var Fu;const Bu=class Bu{constructor(){z(this,"_capability",Promise.withResolvers());z(this,"_transport",null);z(this,"_worker",null);z(this,"docId",`d${It(Bu,Fu)._++}`);z(this,"destroyed",!1);z(this,"onPassword",null);z(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,s,n;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(r){throw(s=this._worker)!=null&&s.port&&delete this._worker._pendingDestroy,r}this._transport=null,(n=this._worker)==null||n.destroy(),this._worker=null}async getData(){return this._transport.getData()}};Fu=new WeakMap,w(Bu,Fu,0);let kp=Bu;var Aa,Sd,jd,Ed,Cd,Ex;let Vm=(Ex=class{constructor(e,t,s=!1,n=null){w(this,Aa,Promise.withResolvers());w(this,Sd,[]);w(this,jd,[]);w(this,Ed,[]);w(this,Cd,[]);this.length=e,this.initialData=t,this.progressiveDone=s,this.contentDispositionFilename=n}addRangeListener(e){c(this,Cd).push(e)}addProgressListener(e){c(this,Ed).push(e)}addProgressiveReadListener(e){c(this,jd).push(e)}addProgressiveDoneListener(e){c(this,Sd).push(e)}onDataRange(e,t){for(const s of c(this,Cd))s(e,t)}onDataProgress(e,t){c(this,Aa).promise.then(()=>{for(const s of c(this,Ed))s(e,t)})}onDataProgressiveRead(e){c(this,Aa).promise.then(()=>{for(const t of c(this,jd))t(e)})}onDataProgressiveDone(){c(this,Aa).promise.then(()=>{for(const e of c(this,Sd))e()})}transportReady(){c(this,Aa).resolve()}requestDataRange(e,t){_e("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},Aa=new WeakMap,Sd=new WeakMap,jd=new WeakMap,Ed=new WeakMap,Cd=new WeakMap,Ex);class jE{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return pe(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var ci,Na,fc;class EE{constructor(e,t,s,n=!1){w(this,Na);w(this,ci,!1);this._pageIndex=e,this._pageInfo=t,this._transport=s,this._stats=n?new Yg:null,this._pdfBug=n,this.commonObjs=s.commonObjs,this.objs=new Z0,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:s=0,offsetY:n=0,dontFlip:r=!1}={}){return new fh({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:n,dontFlip:r})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return pe(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:s="display",annotationMode:n=Mn.ENABLE,transform:r=null,background:a=null,optionalContentConfigPromise:l=null,annotationCanvasMap:d=null,pageColors:h=null,printAnnotationStorage:u=null,isEditing:f=!1}){var E,C;(E=this._stats)==null||E.time("Overall");const m=this._transport.getRenderingIntent(s,n,u,f),{renderingIntent:p,cacheKey:x}=m;b(this,ci,!1),l||(l=this._transport.getOptionalContentConfig(p));let g=this._intentStates.get(x);g||(g=Object.create(null),this._intentStates.set(x,g)),g.streamReaderCancelTimeout&&(clearTimeout(g.streamReaderCancelTimeout),g.streamReaderCancelTimeout=null);const v=!!(p&bs.PRINT);g.displayReadyCapability||(g.displayReadyCapability=Promise.withResolvers(),g.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(C=this._stats)==null||C.time("Page Request"),this._pumpOperatorList(m));const y=k=>{var _;g.renderTasks.delete(S),v&&b(this,ci,!0),A(this,Na,fc).call(this),k?(S.capability.reject(k),this._abortOperatorList({intentState:g,reason:k instanceof Error?k:new Error(k)})):S.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(_=globalThis.Stats)!=null&&_.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},S=new Tp({callback:y,params:{canvasContext:e,viewport:t,transform:r,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:g.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!v,pdfBug:this._pdfBug,pageColors:h});(g.renderTasks||(g.renderTasks=new Set)).add(S);const j=S.task;return Promise.all([g.displayReadyCapability.promise,l]).then(([k,_])=>{var T;if(this.destroyed){y();return}if((T=this._stats)==null||T.time("Rendering"),!(_.renderingIntent&p))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");S.initializeGraphics({transparency:k,optionalContentConfig:_}),S.operatorListChanged()}).catch(y),j}getOperatorList({intent:e="display",annotationMode:t=Mn.ENABLE,printAnnotationStorage:s=null,isEditing:n=!1}={}){var h;function r(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(d))}const a=this._transport.getRenderingIntent(e,t,s,n,!0);let l=this._intentStates.get(a.cacheKey);l||(l=Object.create(null),this._intentStates.set(a.cacheKey,l));let d;return l.opListReadCapability||(d=Object.create(null),d.operatorListChanged=r,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||(l.renderTasks=new Set)).add(d),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(h=this._stats)==null||h.time("Page Request"),this._pumpOperatorList(a)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(n){return n.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>Rc.textContent(s));const t=this.streamTextContent(e);return new Promise(function(s,n){function r(){a.read().then(function({value:d,done:h}){if(h){s(l);return}l.lang??(l.lang=d.lang),Object.assign(l.styles,d.styles),l.items.push(...d.items),r()},n)}const a=t.getReader(),l={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const s of t.renderTasks)e.push(s.completed),s.cancel();return this.objs.clear(),b(this,ci,!1),Promise.all(e)}cleanup(e=!1){b(this,ci,!0);const t=A(this,Na,fc).call(this);return e&&t&&this._stats&&(this._stats=new Yg),t}_startRenderPage(e,t){var n,r;const s=this._intentStates.get(t);s&&((n=this._stats)==null||n.timeEnd("Page Request"),(r=s.displayReadyCapability)==null||r.resolve(e))}_renderPageChunk(e,t){for(let s=0,n=e.length;s<n;s++)t.operatorList.fnArray.push(e.fnArray[s]),t.operatorList.argsArray.push(e.argsArray[s]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const s of t.renderTasks)s.operatorListChanged();e.lastChunk&&A(this,Na,fc).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:s,modifiedIds:n}){const{map:r,transfer:a}=s,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:r,modifiedIds:n},a).getReader(),h=this._intentStates.get(t);h.streamReader=d;const u=()=>{d.read().then(({value:f,done:m})=>{if(m){h.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(f,h),u())},f=>{if(h.streamReader=null,!this._transport.destroyed){if(h.operatorList){h.operatorList.lastChunk=!0;for(const m of h.renderTasks)m.operatorListChanged();A(this,Na,fc).call(this)}if(h.displayReadyCapability)h.displayReadyCapability.reject(f);else if(h.opListReadCapability)h.opListReadCapability.reject(f);else throw f}})};u()}_abortOperatorList({intentState:e,reason:t,force:s=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!s){if(e.renderTasks.size>0)return;if(t instanceof of){let n=SE;t.extraDelay>0&&t.extraDelay<1e3&&(n+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},n);return}}if(e.streamReader.cancel(new Ti(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[n,r]of this._intentStates)if(r===e){this._intentStates.delete(n);break}this.cleanup()}}}get stats(){return this._stats}}ci=new WeakMap,Na=new WeakSet,fc=function(){if(!c(this,ci)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),b(this,ci,!1),!0};var cr,Xs,di,Sa,zu,ja,Ea,Vt,Gh,nv,iv,pc,il,qh;const De=class De{constructor({name:e=null,port:t=null,verbosity:s=xj()}={}){w(this,Vt);w(this,cr,Promise.withResolvers());w(this,Xs,null);w(this,di,null);w(this,Sa,null);if(this.name=e,this.destroyed=!1,this.verbosity=s,t){if(c(De,Ea).has(t))throw new Error("Cannot use more than one PDFWorker per port.");c(De,Ea).set(t,this),A(this,Vt,nv).call(this,t)}else A(this,Vt,iv).call(this)}get promise(){return c(this,cr).promise}get port(){return c(this,di)}get messageHandler(){return c(this,Xs)}destroy(){var e,t;this.destroyed=!0,(e=c(this,Sa))==null||e.terminate(),b(this,Sa,null),c(De,Ea).delete(c(this,di)),b(this,di,null),(t=c(this,Xs))==null||t.destroy(),b(this,Xs,null)}static create(e){const t=c(this,Ea).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new De(e)}static get workerSrc(){if(Ms.workerSrc)return Ms.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return pe(this,"_setupFakeWorkerGlobal",(async()=>c(this,il,qh)?c(this,il,qh):(await import(this.workerSrc)).WorkerMessageHandler)())}};cr=new WeakMap,Xs=new WeakMap,di=new WeakMap,Sa=new WeakMap,zu=new WeakMap,ja=new WeakMap,Ea=new WeakMap,Vt=new WeakSet,Gh=function(){c(this,cr).resolve(),c(this,Xs).send("configure",{verbosity:this.verbosity})},nv=function(e){b(this,di,e),b(this,Xs,new lc("main","worker",e)),c(this,Xs).on("ready",()=>{}),A(this,Vt,Gh).call(this)},iv=function(){if(c(De,ja)||c(De,il,qh)){A(this,Vt,pc).call(this);return}let{workerSrc:e}=De;try{De._isSameOrigin(window.location,e)||(e=De._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),s=new lc("main","worker",t),n=()=>{r.abort(),s.destroy(),t.terminate(),this.destroyed?c(this,cr).reject(new Error("Worker was destroyed")):A(this,Vt,pc).call(this)},r=new AbortController;t.addEventListener("error",()=>{c(this,Sa)||n()},{signal:r.signal}),s.on("test",l=>{if(r.abort(),this.destroyed||!l){n();return}b(this,Xs,s),b(this,di,t),b(this,Sa,t),A(this,Vt,Gh).call(this)}),s.on("ready",l=>{if(r.abort(),this.destroyed){n();return}try{a()}catch{A(this,Vt,pc).call(this)}});const a=()=>{const l=new Uint8Array;s.send("test",l,[l.buffer])};a();return}catch{af("The worker has been disabled.")}A(this,Vt,pc).call(this)},pc=function(){c(De,ja)||(re("Setting up fake worker."),b(De,ja,!0)),De._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){c(this,cr).reject(new Error("Worker was destroyed"));return}const t=new Oj;b(this,di,t);const s=`fake${It(De,zu)._++}`,n=new lc(s+"_worker",s,t);e.setup(n,t),b(this,Xs,new lc(s,s+"_worker",t)),A(this,Vt,Gh).call(this)}).catch(e=>{c(this,cr).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},il=new WeakSet,qh=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},w(De,il),w(De,zu,0),w(De,ja,!1),w(De,Ea,new WeakMap),$t&&(b(De,ja,!0),Ms.workerSrc||(Ms.workerSrc="./pdf.worker.mjs")),De._isSameOrigin=(e,t)=>{const s=URL.parse(e);if(!(s!=null&&s.origin)||s.origin==="null")return!1;const n=new URL(t,s);return s.origin===n.origin},De._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},De.fromPort=e=>{if(Ej("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return De.create(e)};let Fl=De;var hi,jn,rl,al,ui,Ca,mc;class CE{constructor(e,t,s,n,r){w(this,Ca);w(this,hi,new Map);w(this,jn,new Map);w(this,rl,new Map);w(this,al,new Map);w(this,ui,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new Z0,this.fontLoader=new Rj({ownerDocument:n.ownerDocument,styleElement:n.styleElement}),this.loadingParams=n.loadingParams,this._params=n,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.wasmFactory=r.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return pe(this,"annotationStorage",new zm)}getRenderingIntent(e,t=Mn.ENABLE,s=null,n=!1,r=!1){let a=bs.DISPLAY,l=gp;switch(e){case"any":a=bs.ANY;break;case"display":break;case"print":a=bs.PRINT;break;default:re(`getRenderingIntent - invalid intent: ${e}`)}const d=a&bs.PRINT&&s instanceof I0?s:this.annotationStorage;switch(t){case Mn.DISABLE:a+=bs.ANNOTATIONS_DISABLE;break;case Mn.ENABLE:break;case Mn.ENABLE_FORMS:a+=bs.ANNOTATIONS_FORMS;break;case Mn.ENABLE_STORAGE:a+=bs.ANNOTATIONS_STORAGE,l=d.serializable;break;default:re(`getRenderingIntent - invalid annotationMode: ${t}`)}n&&(a+=bs.IS_EDITING),r&&(a+=bs.OPLIST);const{ids:h,hash:u}=d.modifiedIds,f=[a,l.hash,u];return{renderingIntent:a,cacheKey:f.join("_"),annotationStorageSerializable:l,modifiedIds:h}}destroy(){var s;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(s=c(this,ui))==null||s.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const n of c(this,jn).values())e.push(n._destroy());c(this,jn).clear(),c(this,rl).clear(),c(this,al).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var n,r;this.commonObjs.clear(),this.fontLoader.clear(),c(this,hi).clear(),this.filterFactory.destroy(),Pc.cleanup(),(n=this._networkStream)==null||n.cancelAllRequests(new Ti("Worker was terminated.")),(r=this.messageHandler)==null||r.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(s,n)=>{st(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},n.onPull=()=>{this._fullReader.read().then(function({value:r,done:a}){if(a){n.close();return}st(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{n.error(r)})},n.onCancel=r=>{this._fullReader.cancel(r),n.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",async s=>{var l;await this._fullReader.headersReady;const{isStreamingSupported:n,isRangeSupported:r,contentLength:a}=this._fullReader;return(!n||!r)&&(this._lastProgress&&((l=t.onProgress)==null||l.call(t,this._lastProgress)),this._fullReader.onProgress=d=>{var h;(h=t.onProgress)==null||h.call(t,{loaded:d.loaded,total:d.total})}),{isStreamingSupported:n,isRangeSupported:r,contentLength:a}}),e.on("GetRangeReader",(s,n)=>{st(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(s.begin,s.end);if(!r){n.close();return}n.onPull=()=>{r.read().then(function({value:a,done:l}){if(l){n.close();return}st(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{n.error(a)})},n.onCancel=a=>{r.cancel(a),n.ready.catch(l=>{if(!this.destroyed)throw l})}}),e.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,t._capability.resolve(new jE(s,this))}),e.on("DocException",s=>{t._capability.reject(Yt(s))}),e.on("PasswordRequest",s=>{b(this,ui,Promise.withResolvers());try{if(!t.onPassword)throw Yt(s);const n=r=>{r instanceof Error?c(this,ui).reject(r):c(this,ui).resolve({password:r})};t.onPassword(n,s.code)}catch(n){c(this,ui).reject(n)}return c(this,ui).promise}),e.on("DataLoaded",s=>{var n;(n=t.onProgress)==null||n.call(t,{loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),e.on("StartRenderPage",s=>{if(this.destroyed)return;c(this,jn).get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),e.on("commonobj",([s,n,r])=>{var a;if(this.destroyed||this.commonObjs.has(s))return null;switch(n){case"Font":if("error"in r){const u=r.error;re(`Error during font loading: ${u}`),this.commonObjs.resolve(s,u);break}const l=this._params.pdfBug&&((a=globalThis.FontInspector)!=null&&a.enabled)?(u,f)=>globalThis.FontInspector.fontAdded(u,f):null,d=new Mj(r,l);this.fontLoader.bind(d).catch(()=>e.sendWithPromise("FontFallback",{id:s})).finally(()=>{!d.fontExtraProperties&&d.data&&(d.data=null),this.commonObjs.resolve(s,d)});break;case"CopyLocalImage":const{imageRef:h}=r;st(h,"The imageRef must be defined.");for(const u of c(this,jn).values())for(const[,f]of u.objs)if((f==null?void 0:f.ref)===h)return f.dataLen?(this.commonObjs.resolve(s,structuredClone(f)),f.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,r);break;default:throw new Error(`Got unknown common object type ${n}`)}return null}),e.on("obj",([s,n,r,a])=>{var d;if(this.destroyed)return;const l=c(this,jn).get(n);if(!l.objs.has(s)){if(l._intentStates.size===0){(d=a==null?void 0:a.bitmap)==null||d.close();return}switch(r){case"Image":case"Pattern":l.objs.resolve(s,a);break;default:throw new Error(`Got unknown object type ${r}`)}}}),e.on("DocProgress",s=>{var n;this.destroyed||(n=t.onProgress)==null||n.call(t,{loaded:s.loaded,total:s.total})}),e.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const n=this[s.type];if(!n)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return n.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var s;this.annotationStorage.size<=0&&re("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((s=this._fullReader)==null?void 0:s.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,s=c(this,rl).get(t);if(s)return s;const n=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&c(this,al).set(r.refStr,e);const a=new EE(t,r,this,this._params.pdfBug);return c(this,jn).set(t,a),a});return c(this,rl).set(t,n),n}getPageIndex(e){return xp(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return A(this,Ca,mc).call(this,"GetFieldObjects")}hasJSActions(){return A(this,Ca,mc).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return A(this,Ca,mc).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return A(this,Ca,mc).call(this,"GetOptionalContentConfig").then(t=>new rE(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=c(this,hi).get(e);if(t)return t;const s=this.messageHandler.sendWithPromise(e,null).then(n=>{var r,a;return{info:n[0],metadata:n[1]?new nE(n[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null}});return c(this,hi).set(e,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of c(this,jn).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),c(this,hi).clear(),this.filterFactory.destroy(!0),Pc.cleanup()}}cachedPageNumber(e){if(!xp(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return c(this,al).get(t)??null}}hi=new WeakMap,jn=new WeakMap,rl=new WeakMap,al=new WeakMap,ui=new WeakMap,Ca=new WeakSet,mc=function(e,t=null){const s=c(this,hi).get(e);if(s)return s;const n=this.messageHandler.sendWithPromise(e,t);return c(this,hi).set(e,n),n};var dr;class _E{constructor(e){w(this,dr,null);z(this,"onContinue",null);z(this,"onError",null);b(this,dr,e)}get promise(){return c(this,dr).capability.promise}cancel(e=0){c(this,dr).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=c(this,dr).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=c(this,dr);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}dr=new WeakMap;var hr,_a;const qr=class qr{constructor({callback:e,params:t,objs:s,commonObjs:n,annotationCanvasMap:r,operatorList:a,pageIndex:l,canvasFactory:d,filterFactory:h,useRequestAnimationFrame:u=!1,pdfBug:f=!1,pageColors:m=null}){w(this,hr,null);this.callback=e,this.params=t,this.objs=s,this.commonObjs=n,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=l,this.canvasFactory=d,this.filterFactory=h,this._pdfBug=f,this.pageColors=m,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=u===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new _E(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var l,d;if(this.cancelled)return;if(this._canvas){if(c(qr,_a).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");c(qr,_a).add(this._canvas)}this._pdfBug&&((l=globalThis.StepperManager)!=null&&l.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:s,viewport:n,transform:r,background:a}=this.params;this.gfx=new Co(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:n,transparency:e,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,(d=this.graphicsReadyCallback)==null||d.call(this)}cancel(e=null,t=0){var s,n,r;this.running=!1,this.cancelled=!0,(s=this.gfx)==null||s.endDrawing(),c(this,hr)&&(window.cancelAnimationFrame(c(this,hr)),b(this,hr,null)),c(qr,_a).delete(this._canvas),e||(e=new of(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(r=(n=this.task).onError)==null||r.call(n,e)}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?b(this,hr,window.requestAnimationFrame(()=>{b(this,hr,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),c(qr,_a).delete(this._canvas),this.callback())))}};hr=new WeakMap,_a=new WeakMap,w(qr,_a,new WeakSet);let Tp=qr;const Wm="5.3.93",rv="cbeef3233";function hx(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}function ec(i){return Math.max(0,Math.min(255,255*i))}class ux{static CMYK_G([e,t,s,n]){return["G",1-Math.min(1,.3*e+.59*s+.11*t+n)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=ec(e),[e,e,e]}static G_HTML([e]){const t=hx(e);return`#${t}${t}${t}`}static RGB_G([e,t,s]){return["G",.3*e+.59*t+.11*s]}static RGB_rgb(e){return e.map(ec)}static RGB_HTML(e){return`#${e.map(hx).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,s,n]){return["RGB",1-Math.min(1,e+n),1-Math.min(1,s+n),1-Math.min(1,t+n)]}static CMYK_rgb([e,t,s,n]){return[ec(1-Math.min(1,e+n)),ec(1-Math.min(1,s+n)),ec(1-Math.min(1,t+n))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,s]){const n=1-e,r=1-t,a=1-s,l=Math.min(n,r,a);return["CMYK",n,r,a,l]}}class kE{create(e,t,s=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const n=this._createSVG("svg:svg");return n.setAttribute("version","1.1"),s||(n.setAttribute("width",`${e}px`),n.setAttribute("height",`${t}px`)),n.setAttribute("preserveAspectRatio","none"),n.setAttribute("viewBox",`0 0 ${e} ${t}`),n}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){_e("Abstract method `_createSVG` called.")}}class Mc extends kE{_createSVG(e){return document.createElementNS(Wn,e)}}class Gm{static setupStorage(e,t,s,n,r){const a=n.getValue(t,{value:null});switch(s.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),r==="print")break;e.addEventListener("input",l=>{n.setValue(t,{value:l.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(a.value===s.attributes.xfaOn?e.setAttribute("checked",!0):a.value===s.attributes.xfaOff&&e.removeAttribute("checked"),r==="print")break;e.addEventListener("change",l=>{n.setValue(t,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),r==="print")break;e.addEventListener("input",l=>{n.setValue(t,{value:l.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(const l of s.children)l.attributes.value===a.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}e.addEventListener("input",l=>{const d=l.target.options,h=d.selectedIndex===-1?"":d[d.selectedIndex].value;n.setValue(t,{value:h})});break}}static setAttributes({html:e,element:t,storage:s=null,intent:n,linkService:r}){const{attributes:a}=t,l=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${n}`);for(const[d,h]of Object.entries(a))if(h!=null)switch(d){case"class":h.length&&e.setAttribute(d,h.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",h);break;case"style":Object.assign(e.style,h);break;case"textContent":e.textContent=h;break;default:(!l||d!=="href"&&d!=="newWindow")&&e.setAttribute(d,h)}l&&r.addLinkAttributes(e,a.href,a.newWindow),s&&a.dataId&&this.setupStorage(e,a.dataId,t,s)}static render(e){var f,m;const t=e.annotationStorage,s=e.linkService,n=e.xfaHtml,r=e.intent||"display",a=document.createElement(n.name);n.attributes&&this.setAttributes({html:a,element:n,intent:r,linkService:s});const l=r!=="richText",d=e.div;if(d.append(a),e.viewport){const p=`matrix(${e.viewport.transform.join(",")})`;d.style.transform=p}l&&d.setAttribute("class","xfaLayer xfaFont");const h=[];if(n.children.length===0){if(n.value){const p=document.createTextNode(n.value);a.append(p),l&&Rc.shouldBuildText(n.name)&&h.push(p)}return{textDivs:h}}const u=[[n,-1,a]];for(;u.length>0;){const[p,x,g]=u.at(-1);if(x+1===p.children.length){u.pop();continue}const v=p.children[++u.at(-1)[1]];if(v===null)continue;const{name:y}=v;if(y==="#text"){const j=document.createTextNode(v.value);h.push(j),g.append(j);continue}const S=(f=v==null?void 0:v.attributes)!=null&&f.xmlns?document.createElementNS(v.attributes.xmlns,y):document.createElement(y);if(g.append(S),v.attributes&&this.setAttributes({html:S,element:v,storage:t,intent:r,linkService:s}),((m=v.children)==null?void 0:m.length)>0)u.push([v,-1,S]);else if(v.value){const j=document.createTextNode(v.value);l&&Rc.shouldBuildText(y)&&h.push(j),S.append(j)}}for(const p of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:h}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const TE=9,io=new WeakSet;class fx{static create(e){switch(e.data.annotationType){case Ge.LINK:return new av(e);case Ge.TEXT:return new PE(e);case Ge.WIDGET:switch(e.data.fieldType){case"Tx":return new RE(e);case"Btn":return e.data.radioButton?new cv(e):e.data.checkBox?new LE(e):new IE(e);case"Ch":return new DE(e);case"Sig":return new ME(e)}return new lo(e);case Ge.POPUP:return new Rp(e);case Ge.FREETEXT:return new pv(e);case Ge.LINE:return new FE(e);case Ge.SQUARE:return new BE(e);case Ge.CIRCLE:return new zE(e);case Ge.POLYLINE:return new mv(e);case Ge.CARET:return new HE(e);case Ge.INK:return new qm(e);case Ge.POLYGON:return new $E(e);case Ge.HIGHLIGHT:return new gv(e);case Ge.UNDERLINE:return new UE(e);case Ge.SQUIGGLY:return new VE(e);case Ge.STRIKEOUT:return new WE(e);case Ge.STAMP:return new xv(e);case Ge.FILEATTACHMENT:return new GE(e);default:return new Je(e)}}}var ka,ol,ll,_d,Pp;const ag=class ag{constructor(e,{isRenderable:t=!1,ignoreBorder:s=!1,createQuadrilaterals:n=!1}={}){w(this,_d);w(this,ka,null);w(this,ol,!1);w(this,ll,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(s)),n&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e!=null&&e.str||t!=null&&t.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return ag._hasPopupData(this.data)}updateEdited(e){var s;if(!this.container)return;c(this,ka)||b(this,ka,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&A(this,_d,Pp).call(this,t),(s=c(this,ll))==null||s.popup.updateEdited(e)}resetEdited(){var e;c(this,ka)&&(A(this,_d,Pp).call(this,c(this,ka).rect),(e=c(this,ll))==null||e.popup.resetEdited(),b(this,ka,null))}_createContainer(e){const{data:t,parent:{page:s,viewport:n}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",t.id),this instanceof lo||(r.tabIndex=0);const{style:a}=r;if(a.zIndex=this.parent.zIndex++,t.alternativeText&&(r.title=t.alternativeText),t.noRotate&&r.classList.add("norotate"),!t.rect||this instanceof Rp){const{rotation:g}=t;return!t.hasOwnCanvas&&g!==0&&this.setRotation(g,r),r}const{width:l,height:d}=this;if(!e&&t.borderStyle.width>0){a.borderWidth=`${t.borderStyle.width}px`;const g=t.borderStyle.horizontalCornerRadius,v=t.borderStyle.verticalCornerRadius;if(g>0||v>0){const S=`calc(${g}px * var(--total-scale-factor)) / calc(${v}px * var(--total-scale-factor))`;a.borderRadius=S}else if(this instanceof cv){const S=`calc(${l}px * var(--total-scale-factor)) / calc(${d}px * var(--total-scale-factor))`;a.borderRadius=S}switch(t.borderStyle.style){case fo.SOLID:a.borderStyle="solid";break;case fo.DASHED:a.borderStyle="dashed";break;case fo.BEVELED:re("Unimplemented border style: beveled");break;case fo.INSET:re("Unimplemented border style: inset");break;case fo.UNDERLINE:a.borderBottomStyle="solid";break}const y=t.borderColor||null;y?(b(this,ol,!0),a.borderColor=Z.makeHexColor(y[0]|0,y[1]|0,y[2]|0)):a.borderWidth=0}const h=Z.normalizeRect([t.rect[0],s.view[3]-t.rect[1]+s.view[1],t.rect[2],s.view[3]-t.rect[3]+s.view[1]]),{pageWidth:u,pageHeight:f,pageX:m,pageY:p}=n.rawDims;a.left=`${100*(h[0]-m)/u}%`,a.top=`${100*(h[1]-p)/f}%`;const{rotation:x}=t;return t.hasOwnCanvas||x===0?(a.width=`${100*l/u}%`,a.height=`${100*d/f}%`):this.setRotation(x,r),r}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:n}=this.parent.viewport.rawDims;let{width:r,height:a}=this;e%180!==0&&([r,a]=[a,r]),t.style.width=`${100*r/s}%`,t.style.height=`${100*a/n}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,s,n)=>{const r=n.detail[t],a=r[0],l=r.slice(1);n.target.style[s]=ux[`${a}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[s]:ux[`${a}_rgb`](l)})};return pe(this,"_commonActions",{display:t=>{const{display:s}=t.detail,n=s%2===1;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:n,noPrint:s===1||s===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:s}=t.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const s=t.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(e,t){const s=this._commonActions;for(const n of Object.keys(t.detail)){const r=e[n]||s[n];r==null||r(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const s=this._commonActions;for(const[n,r]of Object.entries(t)){const a=s[n];if(a){const l={detail:{[n]:r},target:e};a(l),delete t[n]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,s,n,r]=this.data.rect.map(g=>Math.fround(g));if(e.length===8){const[g,v,y,S]=e.subarray(2,6);if(n===g&&r===v&&t===y&&s===S)return}const{style:a}=this.container;let l;if(c(this,ol)){const{borderColor:g,borderWidth:v}=a;a.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${g}" stroke-width="${v}">`],this.container.classList.add("hasBorder")}const d=n-t,h=r-s,{svgFactory:u}=this,f=u.createElement("svg");f.classList.add("quadrilateralsContainer"),f.setAttribute("width",0),f.setAttribute("height",0),f.role="none";const m=u.createElement("defs");f.append(m);const p=u.createElement("clipPath"),x=`clippath_${this.data.id}`;p.setAttribute("id",x),p.setAttribute("clipPathUnits","objectBoundingBox"),m.append(p);for(let g=2,v=e.length;g<v;g+=8){const y=e[g],S=e[g+1],j=e[g+2],E=e[g+3],C=u.createElement("rect"),k=(j-t)/d,_=(r-S)/h,T=(y-j)/d,P=(S-E)/h;C.setAttribute("x",k),C.setAttribute("y",_),C.setAttribute("width",T),C.setAttribute("height",P),p.append(C),l==null||l.push(`<rect vector-effect="non-scaling-stroke" x="${k}" y="${_}" width="${T}" height="${P}"/>`)}c(this,ol)&&(l.push("</g></svg>')"),a.backgroundImage=l.join("")),this.container.append(f),this.container.style.clipPath=`url(#${x})`}_createPopup(){const{data:e}=this,t=b(this,ll,new Rp({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){_e("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const s=[];if(this._fieldObjects){const n=this._fieldObjects[e];if(n)for(const{page:r,id:a,exportValues:l}of n){if(r===-1||a===t)continue;const d=typeof l=="string"?l:null,h=document.querySelector(`[data-element-id="${a}"]`);if(h&&!io.has(h)){re(`_getElementsByName - element not allowed: ${a}`);continue}s.push({id:a,exportValue:d,domElement:h})}return s}for(const n of document.getElementsByName(e)){const{exportValue:r}=n,a=n.getAttribute("data-element-id");a!==t&&io.has(n)&&s.push({id:a,exportValue:r,domElement:n})}return s}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var s;(s=this.linkService.eventBus)==null||s.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};ka=new WeakMap,ol=new WeakMap,ll=new WeakMap,_d=new WeakSet,Pp=function(e){const{container:{style:t},data:{rect:s,rotation:n},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:a,pageX:l,pageY:d}}}}=this;s==null||s.splice(0,4,...e),t.left=`${100*(e[0]-l)/r}%`,t.top=`${100*(a-e[3]+d)/a}%`,n===0?(t.width=`${100*(e[2]-e[0])/r}%`,t.height=`${100*(e[3]-e[1])/a}%`):this.setRotation(n)};let Je=ag;var ws,$r,ov,lv;class av extends Je{constructor(t,s=null){super(t,{isRenderable:!0,ignoreBorder:!!(s!=null&&s.ignoreBorder),createQuadrilaterals:!0});w(this,ws);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:s}=this,n=document.createElement("a");n.setAttribute("data-element-id",t.id);let r=!1;return t.url?(s.addLinkAttributes(n,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(n,t.action),r=!0):t.attachment?(A(this,ws,ov).call(this,n,t.attachment,t.attachmentDest),r=!0):t.setOCGState?(A(this,ws,lv).call(this,n,t.setOCGState),r=!0):t.dest?(this._bindLink(n,t.dest),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,t),r=!0),t.resetForm?(this._bindResetFormAction(n,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(n,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(n),this.container}_bindLink(t,s){t.href=this.linkService.getDestinationHash(s),t.onclick=()=>(s&&this.linkService.goToDestination(s),!1),(s||s==="")&&A(this,ws,$r).call(this)}_bindNamedAction(t,s){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(s),!1),A(this,ws,$r).call(this)}_bindJSAction(t,s){t.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(s.actions)){const a=n.get(r);a&&(t[a]=()=>{var l;return(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s.id,name:r}}),!1})}t.onclick||(t.onclick=()=>!1),A(this,ws,$r).call(this)}_bindResetFormAction(t,s){const n=t.onclick;if(n||(t.href=this.linkService.getAnchorUrl("")),A(this,ws,$r).call(this),!this._fieldObjects){re('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(t.onclick=()=>!1);return}t.onclick=()=>{var f;n==null||n();const{fields:r,refs:a,include:l}=s,d=[];if(r.length!==0||a.length!==0){const m=new Set(a);for(const p of r){const x=this._fieldObjects[p]||[];for(const{id:g}of x)m.add(g)}for(const p of Object.values(this._fieldObjects))for(const x of p)m.has(x.id)===l&&d.push(x)}else for(const m of Object.values(this._fieldObjects))d.push(...m);const h=this.annotationStorage,u=[];for(const m of d){const{id:p}=m;switch(u.push(p),m.type){case"text":{const g=m.defaultValue||"";h.setValue(p,{value:g});break}case"checkbox":case"radiobutton":{const g=m.defaultValue===m.exportValues;h.setValue(p,{value:g});break}case"combobox":case"listbox":{const g=m.defaultValue||"";h.setValue(p,{value:g});break}default:continue}const x=document.querySelector(`[data-element-id="${p}"]`);if(x){if(!io.has(x)){re(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;x.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((f=this.linkService.eventBus)==null||f.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:u,name:"ResetForm"}})),!1}}}ws=new WeakSet,$r=function(){this.container.setAttribute("data-internal-link","")},ov=function(t,s,n=null){t.href=this.linkService.getAnchorUrl(""),s.description&&(t.title=s.description),t.onclick=()=>{var r;return(r=this.downloadManager)==null||r.openOrDownloadData(s.content,s.filename,n),!1},A(this,ws,$r).call(this)},lv=function(t,s){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(s),!1),A(this,ws,$r).call(this)};class PE extends Je{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class lo extends Je{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return xt.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,s,n,r){s.includes("mouse")?e.addEventListener(s,a=>{var l;(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:r(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(s,a=>{var l;if(s==="blur"){if(!t.focused||!a.relatedTarget)return;t.focused=!1}else if(s==="focus"){if(t.focused)return;t.focused=!0}r&&((l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:r(a)}}))})}_setEventListeners(e,t,s,n){var r,a,l;for(const[d,h]of s)(h==="Action"||(r=this.data.actions)!=null&&r[h])&&((h==="Focus"||h==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,d,h,n),h==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(e,t,"blur","Blur",null):h==="Blur"&&!((l=this.data.actions)!=null&&l.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":Z.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,n=this.data.defaultAppearanceData.fontSize||TE,r=e.style;let a;const l=2,d=h=>Math.round(10*h)/10;if(this.data.multiLine){const h=Math.abs(this.data.rect[3]-this.data.rect[1]-l),u=Math.round(h/(Tf*n))||1,f=h/u;a=Math.min(n,d(f/Tf))}else{const h=Math.abs(this.data.rect[3]-this.data.rect[1]-l);a=Math.min(n,d(h/Tf))}r.fontSize=`calc(${a}px * var(--total-scale-factor))`,r.color=Z.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(r.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class RE extends lo{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,s,n){const r=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=s),r.setValue(a.id,{[n]:s})}render(){var n,r;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const a=e.getValue(t,{value:this.data.fieldValue});let l=a.value||"";const d=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;d&&l.length>d&&(l=l.slice(0,d));let h=a.formattedValue||((n=this.data.textContent)==null?void 0:n.join(`
`))||null;h&&this.data.comb&&(h=h.replaceAll(/\s+/g,""));const u={userValue:l,formattedValue:h,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=h??l,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",h??l),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),io.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const f=this.data.dateFormat||this.data.timeFormat;f&&(s.title=f),this._setRequired(s,this.data.required),d&&(s.maxLength=d),s.addEventListener("input",p=>{e.setValue(t,{value:p.target.value}),this.setPropertyOnSiblings(s,"value",p.target.value,"value"),u.formattedValue=null}),s.addEventListener("resetform",p=>{const x=this.data.defaultFieldValue??"";s.value=u.userValue=x,u.formattedValue=null});let m=p=>{const{formattedValue:x}=u;x!=null&&(p.target.value=x),p.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",x=>{var v;if(u.focused)return;const{target:g}=x;u.userValue&&(g.value=u.userValue),u.lastCommittedValue=g.value,u.commitKey=1,(v=this.data.actions)!=null&&v.Focus||(u.focused=!0)}),s.addEventListener("updatefromsandbox",x=>{this.showElementAndHideCanvas(x.target);const g={value(v){u.userValue=v.detail.value??"",e.setValue(t,{value:u.userValue.toString()}),v.target.value=u.userValue},formattedValue(v){const{formattedValue:y}=v.detail;u.formattedValue=y,y!=null&&v.target!==document.activeElement&&(v.target.value=y),e.setValue(t,{formattedValue:y})},selRange(v){v.target.setSelectionRange(...v.detail.selRange)},charLimit:v=>{var E;const{charLimit:y}=v.detail,{target:S}=v;if(y===0){S.removeAttribute("maxLength");return}S.setAttribute("maxLength",y);let j=u.userValue;!j||j.length<=y||(j=j.slice(0,y),S.value=u.userValue=j,e.setValue(t,{value:j}),(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:j,willCommit:!0,commitKey:1,selStart:S.selectionStart,selEnd:S.selectionEnd}}))}};this._dispatchEventFromSandbox(g,x)}),s.addEventListener("keydown",x=>{var y;u.commitKey=1;let g=-1;if(x.key==="Escape"?g=0:x.key==="Enter"&&!this.data.multiLine?g=2:x.key==="Tab"&&(u.commitKey=3),g===-1)return;const{value:v}=x.target;u.lastCommittedValue!==v&&(u.lastCommittedValue=v,u.userValue=v,(y=this.linkService.eventBus)==null||y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:v,willCommit:!0,commitKey:g,selStart:x.target.selectionStart,selEnd:x.target.selectionEnd}}))});const p=m;m=null,s.addEventListener("blur",x=>{var v,y;if(!u.focused||!x.relatedTarget)return;(v=this.data.actions)!=null&&v.Blur||(u.focused=!1);const{value:g}=x.target;u.userValue=g,u.lastCommittedValue!==g&&((y=this.linkService.eventBus)==null||y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:g,willCommit:!0,commitKey:u.commitKey,selStart:x.target.selectionStart,selEnd:x.target.selectionEnd}})),p(x)}),(r=this.data.actions)!=null&&r.Keystroke&&s.addEventListener("beforeinput",x=>{var k;u.lastCommittedValue=null;const{data:g,target:v}=x,{value:y,selectionStart:S,selectionEnd:j}=v;let E=S,C=j;switch(x.inputType){case"deleteWordBackward":{const _=y.substring(0,S).match(/\w*[^\w]*$/);_&&(E-=_[0].length);break}case"deleteWordForward":{const _=y.substring(S).match(/^[^\w]*\w*/);_&&(C+=_[0].length);break}case"deleteContentBackward":S===j&&(E-=1);break;case"deleteContentForward":S===j&&(C+=1);break}x.preventDefault(),(k=this.linkService.eventBus)==null||k.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:y,change:g||"",willCommit:!1,selStart:E,selEnd:C}})}),this._setEventListeners(s,u,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],x=>x.target.value)}if(m&&s.addEventListener("blur",m),this.data.comb){const x=(this.data.rect[2]-this.data.rect[0])/d;s.classList.add("comb"),s.style.letterSpacing=`calc(${x}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class ME extends lo{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class LE extends lo{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,s=t.id;let n=e.getValue(s,{value:t.exportValue===t.fieldValue}).value;typeof n=="string"&&(n=n!=="Off",e.setValue(s,{value:n})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return io.add(r),r.setAttribute("data-element-id",s),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=t.fieldName,n&&r.setAttribute("checked",!0),r.setAttribute("exportValue",t.exportValue),r.tabIndex=0,r.addEventListener("change",a=>{const{name:l,checked:d}=a.target;for(const h of this._getElementsByName(l,s)){const u=d&&h.exportValue===t.exportValue;h.domElement&&(h.domElement.checked=u),e.setValue(h.id,{value:u})}e.setValue(s,{value:d})}),r.addEventListener("resetform",a=>{const l=t.defaultFieldValue||"Off";a.target.checked=l===t.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",a=>{const l={value(d){d.target.checked=d.detail.value!=="Off",e.setValue(s,{value:d.target.checked})}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class cv extends lo{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,s=t.id;let n=e.getValue(s,{value:t.fieldValue===t.buttonValue}).value;if(typeof n=="string"&&(n=n!==t.buttonValue,e.setValue(s,{value:n})),n)for(const a of this._getElementsByName(t.fieldName,s))e.setValue(a.id,{value:!1});const r=document.createElement("input");if(io.add(r),r.setAttribute("data-element-id",s),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=t.fieldName,n&&r.setAttribute("checked",!0),r.tabIndex=0,r.addEventListener("change",a=>{const{name:l,checked:d}=a.target;for(const h of this._getElementsByName(l,s))e.setValue(h.id,{value:!1});e.setValue(s,{value:d})}),r.addEventListener("resetform",a=>{const l=t.defaultFieldValue;a.target.checked=l!=null&&l===t.buttonValue}),this.enableScripting&&this.hasJSActions){const a=t.buttonValue;r.addEventListener("updatefromsandbox",l=>{const d={value:h=>{const u=a===h.detail.value;for(const f of this._getElementsByName(h.target.name)){const m=u&&f.id===s;f.domElement&&(f.domElement.checked=m),e.setValue(f.id,{value:m})}}};this._dispatchEventFromSandbox(d,l)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class IE extends av{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),e}}class DE extends lo{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,s=e.getValue(t,{value:this.data.fieldValue}),n=document.createElement("select");io.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,this._setRequired(n,this.data.required),n.name=this.data.fieldName,n.tabIndex=0;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(n.size=this.data.options.length,this.data.multiSelect&&(n.multiple=!0)),n.addEventListener("resetform",u=>{const f=this.data.defaultFieldValue;for(const m of n.options)m.selected=m.value===f});for(const u of this.data.options){const f=document.createElement("option");f.textContent=u.displayValue,f.value=u.exportValue,s.value.includes(u.exportValue)&&(f.setAttribute("selected",!0),r=!1),n.append(f)}let a=null;if(r){const u=document.createElement("option");u.value=" ",u.setAttribute("hidden",!0),u.setAttribute("selected",!0),n.prepend(u),a=()=>{u.remove(),n.removeEventListener("input",a),a=null},n.addEventListener("input",a)}const l=u=>{const f=u?"value":"textContent",{options:m,multiple:p}=n;return p?Array.prototype.filter.call(m,x=>x.selected).map(x=>x[f]):m.selectedIndex===-1?null:m[m.selectedIndex][f]};let d=l(!1);const h=u=>{const f=u.target.options;return Array.prototype.map.call(f,m=>({displayValue:m.textContent,exportValue:m.value}))};return this.enableScripting&&this.hasJSActions?(n.addEventListener("updatefromsandbox",u=>{const f={value(m){a==null||a();const p=m.detail.value,x=new Set(Array.isArray(p)?p:[p]);for(const g of n.options)g.selected=x.has(g.value);e.setValue(t,{value:l(!0)}),d=l(!1)},multipleSelection(m){n.multiple=!0},remove(m){const p=n.options,x=m.detail.remove;p[x].selected=!1,n.remove(x),p.length>0&&Array.prototype.findIndex.call(p,v=>v.selected)===-1&&(p[0].selected=!0),e.setValue(t,{value:l(!0),items:h(m)}),d=l(!1)},clear(m){for(;n.length!==0;)n.remove(0);e.setValue(t,{value:null,items:[]}),d=l(!1)},insert(m){const{index:p,displayValue:x,exportValue:g}=m.detail.insert,v=n.children[p],y=document.createElement("option");y.textContent=x,y.value=g,v?v.before(y):n.append(y),e.setValue(t,{value:l(!0),items:h(m)}),d=l(!1)},items(m){const{items:p}=m.detail;for(;n.length!==0;)n.remove(0);for(const x of p){const{displayValue:g,exportValue:v}=x,y=document.createElement("option");y.textContent=g,y.value=v,n.append(y)}n.options.length>0&&(n.options[0].selected=!0),e.setValue(t,{value:l(!0),items:h(m)}),d=l(!1)},indices(m){const p=new Set(m.detail.indices);for(const x of m.target.options)x.selected=p.has(x.index);e.setValue(t,{value:l(!0)}),d=l(!1)},editable(m){m.target.disabled=!m.detail.editable}};this._dispatchEventFromSandbox(f,u)}),n.addEventListener("input",u=>{var p;const f=l(!0),m=l(!1);e.setValue(t,{value:f}),u.preventDefault(),(p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:d,change:m,changeEx:f,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(n,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],u=>u.target.value)):n.addEventListener("input",function(u){e.setValue(t,{value:l(!0)})}),this.data.combo&&this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class Rp extends Je{constructor(e){const{data:t,elements:s}=e;super(e,{isRenderable:Je._hasPopupData(t)}),this.elements=s,this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const t=this.popup=new OE({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),s=[];for(const n of this.elements)n.popup=t,n.container.ariaHasPopup="dialog",s.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(n=>`${Fm}${n}`).join(",")),this.container}}var cl,$u,Hu,dl,hl,Ve,fi,Ta,kd,Td,ul,pi,Ys,mi,Pd,gi,Rd,Pa,Ra,ke,Xh,Mp,dv,hv,uv,fv,Yh,Kh,Lp;class OE{constructor({container:e,color:t,elements:s,titleObj:n,modificationDate:r,contentsObj:a,richText:l,parent:d,rect:h,parentRect:u,open:f}){w(this,ke);w(this,cl,A(this,ke,uv).bind(this));w(this,$u,A(this,ke,Lp).bind(this));w(this,Hu,A(this,ke,Kh).bind(this));w(this,dl,A(this,ke,Yh).bind(this));w(this,hl,null);w(this,Ve,null);w(this,fi,null);w(this,Ta,null);w(this,kd,null);w(this,Td,null);w(this,ul,null);w(this,pi,!1);w(this,Ys,null);w(this,mi,null);w(this,Pd,null);w(this,gi,null);w(this,Rd,null);w(this,Pa,null);w(this,Ra,!1);var m;b(this,Ve,e),b(this,Rd,n),b(this,fi,a),b(this,gi,l),b(this,Td,d),b(this,hl,t),b(this,Pd,h),b(this,ul,u),b(this,kd,s),b(this,Ta,cf.toDateObject(r)),this.trigger=s.flatMap(p=>p.getElementsToTriggerPopup());for(const p of this.trigger)p.addEventListener("click",c(this,dl)),p.addEventListener("mouseenter",c(this,Hu)),p.addEventListener("mouseleave",c(this,$u)),p.classList.add("popupTriggerArea");for(const p of s)(m=p.container)==null||m.addEventListener("keydown",c(this,cl));c(this,Ve).hidden=!0,f&&A(this,ke,Yh).call(this)}render(){if(c(this,Ys))return;const e=b(this,Ys,document.createElement("div"));if(e.className="popup",c(this,hl)){const r=e.style.outlineColor=Z.makeHexColor(...c(this,hl));e.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`}const t=document.createElement("span");t.className="header";const s=document.createElement("h1");if(t.append(s),{dir:s.dir,str:s.textContent}=c(this,Rd),e.append(t),c(this,Ta)){const r=document.createElement("time");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:c(this,Ta).valueOf()})),r.dateTime=c(this,Ta).toISOString(),t.append(r)}const n=c(this,ke,Xh);if(n)Gm.render({xfaHtml:n,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(c(this,fi));e.append(r)}c(this,Ve).append(e)}_formatContents({str:e,dir:t}){const s=document.createElement("p");s.classList.add("popupContent"),s.dir=t;const n=e.split(/(?:\r\n?|\n)/);for(let r=0,a=n.length;r<a;++r){const l=n[r];s.append(document.createTextNode(l)),r<a-1&&s.append(document.createElement("br"))}return s}updateEdited({rect:e,popupContent:t}){var s;c(this,Pa)||b(this,Pa,{contentsObj:c(this,fi),richText:c(this,gi)}),e&&b(this,mi,null),t&&(b(this,gi,A(this,ke,hv).call(this,t)),b(this,fi,null)),(s=c(this,Ys))==null||s.remove(),b(this,Ys,null)}resetEdited(){var e;c(this,Pa)&&({contentsObj:It(this,fi)._,richText:It(this,gi)._}=c(this,Pa),b(this,Pa,null),(e=c(this,Ys))==null||e.remove(),b(this,Ys,null),b(this,mi,null))}forceHide(){b(this,Ra,this.isVisible),c(this,Ra)&&(c(this,Ve).hidden=!0)}maybeShow(){c(this,Ra)&&(c(this,Ys)||A(this,ke,Kh).call(this),b(this,Ra,!1),c(this,Ve).hidden=!1)}get isVisible(){return c(this,Ve).hidden===!1}}cl=new WeakMap,$u=new WeakMap,Hu=new WeakMap,dl=new WeakMap,hl=new WeakMap,Ve=new WeakMap,fi=new WeakMap,Ta=new WeakMap,kd=new WeakMap,Td=new WeakMap,ul=new WeakMap,pi=new WeakMap,Ys=new WeakMap,mi=new WeakMap,Pd=new WeakMap,gi=new WeakMap,Rd=new WeakMap,Pa=new WeakMap,Ra=new WeakMap,ke=new WeakSet,Xh=function(){const e=c(this,gi),t=c(this,fi);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&c(this,gi).html||null},Mp=function(){var e,t,s;return((s=(t=(e=c(this,ke,Xh))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:s.fontSize)||0},dv=function(){var e,t,s;return((s=(t=(e=c(this,ke,Xh))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:s.color)||null},hv=function(e){const t=[],s={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},n={style:{color:c(this,ke,dv),fontSize:c(this,ke,Mp)?`calc(${c(this,ke,Mp)}px * var(--total-scale-factor))`:""}};for(const r of e.split(`
`))t.push({name:"span",value:r,attributes:n});return s},uv=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&c(this,pi))&&A(this,ke,Yh).call(this)},fv=function(){if(c(this,mi)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:s,pageX:n,pageY:r}}}=c(this,Td);let a=!!c(this,ul),l=a?c(this,ul):c(this,Pd);for(const x of c(this,kd))if(!l||Z.intersect(x.data.rect,l)!==null){l=x.data.rect,a=!0;break}const d=Z.normalizeRect([l[0],e[3]-l[1]+e[1],l[2],e[3]-l[3]+e[1]]),u=a?l[2]-l[0]+5:0,f=d[0]+u,m=d[1];b(this,mi,[100*(f-n)/t,100*(m-r)/s]);const{style:p}=c(this,Ve);p.left=`${c(this,mi)[0]}%`,p.top=`${c(this,mi)[1]}%`},Yh=function(){b(this,pi,!c(this,pi)),c(this,pi)?(A(this,ke,Kh).call(this),c(this,Ve).addEventListener("click",c(this,dl)),c(this,Ve).addEventListener("keydown",c(this,cl))):(A(this,ke,Lp).call(this),c(this,Ve).removeEventListener("click",c(this,dl)),c(this,Ve).removeEventListener("keydown",c(this,cl)))},Kh=function(){c(this,Ys)||this.render(),this.isVisible?c(this,pi)&&c(this,Ve).classList.add("focused"):(A(this,ke,fv).call(this),c(this,Ve).hidden=!1,c(this,Ve).style.zIndex=parseInt(c(this,Ve).style.zIndex)+1e3)},Lp=function(){c(this,Ve).classList.remove("focused"),!(c(this,pi)||!this.isVisible)&&(c(this,Ve).hidden=!0,c(this,Ve).style.zIndex=parseInt(c(this,Ve).style.zIndex)-1e3)};class pv extends Je{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=ie.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const s=document.createElement("span");s.textContent=t,e.append(s)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Md;class FE extends Je{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});w(this,Md,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:s,height:n}=this,r=this.svgFactory.create(s,n,!0),a=b(this,Md,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),a.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),a.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),a.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,Md)}addHighlightArea(){this.container.classList.add("highlightArea")}}Md=new WeakMap;var Ld;class BE extends Je{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});w(this,Ld,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:s,height:n}=this,r=this.svgFactory.create(s,n,!0),a=t.borderStyle.width,l=b(this,Ld,this.svgFactory.createElement("svg:rect"));return l.setAttribute("x",a/2),l.setAttribute("y",a/2),l.setAttribute("width",s-a),l.setAttribute("height",n-a),l.setAttribute("stroke-width",a||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,Ld)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ld=new WeakMap;var Id;class zE extends Je{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});w(this,Id,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:s,height:n}=this,r=this.svgFactory.create(s,n,!0),a=t.borderStyle.width,l=b(this,Id,this.svgFactory.createElement("svg:ellipse"));return l.setAttribute("cx",s/2),l.setAttribute("cy",n/2),l.setAttribute("rx",s/2-a/2),l.setAttribute("ry",n/2-a/2),l.setAttribute("stroke-width",a||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,Id)}addHighlightArea(){this.container.classList.add("highlightArea")}}Id=new WeakMap;var Dd;class mv extends Je{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});w(this,Dd,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:s,borderStyle:n,popupRef:r},width:a,height:l}=this;if(!s)return this.container;const d=this.svgFactory.create(a,l,!0);let h=[];for(let f=0,m=s.length;f<m;f+=2){const p=s[f]-t[0],x=t[3]-s[f+1];h.push(`${p},${x}`)}h=h.join(" ");const u=b(this,Dd,this.svgFactory.createElement(this.svgElementName));return u.setAttribute("points",h),u.setAttribute("stroke-width",n.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),d.append(u),this.container.append(d),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,Dd)}addHighlightArea(){this.container.classList.add("highlightArea")}}Dd=new WeakMap;class $E extends mv{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class HE extends Je{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Od,Ma,Fd,Ip;class qm extends Je{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});w(this,Fd);w(this,Od,null);w(this,Ma,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?ie.HIGHLIGHT:ie.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:s,inkLists:n,borderStyle:r,popupRef:a}}=this,{transform:l,width:d,height:h}=A(this,Fd,Ip).call(this,s,t),u=this.svgFactory.create(d,h,!0),f=b(this,Od,this.svgFactory.createElement("svg:g"));u.append(f),f.setAttribute("stroke-width",r.width||1),f.setAttribute("stroke-linecap","round"),f.setAttribute("stroke-linejoin","round"),f.setAttribute("stroke-miterlimit",10),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),f.setAttribute("transform",l);for(let m=0,p=n.length;m<p;m++){const x=this.svgFactory.createElement(this.svgElementName);c(this,Ma).push(x),x.setAttribute("points",n[m].join(",")),f.append(x)}return!a&&this.hasPopupData&&this._createPopup(),this.container.append(u),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:s,points:n,rect:r}=t,a=c(this,Od);if(s>=0&&a.setAttribute("stroke-width",s||1),n)for(let l=0,d=c(this,Ma).length;l<d;l++)c(this,Ma)[l].setAttribute("points",n[l].join(","));if(r){const{transform:l,width:d,height:h}=A(this,Fd,Ip).call(this,this.data.rotation,r);a.parentElement.setAttribute("viewBox",`0 0 ${d} ${h}`),a.setAttribute("transform",l)}}getElementsToTriggerPopup(){return c(this,Ma)}addHighlightArea(){this.container.classList.add("highlightArea")}}Od=new WeakMap,Ma=new WeakMap,Fd=new WeakSet,Ip=function(t,s){switch(t){case 90:return{transform:`rotate(90) translate(${-s[0]},${s[1]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};case 180:return{transform:`rotate(180) translate(${-s[2]},${s[1]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]};case 270:return{transform:`rotate(270) translate(${-s[2]},${s[3]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};default:return{transform:`translate(${-s[0]},${s[3]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]}}};class gv extends Je{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=ie.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const s=document.createElement("mark");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class UE extends Je{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class VE extends Je{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class WE extends Je{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const s=document.createElement("s");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class xv extends Je{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=ie.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Bd,zd,Dp;class GE extends Je{constructor(t){var n;super(t,{isRenderable:!0});w(this,zd);w(this,Bd,null);const{file:s}=this.data;this.filename=s.filename,this.content=s.content,(n=this.linkService.eventBus)==null||n.dispatch("fileattachmentannotation",{source:this,...s})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:s}=this;let n;s.hasAppearance||s.fillAlpha===0?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(s.name)?"paperclip":"pushpin"}.svg`,s.fillAlpha&&s.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(s.fillAlpha*100)}%);`)),n.addEventListener("dblclick",A(this,zd,Dp).bind(this)),b(this,Bd,n);const{isMac:r}=xt.platform;return t.addEventListener("keydown",a=>{a.key==="Enter"&&(r?a.metaKey:a.ctrlKey)&&A(this,zd,Dp).call(this)}),!s.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),t.append(n),t}getElementsToTriggerPopup(){return c(this,Bd)}addHighlightArea(){this.container.classList.add("highlightArea")}}Bd=new WeakMap,zd=new WeakSet,Dp=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var $d,La,ur,Hd,Dr,Op,Fp,fl;let Xm=(fl=class{constructor({div:e,accessibilityManager:t,annotationCanvasMap:s,annotationEditorUIManager:n,page:r,viewport:a,structTreeLayer:l}){w(this,Dr);w(this,$d,null);w(this,La,null);w(this,ur,new Map);w(this,Hd,null);this.div=e,b(this,$d,t),b(this,La,s),b(this,Hd,l||null),this.page=r,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=n}hasEditableAnnotations(){return c(this,ur).size>0}async render(e){var a;const{annotations:t}=e,s=this.div;Rr(s,this.viewport);const n=new Map,r={data:null,layer:s,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new Mc,annotationStorage:e.annotationStorage||new zm,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const l of t){if(l.noHTML)continue;const d=l.annotationType===Ge.POPUP;if(d){const f=n.get(l.id);if(!f)continue;r.elements=f}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;r.data=l;const h=fx.create(r);if(!h.isRenderable)continue;if(!d&&l.popupRef){const f=n.get(l.popupRef);f?f.push(h):n.set(l.popupRef,[h])}const u=h.render();l.hidden&&(u.style.visibility="hidden"),await A(this,Dr,Op).call(this,u,l.id,r.elements),h._isEditable&&(c(this,ur).set(h.data.id,h),(a=this._annotationEditorUIManager)==null||a.renderAnnotationElement(h))}A(this,Dr,Fp).call(this)}async addLinkAnnotations(e,t){const s={data:null,layer:this.div,linkService:t,svgFactory:new Mc,parent:this};for(const n of e){n.borderStyle||(n.borderStyle=fl._defaultBorderStyle),s.data=n;const r=fx.create(s);if(!r.isRenderable)continue;const a=r.render();await A(this,Dr,Op).call(this,a,n.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,Rr(t,{rotation:e.rotation}),A(this,Dr,Fp).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(c(this,ur).values())}getEditableAnnotation(e){return c(this,ur).get(e)}static get _defaultBorderStyle(){return pe(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:fo.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}},$d=new WeakMap,La=new WeakMap,ur=new WeakMap,Hd=new WeakMap,Dr=new WeakSet,Op=async function(e,t,s){var l,d;const n=e.firstChild||e,r=n.id=`${Fm}${t}`,a=await((l=c(this,Hd))==null?void 0:l.getAriaAttributes(r));if(a)for(const[h,u]of a)n.setAttribute(h,u);s?s.at(-1).container.after(e):(this.div.append(e),(d=c(this,$d))==null||d.moveElementInDOM(this.div,e,n,!1))},Fp=function(){var t;if(!c(this,La))return;const e=this.div;for(const[s,n]of c(this,La)){const r=e.querySelector(`[data-annotation-id="${s}"]`);if(!r)continue;n.className="annotationContent";const{firstChild:a}=r;a?a.nodeName==="CANVAS"?a.replaceWith(n):a.classList.contains("annotationContent")?a.after(n):a.before(n):r.append(n);const l=c(this,ur).get(s);l&&(l._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(s,r.id,n),l._hasNoCanvas=!1):l.canvas=n)}c(this,La).clear()},fl);const Th=/\r\n?|\n/g;var Ks,ls,Ud,Ia,cs,nt,bv,vv,yv,Jh,Ci,Zh,Qh,wv,zp,Av;const Pe=class Pe extends Re{constructor(t){super({...t,name:"freeTextEditor"});w(this,nt);w(this,Ks);w(this,ls,"");w(this,Ud,`${this.id}-editor`);w(this,Ia,null);w(this,cs);b(this,Ks,t.color||Pe._defaultColor||Re._defaultLineColor),b(this,cs,t.fontSize||Pe._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const t=Pe.prototype,s=a=>a.isEmpty(),n=Mr.TRANSLATE_SMALL,r=Mr.TRANSLATE_BIG;return pe(this,"_keyboardManager",new mh([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-n,0],checker:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:s}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[n,0],checker:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:s}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-n],checker:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:s}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,n],checker:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:s}]]))}static initialize(t,s){Re.initialize(t,s);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,s){switch(t){case me.FREETEXT_SIZE:Pe._defaultFontSize=s;break;case me.FREETEXT_COLOR:Pe._defaultColor=s;break}}updateParams(t,s){switch(t){case me.FREETEXT_SIZE:A(this,nt,bv).call(this,s);break;case me.FREETEXT_COLOR:A(this,nt,vv).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[me.FREETEXT_SIZE,Pe._defaultFontSize],[me.FREETEXT_COLOR,Pe._defaultColor||Re._defaultLineColor]]}get propertiesToUpdate(){return[[me.FREETEXT_SIZE,c(this,cs)],[me.FREETEXT_COLOR,c(this,Ks)]]}_translateEmpty(t,s){this._uiManager.translateSelectedEditors(t,s,!0)}getInitialTranslation(){const t=this.parentScale;return[-Pe._internalPadding*t,-(Pe._internalPadding+c(this,cs))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),b(this,Ia,new AbortController);const t=this._uiManager.combinedSignal(c(this,Ia));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",c(this,Ud)),this._isDraggable=!0,(t=c(this,Ia))==null||t.abort(),b(this,Ia,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var s;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(s=this._initialOptions)!=null&&s.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=c(this,ls),s=b(this,ls,A(this,nt,yv).call(this).trimEnd());if(t===s)return;const n=r=>{if(b(this,ls,r),!r){this.remove();return}A(this,nt,Qh).call(this),this._uiManager.rebuild(this),A(this,nt,Jh).call(this)};this.addCommands({cmd:()=>{n(s)},undo:()=>{n(t)},mustExec:!1}),A(this,nt,Jh).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Pe._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,s;(this._isCopy||this.annotationElementId)&&(t=this.x,s=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",c(this,Ud)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${c(this,cs)}px * var(--total-scale-factor))`,n.color=c(this,Ks),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[r,a]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[d,h]=this.getInitialTranslation();[d,h]=this.pageTranslationToScreen(d,h);const[u,f]=this.pageDimensions,[m,p]=this.pageTranslation;let x,g;switch(this.rotation){case 0:x=t+(l[0]-m)/u,g=s+this.height-(l[1]-p)/f;break;case 90:x=t+(l[0]-m)/u,g=s-(l[1]-p)/f,[d,h]=[h,-d];break;case 180:x=t-this.width+(l[0]-m)/u,g=s-(l[1]-p)/f,[d,h]=[-d,-h];break;case 270:x=t+(l[0]-m-this.height*f)/u,g=s+(l[1]-p-this.width*u)/f,[d,h]=[-h,d];break}this.setAt(x*r,g*a,d,h)}else this._moveAfterPaste(t,s);A(this,nt,Qh).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var x,g,v;const s=t.clipboardData||window.clipboardData,{types:n}=s;if(n.length===1&&n[0]==="text/plain")return;t.preventDefault();const r=A(x=Pe,Ci,zp).call(x,s.getData("text")||"").replaceAll(Th,`
`);if(!r)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const l=a.getRangeAt(0);if(!r.includes(`
`)){l.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:d,startOffset:h}=l,u=[],f=[];if(d.nodeType===Node.TEXT_NODE){const y=d.parentElement;if(f.push(d.nodeValue.slice(h).replaceAll(Th,"")),y!==this.editorDiv){let S=u;for(const j of this.editorDiv.childNodes){if(j===y){S=f;continue}S.push(A(g=Pe,Ci,Zh).call(g,j))}}u.push(d.nodeValue.slice(0,h).replaceAll(Th,""))}else if(d===this.editorDiv){let y=u,S=0;for(const j of this.editorDiv.childNodes)S++===h&&(y=f),y.push(A(v=Pe,Ci,Zh).call(v,j))}b(this,ls,`${u.join(`
`)}${r}${f.join(`
`)}`),A(this,nt,Qh).call(this);const m=new Range;let p=Math.sumPrecise(u.map(y=>y.length));for(const{firstChild:y}of this.editorDiv.childNodes)if(y.nodeType===Node.TEXT_NODE){const S=y.nodeValue.length;if(p<=S){m.setStart(y,p),m.setEnd(y,p);break}p-=S}a.removeAllRanges(),a.addRange(m)}get contentDiv(){return this.editorDiv}static async deserialize(t,s,n){var l;let r=null;if(t instanceof pv){const{data:{defaultAppearanceData:{fontSize:d,fontColor:h},rect:u,rotation:f,id:m,popupRef:p},textContent:x,textPosition:g,parent:{page:{pageNumber:v}}}=t;if(!x||x.length===0)return null;r=t={annotationType:ie.FREETEXT,color:Array.from(h),fontSize:d,value:x.join(`
`),position:g,pageIndex:v-1,rect:u.slice(0),rotation:f,annotationElementId:m,id:m,deleted:!1,popupRef:p}}const a=await super.deserialize(t,s,n);return b(a,cs,t.fontSize),b(a,Ks,Z.makeHexColor(...t.color)),b(a,ls,A(l=Pe,Ci,zp).call(l,t.value)),a._initialData=r,a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Pe._internalPadding*this.parentScale,n=this.getRect(s,s),r=Re._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:c(this,Ks)),a={annotationType:ie.FREETEXT,color:r,fontSize:c(this,cs),value:A(this,nt,wv).call(this),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(a.isCopy=!0,a):this.annotationElementId&&!A(this,nt,Av).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(t){const s=super.renderAnnotationElement(t);if(this.deleted)return s;const{style:n}=s;n.fontSize=`calc(${c(this,cs)}px * var(--total-scale-factor))`,n.color=c(this,Ks),s.replaceChildren();for(const a of c(this,ls).split(`
`)){const l=document.createElement("div");l.append(a?document.createTextNode(a):document.createElement("br")),s.append(l)}const r=Pe._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(r,r),popupContent:c(this,ls)}),s}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Ks=new WeakMap,ls=new WeakMap,Ud=new WeakMap,Ia=new WeakMap,cs=new WeakMap,nt=new WeakSet,bv=function(t){const s=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-c(this,cs))*this.parentScale),b(this,cs,r),A(this,nt,Jh).call(this)},n=c(this,cs);this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:me.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},vv=function(t){const s=r=>{b(this,Ks,this.editorDiv.style.color=r)},n=c(this,Ks);this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:me.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},yv=function(){var n;const t=[];this.editorDiv.normalize();let s=null;for(const r of this.editorDiv.childNodes)(s==null?void 0:s.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(t.push(A(n=Pe,Ci,Zh).call(n,r)),s=r);return t.join(`
`)},Jh=function(){const[t,s]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:r,div:a}=this,l=a.style.display,d=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",r.div.append(this.div),n=a.getBoundingClientRect(),a.remove(),a.style.display=l,a.classList.toggle("hidden",d)}this.rotation%180===this.parentRotation%180?(this.width=n.width/t,this.height=n.height/s):(this.width=n.height/t,this.height=n.width/s),this.fixAndSetPosition()},Ci=new WeakSet,Zh=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Th,"")},Qh=function(){if(this.editorDiv.replaceChildren(),!!c(this,ls))for(const t of c(this,ls).split(`
`)){const s=document.createElement("div");s.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(s)}},wv=function(){return c(this,ls).replaceAll(" "," ")},zp=function(t){return t.replaceAll(" "," ")},Av=function(t){const{value:s,fontSize:n,color:r,pageIndex:a}=this._initialData;return this._hasBeenMoved||t.value!==s||t.fontSize!==n||t.color.some((l,d)=>l!==r[d])||t.pageIndex!==a},w(Pe,Ci),z(Pe,"_freeTextDefaultContent",""),z(Pe,"_internalPadding",0),z(Pe,"_defaultColor",null),z(Pe,"_defaultFontSize",10),z(Pe,"_type","freetext"),z(Pe,"_editorType",ie.FREETEXT);let Bp=Pe;class G{toSVGPath(){_e("Abstract method `toSVGPath` must be implemented.")}get box(){_e("Abstract getter `box` must be implemented.")}serialize(e,t){_e("Abstract method `serialize` must be implemented.")}static _rescale(e,t,s,n,r,a){a||(a=new Float32Array(e.length));for(let l=0,d=e.length;l<d;l+=2)a[l]=t+e[l]*n,a[l+1]=s+e[l+1]*r;return a}static _rescaleAndSwap(e,t,s,n,r,a){a||(a=new Float32Array(e.length));for(let l=0,d=e.length;l<d;l+=2)a[l]=t+e[l+1]*n,a[l+1]=s+e[l]*r;return a}static _translate(e,t,s,n){n||(n=new Float32Array(e.length));for(let r=0,a=e.length;r<a;r+=2)n[r]=t+e[r],n[r+1]=s+e[r+1];return n}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,s,n,r){switch(r){case 90:return[1-t/s,e/n];case 180:return[1-e/s,1-t/n];case 270:return[t/s,1-e/n];default:return[e/s,t/n]}}static _normalizePagePoint(e,t,s){switch(s){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,s,n,r,a){return[(e+5*s)/6,(t+5*n)/6,(5*s+r)/6,(5*n+a)/6,(s+r)/2,(n+a)/2]}}z(G,"PRECISION",1e-4);var ds,Js,pl,ml,En,fe,Da,Oa,Vd,Wd,gl,xl,fr,Gd,Uu,Vu,ot,gc,Nv,Sv,jv,Ev,Cv,_v;const Yn=class Yn{constructor({x:e,y:t},s,n,r,a,l=0){w(this,ot);w(this,ds);w(this,Js,[]);w(this,pl);w(this,ml);w(this,En,[]);w(this,fe,new Float32Array(18));w(this,Da);w(this,Oa);w(this,Vd);w(this,Wd);w(this,gl);w(this,xl);w(this,fr,[]);b(this,ds,s),b(this,xl,r*n),b(this,ml,a),c(this,fe).set([NaN,NaN,NaN,NaN,e,t],6),b(this,pl,l),b(this,Wd,c(Yn,Gd)*n),b(this,Vd,c(Yn,Vu)*n),b(this,gl,n),c(this,fr).push(e,t)}isEmpty(){return isNaN(c(this,fe)[8])}add({x:e,y:t}){var P;b(this,Da,e),b(this,Oa,t);const[s,n,r,a]=c(this,ds);let[l,d,h,u]=c(this,fe).subarray(8,12);const f=e-h,m=t-u,p=Math.hypot(f,m);if(p<c(this,Vd))return!1;const x=p-c(this,Wd),g=x/p,v=g*f,y=g*m;let S=l,j=d;l=h,d=u,h+=v,u+=y,(P=c(this,fr))==null||P.push(e,t);const E=-y/x,C=v/x,k=E*c(this,xl),_=C*c(this,xl);return c(this,fe).set(c(this,fe).subarray(2,8),0),c(this,fe).set([h+k,u+_],4),c(this,fe).set(c(this,fe).subarray(14,18),12),c(this,fe).set([h-k,u-_],16),isNaN(c(this,fe)[6])?(c(this,En).length===0&&(c(this,fe).set([l+k,d+_],2),c(this,En).push(NaN,NaN,NaN,NaN,(l+k-s)/r,(d+_-n)/a),c(this,fe).set([l-k,d-_],14),c(this,Js).push(NaN,NaN,NaN,NaN,(l-k-s)/r,(d-_-n)/a)),c(this,fe).set([S,j,l,d,h,u],6),!this.isEmpty()):(c(this,fe).set([S,j,l,d,h,u],6),Math.abs(Math.atan2(j-d,S-l)-Math.atan2(y,v))<Math.PI/2?([l,d,h,u]=c(this,fe).subarray(2,6),c(this,En).push(NaN,NaN,NaN,NaN,((l+h)/2-s)/r,((d+u)/2-n)/a),[l,d,S,j]=c(this,fe).subarray(14,18),c(this,Js).push(NaN,NaN,NaN,NaN,((S+l)/2-s)/r,((j+d)/2-n)/a),!0):([S,j,l,d,h,u]=c(this,fe).subarray(0,6),c(this,En).push(((S+5*l)/6-s)/r,((j+5*d)/6-n)/a,((5*l+h)/6-s)/r,((5*d+u)/6-n)/a,((l+h)/2-s)/r,((d+u)/2-n)/a),[h,u,l,d,S,j]=c(this,fe).subarray(12,18),c(this,Js).push(((S+5*l)/6-s)/r,((j+5*d)/6-n)/a,((5*l+h)/6-s)/r,((5*d+u)/6-n)/a,((l+h)/2-s)/r,((d+u)/2-n)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const e=c(this,En),t=c(this,Js);if(isNaN(c(this,fe)[6])&&!this.isEmpty())return A(this,ot,Nv).call(this);const s=[];s.push(`M${e[4]} ${e[5]}`);for(let n=6;n<e.length;n+=6)isNaN(e[n])?s.push(`L${e[n+4]} ${e[n+5]}`):s.push(`C${e[n]} ${e[n+1]} ${e[n+2]} ${e[n+3]} ${e[n+4]} ${e[n+5]}`);A(this,ot,jv).call(this,s);for(let n=t.length-6;n>=6;n-=6)isNaN(t[n])?s.push(`L${t[n+4]} ${t[n+5]}`):s.push(`C${t[n]} ${t[n+1]} ${t[n+2]} ${t[n+3]} ${t[n+4]} ${t[n+5]}`);return A(this,ot,Sv).call(this,s),s.join(" ")}newFreeDrawOutline(e,t,s,n,r,a){return new kv(e,t,s,n,r,a)}getOutlines(){var f;const e=c(this,En),t=c(this,Js),s=c(this,fe),[n,r,a,l]=c(this,ds),d=new Float32Array((((f=c(this,fr))==null?void 0:f.length)??0)+2);for(let m=0,p=d.length-2;m<p;m+=2)d[m]=(c(this,fr)[m]-n)/a,d[m+1]=(c(this,fr)[m+1]-r)/l;if(d[d.length-2]=(c(this,Da)-n)/a,d[d.length-1]=(c(this,Oa)-r)/l,isNaN(s[6])&&!this.isEmpty())return A(this,ot,Ev).call(this,d);const h=new Float32Array(c(this,En).length+24+c(this,Js).length);let u=e.length;for(let m=0;m<u;m+=2){if(isNaN(e[m])){h[m]=h[m+1]=NaN;continue}h[m]=e[m],h[m+1]=e[m+1]}u=A(this,ot,_v).call(this,h,u);for(let m=t.length-6;m>=6;m-=6)for(let p=0;p<6;p+=2){if(isNaN(t[m+p])){h[u]=h[u+1]=NaN,u+=2;continue}h[u]=t[m+p],h[u+1]=t[m+p+1],u+=2}return A(this,ot,Cv).call(this,h,u),this.newFreeDrawOutline(h,d,c(this,ds),c(this,gl),c(this,pl),c(this,ml))}};ds=new WeakMap,Js=new WeakMap,pl=new WeakMap,ml=new WeakMap,En=new WeakMap,fe=new WeakMap,Da=new WeakMap,Oa=new WeakMap,Vd=new WeakMap,Wd=new WeakMap,gl=new WeakMap,xl=new WeakMap,fr=new WeakMap,Gd=new WeakMap,Uu=new WeakMap,Vu=new WeakMap,ot=new WeakSet,gc=function(){const e=c(this,fe).subarray(4,6),t=c(this,fe).subarray(16,18),[s,n,r,a]=c(this,ds);return[(c(this,Da)+(e[0]-t[0])/2-s)/r,(c(this,Oa)+(e[1]-t[1])/2-n)/a,(c(this,Da)+(t[0]-e[0])/2-s)/r,(c(this,Oa)+(t[1]-e[1])/2-n)/a]},Nv=function(){const[e,t,s,n]=c(this,ds),[r,a,l,d]=A(this,ot,gc).call(this);return`M${(c(this,fe)[2]-e)/s} ${(c(this,fe)[3]-t)/n} L${(c(this,fe)[4]-e)/s} ${(c(this,fe)[5]-t)/n} L${r} ${a} L${l} ${d} L${(c(this,fe)[16]-e)/s} ${(c(this,fe)[17]-t)/n} L${(c(this,fe)[14]-e)/s} ${(c(this,fe)[15]-t)/n} Z`},Sv=function(e){const t=c(this,Js);e.push(`L${t[4]} ${t[5]} Z`)},jv=function(e){const[t,s,n,r]=c(this,ds),a=c(this,fe).subarray(4,6),l=c(this,fe).subarray(16,18),[d,h,u,f]=A(this,ot,gc).call(this);e.push(`L${(a[0]-t)/n} ${(a[1]-s)/r} L${d} ${h} L${u} ${f} L${(l[0]-t)/n} ${(l[1]-s)/r}`)},Ev=function(e){const t=c(this,fe),[s,n,r,a]=c(this,ds),[l,d,h,u]=A(this,ot,gc).call(this),f=new Float32Array(36);return f.set([NaN,NaN,NaN,NaN,(t[2]-s)/r,(t[3]-n)/a,NaN,NaN,NaN,NaN,(t[4]-s)/r,(t[5]-n)/a,NaN,NaN,NaN,NaN,l,d,NaN,NaN,NaN,NaN,h,u,NaN,NaN,NaN,NaN,(t[16]-s)/r,(t[17]-n)/a,NaN,NaN,NaN,NaN,(t[14]-s)/r,(t[15]-n)/a],0),this.newFreeDrawOutline(f,e,c(this,ds),c(this,gl),c(this,pl),c(this,ml))},Cv=function(e,t){const s=c(this,Js);return e.set([NaN,NaN,NaN,NaN,s[4],s[5]],t),t+=6},_v=function(e,t){const s=c(this,fe).subarray(4,6),n=c(this,fe).subarray(16,18),[r,a,l,d]=c(this,ds),[h,u,f,m]=A(this,ot,gc).call(this);return e.set([NaN,NaN,NaN,NaN,(s[0]-r)/l,(s[1]-a)/d,NaN,NaN,NaN,NaN,h,u,NaN,NaN,NaN,NaN,f,m,NaN,NaN,NaN,NaN,(n[0]-r)/l,(n[1]-a)/d],t),t+=24},w(Yn,Gd,8),w(Yn,Uu,2),w(Yn,Vu,c(Yn,Gd)+c(Yn,Uu));let Au=Yn;var bl,Fa,xi,qd,hs,Xd,Xe,Wu,Tv;class kv extends G{constructor(t,s,n,r,a,l){super();w(this,Wu);w(this,bl);w(this,Fa,new Float32Array(4));w(this,xi);w(this,qd);w(this,hs);w(this,Xd);w(this,Xe);b(this,Xe,t),b(this,hs,s),b(this,bl,n),b(this,Xd,r),b(this,xi,a),b(this,qd,l),this.lastPoint=[NaN,NaN],A(this,Wu,Tv).call(this,l);const[d,h,u,f]=c(this,Fa);for(let m=0,p=t.length;m<p;m+=2)t[m]=(t[m]-d)/u,t[m+1]=(t[m+1]-h)/f;for(let m=0,p=s.length;m<p;m+=2)s[m]=(s[m]-d)/u,s[m+1]=(s[m+1]-h)/f}toSVGPath(){const t=[`M${c(this,Xe)[4]} ${c(this,Xe)[5]}`];for(let s=6,n=c(this,Xe).length;s<n;s+=6){if(isNaN(c(this,Xe)[s])){t.push(`L${c(this,Xe)[s+4]} ${c(this,Xe)[s+5]}`);continue}t.push(`C${c(this,Xe)[s]} ${c(this,Xe)[s+1]} ${c(this,Xe)[s+2]} ${c(this,Xe)[s+3]} ${c(this,Xe)[s+4]} ${c(this,Xe)[s+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,s,n,r],a){const l=n-t,d=r-s;let h,u;switch(a){case 0:h=G._rescale(c(this,Xe),t,r,l,-d),u=G._rescale(c(this,hs),t,r,l,-d);break;case 90:h=G._rescaleAndSwap(c(this,Xe),t,s,l,d),u=G._rescaleAndSwap(c(this,hs),t,s,l,d);break;case 180:h=G._rescale(c(this,Xe),n,s,-l,d),u=G._rescale(c(this,hs),n,s,-l,d);break;case 270:h=G._rescaleAndSwap(c(this,Xe),n,r,-l,-d),u=G._rescaleAndSwap(c(this,hs),n,r,-l,-d);break}return{outline:Array.from(h),points:[Array.from(u)]}}get box(){return c(this,Fa)}newOutliner(t,s,n,r,a,l=0){return new Au(t,s,n,r,a,l)}getNewOutline(t,s){const[n,r,a,l]=c(this,Fa),[d,h,u,f]=c(this,bl),m=a*u,p=l*f,x=n*u+d,g=r*f+h,v=this.newOutliner({x:c(this,hs)[0]*m+x,y:c(this,hs)[1]*p+g},c(this,bl),c(this,Xd),t,c(this,qd),s??c(this,xi));for(let y=2;y<c(this,hs).length;y+=2)v.add({x:c(this,hs)[y]*m+x,y:c(this,hs)[y+1]*p+g});return v.getOutlines()}}bl=new WeakMap,Fa=new WeakMap,xi=new WeakMap,qd=new WeakMap,hs=new WeakMap,Xd=new WeakMap,Xe=new WeakMap,Wu=new WeakSet,Tv=function(t){const s=c(this,Xe);let n=s[4],r=s[5];const a=[n,r,n,r];let l=n,d=r;const h=t?Math.max:Math.min;for(let f=6,m=s.length;f<m;f+=6){const p=s[f+4],x=s[f+5];if(isNaN(s[f]))Z.pointBoundingBox(p,x,a),d<x?(l=p,d=x):d===x&&(l=h(l,p));else{const g=[1/0,1/0,-1/0,-1/0];Z.bezierBoundingBox(n,r,...s.slice(f,f+6),g),Z.rectBoundingBox(...g,a),d<g[3]?(l=g[2],d=g[3]):d===g[3]&&(l=h(l,g[2]))}n=p,r=x}const u=c(this,Fa);u[0]=a[0]-c(this,xi),u[1]=a[1]-c(this,xi),u[2]=a[2]-a[0]+2*c(this,xi),u[3]=a[3]-a[1]+2*c(this,xi),this.lastPoint=[l,d]};var Yd,Kd,pr,Zs,Wt,Pv,eu,Rv,Mv,Hp;class $p{constructor(e,t=0,s=0,n=!0){w(this,Wt);w(this,Yd);w(this,Kd);w(this,pr,[]);w(this,Zs,[]);const r=[1/0,1/0,-1/0,-1/0],a=10**-4;for(const{x:p,y:x,width:g,height:v}of e){const y=Math.floor((p-t)/a)*a,S=Math.ceil((p+g+t)/a)*a,j=Math.floor((x-t)/a)*a,E=Math.ceil((x+v+t)/a)*a,C=[y,j,E,!0],k=[S,j,E,!1];c(this,pr).push(C,k),Z.rectBoundingBox(y,j,S,E,r)}const l=r[2]-r[0]+2*s,d=r[3]-r[1]+2*s,h=r[0]-s,u=r[1]-s,f=c(this,pr).at(n?-1:-2),m=[f[0],f[2]];for(const p of c(this,pr)){const[x,g,v]=p;p[0]=(x-h)/l,p[1]=(g-u)/d,p[2]=(v-u)/d}b(this,Yd,new Float32Array([h,u,l,d])),b(this,Kd,m)}getOutlines(){c(this,pr).sort((t,s)=>t[0]-s[0]||t[1]-s[1]||t[2]-s[2]);const e=[];for(const t of c(this,pr))t[3]?(e.push(...A(this,Wt,Hp).call(this,t)),A(this,Wt,Rv).call(this,t)):(A(this,Wt,Mv).call(this,t),e.push(...A(this,Wt,Hp).call(this,t)));return A(this,Wt,Pv).call(this,e)}}Yd=new WeakMap,Kd=new WeakMap,pr=new WeakMap,Zs=new WeakMap,Wt=new WeakSet,Pv=function(e){const t=[],s=new Set;for(const a of e){const[l,d,h]=a;t.push([l,d,a],[l,h,a])}t.sort((a,l)=>a[1]-l[1]||a[0]-l[0]);for(let a=0,l=t.length;a<l;a+=2){const d=t[a][2],h=t[a+1][2];d.push(h),h.push(d),s.add(d),s.add(h)}const n=[];let r;for(;s.size>0;){const a=s.values().next().value;let[l,d,h,u,f]=a;s.delete(a);let m=l,p=d;for(r=[l,h],n.push(r);;){let x;if(s.has(u))x=u;else if(s.has(f))x=f;else break;s.delete(x),[l,d,h,u,f]=x,m!==l&&(r.push(m,p,l,p===d?d:h),m=l),p=p===d?h:d}r.push(m,p)}return new qE(n,c(this,Yd),c(this,Kd))},eu=function(e){const t=c(this,Zs);let s=0,n=t.length-1;for(;s<=n;){const r=s+n>>1,a=t[r][0];if(a===e)return r;a<e?s=r+1:n=r-1}return n+1},Rv=function([,e,t]){const s=A(this,Wt,eu).call(this,e);c(this,Zs).splice(s,0,[e,t])},Mv=function([,e,t]){const s=A(this,Wt,eu).call(this,e);for(let n=s;n<c(this,Zs).length;n++){const[r,a]=c(this,Zs)[n];if(r!==e)break;if(r===e&&a===t){c(this,Zs).splice(n,1);return}}for(let n=s-1;n>=0;n--){const[r,a]=c(this,Zs)[n];if(r!==e)break;if(r===e&&a===t){c(this,Zs).splice(n,1);return}}},Hp=function(e){const[t,s,n]=e,r=[[t,s,n]],a=A(this,Wt,eu).call(this,n);for(let l=0;l<a;l++){const[d,h]=c(this,Zs)[l];for(let u=0,f=r.length;u<f;u++){const[,m,p]=r[u];if(!(h<=m||p<=d)){if(m>=d){if(p>h)r[u][1]=h;else{if(f===1)return[];r.splice(u,1),u--,f--}continue}r[u][2]=d,p>h&&r.push([t,h,p])}}}return r};var Jd,vl;class qE extends G{constructor(t,s,n){super();w(this,Jd);w(this,vl);b(this,vl,t),b(this,Jd,s),this.lastPoint=n}toSVGPath(){const t=[];for(const s of c(this,vl)){let[n,r]=s;t.push(`M${n} ${r}`);for(let a=2;a<s.length;a+=2){const l=s[a],d=s[a+1];l===n?(t.push(`V${d}`),r=d):d===r&&(t.push(`H${l}`),n=l)}t.push("Z")}return t.join(" ")}serialize([t,s,n,r],a){const l=[],d=n-t,h=r-s;for(const u of c(this,vl)){const f=new Array(u.length);for(let m=0;m<u.length;m+=2)f[m]=t+u[m]*d,f[m+1]=r-u[m+1]*h;l.push(f)}return l}get box(){return c(this,Jd)}get classNamesForOutlining(){return["highlightOutline"]}}Jd=new WeakMap,vl=new WeakMap;class Up extends Au{newFreeDrawOutline(e,t,s,n,r,a){return new XE(e,t,s,n,r,a)}}class XE extends kv{newOutliner(e,t,s,n,r,a=0){return new Up(e,t,s,n,r,a)}}var us,Ba,yl,at,Zd,wl,bi,Qd,mr,Qs,Al,eh,Ce,Vp,Wp,Gp,Hr,Lv,$i;const Kt=class Kt{constructor({editor:e=null,uiManager:t=null}){w(this,Ce);w(this,us,null);w(this,Ba,null);w(this,yl);w(this,at,null);w(this,Zd,!1);w(this,wl,!1);w(this,bi,null);w(this,Qd);w(this,mr,null);w(this,Qs,null);w(this,Al);var s,n;e?(b(this,wl,!1),b(this,Al,me.HIGHLIGHT_COLOR),b(this,bi,e)):(b(this,wl,!0),b(this,Al,me.HIGHLIGHT_DEFAULT_COLOR)),b(this,Qs,(e==null?void 0:e._uiManager)||t),b(this,Qd,c(this,Qs)._eventBus),b(this,yl,((s=e==null?void 0:e.color)==null?void 0:s.toUpperCase())||((n=c(this,Qs))==null?void 0:n.highlightColors.values().next().value)||"#FFFF98"),c(Kt,eh)||b(Kt,eh,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return pe(this,"_keyboardManager",new mh([[["Escape","mac+Escape"],Kt.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Kt.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Kt.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Kt.prototype._moveToPrevious],[["Home","mac+Home"],Kt.prototype._moveToBeginning],[["End","mac+End"],Kt.prototype._moveToEnd]]))}renderButton(){const e=b(this,us,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",c(this,bi)&&(e.ariaControls=`${c(this,bi).id}_colorpicker_dropdown`);const t=c(this,Qs)._signal;e.addEventListener("click",A(this,Ce,Hr).bind(this),{signal:t}),e.addEventListener("keydown",A(this,Ce,Gp).bind(this),{signal:t});const s=b(this,Ba,document.createElement("span"));return s.className="swatch",s.ariaHidden="true",s.style.backgroundColor=c(this,yl),e.append(s),e}renderMainDropdown(){const e=b(this,at,A(this,Ce,Vp).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===c(this,us)){A(this,Ce,Hr).call(this,e);return}const t=e.target.getAttribute("data-color");t&&A(this,Ce,Wp).call(this,t,e)}_moveToNext(e){var t,s;if(!c(this,Ce,$i)){A(this,Ce,Hr).call(this,e);return}if(e.target===c(this,us)){(t=c(this,at).firstChild)==null||t.focus();return}(s=e.target.nextSibling)==null||s.focus()}_moveToPrevious(e){var t,s;if(e.target===((t=c(this,at))==null?void 0:t.firstChild)||e.target===c(this,us)){c(this,Ce,$i)&&this._hideDropdownFromKeyboard();return}c(this,Ce,$i)||A(this,Ce,Hr).call(this,e),(s=e.target.previousSibling)==null||s.focus()}_moveToBeginning(e){var t;if(!c(this,Ce,$i)){A(this,Ce,Hr).call(this,e);return}(t=c(this,at).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!c(this,Ce,$i)){A(this,Ce,Hr).call(this,e);return}(t=c(this,at).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=c(this,at))==null||e.classList.add("hidden"),c(this,us).ariaExpanded="false",(t=c(this,mr))==null||t.abort(),b(this,mr,null)}_hideDropdownFromKeyboard(){var e;if(!c(this,wl)){if(!c(this,Ce,$i)){(e=c(this,bi))==null||e.unselect();return}this.hideDropdown(),c(this,us).focus({preventScroll:!0,focusVisible:c(this,Zd)})}}updateColor(e){if(c(this,Ba)&&(c(this,Ba).style.backgroundColor=e),!c(this,at))return;const t=c(this,Qs).highlightColors.values();for(const s of c(this,at).children)s.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;(e=c(this,us))==null||e.remove(),b(this,us,null),b(this,Ba,null),(t=c(this,at))==null||t.remove(),b(this,at,null)}};us=new WeakMap,Ba=new WeakMap,yl=new WeakMap,at=new WeakMap,Zd=new WeakMap,wl=new WeakMap,bi=new WeakMap,Qd=new WeakMap,mr=new WeakMap,Qs=new WeakMap,Al=new WeakMap,eh=new WeakMap,Ce=new WeakSet,Vp=function(){const e=document.createElement("div"),t=c(this,Qs)._signal;e.addEventListener("contextmenu",Ds,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),c(this,bi)&&(e.id=`${c(this,bi).id}_colorpicker_dropdown`);for(const[s,n]of c(this,Qs).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",n),r.title=s,r.setAttribute("data-l10n-id",c(Kt,eh)[s]);const a=document.createElement("span");r.append(a),a.className="swatch",a.style.backgroundColor=n,r.ariaSelected=n===c(this,yl),r.addEventListener("click",A(this,Ce,Wp).bind(this,n),{signal:t}),e.append(r)}return e.addEventListener("keydown",A(this,Ce,Gp).bind(this),{signal:t}),e},Wp=function(e,t){t.stopPropagation(),c(this,Qd).dispatch("switchannotationeditorparams",{source:this,type:c(this,Al),value:e})},Gp=function(e){Kt._keyboardManager.exec(this,e)},Hr=function(e){if(c(this,Ce,$i)){this.hideDropdown();return}if(b(this,Zd,e.detail===0),c(this,mr)||(b(this,mr,new AbortController),window.addEventListener("pointerdown",A(this,Ce,Lv).bind(this),{signal:c(this,Qs).combinedSignal(c(this,mr))})),c(this,us).ariaExpanded="true",c(this,at)){c(this,at).classList.remove("hidden");return}const t=b(this,at,A(this,Ce,Vp).call(this));c(this,us).append(t)},Lv=function(e){var t;(t=c(this,at))!=null&&t.contains(e.target)||this.hideDropdown()},$i=function(){return c(this,at)&&!c(this,at).classList.contains("hidden")},w(Kt,eh,null);let Lc=Kt;var Nl,th,vi,za,sh,Qt,nh,ih,$a,Ts,fs,At,Sl,yi,Pt,jl,Ps,rh,oe,qp,tu,Iv,Dv,Ov,Xp,Ur,Ls,bo,Fv,su,xc,Bv,zv,$v,Hv,Uv;const we=class we extends Re{constructor(t){super({...t,name:"highlightEditor"});w(this,oe);w(this,Nl,null);w(this,th,0);w(this,vi);w(this,za,null);w(this,sh,null);w(this,Qt,null);w(this,nh,null);w(this,ih,0);w(this,$a,null);w(this,Ts,null);w(this,fs,null);w(this,At,!1);w(this,Sl,null);w(this,yi);w(this,Pt,null);w(this,jl,"");w(this,Ps);w(this,rh,"");this.color=t.color||we._defaultColor,b(this,Ps,t.thickness||we._defaultThickness),b(this,yi,t.opacity||we._defaultOpacity),b(this,vi,t.boxes||null),b(this,rh,t.methodOfCreation||""),b(this,jl,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(b(this,At,!0),A(this,oe,tu).call(this,t),A(this,oe,Ur).call(this)):c(this,vi)&&(b(this,Nl,t.anchorNode),b(this,th,t.anchorOffset),b(this,nh,t.focusNode),b(this,ih,t.focusOffset),A(this,oe,qp).call(this),A(this,oe,Ur).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const t=we.prototype;return pe(this,"_keyboardManager",new mh([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:c(this,At)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:c(this,Ps),methodOfCreation:c(this,rh)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,s){var n;Re.initialize(t,s),we._defaultColor||(we._defaultColor=((n=s.highlightColors)==null?void 0:n.values().next().value)||"#fff066")}static updateDefaultParams(t,s){switch(t){case me.HIGHLIGHT_DEFAULT_COLOR:we._defaultColor=s;break;case me.HIGHLIGHT_THICKNESS:we._defaultThickness=s;break}}translateInPage(t,s){}get toolbarPosition(){return c(this,Sl)}updateParams(t,s){switch(t){case me.HIGHLIGHT_COLOR:A(this,oe,Iv).call(this,s);break;case me.HIGHLIGHT_THICKNESS:A(this,oe,Dv).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[me.HIGHLIGHT_DEFAULT_COLOR,we._defaultColor],[me.HIGHLIGHT_THICKNESS,we._defaultThickness]]}get propertiesToUpdate(){return[[me.HIGHLIGHT_COLOR,this.color||we._defaultColor],[me.HIGHLIGHT_THICKNESS,c(this,Ps)||we._defaultThickness],[me.HIGHLIGHT_FREE,c(this,At)]]}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",b(this,sh,new Lc({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(A(this,oe,xc).call(this))}getBaseTranslation(){return[0,0]}getRect(t,s){return super.getRect(t,s,A(this,oe,xc).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){A(this,oe,Xp).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(A(this,oe,Ur).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var n;let s=!1;this.parent&&!t?A(this,oe,Xp).call(this):t&&(A(this,oe,Ur).call(this,t),s=!this.parent&&((n=this.div)==null?void 0:n.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),s&&this.select()}rotate(t){var r,a,l;const{drawLayer:s}=this.parent;let n;c(this,At)?(t=(t-this.rotation+360)%360,n=A(r=we,Ls,bo).call(r,c(this,Ts).box,t)):n=A(a=we,Ls,bo).call(a,[this.x,this.y,this.width,this.height],t),s.updateProperties(c(this,fs),{bbox:n,root:{"data-main-rotation":t}}),s.updateProperties(c(this,Pt),{bbox:A(l=we,Ls,bo).call(l,c(this,Qt).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();c(this,jl)&&(t.setAttribute("aria-label",c(this,jl)),t.setAttribute("role","mark")),c(this,At)?t.classList.add("free"):this.div.addEventListener("keydown",A(this,oe,Fv).bind(this),{signal:this._uiManager._signal});const s=b(this,$a,document.createElement("div"));t.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",s.style.clipPath=c(this,za);const[n,r]=this.parentDimensions;return this.setDims(this.width*n,this.height*r),c0(this,c(this,$a),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(c(this,Pt),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(c(this,Pt),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:A(this,oe,su).call(this,!0);break;case 1:case 3:A(this,oe,su).call(this,!1);break}}select(){var t;super.select(),c(this,Pt)&&((t=this.parent)==null||t.drawLayer.updateProperties(c(this,Pt),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),c(this,Pt)&&((t=this.parent)==null||t.drawLayer.updateProperties(c(this,Pt),{rootClass:{selected:!1}}),c(this,At)||A(this,oe,su).call(this,!1))}get _mustFixPosition(){return!c(this,At)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(c(this,fs),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(c(this,Pt),{rootClass:{hidden:!t}}))}static startHighlighting(t,s,{target:n,x:r,y:a}){const{x:l,y:d,width:h,height:u}=n.getBoundingClientRect(),f=new AbortController,m=t.combinedSignal(f),p=x=>{f.abort(),A(this,Ls,Hv).call(this,t,x)};window.addEventListener("blur",p,{signal:m}),window.addEventListener("pointerup",p,{signal:m}),window.addEventListener("pointerdown",Ye,{capture:!0,passive:!1,signal:m}),window.addEventListener("contextmenu",Ds,{signal:m}),n.addEventListener("pointermove",A(this,Ls,$v).bind(this,t),{signal:m}),this._freeHighlight=new Up({x:r,y:a},[l,d,h,u],t.scale,this._defaultThickness/2,s,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,s,n){var g,v,y,S;let r=null;if(t instanceof gv){const{data:{quadPoints:j,rect:E,rotation:C,id:k,color:_,opacity:T,popupRef:P},parent:{page:{pageNumber:R}}}=t;r=t={annotationType:ie.HIGHLIGHT,color:Array.from(_),opacity:T,quadPoints:j,boxes:null,pageIndex:R-1,rect:E.slice(0),rotation:C,annotationElementId:k,id:k,deleted:!1,popupRef:P}}else if(t instanceof qm){const{data:{inkLists:j,rect:E,rotation:C,id:k,color:_,borderStyle:{rawWidth:T},popupRef:P},parent:{page:{pageNumber:R}}}=t;r=t={annotationType:ie.HIGHLIGHT,color:Array.from(_),thickness:T,inkLists:j,boxes:null,pageIndex:R-1,rect:E.slice(0),rotation:C,annotationElementId:k,id:k,deleted:!1,popupRef:P}}const{color:a,quadPoints:l,inkLists:d,opacity:h}=t,u=await super.deserialize(t,s,n);u.color=Z.makeHexColor(...a),b(u,yi,h||1),d&&b(u,Ps,t.thickness),u._initialData=r;const[f,m]=u.pageDimensions,[p,x]=u.pageTranslation;if(l){const j=b(u,vi,[]);for(let E=0;E<l.length;E+=8)j.push({x:(l[E]-p)/f,y:1-(l[E+1]-x)/m,width:(l[E+2]-l[E])/f,height:(l[E+1]-l[E+5])/m});A(g=u,oe,qp).call(g),A(v=u,oe,Ur).call(v),u.rotate(u.rotation)}else if(d){b(u,At,!0);const j=d[0],E={x:j[0]-p,y:m-(j[1]-x)},C=new Up(E,[0,0,f,m],1,c(u,Ps)/2,!0,.001);for(let T=0,P=j.length;T<P;T+=2)E.x=j[T]-p,E.y=m-(j[T+1]-x),C.add(E);const{id:k,clipPathId:_}=s.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:u.color,"fill-opacity":u._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:C.toSVGPath()}},!0,!0);A(y=u,oe,tu).call(y,{highlightOutlines:C.getOutlines(),highlightId:k,clipPathId:_}),A(S=u,oe,Ur).call(S),u.rotate(u.parentRotation)}return u}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const s=this.getRect(0,0),n=Re._colorManager.convert(this.color),r={annotationType:ie.HIGHLIGHT,color:n,opacity:c(this,yi),thickness:c(this,Ps),quadPoints:A(this,oe,Bv).call(this),outlines:A(this,oe,zv).call(this,s),pageIndex:this.pageIndex,rect:s,rotation:A(this,oe,xc).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!A(this,oe,Uv).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Nl=new WeakMap,th=new WeakMap,vi=new WeakMap,za=new WeakMap,sh=new WeakMap,Qt=new WeakMap,nh=new WeakMap,ih=new WeakMap,$a=new WeakMap,Ts=new WeakMap,fs=new WeakMap,At=new WeakMap,Sl=new WeakMap,yi=new WeakMap,Pt=new WeakMap,jl=new WeakMap,Ps=new WeakMap,rh=new WeakMap,oe=new WeakSet,qp=function(){const t=new $p(c(this,vi),.001);b(this,Ts,t.getOutlines()),[this.x,this.y,this.width,this.height]=c(this,Ts).box;const s=new $p(c(this,vi),.0025,.001,this._uiManager.direction==="ltr");b(this,Qt,s.getOutlines());const{lastPoint:n}=c(this,Qt);b(this,Sl,[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height])},tu=function({highlightOutlines:t,highlightId:s,clipPathId:n}){var f,m;if(b(this,Ts,t),b(this,Qt,t.getNewOutline(c(this,Ps)/2+1.5,.0025)),s>=0)b(this,fs,s),b(this,za,n),this.parent.drawLayer.finalizeDraw(s,{bbox:t.box,path:{d:t.toSVGPath()}}),b(this,Pt,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:c(this,Qt).box,path:{d:c(this,Qt).toSVGPath()}},!0));else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(c(this,fs),{bbox:A(f=we,Ls,bo).call(f,c(this,Ts).box,(p-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(c(this,Pt),{bbox:A(m=we,Ls,bo).call(m,c(this,Qt).box,p),path:{d:c(this,Qt).toSVGPath()}})}const[a,l,d,h]=t.box;switch(this.rotation){case 0:this.x=a,this.y=l,this.width=d,this.height=h;break;case 90:{const[p,x]=this.parentDimensions;this.x=l,this.y=1-a,this.width=d*x/p,this.height=h*p/x;break}case 180:this.x=1-a,this.y=1-l,this.width=d,this.height=h;break;case 270:{const[p,x]=this.parentDimensions;this.x=1-l,this.y=a,this.width=d*x/p,this.height=h*p/x;break}}const{lastPoint:u}=c(this,Qt);b(this,Sl,[(u[0]-a)/d,(u[1]-l)/h])},Iv=function(t){const s=(a,l)=>{var d,h;this.color=a,b(this,yi,l),(d=this.parent)==null||d.drawLayer.updateProperties(c(this,fs),{root:{fill:a,"fill-opacity":l}}),(h=c(this,sh))==null||h.updateColor(a)},n=this.color,r=c(this,yi);this.addCommands({cmd:s.bind(this,t,we._defaultOpacity),undo:s.bind(this,n,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:me.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},Dv=function(t){const s=c(this,Ps),n=r=>{b(this,Ps,r),A(this,oe,Ov).call(this,r)};this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:me.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},Ov=function(t){if(!c(this,At))return;A(this,oe,tu).call(this,{highlightOutlines:c(this,Ts).getNewOutline(t/2)}),this.fixAndSetPosition();const[s,n]=this.parentDimensions;this.setDims(this.width*s,this.height*n)},Xp=function(){c(this,fs)===null||!this.parent||(this.parent.drawLayer.remove(c(this,fs)),b(this,fs,null),this.parent.drawLayer.remove(c(this,Pt)),b(this,Pt,null))},Ur=function(t=this.parent){c(this,fs)===null&&({id:It(this,fs)._,clipPathId:It(this,za)._}=t.drawLayer.draw({bbox:c(this,Ts).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":c(this,yi)},rootClass:{highlight:!0,free:c(this,At)},path:{d:c(this,Ts).toSVGPath()}},!1,!0),b(this,Pt,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:c(this,At)},bbox:c(this,Qt).box,path:{d:c(this,Qt).toSVGPath()}},c(this,At))),c(this,$a)&&(c(this,$a).style.clipPath=c(this,za)))},Ls=new WeakSet,bo=function([t,s,n,r],a){switch(a){case 90:return[1-s-r,t,r,n];case 180:return[1-t-n,1-s-r,n,r];case 270:return[s,1-t-n,r,n]}return[t,s,n,r]},Fv=function(t){we._keyboardManager.exec(this,t)},su=function(t){if(!c(this,Nl))return;const s=window.getSelection();t?s.setPosition(c(this,Nl),c(this,th)):s.setPosition(c(this,nh),c(this,ih))},xc=function(){return c(this,At)?this.rotation:0},Bv=function(){if(c(this,At))return null;const[t,s]=this.pageDimensions,[n,r]=this.pageTranslation,a=c(this,vi),l=new Float32Array(a.length*8);let d=0;for(const{x:h,y:u,width:f,height:m}of a){const p=h*t+n,x=(1-u)*s+r;l[d]=l[d+4]=p,l[d+1]=l[d+3]=x,l[d+2]=l[d+6]=p+f*t,l[d+5]=l[d+7]=x-m*s,d+=8}return l},zv=function(t){return c(this,Ts).serialize(t,A(this,oe,xc).call(this))},$v=function(t,s){this._freeHighlight.add(s)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},Hv=function(t,s){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(s,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},Uv=function(t){const{color:s}=this._initialData;return t.color.some((n,r)=>n!==s[r])},w(we,Ls),z(we,"_defaultColor",null),z(we,"_defaultOpacity",1),z(we,"_defaultThickness",12),z(we,"_type","highlight"),z(we,"_editorType",ie.HIGHLIGHT),z(we,"_freeHighlightId",-1),z(we,"_freeHighlight",null),z(we,"_freeHighlightClipId","");let Nu=we;var Ha;class Vv{constructor(){w(this,Ha,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,s]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,s)}updateSVGProperty(e,t){c(this,Ha)[e]=t}toSVGProperties(){const e=c(this,Ha);return b(this,Ha,Object.create(null)),{root:e}}reset(){b(this,Ha,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){_e("Not implemented")}}Ha=new WeakMap;var ps,El,ut,Ua,Va,gr,xr,br,Wa,ge,Yp,Kp,Jp,bc,Wv,nu,vc,vo;const X=class X extends Re{constructor(t){super(t);w(this,ge);w(this,ps,null);w(this,El);z(this,"_drawId",null);b(this,El,t.mustBeCommitted||!1),this._addOutlines(t)}_addOutlines(t){t.drawOutlines&&(A(this,ge,Yp).call(this,t),A(this,ge,bc).call(this))}static _mergeSVGProperties(t,s){const n=new Set(Object.keys(t));for(const[r,a]of Object.entries(s))n.has(r)?Object.assign(t[r],a):t[r]=a;return t}static getDefaultDrawingOptions(t){_e("Not implemented")}static get typesMap(){_e("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,s){const n=this.typesMap.get(t);n&&this._defaultDrawingOptions.updateProperty(n,s),this._currentParent&&(c(X,ut).updateProperty(n,s),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,s){const n=this.constructor.typesMap.get(t);n&&this._updateProperty(t,n,s)}static get defaultPropertiesToUpdate(){const t=[],s=this._defaultDrawingOptions;for(const[n,r]of this.typesMap)t.push([n,s[r]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:s}=this;for(const[n,r]of this.constructor.typesMap)t.push([n,s[r]]);return t}_updateProperty(t,s,n){const r=this._drawingOptions,a=r[s],l=d=>{var u;r.updateProperty(s,d);const h=c(this,ps).updateProperty(s,d);h&&A(this,ge,vc).call(this,h),(u=this.parent)==null||u.drawLayer.updateProperties(this._drawId,r.toSVGProperties())};this.addCommands({cmd:l.bind(this,n),undo:l.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,X._mergeSVGProperties(c(this,ps).getPathResizingSVGProperties(A(this,ge,nu).call(this)),{bbox:A(this,ge,vo).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,X._mergeSVGProperties(c(this,ps).getPathResizedSVGProperties(A(this,ge,nu).call(this)),{bbox:A(this,ge,vo).call(this)}))}_onTranslating(t,s){var n;(n=this.parent)==null||n.drawLayer.updateProperties(this._drawId,{bbox:A(this,ge,vo).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,X._mergeSVGProperties(c(this,ps).getPathTranslatedSVGProperties(A(this,ge,nu).call(this),this.parentDimensions),{bbox:A(this,ge,vo).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,c(this,El)&&(b(this,El,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){A(this,ge,Jp).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(A(this,ge,bc).call(this),A(this,ge,vc).call(this,c(this,ps).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var n;let s=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),A(this,ge,Jp).call(this)):t&&(this._uiManager.addShouldRescale(this),A(this,ge,bc).call(this,t),s=!this.parent&&((n=this.div)==null?void 0:n.classList.contains("selectedEditor"))),super.setParent(t),s&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,X._mergeSVGProperties({bbox:A(this,ge,vo).call(this)},c(this,ps).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&A(this,ge,vc).call(this,c(this,ps).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,s;this._isCopy&&(t=this.x,s=this.y);const n=super.render();n.classList.add("draw");const r=document.createElement("div");n.append(r),r.setAttribute("aria-hidden","true"),r.className="internal";const[a,l]=this.parentDimensions;return this.setDims(this.width*a,this.height*l),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,s),n}static createDrawerInstance(t,s,n,r,a){_e("Not implemented")}static startDrawing(t,s,n,r){var v;const{target:a,offsetX:l,offsetY:d,pointerId:h,pointerType:u}=r;if(c(X,xr)&&c(X,xr)!==u)return;const{viewport:{rotation:f}}=t,{width:m,height:p}=a.getBoundingClientRect(),x=b(X,Ua,new AbortController),g=t.combinedSignal(x);if(c(X,gr)||b(X,gr,h),c(X,xr)??b(X,xr,u),window.addEventListener("pointerup",y=>{var S;c(X,gr)===y.pointerId?this._endDraw(y):(S=c(X,br))==null||S.delete(y.pointerId)},{signal:g}),window.addEventListener("pointercancel",y=>{var S;c(X,gr)===y.pointerId?this._currentParent.endDrawingSession():(S=c(X,br))==null||S.delete(y.pointerId)},{signal:g}),window.addEventListener("pointerdown",y=>{c(X,xr)===y.pointerType&&((c(X,br)||b(X,br,new Set)).add(y.pointerId),c(X,ut).isCancellable()&&(c(X,ut).removeLastElement(),c(X,ut).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",Ds,{signal:g}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:g}),a.addEventListener("touchmove",y=>{y.timeStamp===c(X,Wa)&&Ye(y)},{signal:g}),t.toggleDrawing(),(v=s._editorUndoBar)==null||v.hide(),c(X,ut)){t.drawLayer.updateProperties(this._currentDrawId,c(X,ut).startNew(l,d,m,p,f));return}s.updateUIForDefaultProperties(this),b(X,ut,this.createDrawerInstance(l,d,m,p,f)),b(X,Va,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(c(X,Va).toSVGProperties(),c(X,ut).defaultSVGProperties),!0,!1)}static _drawMove(t){var a;if(b(X,Wa,-1),!c(X,ut))return;const{offsetX:s,offsetY:n,pointerId:r}=t;if(c(X,gr)===r){if(((a=c(X,br))==null?void 0:a.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,c(X,ut).add(s,n)),b(X,Wa,t.timeStamp),Ye(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,b(X,ut,null),b(X,Va,null),b(X,xr,null),b(X,Wa,NaN)),c(X,Ua)&&(c(X,Ua).abort(),b(X,Ua,null),b(X,gr,NaN),b(X,br,null))}static _endDraw(t){const s=this._currentParent;if(s){if(s.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===s.div&&s.drawLayer.updateProperties(this._currentDrawId,c(X,ut).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const n=c(X,ut),r=this._currentDrawId,a=n.getLastElement();s.addCommands({cmd:()=>{s.drawLayer.updateProperties(r,n.setLastElement(a))},undo:()=>{s.drawLayer.updateProperties(r,n.removeLastElement())},mustExec:!1,type:me.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const s=this._currentParent;if(!s)return null;if(s.toggleDrawing(!0),s.cleanUndoStack(me.DRAW_STEP),!c(X,ut).isEmpty()){const{pageDimensions:[n,r],scale:a}=s,l=s.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:c(X,ut).getOutlines(n*a,r*a,a,this._INNER_MARGIN),drawingOptions:c(X,Va),mustBeCommitted:!t});return this._cleanup(!0),l}return s.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,s,n,r,a,l){_e("Not implemented")}static async deserialize(t,s,n){var f,m;const{rawDims:{pageWidth:r,pageHeight:a,pageX:l,pageY:d}}=s.viewport,h=this.deserializeDraw(l,d,r,a,this._INNER_MARGIN,t),u=await super.deserialize(t,s,n);return u.createDrawingOptions(t),A(f=u,ge,Yp).call(f,{drawOutlines:h}),A(m=u,ge,bc).call(m),u.onScaleChanging(),u.rotate(),u}serializeDraw(t){const[s,n]=this.pageTranslation,[r,a]=this.pageDimensions;return c(this,ps).serialize([s,n,r,a],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};ps=new WeakMap,El=new WeakMap,ut=new WeakMap,Ua=new WeakMap,Va=new WeakMap,gr=new WeakMap,xr=new WeakMap,br=new WeakMap,Wa=new WeakMap,ge=new WeakSet,Yp=function({drawOutlines:t,drawId:s,drawingOptions:n}){b(this,ps,t),this._drawingOptions||(this._drawingOptions=n),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),s>=0?(this._drawId=s,this.parent.drawLayer.finalizeDraw(s,t.defaultProperties)):this._drawId=A(this,ge,Kp).call(this,t,this.parent),A(this,ge,vc).call(this,t.box)},Kp=function(t,s){const{id:n}=s.drawLayer.draw(X._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return n},Jp=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},bc=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=A(this,ge,Kp).call(this,c(this,ps),t)}},Wv=function([t,s,n,r]){const{parentDimensions:[a,l],rotation:d}=this;switch(d){case 90:return[s,1-t,n*(l/a),r*(a/l)];case 180:return[1-t,1-s,n,r];case 270:return[1-s,t,n*(l/a),r*(a/l)];default:return[t,s,n,r]}},nu=function(){const{x:t,y:s,width:n,height:r,parentDimensions:[a,l],rotation:d}=this;switch(d){case 90:return[1-s,t,n*(a/l),r*(l/a)];case 180:return[1-t,1-s,n,r];case 270:return[s,1-t,n*(a/l),r*(l/a)];default:return[t,s,n,r]}},vc=function(t){if([this.x,this.y,this.width,this.height]=A(this,ge,Wv).call(this,t),this.div){this.fixAndSetPosition();const[s,n]=this.parentDimensions;this.setDims(this.width*s,this.height*n)}this._onResized()},vo=function(){const{x:t,y:s,width:n,height:r,rotation:a,parentRotation:l,parentDimensions:[d,h]}=this;switch((a*4+l)/90){case 1:return[1-s-r,t,r,n];case 2:return[1-t-n,1-s-r,n,r];case 3:return[s,1-t-n,r,n];case 4:return[t,s-n*(d/h),r*(h/d),n*(d/h)];case 5:return[1-s,t,n*(d/h),r*(h/d)];case 6:return[1-t-r*(h/d),1-s,r*(h/d),n*(d/h)];case 7:return[s-n*(d/h),1-t-r*(h/d),n*(d/h),r*(h/d)];case 8:return[t-n,s-r,n,r];case 9:return[1-s,t-n,r,n];case 10:return[1-t,1-s,n,r];case 11:return[s-r,1-t,r,n];case 12:return[t-r*(h/d),s,r*(h/d),n*(d/h)];case 13:return[1-s-n*(d/h),t-r*(h/d),n*(d/h),r*(h/d)];case 14:return[1-t,1-s-n*(d/h),r*(h/d),n*(d/h)];case 15:return[s,1-t,n*(d/h),r*(h/d)];default:return[t,s,n,r]}},z(X,"_currentDrawId",-1),z(X,"_currentParent",null),w(X,ut,null),w(X,Ua,null),w(X,Va,null),w(X,gr,NaN),w(X,xr,null),w(X,br,null),w(X,Wa,NaN),z(X,"_INNER_MARGIN",3);let Su=X;var Cn,ft,pt,Ga,Cl,Ft,Nt,Rs,qa,Xa,Ya,_l,iu;class YE{constructor(e,t,s,n,r,a){w(this,_l);w(this,Cn,new Float64Array(6));w(this,ft);w(this,pt);w(this,Ga);w(this,Cl);w(this,Ft);w(this,Nt,"");w(this,Rs,0);w(this,qa,new xh);w(this,Xa);w(this,Ya);b(this,Xa,s),b(this,Ya,n),b(this,Ga,r),b(this,Cl,a),[e,t]=A(this,_l,iu).call(this,e,t);const l=b(this,ft,[NaN,NaN,NaN,NaN,e,t]);b(this,Ft,[e,t]),b(this,pt,[{line:l,points:c(this,Ft)}]),c(this,Cn).set(l,0)}updateProperty(e,t){e==="stroke-width"&&b(this,Cl,t)}isEmpty(){return!c(this,pt)||c(this,pt).length===0}isCancellable(){return c(this,Ft).length<=10}add(e,t){[e,t]=A(this,_l,iu).call(this,e,t);const[s,n,r,a]=c(this,Cn).subarray(2,6),l=e-r,d=t-a;return Math.hypot(c(this,Xa)*l,c(this,Ya)*d)<=2?null:(c(this,Ft).push(e,t),isNaN(s)?(c(this,Cn).set([r,a,e,t],2),c(this,ft).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(c(this,Cn)[0])&&c(this,ft).splice(6,6),c(this,Cn).set([s,n,r,a,e,t],0),c(this,ft).push(...G.createBezierPoints(s,n,r,a,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const s=this.add(e,t);return s||(c(this,Ft).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,s,n,r){b(this,Xa,s),b(this,Ya,n),b(this,Ga,r),[e,t]=A(this,_l,iu).call(this,e,t);const a=b(this,ft,[NaN,NaN,NaN,NaN,e,t]);b(this,Ft,[e,t]);const l=c(this,pt).at(-1);return l&&(l.line=new Float32Array(l.line),l.points=new Float32Array(l.points)),c(this,pt).push({line:a,points:c(this,Ft)}),c(this,Cn).set(a,0),b(this,Rs,0),this.toSVGPath(),null}getLastElement(){return c(this,pt).at(-1)}setLastElement(e){return c(this,pt)?(c(this,pt).push(e),b(this,ft,e.line),b(this,Ft,e.points),b(this,Rs,0),{path:{d:this.toSVGPath()}}):c(this,qa).setLastElement(e)}removeLastElement(){if(!c(this,pt))return c(this,qa).removeLastElement();c(this,pt).pop(),b(this,Nt,"");for(let e=0,t=c(this,pt).length;e<t;e++){const{line:s,points:n}=c(this,pt)[e];b(this,ft,s),b(this,Ft,n),b(this,Rs,0),this.toSVGPath()}return{path:{d:c(this,Nt)}}}toSVGPath(){const e=G.svgRound(c(this,ft)[4]),t=G.svgRound(c(this,ft)[5]);if(c(this,Ft).length===2)return b(this,Nt,`${c(this,Nt)} M ${e} ${t} Z`),c(this,Nt);if(c(this,Ft).length<=6){const n=c(this,Nt).lastIndexOf("M");b(this,Nt,`${c(this,Nt).slice(0,n)} M ${e} ${t}`),b(this,Rs,6)}if(c(this,Ft).length===4){const n=G.svgRound(c(this,ft)[10]),r=G.svgRound(c(this,ft)[11]);return b(this,Nt,`${c(this,Nt)} L ${n} ${r}`),b(this,Rs,12),c(this,Nt)}const s=[];c(this,Rs)===0&&(s.push(`M ${e} ${t}`),b(this,Rs,6));for(let n=c(this,Rs),r=c(this,ft).length;n<r;n+=6){const[a,l,d,h,u,f]=c(this,ft).slice(n,n+6).map(G.svgRound);s.push(`C${a} ${l} ${d} ${h} ${u} ${f}`)}return b(this,Nt,c(this,Nt)+s.join(" ")),b(this,Rs,c(this,ft).length),c(this,Nt)}getOutlines(e,t,s,n){const r=c(this,pt).at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),c(this,qa).build(c(this,pt),e,t,s,c(this,Ga),c(this,Cl),n),b(this,Cn,null),b(this,ft,null),b(this,pt,null),b(this,Nt,null),c(this,qa)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Cn=new WeakMap,ft=new WeakMap,pt=new WeakMap,Ga=new WeakMap,Cl=new WeakMap,Ft=new WeakMap,Nt=new WeakMap,Rs=new WeakMap,qa=new WeakMap,Xa=new WeakMap,Ya=new WeakMap,_l=new WeakSet,iu=function(e,t){return G._normalizePoint(e,t,c(this,Xa),c(this,Ya),c(this,Ga))};var Bt,ah,oh,ms,_n,kn,kl,Tl,Ka,jt,qn,Gv,qv,Xv;class xh extends G{constructor(){super(...arguments);w(this,jt);w(this,Bt);w(this,ah,0);w(this,oh);w(this,ms);w(this,_n);w(this,kn);w(this,kl);w(this,Tl);w(this,Ka)}build(t,s,n,r,a,l,d){b(this,_n,s),b(this,kn,n),b(this,kl,r),b(this,Tl,a),b(this,Ka,l),b(this,oh,d??0),b(this,ms,t),A(this,jt,qv).call(this)}get thickness(){return c(this,Ka)}setLastElement(t){return c(this,ms).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return c(this,ms).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:s}of c(this,ms)){if(t.push(`M${G.svgRound(s[4])} ${G.svgRound(s[5])}`),s.length===6){t.push("Z");continue}if(s.length===12&&isNaN(s[6])){t.push(`L${G.svgRound(s[10])} ${G.svgRound(s[11])}`);continue}for(let n=6,r=s.length;n<r;n+=6){const[a,l,d,h,u,f]=s.subarray(n,n+6).map(G.svgRound);t.push(`C${a} ${l} ${d} ${h} ${u} ${f}`)}}return t.join("")}serialize([t,s,n,r],a){const l=[],d=[],[h,u,f,m]=A(this,jt,Gv).call(this);let p,x,g,v,y,S,j,E,C;switch(c(this,Tl)){case 0:C=G._rescale,p=t,x=s+r,g=n,v=-r,y=t+h*n,S=s+(1-u-m)*r,j=t+(h+f)*n,E=s+(1-u)*r;break;case 90:C=G._rescaleAndSwap,p=t,x=s,g=n,v=r,y=t+u*n,S=s+h*r,j=t+(u+m)*n,E=s+(h+f)*r;break;case 180:C=G._rescale,p=t+n,x=s,g=-n,v=r,y=t+(1-h-f)*n,S=s+u*r,j=t+(1-h)*n,E=s+(u+m)*r;break;case 270:C=G._rescaleAndSwap,p=t+n,x=s+r,g=-n,v=-r,y=t+(1-u-m)*n,S=s+(1-h-f)*r,j=t+(1-u)*n,E=s+(1-h)*r;break}for(const{line:k,points:_}of c(this,ms))l.push(C(k,p,x,g,v,a?new Array(k.length):null)),d.push(C(_,p,x,g,v,a?new Array(_.length):null));return{lines:l,points:d,rect:[y,S,j,E]}}static deserialize(t,s,n,r,a,{paths:{lines:l,points:d},rotation:h,thickness:u}){const f=[];let m,p,x,g,v;switch(h){case 0:v=G._rescale,m=-t/n,p=s/r+1,x=1/n,g=-1/r;break;case 90:v=G._rescaleAndSwap,m=-s/r,p=-t/n,x=1/r,g=1/n;break;case 180:v=G._rescale,m=t/n+1,p=-s/r,x=-1/n,g=1/r;break;case 270:v=G._rescaleAndSwap,m=s/r+1,p=t/n+1,x=-1/r,g=-1/n;break}if(!l){l=[];for(const S of d){const j=S.length;if(j===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,S[0],S[1]]));continue}if(j===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,S[0],S[1],NaN,NaN,NaN,NaN,S[2],S[3]]));continue}const E=new Float32Array(3*(j-2));l.push(E);let[C,k,_,T]=S.subarray(0,4);E.set([NaN,NaN,NaN,NaN,C,k],0);for(let P=4;P<j;P+=2){const R=S[P],M=S[P+1];E.set(G.createBezierPoints(C,k,_,T,R,M),(P-2)*3),[C,k,_,T]=[_,T,R,M]}}}for(let S=0,j=l.length;S<j;S++)f.push({line:v(l[S].map(E=>E??NaN),m,p,x,g),points:v(d[S].map(E=>E??NaN),m,p,x,g)});const y=new this.prototype.constructor;return y.build(f,n,r,1,h,u,a),y}get box(){return c(this,Bt)}updateProperty(t,s){return t==="stroke-width"?A(this,jt,Xv).call(this,s):null}updateParentDimensions([t,s],n){const[r,a]=A(this,jt,qn).call(this);b(this,_n,t),b(this,kn,s),b(this,kl,n);const[l,d]=A(this,jt,qn).call(this),h=l-r,u=d-a,f=c(this,Bt);return f[0]-=h,f[1]-=u,f[2]+=2*h,f[3]+=2*u,f}updateRotation(t){return b(this,ah,t),{path:{transform:this.rotationTransform}}}get viewBox(){return c(this,Bt).map(G.svgRound).join(" ")}get defaultProperties(){const[t,s]=c(this,Bt);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${G.svgRound(t)} ${G.svgRound(s)}`}}}get rotationTransform(){const[,,t,s]=c(this,Bt);let n=0,r=0,a=0,l=0,d=0,h=0;switch(c(this,ah)){case 90:r=s/t,a=-t/s,d=t;break;case 180:n=-1,l=-1,d=t,h=s;break;case 270:r=-s/t,a=t/s,h=s;break;default:return""}return`matrix(${n} ${r} ${a} ${l} ${G.svgRound(d)} ${G.svgRound(h)})`}getPathResizingSVGProperties([t,s,n,r]){const[a,l]=A(this,jt,qn).call(this),[d,h,u,f]=c(this,Bt);if(Math.abs(u-a)<=G.PRECISION||Math.abs(f-l)<=G.PRECISION){const v=t+n/2-(d+u/2),y=s+r/2-(h+f/2);return{path:{"transform-origin":`${G.svgRound(t)} ${G.svgRound(s)}`,transform:`${this.rotationTransform} translate(${v} ${y})`}}}const m=(n-2*a)/(u-2*a),p=(r-2*l)/(f-2*l),x=u/n,g=f/r;return{path:{"transform-origin":`${G.svgRound(d)} ${G.svgRound(h)}`,transform:`${this.rotationTransform} scale(${x} ${g}) translate(${G.svgRound(a)} ${G.svgRound(l)}) scale(${m} ${p}) translate(${G.svgRound(-a)} ${G.svgRound(-l)})`}}}getPathResizedSVGProperties([t,s,n,r]){const[a,l]=A(this,jt,qn).call(this),d=c(this,Bt),[h,u,f,m]=d;if(d[0]=t,d[1]=s,d[2]=n,d[3]=r,Math.abs(f-a)<=G.PRECISION||Math.abs(m-l)<=G.PRECISION){const y=t+n/2-(h+f/2),S=s+r/2-(u+m/2);for(const{line:j,points:E}of c(this,ms))G._translate(j,y,S,j),G._translate(E,y,S,E);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${G.svgRound(t)} ${G.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const p=(n-2*a)/(f-2*a),x=(r-2*l)/(m-2*l),g=-p*(h+a)+t+a,v=-x*(u+l)+s+l;if(p!==1||x!==1||g!==0||v!==0)for(const{line:y,points:S}of c(this,ms))G._rescale(y,g,v,p,x,y),G._rescale(S,g,v,p,x,S);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${G.svgRound(t)} ${G.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,s],n){const[r,a]=n,l=c(this,Bt),d=t-l[0],h=s-l[1];if(c(this,_n)===r&&c(this,kn)===a)for(const{line:u,points:f}of c(this,ms))G._translate(u,d,h,u),G._translate(f,d,h,f);else{const u=c(this,_n)/r,f=c(this,kn)/a;b(this,_n,r),b(this,kn,a);for(const{line:m,points:p}of c(this,ms))G._rescale(m,d,h,u,f,m),G._rescale(p,d,h,u,f,p);l[2]*=u,l[3]*=f}return l[0]=t,l[1]=s,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${G.svgRound(t)} ${G.svgRound(s)}`}}}get defaultSVGProperties(){const t=c(this,Bt);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${G.svgRound(t[0])} ${G.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}Bt=new WeakMap,ah=new WeakMap,oh=new WeakMap,ms=new WeakMap,_n=new WeakMap,kn=new WeakMap,kl=new WeakMap,Tl=new WeakMap,Ka=new WeakMap,jt=new WeakSet,qn=function(t=c(this,Ka)){const s=c(this,oh)+t/2*c(this,kl);return c(this,Tl)%180===0?[s/c(this,_n),s/c(this,kn)]:[s/c(this,kn),s/c(this,_n)]},Gv=function(){const[t,s,n,r]=c(this,Bt),[a,l]=A(this,jt,qn).call(this,0);return[t+a,s+l,n-2*a,r-2*l]},qv=function(){const t=b(this,Bt,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:r}of c(this,ms)){if(r.length<=12){for(let d=4,h=r.length;d<h;d+=6)Z.pointBoundingBox(r[d],r[d+1],t);continue}let a=r[4],l=r[5];for(let d=6,h=r.length;d<h;d+=6){const[u,f,m,p,x,g]=r.subarray(d,d+6);Z.bezierBoundingBox(a,l,u,f,m,p,x,g,t),a=x,l=g}}const[s,n]=A(this,jt,qn).call(this);t[0]=Rt(t[0]-s,0,1),t[1]=Rt(t[1]-n,0,1),t[2]=Rt(t[2]+s,0,1),t[3]=Rt(t[3]+n,0,1),t[2]-=t[0],t[3]-=t[1]},Xv=function(t){const[s,n]=A(this,jt,qn).call(this);b(this,Ka,t);const[r,a]=A(this,jt,qn).call(this),[l,d]=[r-s,a-n],h=c(this,Bt);return h[0]-=l,h[1]-=d,h[2]+=2*l,h[3]+=2*d,h};class hf extends Vv{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:Re._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new hf(this._viewParameters);return e.updateAll(this),e}}var Gu,Yv;const So=class So extends Su{constructor(t){super({...t,name:"inkEditor"});w(this,Gu);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,s){Re.initialize(t,s),this._defaultDrawingOptions=new hf(s.viewParameters)}static getDefaultDrawingOptions(t){const s=this._defaultDrawingOptions.clone();return s.updateProperties(t),s}static get supportMultipleDrawings(){return!0}static get typesMap(){return pe(this,"typesMap",new Map([[me.INK_THICKNESS,"stroke-width"],[me.INK_COLOR,"stroke"],[me.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,s,n,r,a){return new YE(t,s,n,r,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,s,n,r,a,l){return xh.deserialize(t,s,n,r,a,l)}static async deserialize(t,s,n){let r=null;if(t instanceof qm){const{data:{inkLists:l,rect:d,rotation:h,id:u,color:f,opacity:m,borderStyle:{rawWidth:p},popupRef:x},parent:{page:{pageNumber:g}}}=t;r=t={annotationType:ie.INK,color:Array.from(f),thickness:p,opacity:m,paths:{points:l},boxes:null,pageIndex:g-1,rect:d.slice(0),rotation:h,annotationElementId:u,id:u,deleted:!1,popupRef:x}}const a=await super.deserialize(t,s,n);return a._initialData=r,a}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:s,parent:n}=this;s.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(t,s.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:s,opacity:n}){this._drawingOptions=So.getDefaultDrawingOptions({stroke:Z.makeHexColor(...t),"stroke-width":s,"stroke-opacity":n})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:s,points:n,rect:r}=this.serializeDraw(t),{_drawingOptions:{stroke:a,"stroke-opacity":l,"stroke-width":d}}=this,h={annotationType:ie.INK,color:Re._colorManager.convert(a),opacity:l,thickness:d,paths:{lines:s,points:n},pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(h.isCopy=!0,h):this.annotationElementId&&!A(this,Gu,Yv).call(this,h)?null:(h.id=this.annotationElementId,h)}renderAnnotationElement(t){const{points:s,rect:n}=this.serializeDraw(!1);return t.updateEdited({rect:n,thickness:this._drawingOptions["stroke-width"],points:s}),null}};Gu=new WeakSet,Yv=function(t){const{color:s,thickness:n,opacity:r,pageIndex:a}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||t.color.some((l,d)=>l!==s[d])||t.thickness!==n||t.opacity!==r||t.pageIndex!==a},z(So,"_type","ink"),z(So,"_editorType",ie.INK),z(So,"_defaultDrawingOptions",null);let Zp=So;class Qp extends xh{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const Ph=8,tc=3;var Ja,Ae,em,en,Kv,Jv,tm,ru,Zv,Qv,ey,sm,nm,ty;class Ln{static extractContoursFromText(e,{fontFamily:t,fontStyle:s,fontWeight:n},r,a,l,d){let h=new OffscreenCanvas(1,1),u=h.getContext("2d",{alpha:!1});const f=200,m=u.font=`${s} ${n} ${f}px ${t}`,{actualBoundingBoxLeft:p,actualBoundingBoxRight:x,actualBoundingBoxAscent:g,actualBoundingBoxDescent:v,fontBoundingBoxAscent:y,fontBoundingBoxDescent:S,width:j}=u.measureText(e),E=1.5,C=Math.ceil(Math.max(Math.abs(p)+Math.abs(x)||0,j)*E),k=Math.ceil(Math.max(Math.abs(g)+Math.abs(v)||f,Math.abs(y)+Math.abs(S)||f)*E);h=new OffscreenCanvas(C,k),u=h.getContext("2d",{alpha:!0,willReadFrequently:!0}),u.font=m,u.filter="grayscale(1)",u.fillStyle="white",u.fillRect(0,0,C,k),u.fillStyle="black",u.fillText(e,C*(E-1)/2,k*(3-E)/2);const _=A(this,Ae,sm).call(this,u.getImageData(0,0,C,k).data),T=A(this,Ae,ey).call(this,_),P=A(this,Ae,nm).call(this,T),R=A(this,Ae,tm).call(this,_,C,k,P);return this.processDrawnLines({lines:{curves:R,width:C,height:k},pageWidth:r,pageHeight:a,rotation:l,innerMargin:d,mustSmooth:!0,areContours:!0})}static process(e,t,s,n,r){const[a,l,d]=A(this,Ae,ty).call(this,e),[h,u]=A(this,Ae,Qv).call(this,a,l,d,Math.hypot(l,d)*c(this,Ja).sigmaSFactor,c(this,Ja).sigmaR,c(this,Ja).kernelSize),f=A(this,Ae,nm).call(this,u),m=A(this,Ae,tm).call(this,h,l,d,f);return this.processDrawnLines({lines:{curves:m,width:l,height:d},pageWidth:t,pageHeight:s,rotation:n,innerMargin:r,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:s,rotation:n,innerMargin:r,mustSmooth:a,areContours:l}){n%180!==0&&([t,s]=[s,t]);const{curves:d,width:h,height:u}=e,f=e.thickness??0,m=[],p=Math.min(t/h,s/u),x=p/t,g=p/s,v=[];for(const{points:S}of d){const j=a?A(this,Ae,Zv).call(this,S):S;if(!j)continue;v.push(j);const E=j.length,C=new Float32Array(E),k=new Float32Array(3*(E===2?2:E-2));if(m.push({line:k,points:C}),E===2){C[0]=j[0]*x,C[1]=j[1]*g,k.set([NaN,NaN,NaN,NaN,C[0],C[1]],0);continue}let[_,T,P,R]=j;_*=x,T*=g,P*=x,R*=g,C.set([_,T,P,R],0),k.set([NaN,NaN,NaN,NaN,_,T],0);for(let M=4;M<E;M+=2){const F=C[M]=j[M]*x,$=C[M+1]=j[M+1]*g;k.set(G.createBezierPoints(_,T,P,R,F,$),(M-2)*3),[_,T,P,R]=[P,R,F,$]}}if(m.length===0)return null;const y=l?new Qp:new xh;return y.build(m,t,s,1,n,l?0:f,r),{outline:y,newCurves:v,areContours:l,thickness:f,width:h,height:u}}static async compressSignature({outlines:e,areContours:t,thickness:s,width:n,height:r}){let a=1/0,l=-1/0,d=0;for(const j of e){d+=j.length;for(let E=2,C=j.length;E<C;E++){const k=j[E]-j[E-2];a=Math.min(a,k),l=Math.max(l,k)}}let h;a>=-128&&l<=127?h=Int8Array:a>=-32768&&l<=32767?h=Int16Array:h=Int32Array;const u=e.length,f=Ph+tc*u,m=new Uint32Array(f);let p=0;m[p++]=f*Uint32Array.BYTES_PER_ELEMENT+(d-2*u)*h.BYTES_PER_ELEMENT,m[p++]=0,m[p++]=n,m[p++]=r,m[p++]=t?0:1,m[p++]=Math.max(0,Math.floor(s??0)),m[p++]=u,m[p++]=h.BYTES_PER_ELEMENT;for(const j of e)m[p++]=j.length-2,m[p++]=j[0],m[p++]=j[1];const x=new CompressionStream("deflate-raw"),g=x.writable.getWriter();await g.ready,g.write(m);const v=h.prototype.constructor;for(const j of e){const E=new v(j.length-2);for(let C=2,k=j.length;C<k;C++)E[C-2]=j[C]-j[C-2];g.write(E)}g.close();const y=await new Response(x.readable).arrayBuffer(),S=new Uint8Array(y);return Qb(S)}static async decompressSignature(e){try{const t=jj(e),{readable:s,writable:n}=new DecompressionStream("deflate-raw"),r=n.getWriter();await r.ready,r.write(t).then(async()=>{await r.ready,await r.close()}).catch(()=>{});let a=null,l=0;for await(const j of s)a||(a=new Uint8Array(new Uint32Array(j.buffer,0,4)[0])),a.set(j,l),l+=j.length;const d=new Uint32Array(a.buffer,0,a.length>>2),h=d[1];if(h!==0)throw new Error(`Invalid version: ${h}`);const u=d[2],f=d[3],m=d[4]===0,p=d[5],x=d[6],g=d[7],v=[],y=(Ph+tc*x)*Uint32Array.BYTES_PER_ELEMENT;let S;switch(g){case Int8Array.BYTES_PER_ELEMENT:S=new Int8Array(a.buffer,y);break;case Int16Array.BYTES_PER_ELEMENT:S=new Int16Array(a.buffer,y);break;case Int32Array.BYTES_PER_ELEMENT:S=new Int32Array(a.buffer,y);break}l=0;for(let j=0;j<x;j++){const E=d[tc*j+Ph],C=new Float32Array(E+2);v.push(C);for(let k=0;k<tc-1;k++)C[k]=d[tc*j+Ph+k+1];for(let k=0;k<E;k++)C[k+2]=C[k]+S[l++]}return{areContours:m,thickness:p,outlines:v,width:u,height:f}}catch(t){return re(`decompressSignature: ${t}`),null}}}Ja=new WeakMap,Ae=new WeakSet,em=function(e,t,s,n){return s-=e,n-=t,s===0?n>0?0:4:s===1?n+6:2-n},en=new WeakMap,Kv=function(e,t,s,n,r,a,l){const d=A(this,Ae,em).call(this,s,n,r,a);for(let h=0;h<8;h++){const u=(-h+d-l+16)%8,f=c(this,en)[2*u],m=c(this,en)[2*u+1];if(e[(s+f)*t+(n+m)]!==0)return u}return-1},Jv=function(e,t,s,n,r,a,l){const d=A(this,Ae,em).call(this,s,n,r,a);for(let h=0;h<8;h++){const u=(h+d+l+16)%8,f=c(this,en)[2*u],m=c(this,en)[2*u+1];if(e[(s+f)*t+(n+m)]!==0)return u}return-1},tm=function(e,t,s,n){const r=e.length,a=new Int32Array(r);for(let u=0;u<r;u++)a[u]=e[u]<=n?1:0;for(let u=1;u<s-1;u++)a[u*t]=a[u*t+t-1]=0;for(let u=0;u<t;u++)a[u]=a[t*s-1-u]=0;let l=1,d;const h=[];for(let u=1;u<s-1;u++){d=1;for(let f=1;f<t-1;f++){const m=u*t+f,p=a[m];if(p===0)continue;let x=u,g=f;if(p===1&&a[m-1]===0)l+=1,g-=1;else if(p>=1&&a[m+1]===0)l+=1,g+=1,p>1&&(d=p);else{p!==1&&(d=Math.abs(p));continue}const v=[f,u],y=g===f+1,S={isHole:y,points:v,id:l,parent:0};h.push(S);let j;for(const M of h)if(M.id===d){j=M;break}j?j.isHole?S.parent=y?j.parent:d:S.parent=y?d:j.parent:S.parent=y?d:0;const E=A(this,Ae,Kv).call(this,a,t,u,f,x,g,0);if(E===-1){a[m]=-l,a[m]!==1&&(d=Math.abs(a[m]));continue}let C=c(this,en)[2*E],k=c(this,en)[2*E+1];const _=u+C,T=f+k;x=_,g=T;let P=u,R=f;for(;;){const M=A(this,Ae,Jv).call(this,a,t,P,R,x,g,1);C=c(this,en)[2*M],k=c(this,en)[2*M+1];const F=P+C,$=R+k;v.push($,F);const B=P*t+R;if(a[B+1]===0?a[B]=-l:a[B]===1&&(a[B]=l),F===u&&$===f&&P===_&&R===T){a[m]!==1&&(d=Math.abs(a[m]));break}else x=P,g=R,P=F,R=$}}}return h},ru=function(e,t,s,n){if(s-t<=4){for(let _=t;_<s-2;_+=2)n.push(e[_],e[_+1]);return}const r=e[t],a=e[t+1],l=e[s-4]-r,d=e[s-3]-a,h=Math.hypot(l,d),u=l/h,f=d/h,m=u*a-f*r,p=d/l,x=1/h,g=Math.atan(p),v=Math.cos(g),y=Math.sin(g),S=x*(Math.abs(v)+Math.abs(y)),j=x*(1-S+S**2),E=Math.max(Math.atan(Math.abs(y+v)*j),Math.atan(Math.abs(y-v)*j));let C=0,k=t;for(let _=t+2;_<s-2;_+=2){const T=Math.abs(m-u*e[_+1]+f*e[_]);T>C&&(k=_,C=T)}C>(h*E)**2?(A(this,Ae,ru).call(this,e,t,k+2,n),A(this,Ae,ru).call(this,e,k,s,n)):n.push(r,a)},Zv=function(e){const t=[],s=e.length;return A(this,Ae,ru).call(this,e,0,s,t),t.push(e[s-2],e[s-1]),t.length<=4?null:t},Qv=function(e,t,s,n,r,a){const l=new Float32Array(a**2),d=-2*n**2,h=a>>1;for(let g=0;g<a;g++){const v=(g-h)**2;for(let y=0;y<a;y++)l[g*a+y]=Math.exp((v+(y-h)**2)/d)}const u=new Float32Array(256),f=-2*r**2;for(let g=0;g<256;g++)u[g]=Math.exp(g**2/f);const m=e.length,p=new Uint8Array(m),x=new Uint32Array(256);for(let g=0;g<s;g++)for(let v=0;v<t;v++){const y=g*t+v,S=e[y];let j=0,E=0;for(let k=0;k<a;k++){const _=g+k-h;if(!(_<0||_>=s))for(let T=0;T<a;T++){const P=v+T-h;if(P<0||P>=t)continue;const R=e[_*t+P],M=l[k*a+T]*u[Math.abs(R-S)];j+=R*M,E+=M}}const C=p[y]=Math.round(j/E);x[C]++}return[p,x]},ey=function(e){const t=new Uint32Array(256);for(const s of e)t[s]++;return t},sm=function(e){const t=e.length,s=new Uint8ClampedArray(t>>2);let n=-1/0,r=1/0;for(let l=0,d=s.length;l<d;l++){if(e[(l<<2)+3]===0){n=s[l]=255;continue}const u=s[l]=e[l<<2];u>n&&(n=u),u<r&&(r=u)}const a=255/(n-r);for(let l=0;l<t;l++)s[l]=(s[l]-r)*a;return s},nm=function(e){let t,s=-1/0,n=-1/0;const r=e.findIndex(d=>d!==0);let a=r,l=r;for(t=r;t<256;t++){const d=e[t];d>s&&(t-a>n&&(n=t-a,l=t-1),s=d,a=t)}for(t=l-1;t>=0&&!(e[t]>e[t+1]);t--);return t},ty=function(e){const t=e,{width:s,height:n}=e,{maxDim:r}=c(this,Ja);let a=s,l=n;if(s>r||n>r){let m=s,p=n,x=Math.log2(Math.max(s,n)/r);const g=Math.floor(x);x=x===g?g-1:g;for(let y=0;y<x;y++){a=Math.ceil(m/2),l=Math.ceil(p/2);const S=new OffscreenCanvas(a,l);S.getContext("2d").drawImage(e,0,0,m,p,0,0,a,l),m=a,p=l,e!==t&&e.close(),e=S.transferToImageBitmap()}const v=Math.min(r/a,r/l);a=Math.round(a*v),l=Math.round(l*v)}const h=new OffscreenCanvas(a,l).getContext("2d",{willReadFrequently:!0});h.filter="grayscale(1)",h.drawImage(e,0,0,e.width,e.height,0,0,a,l);const u=h.getImageData(0,0,a,l).data;return[A(this,Ae,sm).call(this,u),a,l]},w(Ln,Ae),w(Ln,Ja,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),w(Ln,en,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class Ym extends Vv{constructor(){super(),super.updateProperties({fill:Re._defaultLineColor,"stroke-width":0})}clone(){const e=new Ym;return e.updateAll(this),e}}class Km extends hf{constructor(e){super(e),super.updateProperties({stroke:Re._defaultLineColor,"stroke-width":1})}clone(){const e=new Km(this._viewParameters);return e.updateAll(this),e}}var vr,Tn,yr,Za;const ss=class ss extends Su{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});w(this,vr,!1);w(this,Tn,null);w(this,yr,null);w(this,Za,null);this._willKeepAspectRatio=!0,b(this,yr,t.signatureData||null),b(this,Tn,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,s){Re.initialize(t,s),this._defaultDrawingOptions=new Ym,this._defaultDrawnSignatureOptions=new Km(s.viewParameters)}static getDefaultDrawingOptions(t){const s=this._defaultDrawingOptions.clone();return s.updateProperties(t),s}static get supportMultipleDrawings(){return!1}static get typesMap(){return pe(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!c(this,Tn)}}static computeTelemetryFinalData(t){const s=t.get("hasDescription");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,s;const{_isCopy:n}=this;if(n&&(this._isCopy=!1,t=this.x,s=this.y),super.render(),this._drawId===null)if(c(this,yr)){const{lines:r,mustSmooth:a,areContours:l,description:d,uuid:h,heightInPage:u}=c(this,yr),{rawDims:{pageWidth:f,pageHeight:m},rotation:p}=this.parent.viewport,x=Ln.processDrawnLines({lines:r,pageWidth:f,pageHeight:m,rotation:p,innerMargin:ss._INNER_MARGIN,mustSmooth:a,areContours:l});this.addSignature(x,u,d,h)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return n&&(this._isCopy=!0,this._moveAfterPaste(t,s)),this.div}setUuid(t){b(this,Za,t),this.addEditToolbar()}getUuid(){return c(this,Za)}get description(){return c(this,Tn)}set description(t){b(this,Tn,t),super.addEditToolbar().then(s=>{s==null||s.updateEditSignatureButton(t)})}getSignaturePreview(){const{newCurves:t,areContours:s,thickness:n,width:r,height:a}=c(this,yr),l=Math.max(r,a),d=Ln.processDrawnLines({lines:{curves:t.map(h=>({points:h})),thickness:n,width:r,height:a},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:s});return{areContours:s,outline:d.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,s,n,r){const{x:a,y:l}=this,{outline:d}=b(this,yr,t);b(this,vr,d instanceof Qp),this.description=n,this.div.setAttribute("data-l10n-args",JSON.stringify({description:n}));let h;c(this,vr)?h=ss.getDefaultDrawingOptions():(h=ss._defaultDrawnSignatureOptions.clone(),h.updateProperties({"stroke-width":d.thickness})),this._addOutlines({drawOutlines:d,drawingOptions:h});const[u,f]=this.parentDimensions,[,m]=this.pageDimensions;let p=s/m;p=p>=1?.5:p,this.width*=p/this.height,this.width>=1&&(p*=.9/this.width,this.width=.9),this.height=p,this.setDims(u*this.width,f*this.height),this.x=a,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!n}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:s,pageHeight:n},rotation:r}=this.parent.viewport;return Ln.process(t,s,n,r,ss._INNER_MARGIN)}getFromText(t,s){const{rawDims:{pageWidth:n,pageHeight:r},rotation:a}=this.parent.viewport;return Ln.extractContoursFromText(t,s,n,r,a,ss._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:s,pageHeight:n},rotation:r}=this.parent.viewport;return Ln.processDrawnLines({lines:t,pageWidth:s,pageHeight:n,rotation:r,innerMargin:ss._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:s}){t?this._drawingOptions=ss.getDefaultDrawingOptions():(this._drawingOptions=ss._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":s}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:s,points:n,rect:r}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":a}}=this,l={annotationType:ie.SIGNATURE,isSignature:!0,areContours:c(this,vr),color:[0,0,0],thickness:c(this,vr)?0:a,pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(l.paths={lines:s,points:n},l.uuid=c(this,Za),l.isCopy=!0):l.lines=s,c(this,Tn)&&(l.accessibilityData={type:"Figure",alt:c(this,Tn)}),l}static deserializeDraw(t,s,n,r,a,l){return l.areContours?Qp.deserialize(t,s,n,r,a,l):xh.deserialize(t,s,n,r,a,l)}static async deserialize(t,s,n){var a;const r=await super.deserialize(t,s,n);return b(r,vr,t.areContours),b(r,Tn,((a=t.accessibilityData)==null?void 0:a.alt)||""),b(r,Za,t.uuid),r}};vr=new WeakMap,Tn=new WeakMap,yr=new WeakMap,Za=new WeakMap,z(ss,"_type","signature"),z(ss,"_editorType",ie.SIGNATURE),z(ss,"_defaultDrawingOptions",null);let im=ss;var Fe,mt,wr,wi,Ar,Pl,Ai,Qa,Pn,gs,Rl,xe,yc,wc,au,ou,lu,am,cu,sy;class rm extends Re{constructor(t){super({...t,name:"stampEditor"});w(this,xe);w(this,Fe,null);w(this,mt,null);w(this,wr,null);w(this,wi,null);w(this,Ar,null);w(this,Pl,"");w(this,Ai,null);w(this,Qa,!1);w(this,Pn,null);w(this,gs,!1);w(this,Rl,!1);b(this,wi,t.bitmapUrl),b(this,Ar,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,s){Re.initialize(t,s)}static isHandlingMimeForPasting(t){return yu.includes(t)}static paste(t,s){s.pasteEditor({mode:ie.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const s=t.get("hasAltText");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}async mlGuessAltText(t=null,s=!0){if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:a,height:l}=t||this.copyCanvas(null,null,!0).imageData,d=await n.guess({name:"altText",request:{data:r,width:a,height:l,channels:r.length/(a*l)}});if(!d)throw new Error("No response from the AI service.");if(d.error)throw new Error("Error from the AI service.");if(d.cancel)return null;if(!d.output)throw new Error("No valid response from the AI service.");const h=d.output;return await this.setGuessedAltText(h),s&&!this.hasAltTextData()&&(this.altTextData={alt:h,decorative:!1}),h}remove(){var t;c(this,mt)&&(b(this,Fe,null),this._uiManager.imageManager.deleteId(c(this,mt)),(t=c(this,Ai))==null||t.remove(),b(this,Ai,null),c(this,Pn)&&(clearTimeout(c(this,Pn)),b(this,Pn,null))),super.remove()}rebuild(){if(!this.parent){c(this,mt)&&A(this,xe,au).call(this);return}super.rebuild(),this.div!==null&&(c(this,mt)&&c(this,Ai)===null&&A(this,xe,au).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(c(this,wr)||c(this,Fe)||c(this,wi)||c(this,Ar)||c(this,mt)||c(this,Qa))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,s;return this._isCopy&&(t=this.x,s=this.y),super.render(),this.div.hidden=!0,this.createAltText(),c(this,Qa)||(c(this,Fe)?A(this,xe,ou).call(this):A(this,xe,au).call(this)),this._isCopy&&this._moveAfterPaste(t,s),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,s){const{id:n,bitmap:r}=this._uiManager.imageManager.getFromCanvas(t,s);s.remove(),n&&this._uiManager.imageManager.isValidId(n)&&(b(this,mt,n),r&&b(this,Fe,r),b(this,Qa,!1),A(this,xe,ou).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;c(this,Pn)!==null&&clearTimeout(c(this,Pn)),b(this,Pn,setTimeout(()=>{b(this,Pn,null),A(this,xe,am).call(this)},200))}copyCanvas(t,s,n=!1){var p;t||(t=224);const{width:r,height:a}=c(this,Fe),l=new on;let d=c(this,Fe),h=r,u=a,f=null;if(s){if(r>s||a>s){const T=Math.min(s/r,s/a);h=Math.floor(r*T),u=Math.floor(a*T)}f=document.createElement("canvas");const x=f.width=Math.ceil(h*l.sx),g=f.height=Math.ceil(u*l.sy);c(this,gs)||(d=A(this,xe,lu).call(this,x,g));const v=f.getContext("2d");v.filter=this._uiManager.hcmFilter;let y="white",S="#cfcfd8";this._uiManager.hcmFilter!=="none"?S="black":(p=window.matchMedia)!=null&&p.call(window,"(prefers-color-scheme: dark)").matches&&(y="#8f8f9d",S="#42414d");const j=15,E=j*l.sx,C=j*l.sy,k=new OffscreenCanvas(E*2,C*2),_=k.getContext("2d");_.fillStyle=y,_.fillRect(0,0,E*2,C*2),_.fillStyle=S,_.fillRect(0,0,E,C),_.fillRect(E,C,E,C),v.fillStyle=v.createPattern(k,"repeat"),v.fillRect(0,0,x,g),v.drawImage(d,0,0,d.width,d.height,0,0,x,g)}let m=null;if(n){let x,g;if(l.symmetric&&d.width<t&&d.height<t)x=d.width,g=d.height;else if(d=c(this,Fe),r>t||a>t){const S=Math.min(t/r,t/a);x=Math.floor(r*S),g=Math.floor(a*S),c(this,gs)||(d=A(this,xe,lu).call(this,x,g))}const y=new OffscreenCanvas(x,g).getContext("2d",{willReadFrequently:!0});y.drawImage(d,0,0,d.width,d.height,0,0,x,g),m={width:x,height:g,data:y.getImageData(0,0,x,g).data}}return{canvas:f,width:h,height:u,imageData:m}}static async deserialize(t,s,n){var v;let r=null,a=!1;if(t instanceof xv){const{data:{rect:y,rotation:S,id:j,structParent:E,popupRef:C},container:k,parent:{page:{pageNumber:_}},canvas:T}=t;let P,R;T?(delete t.canvas,{id:P,bitmap:R}=n.imageManager.getFromCanvas(k.id,T),T.remove()):(a=!0,t._hasNoCanvas=!0);const M=((v=await s._structTree.getAriaAttributes(`${Fm}${j}`))==null?void 0:v.get("aria-label"))||"";r=t={annotationType:ie.STAMP,bitmapId:P,bitmap:R,pageIndex:_-1,rect:y.slice(0),rotation:S,annotationElementId:j,id:j,deleted:!1,accessibilityData:{decorative:!1,altText:M},isSvg:!1,structParent:E,popupRef:C}}const l=await super.deserialize(t,s,n),{rect:d,bitmap:h,bitmapUrl:u,bitmapId:f,isSvg:m,accessibilityData:p}=t;a?(n.addMissingCanvas(t.id,l),b(l,Qa,!0)):f&&n.imageManager.isValidId(f)?(b(l,mt,f),h&&b(l,Fe,h)):b(l,wi,u),b(l,gs,m);const[x,g]=l.pageDimensions;return l.width=(d[2]-d[0])/x,l.height=(d[3]-d[1])/g,p&&(l.altTextData=p),l._initialData=r,b(l,Rl,!!r),l}serialize(t=!1,s=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n={annotationType:ie.STAMP,bitmapId:c(this,mt),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:c(this,gs),structTreeParentId:this._structTreeParentId};if(t)return n.bitmapUrl=A(this,xe,cu).call(this,!0),n.accessibilityData=this.serializeAltText(!0),n.isCopy=!0,n;const{decorative:r,altText:a}=this.serializeAltText(!1);if(!r&&a&&(n.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const d=A(this,xe,sy).call(this,n);if(d.isSame)return null;d.isSameAltText?delete n.accessibilityData:n.accessibilityData.structParent=this._initialData.structParent??-1}if(n.id=this.annotationElementId,s===null)return n;s.stamps||(s.stamps=new Map);const l=c(this,gs)?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!s.stamps.has(c(this,mt)))s.stamps.set(c(this,mt),{area:l,serialized:n}),n.bitmap=A(this,xe,cu).call(this,!1);else if(c(this,gs)){const d=s.stamps.get(c(this,mt));l>d.area&&(d.area=l,d.serialized.bitmap.close(),d.serialized.bitmap=A(this,xe,cu).call(this,!1))}return n}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}}Fe=new WeakMap,mt=new WeakMap,wr=new WeakMap,wi=new WeakMap,Ar=new WeakMap,Pl=new WeakMap,Ai=new WeakMap,Qa=new WeakMap,Pn=new WeakMap,gs=new WeakMap,Rl=new WeakMap,xe=new WeakSet,yc=function(t,s=!1){if(!t){this.remove();return}b(this,Fe,t.bitmap),s||(b(this,mt,t.id),b(this,gs,t.isSvg)),t.file&&b(this,Pl,t.file.name),A(this,xe,ou).call(this)},wc=function(){if(b(this,wr,null),this._uiManager.enableWaiting(!1),!!c(this,Ai)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,Fe)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,Fe)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},au=function(){if(c(this,mt)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(c(this,mt)).then(n=>A(this,xe,yc).call(this,n,!0)).finally(()=>A(this,xe,wc).call(this));return}if(c(this,wi)){const n=c(this,wi);b(this,wi,null),this._uiManager.enableWaiting(!0),b(this,wr,this._uiManager.imageManager.getFromUrl(n).then(r=>A(this,xe,yc).call(this,r)).finally(()=>A(this,xe,wc).call(this)));return}if(c(this,Ar)){const n=c(this,Ar);b(this,Ar,null),this._uiManager.enableWaiting(!0),b(this,wr,this._uiManager.imageManager.getFromFile(n).then(r=>A(this,xe,yc).call(this,r)).finally(()=>A(this,xe,wc).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=yu.join(",");const s=this._uiManager._signal;b(this,wr,new Promise(n=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),A(this,xe,yc).call(this,r)}n()},{signal:s}),t.addEventListener("cancel",()=>{this.remove(),n()},{signal:s})}).finally(()=>A(this,xe,wc).call(this))),t.click()},ou=function(){var f;const{div:t}=this;let{width:s,height:n}=c(this,Fe);const[r,a]=this.pageDimensions,l=.75;if(this.width)s=this.width*r,n=this.height*a;else if(s>l*r||n>l*a){const m=Math.min(l*r/s,l*a/n);s*=m,n*=m}const[d,h]=this.parentDimensions;this.setDims(s*d/r,n*h/a),this._uiManager.enableWaiting(!1);const u=b(this,Ai,document.createElement("canvas"));u.setAttribute("role","img"),this.addContainer(u),this.width=s/r,this.height=n/a,(f=this._initialOptions)!=null&&f.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),A(this,xe,am).call(this),c(this,Rl)||(this.parent.addUndoableEditor(this),b(this,Rl,!0)),this._reportTelemetry({action:"inserted_image"}),c(this,Pl)&&this.div.setAttribute("aria-description",c(this,Pl)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},lu=function(t,s){const{width:n,height:r}=c(this,Fe);let a=n,l=r,d=c(this,Fe);for(;a>2*t||l>2*s;){const h=a,u=l;a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),l>2*s&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const f=new OffscreenCanvas(a,l);f.getContext("2d").drawImage(d,0,0,h,u,0,0,a,l),d=f.transferToImageBitmap()}return d},am=function(){const[t,s]=this.parentDimensions,{width:n,height:r}=this,a=new on,l=Math.ceil(n*t*a.sx),d=Math.ceil(r*s*a.sy),h=c(this,Ai);if(!h||h.width===l&&h.height===d)return;h.width=l,h.height=d;const u=c(this,gs)?c(this,Fe):A(this,xe,lu).call(this,l,d),f=h.getContext("2d");f.filter=this._uiManager.hcmFilter,f.drawImage(u,0,0,u.width,u.height,0,0,l,d)},cu=function(t){if(t){if(c(this,gs)){const r=this._uiManager.imageManager.getSvgUrl(c(this,mt));if(r)return r}const s=document.createElement("canvas");return{width:s.width,height:s.height}=c(this,Fe),s.getContext("2d").drawImage(c(this,Fe),0,0),s.toDataURL()}if(c(this,gs)){const[s,n]=this.pageDimensions,r=Math.round(this.width*s*Pi.PDF_TO_CSS_UNITS),a=Math.round(this.height*n*Pi.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(r,a);return l.getContext("2d").drawImage(c(this,Fe),0,0,c(this,Fe).width,c(this,Fe).height,0,0,r,a),l.transferToImageBitmap()}return structuredClone(c(this,Fe))},sy=function(t){var l;const{pageIndex:s,accessibilityData:{altText:n}}=this._initialData,r=t.pageIndex===s,a=(((l=t.accessibilityData)==null?void 0:l.alt)||"")===n;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&r&&a,isSameAltText:a}},z(rm,"_type","stamp"),z(rm,"_editorType",ie.STAMP);var eo,Ml,Rn,Nr,Ni,xs,Sr,Ll,to,tn,Si,gt,ji,jr,Il,K,Er,Be,ny,mn,om,lm,du;const Vs=class Vs{constructor({uiManager:e,pageIndex:t,div:s,structTreeLayer:n,accessibilityManager:r,annotationLayer:a,drawLayer:l,textLayer:d,viewport:h,l10n:u}){w(this,Be);w(this,eo);w(this,Ml,!1);w(this,Rn,null);w(this,Nr,null);w(this,Ni,null);w(this,xs,new Map);w(this,Sr,!1);w(this,Ll,!1);w(this,to,!1);w(this,tn,null);w(this,Si,null);w(this,gt,null);w(this,ji,null);w(this,jr,null);w(this,Il,-1);w(this,K);const f=[...c(Vs,Er).values()];if(!Vs._initialized){Vs._initialized=!0;for(const m of f)m.initialize(u,e)}e.registerEditorTypes(f),b(this,K,e),this.pageIndex=t,this.div=s,b(this,eo,r),b(this,Rn,a),this.viewport=h,b(this,gt,d),this.drawLayer=l,this._structTree=n,c(this,K).addLayer(this)}get isEmpty(){return c(this,xs).size===0}get isInvisible(){return this.isEmpty&&c(this,K).getMode()===ie.NONE}updateToolbar(e){c(this,K).updateToolbar(e)}updateMode(e=c(this,K).getMode()){switch(A(this,Be,du).call(this),e){case ie.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case ie.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case ie.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const s of c(Vs,Er).values())t.toggle(`${s._type}Editing`,e===s._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=c(this,gt))==null?void 0:t.div)}setEditingState(e){c(this,K).setEditingState(e)}addCommands(e){c(this,K).addCommands(e)}cleanUndoStack(e){c(this,K).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=c(this,Rn))==null||t.div.classList.toggle("disabled",!e)}async enable(){var s;b(this,to,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),(s=c(this,jr))==null||s.abort(),b(this,jr,null);const e=new Set;for(const n of c(this,xs).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(c(this,K).removeChangedExistingAnnotation(n),e.add(n.annotationElementId));if(!c(this,Rn)){b(this,to,!1);return}const t=c(this,Rn).getEditableAnnotations();for(const n of t){if(n.hide(),c(this,K).isDeletedAnnotationElement(n.data.id)||e.has(n.data.id))continue;const r=await this.deserialize(n);r&&(this.addOrRebuild(r),r.enableEditing())}b(this,to,!1)}disable(){var n;if(b(this,Ll,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),c(this,gt)&&!c(this,jr)){b(this,jr,new AbortController);const r=c(this,K).combinedSignal(c(this,jr));c(this,gt).div.addEventListener("pointerdown",a=>{const{clientX:d,clientY:h,timeStamp:u}=a,f=c(this,Il);if(u-f>500){b(this,Il,u);return}b(this,Il,-1);const{classList:m}=this.div;m.toggle("getElements",!0);const p=document.elementsFromPoint(d,h);if(m.toggle("getElements",!1),!this.div.contains(p[0]))return;let x;const g=new RegExp(`^${Xb}[0-9]+$`);for(const y of p)if(g.test(y.id)){x=y.id;break}if(!x)return;const v=c(this,xs).get(x);(v==null?void 0:v.annotationElementId)===null&&(a.stopPropagation(),a.preventDefault(),v.dblclick())},{signal:r,capture:!0})}const e=new Map,t=new Map;for(const r of c(this,xs).values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){e.set(r.annotationElementId,r);continue}else t.set(r.annotationElementId,r);(n=this.getEditableAnnotation(r.annotationElementId))==null||n.show(),r.remove()}if(c(this,Rn)){const r=c(this,Rn).getEditableAnnotations();for(const a of r){const{id:l}=a.data;if(c(this,K).isDeletedAnnotationElement(l))continue;let d=t.get(l);if(d){d.resetAnnotationElement(a),d.show(!1),a.show();continue}d=e.get(l),d&&(c(this,K).addChangedExistingAnnotation(d),d.renderAnnotationElement(a)&&d.show(!1)),a.show()}}A(this,Be,du).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const r of c(Vs,Er).values())s.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),b(this,Ll,!1)}getEditableAnnotation(e){var t;return((t=c(this,Rn))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){c(this,K).getActive()!==e&&c(this,K).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=c(this,gt))!=null&&e.div&&!c(this,ji)){b(this,ji,new AbortController);const t=c(this,K).combinedSignal(c(this,ji));c(this,gt).div.addEventListener("pointerdown",A(this,Be,ny).bind(this),{signal:t}),c(this,gt).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=c(this,gt))!=null&&e.div&&c(this,ji)&&(c(this,ji).abort(),b(this,ji,null),c(this,gt).div.classList.remove("highlighting"))}enableClick(){if(c(this,Nr))return;b(this,Nr,new AbortController);const e=c(this,K).combinedSignal(c(this,Nr));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=c(this,Nr))==null||e.abort(),b(this,Nr,null)}attach(e){c(this,xs).set(e.id,e);const{annotationElementId:t}=e;t&&c(this,K).isDeletedAnnotationElement(t)&&c(this,K).removeDeletedAnnotationElement(e)}detach(e){var t;c(this,xs).delete(e.id),(t=c(this,eo))==null||t.removePointerInTextLayer(e.contentDiv),!c(this,Ll)&&e.annotationElementId&&c(this,K).addDeletedAnnotationElement(e)}remove(e){this.detach(e),c(this,K).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(c(this,K).addDeletedAnnotationElement(e.annotationElementId),Re.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),c(this,K).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!c(this,to)),c(this,K).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var s;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!c(this,Ni)&&(e._focusEventsAllowed=!1,b(this,Ni,setTimeout(()=>{b(this,Ni,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:c(this,K)._signal}),t.focus())},0))),e._structTreeParentId=(s=c(this,eo))==null?void 0:s.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),s=()=>{e.remove()};this.addCommands({cmd:t,undo:s,mustExec:!1})}getNextId(){return c(this,K).getId()}combinedSignal(e){return c(this,K).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=c(this,Be,mn))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await c(this,K).updateMode(e.mode);const{offsetX:s,offsetY:n}=A(this,Be,lm).call(this),r=this.getNextId(),a=A(this,Be,om).call(this,{parent:this,id:r,x:s,y:n,uiManager:c(this,K),isCentered:!0,...t});a&&this.add(a)}async deserialize(e){var t;return await((t=c(Vs,Er).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,c(this,K)))||null}createAndAddNewEditor(e,t,s={}){const n=this.getNextId(),r=A(this,Be,om).call(this,{parent:this,id:n,x:e.offsetX,y:e.offsetY,uiManager:c(this,K),isCentered:t,...s});return r&&this.add(r),r}addNewEditor(e={}){this.createAndAddNewEditor(A(this,Be,lm).call(this),!0,e)}setSelected(e){c(this,K).setSelected(e)}toggleSelected(e){c(this,K).toggleSelected(e)}unselect(e){c(this,K).unselect(e)}pointerup(e){var n;const{isMac:t}=xt.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!c(this,Sr)||(b(this,Sr,!1),(n=c(this,Be,mn))!=null&&n.isDrawer&&c(this,Be,mn).supportMultipleDrawings))return;if(!c(this,Ml)){b(this,Ml,!0);return}const s=c(this,K).getMode();if(s===ie.STAMP||s===ie.SIGNATURE){c(this,K).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var n;if(c(this,K).getMode()===ie.HIGHLIGHT&&this.enableTextSelection(),c(this,Sr)){b(this,Sr,!1);return}const{isMac:t}=xt.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(b(this,Sr,!0),(n=c(this,Be,mn))!=null&&n.isDrawer){this.startDrawingSession(e);return}const s=c(this,K).getActive();b(this,Ml,!s||s.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),c(this,tn)){c(this,Be,mn).startDrawing(this,c(this,K),!1,e);return}c(this,K).setCurrentDrawingSession(this),b(this,tn,new AbortController);const t=c(this,K).combinedSignal(c(this,tn));this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(b(this,Si,null),this.commitOrRemove())},{signal:t}),c(this,Be,mn).startDrawing(this,c(this,K),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&b(this,Si,t);return}c(this,Si)&&setTimeout(()=>{var t;(t=c(this,Si))==null||t.focus(),b(this,Si,null)},0)}endDrawingSession(e=!1){return c(this,tn)?(c(this,K).setCurrentDrawingSession(null),c(this,tn).abort(),b(this,tn,null),b(this,Si,null),c(this,Be,mn).endDrawing(e)):null}findNewParent(e,t,s){const n=c(this,K).findParent(t,s);return n===null||n===this?!1:(n.changeParent(e),!0)}commitOrRemove(){return c(this,tn)?(this.endDrawingSession(),!0):!1}onScaleChanging(){c(this,tn)&&c(this,Be,mn).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=c(this,K).getActive())==null?void 0:e.parent)===this&&(c(this,K).commitOrRemove(),c(this,K).setActiveEditor(null)),c(this,Ni)&&(clearTimeout(c(this,Ni)),b(this,Ni,null));for(const s of c(this,xs).values())(t=c(this,eo))==null||t.removePointerInTextLayer(s.contentDiv),s.setParent(null),s.isAttachedToDOM=!1,s.div.remove();this.div=null,c(this,xs).clear(),c(this,K).removeLayer(this)}render({viewport:e}){this.viewport=e,Rr(this.div,e);for(const t of c(this,K).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){c(this,K).commitOrRemove(),A(this,Be,du).call(this);const t=this.viewport.rotation,s=e.rotation;if(this.viewport=e,Rr(this.div,{rotation:s}),t!==s)for(const n of c(this,xs).values())n.rotate(s)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return c(this,K).viewParameters.realScale}};eo=new WeakMap,Ml=new WeakMap,Rn=new WeakMap,Nr=new WeakMap,Ni=new WeakMap,xs=new WeakMap,Sr=new WeakMap,Ll=new WeakMap,to=new WeakMap,tn=new WeakMap,Si=new WeakMap,gt=new WeakMap,ji=new WeakMap,jr=new WeakMap,Il=new WeakMap,K=new WeakMap,Er=new WeakMap,Be=new WeakSet,ny=function(e){c(this,K).unselectAll();const{target:t}=e;if(t===c(this,gt).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&c(this,gt).div.contains(t)){const{isMac:s}=xt.platform;if(e.button!==0||e.ctrlKey&&s)return;c(this,K).showAllEditors("highlight",!0,!0),c(this,gt).div.classList.add("free"),this.toggleDrawing(),Nu.startHighlighting(this,c(this,K).direction==="ltr",{target:c(this,gt).div,x:e.x,y:e.y}),c(this,gt).div.addEventListener("pointerup",()=>{c(this,gt).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:c(this,K)._signal}),e.preventDefault()}},mn=function(){return c(Vs,Er).get(c(this,K).getMode())},om=function(e){const t=c(this,Be,mn);return t?new t.prototype.constructor(e):null},lm=function(){const{x:e,y:t,width:s,height:n}=this.div.getBoundingClientRect(),r=Math.max(0,e),a=Math.max(0,t),l=Math.min(window.innerWidth,e+s),d=Math.min(window.innerHeight,t+n),h=(r+l)/2-e,u=(a+d)/2-t,[f,m]=this.viewport.rotation%180===0?[h,u]:[u,h];return{offsetX:f,offsetY:m}},du=function(){for(const e of c(this,xs).values())e.isEmpty()&&e.remove()},z(Vs,"_initialized",!1),w(Vs,Er,new Map([Bp,Zp,rm,Nu,im].map(e=>[e._editorType,e])));let ju=Vs;var sn,zt,so,lh,qu,iy,Fn,cm,ry,dm;const it=class it{constructor({pageIndex:e}){w(this,Fn);w(this,sn,null);w(this,zt,new Map);w(this,so,new Map);this.pageIndex=e}setParent(e){if(!c(this,sn)){b(this,sn,e);return}if(c(this,sn)!==e){if(c(this,zt).size>0)for(const t of c(this,zt).values())t.remove(),e.append(t);b(this,sn,e)}}static get _svgFactory(){return pe(this,"_svgFactory",new Mc)}draw(e,t=!1,s=!1){const n=It(it,lh)._++,r=A(this,Fn,cm).call(this),a=it._svgFactory.createElement("defs");r.append(a);const l=it._svgFactory.createElement("path");a.append(l);const d=`path_p${this.pageIndex}_${n}`;l.setAttribute("id",d),l.setAttribute("vector-effect","non-scaling-stroke"),t&&c(this,so).set(n,l);const h=s?A(this,Fn,ry).call(this,a,d):null,u=it._svgFactory.createElement("use");return r.append(u),u.setAttribute("href",`#${d}`),this.updateProperties(r,e),c(this,zt).set(n,r),{id:n,clipPathId:`url(#${h})`}}drawOutline(e,t){const s=It(it,lh)._++,n=A(this,Fn,cm).call(this),r=it._svgFactory.createElement("defs");n.append(r);const a=it._svgFactory.createElement("path");r.append(a);const l=`path_p${this.pageIndex}_${s}`;a.setAttribute("id",l),a.setAttribute("vector-effect","non-scaling-stroke");let d;if(t){const f=it._svgFactory.createElement("mask");r.append(f),d=`mask_p${this.pageIndex}_${s}`,f.setAttribute("id",d),f.setAttribute("maskUnits","objectBoundingBox");const m=it._svgFactory.createElement("rect");f.append(m),m.setAttribute("width","1"),m.setAttribute("height","1"),m.setAttribute("fill","white");const p=it._svgFactory.createElement("use");f.append(p),p.setAttribute("href",`#${l}`),p.setAttribute("stroke","none"),p.setAttribute("fill","black"),p.setAttribute("fill-rule","nonzero"),p.classList.add("mask")}const h=it._svgFactory.createElement("use");n.append(h),h.setAttribute("href",`#${l}`),d&&h.setAttribute("mask",`url(#${d})`);const u=h.cloneNode();return n.append(u),h.classList.add("mainOutline"),u.classList.add("secondaryOutline"),this.updateProperties(n,e),c(this,zt).set(s,n),s}finalizeDraw(e,t){c(this,so).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var d;if(!t)return;const{root:s,bbox:n,rootClass:r,path:a}=t,l=typeof e=="number"?c(this,zt).get(e):e;if(l){if(s&&A(this,Fn,dm).call(this,l,s),n&&A(d=it,qu,iy).call(d,l,n),r){const{classList:h}=l;for(const[u,f]of Object.entries(r))h.toggle(u,f)}if(a){const u=l.firstChild.firstChild;A(this,Fn,dm).call(this,u,a)}}}updateParent(e,t){if(t===this)return;const s=c(this,zt).get(e);s&&(c(t,sn).append(s),c(this,zt).delete(e),c(t,zt).set(e,s))}remove(e){c(this,so).delete(e),c(this,sn)!==null&&(c(this,zt).get(e).remove(),c(this,zt).delete(e))}destroy(){b(this,sn,null);for(const e of c(this,zt).values())e.remove();c(this,zt).clear(),c(this,so).clear()}};sn=new WeakMap,zt=new WeakMap,so=new WeakMap,lh=new WeakMap,qu=new WeakSet,iy=function(e,[t,s,n,r]){const{style:a}=e;a.top=`${100*s}%`,a.left=`${100*t}%`,a.width=`${100*n}%`,a.height=`${100*r}%`},Fn=new WeakSet,cm=function(){const e=it._svgFactory.create(1,1,!0);return c(this,sn).append(e),e.setAttribute("aria-hidden",!0),e},ry=function(e,t){const s=it._svgFactory.createElement("clipPath");e.append(s);const n=`clip_${t}`;s.setAttribute("id",n),s.setAttribute("clipPathUnits","objectBoundingBox");const r=it._svgFactory.createElement("use");return s.append(r),r.setAttribute("href",`#${t}`),r.classList.add("clip"),n},dm=function(e,t){for(const[s,n]of Object.entries(t))n===null?e.removeAttribute(s):e.setAttribute(s,n)},w(it,qu),w(it,lh,0);let Eu=it;globalThis._pdfjsTestingUtils={HighlightOutliner:$p};globalThis.pdfjsLib={AbortException:Ti,AnnotationEditorLayer:ju,AnnotationEditorParamsType:me,AnnotationEditorType:ie,AnnotationEditorUIManager:Mr,AnnotationLayer:Xm,AnnotationMode:Mn,AnnotationType:Ge,build:rv,ColorPicker:Lc,createValidAbsoluteUrl:Im,DOMSVGFactory:Mc,DrawLayer:Eu,FeatureTest:xt,fetchData:Yl,getDocument:Um,getFilenameFromUrl:e0,getPdfFilenameFromUrl:t0,getUuid:Om,getXfaPageViewport:s0,GlobalWorkerOptions:Ms,ImageKind:Nc,InvalidPDFException:vu,isDataScheme:ph,isPdfFile:lf,isValidExplicitDest:D0,MathClamp:Rt,noContextMenu:Ds,normalizeUnicode:Zb,OPS:_c,OutputScale:on,PasswordResponses:Kb,PDFDataRangeTransport:Vm,PDFDateString:cf,PDFWorker:Fl,PermissionFlag:Yb,PixelsPerInch:Pi,RenderingCancelledException:of,ResponseException:kc,setLayerDimensions:Rr,shadow:pe,SignatureExtractor:Ln,stopEvent:Ye,SupportedImageMimeTypes:yu,TextLayer:Pc,TouchManager:Tc,updateUrlHash:Dm,Util:Z,VerbosityLevel:hh,version:Wm,XfaLayer:Gm};const KE=Object.freeze(Object.defineProperty({__proto__:null,AbortException:Ti,AnnotationEditorLayer:ju,AnnotationEditorParamsType:me,AnnotationEditorType:ie,AnnotationEditorUIManager:Mr,AnnotationLayer:Xm,AnnotationMode:Mn,AnnotationType:Ge,ColorPicker:Lc,DOMSVGFactory:Mc,DrawLayer:Eu,FeatureTest:xt,GlobalWorkerOptions:Ms,ImageKind:Nc,InvalidPDFException:vu,MathClamp:Rt,OPS:_c,OutputScale:on,PDFDataRangeTransport:Vm,PDFDateString:cf,PDFWorker:Fl,PasswordResponses:Kb,PermissionFlag:Yb,PixelsPerInch:Pi,RenderingCancelledException:of,ResponseException:kc,SignatureExtractor:Ln,SupportedImageMimeTypes:yu,TextLayer:Pc,TouchManager:Tc,Util:Z,VerbosityLevel:hh,XfaLayer:Gm,build:rv,createValidAbsoluteUrl:Im,fetchData:Yl,getDocument:Um,getFilenameFromUrl:e0,getPdfFilenameFromUrl:t0,getUuid:Om,getXfaPageViewport:s0,isDataScheme:ph,isPdfFile:lf,isValidExplicitDest:D0,noContextMenu:Ds,normalizeUnicode:Zb,setLayerDimensions:Rr,shadow:pe,stopEvent:Ye,updateUrlHash:Dm,version:Wm},Symbol.toStringTag,{value:"Module"}));var px=Object.prototype.hasOwnProperty;function mx(i,e,t){for(t of i.keys())if(_o(t,e))return t}function _o(i,e){var t,s,n;if(i===e)return!0;if(i&&e&&(t=i.constructor)===e.constructor){if(t===Date)return i.getTime()===e.getTime();if(t===RegExp)return i.toString()===e.toString();if(t===Array){if((s=i.length)===e.length)for(;s--&&_o(i[s],e[s]););return s===-1}if(t===Set){if(i.size!==e.size)return!1;for(s of i)if(n=s,n&&typeof n=="object"&&(n=mx(e,n),!n)||!e.has(n))return!1;return!0}if(t===Map){if(i.size!==e.size)return!1;for(s of i)if(n=s[0],n&&typeof n=="object"&&(n=mx(e,n),!n)||!_o(s[1],e.get(n)))return!1;return!0}if(t===ArrayBuffer)i=new Uint8Array(i),e=new Uint8Array(e);else if(t===DataView){if((s=i.byteLength)===e.byteLength)for(;s--&&i.getInt8(s)===e.getInt8(s););return s===-1}if(ArrayBuffer.isView(i)){if((s=i.byteLength)===e.byteLength)for(;s--&&i[s]===e[s];);return s===-1}if(!t||typeof i=="object"){s=0;for(t in i)if(px.call(i,t)&&++s&&!px.call(e,t)||!(t in e)||!_o(i[t],e[t]))return!1;return Object.keys(e).length===s}}return i!==i&&e!==e}function bh(i){let e=!1;return{promise:new Promise((s,n)=>{i.then(r=>!e&&s(r)).catch(r=>!e&&n(r))}),cancel(){e=!0}}}const JE=["onCopy","onCut","onPaste"],ZE=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],QE=["onFocus","onBlur"],eC=["onInput","onInvalid","onReset","onSubmit"],tC=["onLoad","onError"],sC=["onKeyDown","onKeyPress","onKeyUp"],nC=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],iC=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],rC=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],aC=["onSelect"],oC=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],lC=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],cC=["onScroll"],dC=["onWheel"],hC=["onAnimationStart","onAnimationEnd","onAnimationIteration"],uC=["onTransitionEnd"],fC=["onToggle"],pC=["onChange"],mC=[...JE,...ZE,...QE,...eC,...tC,...sC,...nC,...iC,...rC,...aC,...oC,...lC,...cC,...dC,...hC,...uC,...pC,...fC];function ay(i,e){const t={};for(const s of mC){const n=i[s];n&&(e?t[s]=r=>n(r,e(s)):t[s]=n)}return t}var gC="Invariant failed";function Te(i,e){if(!i)throw new Error(gC)}var xC=function(){},bC=xC;const Mt=nw(bC),oy=N.createContext(null),vC="noopener noreferrer nofollow";class yC{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return Te(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){Te(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}goToDestination(e){return new Promise(t=>{Te(this.pdfDocument),Te(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{Te(Array.isArray(t));const s=t[0];new Promise(n=>{Te(this.pdfDocument),s instanceof Object?this.pdfDocument.getPageIndex(s).then(r=>{n(r)}).catch(()=>{Te(!1)}):typeof s=="number"?n(s):Te(!1)}).then(n=>{const r=n+1;Te(this.pdfViewer),Te(r>=1&&r<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:n,pageNumber:r})})})}navigateTo(e){this.goToDestination(e)}goToPage(e){const t=e-1;Te(this.pdfViewer),Te(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}addLinkAttributes(e,t,s){e.href=t,e.rel=this.externalLinkRel||vC,e.target=s?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}function ko({children:i,type:e}){return o.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:i})}const gx={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function wC(i,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return i}}function Bl(){return N.useReducer(wC,{value:void 0,error:void 0})}const uf=typeof window<"u",ly=uf&&window.location.protocol==="file:";function AC(i){return typeof i<"u"}function zr(i){return AC(i)&&i!==null}function NC(i){return typeof i=="string"}function SC(i){return i instanceof ArrayBuffer}function jC(i){return Te(uf),i instanceof Blob}function hm(i){return NC(i)&&/^data:/.test(i)}function xx(i){Te(hm(i));const[e="",t=""]=i.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function EC(){return uf&&window.devicePixelRatio||1}const cy="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function bx(){Mt(!ly,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${cy}`)}function CC(){Mt(!ly,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${cy}`)}function ro(i){i!=null&&i.cancel&&i.cancel()}function um(i,e){return Object.defineProperty(i,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(i,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(i,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(i,"originalHeight",{get(){return this.view[3]},configurable:!0}),i}function _C(i){return i.name==="RenderingCancelledException"}function kC(i){return new Promise((e,t)=>{const s=new FileReader;s.onload=()=>{if(!s.result)return t(new Error("Error while reading a file."));e(s.result)},s.onerror=n=>{if(!n.target)return t(new Error("Error while reading a file."));const{error:r}=n.target;if(!r)return t(new Error("Error while reading a file."));switch(r.code){case r.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case r.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case r.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},s.readAsArrayBuffer(i)})}const{PDFDataRangeTransport:TC}=KE,PC=(i,e)=>{switch(e){case gx.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");i(t);break}case gx.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");i(t);break}}};function vx(i){return typeof i=="object"&&i!==null&&("data"in i||"range"in i||"url"in i)}const RC=N.forwardRef(function({children:e,className:t,error:s="Failed to load PDF file.",externalLinkRel:n,externalLinkTarget:r,file:a,inputRef:l,imageResourcesPath:d,loading:h="Loading PDF…",noData:u="No PDF file specified.",onItemClick:f,onLoadError:m,onLoadProgress:p,onLoadSuccess:x,onPassword:g=PC,onSourceError:v,onSourceSuccess:y,options:S,renderMode:j,rotate:E,scale:C,...k},_){const[T,P]=Bl(),{value:R,error:M}=T,[F,$]=Bl(),{value:B,error:ee}=F,I=N.useRef(new yC),D=N.useRef([]),V=N.useRef(void 0),L=N.useRef(void 0);a&&a!==V.current&&vx(a)&&(Mt(!_o(a,V.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),V.current=a),S&&S!==L.current&&(Mt(!_o(S,L.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),L.current=S);const te=N.useRef({scrollPageIntoView:de=>{const{dest:Ne,pageNumber:ze,pageIndex:$e=ze-1}=de;if(f){f({dest:Ne,pageIndex:$e,pageNumber:ze});return}const cn=D.current[$e];if(cn){cn.scrollIntoView();return}Mt(!1,`An internal link leading to page ${ze} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});N.useImperativeHandle(_,()=>({linkService:I,pages:D,viewer:te}),[]);function ue(){y&&y()}function q(){M&&(Mt(!1,M.toString()),v&&v(M))}function J(){P({type:"RESET"})}N.useEffect(J,[a,P]);const ce=N.useCallback(async()=>{if(!a)return null;if(typeof a=="string")return hm(a)?{data:xx(a)}:(bx(),{url:a});if(a instanceof TC)return{range:a};if(SC(a))return{data:a};if(uf&&jC(a))return{data:await kC(a)};if(Te(typeof a=="object"),Te(vx(a)),"url"in a&&typeof a.url=="string"){if(hm(a.url)){const{url:de,...Ne}=a;return{data:xx(de),...Ne}}bx()}return a},[a]);N.useEffect(()=>{const de=bh(ce());return de.promise.then(Ne=>{P({type:"RESOLVE",value:Ne})}).catch(Ne=>{P({type:"REJECT",error:Ne})}),()=>{ro(de)}},[ce,P]),N.useEffect(()=>{if(!(typeof R>"u")){if(R===!1){q();return}ue()}},[R]);function ve(){B&&(x&&x(B),D.current=new Array(B.numPages),I.current.setDocument(B))}function Le(){ee&&(Mt(!1,ee.toString()),m&&m(ee))}N.useEffect(function(){$({type:"RESET"})},[$,R]),N.useEffect(function(){if(!R)return;const Ne=S?{...R,...S}:R,ze=Um(Ne);p&&(ze.onProgress=p),g&&(ze.onPassword=g);const $e=ze,cn=$e.promise.then(Bs=>{$({type:"RESOLVE",value:Bs})}).catch(Bs=>{$e.destroyed||$({type:"REJECT",error:Bs})});return()=>{cn.finally(()=>$e.destroy())}},[S,$,R]),N.useEffect(()=>{if(!(typeof B>"u")){if(B===!1){Le();return}ve()}},[B]),N.useEffect(function(){I.current.setViewer(te.current),I.current.setExternalLinkRel(n),I.current.setExternalLinkTarget(r)},[n,r]);const Q=N.useCallback((de,Ne)=>{D.current[de]=Ne},[]),bt=N.useCallback(de=>{delete D.current[de]},[]),Ze=N.useMemo(()=>({imageResourcesPath:d,linkService:I.current,onItemClick:f,pdf:B,registerPage:Q,renderMode:j,rotate:E,scale:C,unregisterPage:bt}),[d,f,B,Q,j,E,C,bt]),ye=N.useMemo(()=>ay(k,()=>B),[k,B]);function lt(){function de(ze){return!!(ze!=null&&ze.pdf)}if(!de(Ze))throw new Error("pdf is undefined");const Ne=typeof e=="function"?e(Ze):e;return o.jsx(oy.Provider,{value:Ze,children:Ne})}function Et(){return a?B==null?o.jsx(ko,{type:"loading",children:typeof h=="function"?h():h}):B===!1?o.jsx(ko,{type:"error",children:typeof s=="function"?s():s}):lt():o.jsx(ko,{type:"no-data",children:typeof u=="function"?u():u})}return o.jsx("div",{className:Ul("react-pdf__Document",t),ref:l,...ye,children:Et()})});function dy(){return N.useContext(oy)}function hy(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];var t=i.filter(Boolean);if(t.length<=1){var s=t[0];return s||null}return function(r){for(var a=0,l=t;a<l.length;a++){var d=l[a];typeof d=="function"?d(r):d&&(d.current=r)}}}const uy=N.createContext(null);function ff(){return N.useContext(uy)}function MC(){const i=dy(),e=ff();Te(e);const t={...i,...e},{imageResourcesPath:s,linkService:n,onGetAnnotationsError:r,onGetAnnotationsSuccess:a,onRenderAnnotationLayerError:l,onRenderAnnotationLayerSuccess:d,page:h,pdf:u,renderForms:f,rotate:m,scale:p=1}=t;Te(u),Te(h),Te(n);const[x,g]=Bl(),{value:v,error:y}=x,S=N.useRef(null);Mt(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function j(){v&&a&&a(v)}function E(){y&&(Mt(!1,y.toString()),r&&r(y))}N.useEffect(function(){g({type:"RESET"})},[g,h]),N.useEffect(function(){if(!h)return;const P=bh(h.getAnnotations()),R=P;return P.promise.then(M=>{g({type:"RESOLVE",value:M})}).catch(M=>{g({type:"REJECT",error:M})}),()=>{ro(R)}},[g,h]),N.useEffect(()=>{if(v!==void 0){if(v===!1){E();return}j()}},[v]);function C(){d&&d()}function k(T){Mt(!1,`${T}`),l&&l(T)}const _=N.useMemo(()=>h.getViewport({scale:p,rotation:m}),[h,m,p]);return N.useEffect(function(){if(!u||!h||!n||!v)return;const{current:P}=S;if(!P)return;const R=_.clone({dontFlip:!0}),M={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:P,l10n:null,page:h,structTreeLayer:null,viewport:R},F={annotations:v,annotationStorage:u.annotationStorage,div:P,imageResourcesPath:s,linkService:n,page:h,renderForms:f,viewport:R};P.innerHTML="";try{new Xm(M).render(F),C()}catch($){k($)}return()=>{}},[v,s,n,h,u,f,_]),o.jsx("div",{className:Ul("react-pdf__Page__annotations","annotationLayer"),ref:S})}const fy={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},LC=/^H(\d+)$/;function IC(i){return i in fy}function pf(i){return"children"in i}function py(i){return pf(i)?i.children.length===1&&0 in i.children&&"id"in i.children[0]:!1}function DC(i){const e={};if(pf(i)){const{role:t}=i,s=t.match(LC);if(s)e.role="heading",e["aria-level"]=Number(s[1]);else if(IC(t)){const n=fy[t];n&&(e.role=n)}}return e}function my(i){const e={};if(pf(i)){if(i.alt!==void 0&&(e["aria-label"]=i.alt),i.lang!==void 0&&(e.lang=i.lang),py(i)){const[t]=i.children;if(t){const s=my(t);return{...e,...s}}}}else"id"in i&&(e["aria-owns"]=i.id);return e}function OC(i){return i?{...DC(i),...my(i)}:null}function gy({className:i,node:e}){const t=N.useMemo(()=>OC(e),[e]),s=N.useMemo(()=>!pf(e)||py(e)?null:e.children.map((n,r)=>o.jsx(gy,{node:n},r)),[e]);return o.jsx("span",{className:i,...t,children:s})}function FC(){const i=ff();Te(i);const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=i,[s,n]=Bl(),{value:r,error:a}=s,{customTextRenderer:l,page:d}=i;function h(){r&&t&&t(r)}function u(){a&&(Mt(!1,a.toString()),e&&e(a))}return N.useEffect(function(){n({type:"RESET"})},[n,d]),N.useEffect(function(){if(l||!d)return;const m=bh(d.getStructTree()),p=m;return m.promise.then(x=>{n({type:"RESOLVE",value:x})}).catch(x=>{n({type:"REJECT",error:x})}),()=>ro(p)},[l,d,n]),N.useEffect(()=>{if(r!==void 0){if(r===!1){u();return}h()}},[r]),r?o.jsx(gy,{className:"react-pdf__Page__structTree structTree",node:r}):null}const yx=Mn;function BC(i){const e=ff();Te(e);const t={...e,...i},{_className:s,canvasBackground:n,devicePixelRatio:r=EC(),onRenderError:a,onRenderSuccess:l,page:d,renderForms:h,renderTextLayer:u,rotate:f,scale:m}=t,{canvasRef:p}=i;Te(d);const x=N.useRef(null);function g(){d&&l&&l(um(d,m))}function v(E){_C(E)||(Mt(!1,E.toString()),a&&a(E))}const y=N.useMemo(()=>d.getViewport({scale:m*r,rotation:f}),[r,d,f,m]),S=N.useMemo(()=>d.getViewport({scale:m,rotation:f}),[d,f,m]);N.useEffect(function(){if(!d)return;d.cleanup();const{current:C}=x;if(!C)return;C.width=y.width,C.height=y.height,C.style.width=`${Math.floor(S.width)}px`,C.style.height=`${Math.floor(S.height)}px`,C.style.visibility="hidden";const k={annotationMode:h?yx.ENABLE_FORMS:yx.ENABLE,canvasContext:C.getContext("2d",{alpha:!1}),viewport:y};n&&(k.background=n);const _=d.render(k),T=_;return _.promise.then(()=>{C.style.visibility="",g()}).catch(v),()=>ro(T)},[n,d,h,y,S]);const j=N.useCallback(()=>{const{current:E}=x;E&&(E.width=0,E.height=0)},[]);return N.useEffect(()=>j,[j]),o.jsx("canvas",{className:`${s}__canvas`,dir:"ltr",ref:hy(p,x),style:{display:"block",userSelect:"none"},children:u?o.jsx(FC,{}):null})}function zC(i){return"str"in i}function $C(){const i=ff();Te(i);const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:s,onRenderTextLayerError:n,onRenderTextLayerSuccess:r,page:a,pageIndex:l,pageNumber:d,rotate:h,scale:u}=i;Te(a);const[f,m]=Bl(),{value:p,error:x}=f,g=N.useRef(null);Mt(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function v(){p&&s&&s(p)}function y(){x&&(Mt(!1,x.toString()),t&&t(x))}N.useEffect(function(){m({type:"RESET"})},[a,m]),N.useEffect(function(){if(!a)return;const T=bh(a.getTextContent()),P=T;return T.promise.then(R=>{m({type:"RESOLVE",value:R})}).catch(R=>{m({type:"REJECT",error:R})}),()=>ro(P)},[a,m]),N.useEffect(()=>{if(p!==void 0){if(p===!1){y();return}v()}},[p]);const S=N.useCallback(()=>{r&&r()},[r]),j=N.useCallback(_=>{Mt(!1,_.toString()),n&&n(_)},[n]);function E(){const _=g.current;_&&_.classList.add("selecting")}function C(){const _=g.current;_&&_.classList.remove("selecting")}const k=N.useMemo(()=>a.getViewport({scale:u,rotation:h}),[a,h,u]);return N.useLayoutEffect(function(){if(!a||!p)return;const{current:T}=g;if(!T)return;T.innerHTML="";const P=a.streamTextContent({includeMarkedContent:!0}),R={container:T,textContentSource:P,viewport:k},M=new Pc(R),F=M;return M.render().then(()=>{const $=document.createElement("div");$.className="endOfContent",T.append($);const B=T.querySelectorAll('[role="presentation"]');if(e){let ee=0;p.items.forEach((I,D)=>{if(!zC(I))return;const V=B[ee];if(!V)return;const L=e({pageIndex:l,pageNumber:d,itemIndex:D,...I});V.innerHTML=L,ee+=I.str&&I.hasEOL?2:1})}S()}).catch(j),()=>ro(F)},[e,j,S,a,l,d,p,k]),o.jsx("div",{className:Ul("react-pdf__Page__textContent","textLayer"),onMouseUp:C,onMouseDown:E,ref:g})}const wx=1;function HC(i){const t={...dy(),...i},{_className:s="react-pdf__Page",_enableRegisterUnregisterPage:n=!0,canvasBackground:r,canvasRef:a,children:l,className:d,customRenderer:h,customTextRenderer:u,devicePixelRatio:f,error:m="Failed to load the page.",height:p,inputRef:x,loading:g="Loading page…",noData:v="No page specified.",onGetAnnotationsError:y,onGetAnnotationsSuccess:S,onGetStructTreeError:j,onGetStructTreeSuccess:E,onGetTextError:C,onGetTextSuccess:k,onLoadError:_,onLoadSuccess:T,onRenderAnnotationLayerError:P,onRenderAnnotationLayerSuccess:R,onRenderError:M,onRenderSuccess:F,onRenderTextLayerError:$,onRenderTextLayerSuccess:B,pageIndex:ee,pageNumber:I,pdf:D,registerPage:V,renderAnnotationLayer:L=!0,renderForms:te=!1,renderMode:ue="canvas",renderTextLayer:q=!0,rotate:J,scale:ce=wx,unregisterPage:ve,width:Le,...Q}=t,[bt,Ze]=Bl(),{value:ye,error:lt}=bt,Et=N.useRef(null);Te(D);const de=zr(I)?I-1:ee??null,Ne=I??(zr(ee)?ee+1:null),ze=J??(ye?ye.rotate:null),$e=N.useMemo(()=>{if(!ye)return null;let Lt=1;const Li=ce??wx;if(Le||p){const un=ye.getViewport({scale:1,rotation:ze});Le?Lt=Le/un.width:p&&(Lt=p/un.height)}return Li*Lt},[p,ye,ze,ce,Le]);N.useEffect(function(){return()=>{zr(de)&&n&&ve&&ve(de)}},[n,D,de,ve]);function cn(){if(T){if(!ye||!$e)return;T(um(ye,$e))}if(n&&V){if(!zr(de)||!Et.current)return;V(de,Et.current)}}function Bs(){lt&&(Mt(!1,lt.toString()),_&&_(lt))}N.useEffect(function(){Ze({type:"RESET"})},[Ze,D,de]),N.useEffect(function(){if(!D||!Ne)return;const Li=bh(D.getPage(Ne)),un=Li;return Li.promise.then(Ii=>{Ze({type:"RESOLVE",value:Ii})}).catch(Ii=>{Ze({type:"REJECT",error:Ii})}),()=>ro(un)},[Ze,D,Ne]),N.useEffect(()=>{if(ye!==void 0){if(ye===!1){Bs();return}cn()}},[ye,$e]);const dn=N.useMemo(()=>zr(de)&&Ne&&zr(ze)&&zr($e)?{_className:s,canvasBackground:r,customTextRenderer:u,devicePixelRatio:f,onGetAnnotationsError:y,onGetAnnotationsSuccess:S,onGetStructTreeError:j,onGetStructTreeSuccess:E,onGetTextError:C,onGetTextSuccess:k,onRenderAnnotationLayerError:P,onRenderAnnotationLayerSuccess:R,onRenderError:M,onRenderSuccess:F,onRenderTextLayerError:$,onRenderTextLayerSuccess:B,page:ye,pageIndex:de,pageNumber:Ne,renderForms:te,renderTextLayer:q,rotate:ze,scale:$e}:null,[s,r,u,f,y,S,j,E,C,k,P,R,M,F,$,B,ye,de,Ne,te,q,ze,$e]),vh=N.useMemo(()=>ay(Q,()=>ye&&($e?um(ye,$e):void 0)),[Q,ye,$e]),hn=`${de}@${$e}/${ze}`;function yh(){switch(ue){case"custom":return Te(h),o.jsx(h,{},`${hn}_custom`);case"none":return null;case"canvas":default:return o.jsx(BC,{canvasRef:a},`${hn}_canvas`)}}function $n(){return q?o.jsx($C,{},`${hn}_text`):null}function bf(){return L?o.jsx(MC,{},`${hn}_annotations`):null}function vf(){function Lt(un){return!!(un!=null&&un.page)}if(!Lt(dn))throw new Error("page is undefined");const Li=typeof l=="function"?l(dn):l;return o.jsxs(uy.Provider,{value:dn,children:[yh(),$n(),bf(),Li]})}function qt(){return Ne?D===null||ye===void 0||ye===null?o.jsx(ko,{type:"loading",children:typeof g=="function"?g():g}):D===!1||ye===!1?o.jsx(ko,{type:"error",children:typeof m=="function"?m():m}):vf():o.jsx(ko,{type:"no-data",children:typeof v=="function"?v():v})}return o.jsx("div",{className:Ul(s,d),"data-page-number":Ne,ref:hy(x,Et),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${$e}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:r||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...vh,children:qt()})}CC();Ms.workerSrc="pdf.worker.mjs";var UC=N.createContext(void 0);function VC(i){const e=N.useContext(UC);return i||e||"ltr"}function WC(i,[e,t]){return Math.min(t,Math.max(e,i))}function GC(i,e){return N.useReducer((t,s)=>e[t][s]??t,i)}var Jm="ScrollArea",[xy,P_]=ch(Jm),[qC,Fs]=xy(Jm),by=N.forwardRef((i,e)=>{const{__scopeScrollArea:t,type:s="hover",dir:n,scrollHideDelay:r=600,...a}=i,[l,d]=N.useState(null),[h,u]=N.useState(null),[f,m]=N.useState(null),[p,x]=N.useState(null),[g,v]=N.useState(null),[y,S]=N.useState(0),[j,E]=N.useState(0),[C,k]=N.useState(!1),[_,T]=N.useState(!1),P=Os(e,M=>d(M)),R=VC(n);return o.jsx(qC,{scope:t,type:s,dir:R,scrollHideDelay:r,scrollArea:l,viewport:h,onViewportChange:u,content:f,onContentChange:m,scrollbarX:p,onScrollbarXChange:x,scrollbarXEnabled:C,onScrollbarXEnabledChange:k,scrollbarY:g,onScrollbarYChange:v,scrollbarYEnabled:_,onScrollbarYEnabledChange:T,onCornerWidthChange:S,onCornerHeightChange:E,children:o.jsx(Gt.div,{dir:R,...a,ref:P,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":j+"px",...i.style}})})});by.displayName=Jm;var vy="ScrollAreaViewport",yy=N.forwardRef((i,e)=>{const{__scopeScrollArea:t,children:s,nonce:n,...r}=i,a=Fs(vy,t),l=N.useRef(null),d=Os(e,l,a.onViewportChange);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),o.jsx(Gt.div,{"data-radix-scroll-area-viewport":"",...r,ref:d,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...i.style},children:o.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});yy.displayName=vy;var zn="ScrollAreaScrollbar",Zm=N.forwardRef((i,e)=>{const{forceMount:t,...s}=i,n=Fs(zn,i.__scopeScrollArea),{onScrollbarXEnabledChange:r,onScrollbarYEnabledChange:a}=n,l=i.orientation==="horizontal";return N.useEffect(()=>(l?r(!0):a(!0),()=>{l?r(!1):a(!1)}),[l,r,a]),n.type==="hover"?o.jsx(XC,{...s,ref:e,forceMount:t}):n.type==="scroll"?o.jsx(YC,{...s,ref:e,forceMount:t}):n.type==="auto"?o.jsx(wy,{...s,ref:e,forceMount:t}):n.type==="always"?o.jsx(Qm,{...s,ref:e}):null});Zm.displayName=zn;var XC=N.forwardRef((i,e)=>{const{forceMount:t,...s}=i,n=Fs(zn,i.__scopeScrollArea),[r,a]=N.useState(!1);return N.useEffect(()=>{const l=n.scrollArea;let d=0;if(l){const h=()=>{window.clearTimeout(d),a(!0)},u=()=>{d=window.setTimeout(()=>a(!1),n.scrollHideDelay)};return l.addEventListener("pointerenter",h),l.addEventListener("pointerleave",u),()=>{window.clearTimeout(d),l.removeEventListener("pointerenter",h),l.removeEventListener("pointerleave",u)}}},[n.scrollArea,n.scrollHideDelay]),o.jsx($l,{present:t||r,children:o.jsx(wy,{"data-state":r?"visible":"hidden",...s,ref:e})})}),YC=N.forwardRef((i,e)=>{const{forceMount:t,...s}=i,n=Fs(zn,i.__scopeScrollArea),r=i.orientation==="horizontal",a=gf(()=>d("SCROLL_END"),100),[l,d]=GC("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return N.useEffect(()=>{if(l==="idle"){const h=window.setTimeout(()=>d("HIDE"),n.scrollHideDelay);return()=>window.clearTimeout(h)}},[l,n.scrollHideDelay,d]),N.useEffect(()=>{const h=n.viewport,u=r?"scrollLeft":"scrollTop";if(h){let f=h[u];const m=()=>{const p=h[u];f!==p&&(d("SCROLL"),a()),f=p};return h.addEventListener("scroll",m),()=>h.removeEventListener("scroll",m)}},[n.viewport,r,d,a]),o.jsx($l,{present:t||l!=="hidden",children:o.jsx(Qm,{"data-state":l==="hidden"?"hidden":"visible",...s,ref:e,onPointerEnter:Ht(i.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:Ht(i.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),wy=N.forwardRef((i,e)=>{const t=Fs(zn,i.__scopeScrollArea),{forceMount:s,...n}=i,[r,a]=N.useState(!1),l=i.orientation==="horizontal",d=gf(()=>{if(t.viewport){const h=t.viewport.offsetWidth<t.viewport.scrollWidth,u=t.viewport.offsetHeight<t.viewport.scrollHeight;a(l?h:u)}},10);return zl(t.viewport,d),zl(t.content,d),o.jsx($l,{present:s||r,children:o.jsx(Qm,{"data-state":r?"visible":"hidden",...n,ref:e})})}),Qm=N.forwardRef((i,e)=>{const{orientation:t="vertical",...s}=i,n=Fs(zn,i.__scopeScrollArea),r=N.useRef(null),a=N.useRef(0),[l,d]=N.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=Ey(l.viewport,l.content),u={...s,sizes:l,onSizesChange:d,hasThumb:h>0&&h<1,onThumbChange:m=>r.current=m,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:m=>a.current=m};function f(m,p){return t_(m,a.current,l,p)}return t==="horizontal"?o.jsx(KC,{...u,ref:e,onThumbPositionChange:()=>{if(n.viewport&&r.current){const m=n.viewport.scrollLeft,p=Ax(m,l,n.dir);r.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:m=>{n.viewport&&(n.viewport.scrollLeft=m)},onDragScroll:m=>{n.viewport&&(n.viewport.scrollLeft=f(m,n.dir))}}):t==="vertical"?o.jsx(JC,{...u,ref:e,onThumbPositionChange:()=>{if(n.viewport&&r.current){const m=n.viewport.scrollTop,p=Ax(m,l);r.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:m=>{n.viewport&&(n.viewport.scrollTop=m)},onDragScroll:m=>{n.viewport&&(n.viewport.scrollTop=f(m))}}):null}),KC=N.forwardRef((i,e)=>{const{sizes:t,onSizesChange:s,...n}=i,r=Fs(zn,i.__scopeScrollArea),[a,l]=N.useState(),d=N.useRef(null),h=Os(e,d,r.onScrollbarXChange);return N.useEffect(()=>{d.current&&l(getComputedStyle(d.current))},[d]),o.jsx(Ny,{"data-orientation":"horizontal",...n,ref:h,sizes:t,style:{bottom:0,left:r.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:r.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":mf(t)+"px",...i.style},onThumbPointerDown:u=>i.onThumbPointerDown(u.x),onDragScroll:u=>i.onDragScroll(u.x),onWheelScroll:(u,f)=>{if(r.viewport){const m=r.viewport.scrollLeft+u.deltaX;i.onWheelScroll(m),_y(m,f)&&u.preventDefault()}},onResize:()=>{d.current&&r.viewport&&a&&s({content:r.viewport.scrollWidth,viewport:r.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:_u(a.paddingLeft),paddingEnd:_u(a.paddingRight)}})}})}),JC=N.forwardRef((i,e)=>{const{sizes:t,onSizesChange:s,...n}=i,r=Fs(zn,i.__scopeScrollArea),[a,l]=N.useState(),d=N.useRef(null),h=Os(e,d,r.onScrollbarYChange);return N.useEffect(()=>{d.current&&l(getComputedStyle(d.current))},[d]),o.jsx(Ny,{"data-orientation":"vertical",...n,ref:h,sizes:t,style:{top:0,right:r.dir==="ltr"?0:void 0,left:r.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":mf(t)+"px",...i.style},onThumbPointerDown:u=>i.onThumbPointerDown(u.y),onDragScroll:u=>i.onDragScroll(u.y),onWheelScroll:(u,f)=>{if(r.viewport){const m=r.viewport.scrollTop+u.deltaY;i.onWheelScroll(m),_y(m,f)&&u.preventDefault()}},onResize:()=>{d.current&&r.viewport&&a&&s({content:r.viewport.scrollHeight,viewport:r.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:_u(a.paddingTop),paddingEnd:_u(a.paddingBottom)}})}})}),[ZC,Ay]=xy(zn),Ny=N.forwardRef((i,e)=>{const{__scopeScrollArea:t,sizes:s,hasThumb:n,onThumbChange:r,onThumbPointerUp:a,onThumbPointerDown:l,onThumbPositionChange:d,onDragScroll:h,onWheelScroll:u,onResize:f,...m}=i,p=Fs(zn,t),[x,g]=N.useState(null),v=Os(e,P=>g(P)),y=N.useRef(null),S=N.useRef(""),j=p.viewport,E=s.content-s.viewport,C=Hi(u),k=Hi(d),_=gf(f,10);function T(P){if(y.current){const R=P.clientX-y.current.left,M=P.clientY-y.current.top;h({x:R,y:M})}}return N.useEffect(()=>{const P=R=>{const M=R.target;(x==null?void 0:x.contains(M))&&C(R,E)};return document.addEventListener("wheel",P,{passive:!1}),()=>document.removeEventListener("wheel",P,{passive:!1})},[j,x,E,C]),N.useEffect(k,[s,k]),zl(x,_),zl(p.content,_),o.jsx(ZC,{scope:t,scrollbar:x,hasThumb:n,onThumbChange:Hi(r),onThumbPointerUp:Hi(a),onThumbPositionChange:k,onThumbPointerDown:Hi(l),children:o.jsx(Gt.div,{...m,ref:v,style:{position:"absolute",...m.style},onPointerDown:Ht(i.onPointerDown,P=>{P.button===0&&(P.target.setPointerCapture(P.pointerId),y.current=x.getBoundingClientRect(),S.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),T(P))}),onPointerMove:Ht(i.onPointerMove,T),onPointerUp:Ht(i.onPointerUp,P=>{const R=P.target;R.hasPointerCapture(P.pointerId)&&R.releasePointerCapture(P.pointerId),document.body.style.webkitUserSelect=S.current,p.viewport&&(p.viewport.style.scrollBehavior=""),y.current=null})})})}),Cu="ScrollAreaThumb",Sy=N.forwardRef((i,e)=>{const{forceMount:t,...s}=i,n=Ay(Cu,i.__scopeScrollArea);return o.jsx($l,{present:t||n.hasThumb,children:o.jsx(QC,{ref:e,...s})})}),QC=N.forwardRef((i,e)=>{const{__scopeScrollArea:t,style:s,...n}=i,r=Fs(Cu,t),a=Ay(Cu,t),{onThumbPositionChange:l}=a,d=Os(e,f=>a.onThumbChange(f)),h=N.useRef(void 0),u=gf(()=>{h.current&&(h.current(),h.current=void 0)},100);return N.useEffect(()=>{const f=r.viewport;if(f){const m=()=>{if(u(),!h.current){const p=s_(f,l);h.current=p,l()}};return l(),f.addEventListener("scroll",m),()=>f.removeEventListener("scroll",m)}},[r.viewport,u,l]),o.jsx(Gt.div,{"data-state":a.hasThumb?"visible":"hidden",...n,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:Ht(i.onPointerDownCapture,f=>{const p=f.target.getBoundingClientRect(),x=f.clientX-p.left,g=f.clientY-p.top;a.onThumbPointerDown({x,y:g})}),onPointerUp:Ht(i.onPointerUp,a.onThumbPointerUp)})});Sy.displayName=Cu;var eg="ScrollAreaCorner",jy=N.forwardRef((i,e)=>{const t=Fs(eg,i.__scopeScrollArea),s=!!(t.scrollbarX&&t.scrollbarY);return t.type!=="scroll"&&s?o.jsx(e_,{...i,ref:e}):null});jy.displayName=eg;var e_=N.forwardRef((i,e)=>{const{__scopeScrollArea:t,...s}=i,n=Fs(eg,t),[r,a]=N.useState(0),[l,d]=N.useState(0),h=!!(r&&l);return zl(n.scrollbarX,()=>{var f;const u=((f=n.scrollbarX)==null?void 0:f.offsetHeight)||0;n.onCornerHeightChange(u),d(u)}),zl(n.scrollbarY,()=>{var f;const u=((f=n.scrollbarY)==null?void 0:f.offsetWidth)||0;n.onCornerWidthChange(u),a(u)}),h?o.jsx(Gt.div,{...s,ref:e,style:{width:r,height:l,position:"absolute",right:n.dir==="ltr"?0:void 0,left:n.dir==="rtl"?0:void 0,bottom:0,...i.style}}):null});function _u(i){return i?parseInt(i,10):0}function Ey(i,e){const t=i/e;return isNaN(t)?0:t}function mf(i){const e=Ey(i.viewport,i.content),t=i.scrollbar.paddingStart+i.scrollbar.paddingEnd,s=(i.scrollbar.size-t)*e;return Math.max(s,18)}function t_(i,e,t,s="ltr"){const n=mf(t),r=n/2,a=e||r,l=n-a,d=t.scrollbar.paddingStart+a,h=t.scrollbar.size-t.scrollbar.paddingEnd-l,u=t.content-t.viewport,f=s==="ltr"?[0,u]:[u*-1,0];return Cy([d,h],f)(i)}function Ax(i,e,t="ltr"){const s=mf(e),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=e.scrollbar.size-n,a=e.content-e.viewport,l=r-s,d=t==="ltr"?[0,a]:[a*-1,0],h=WC(i,d);return Cy([0,a],[0,l])(h)}function Cy(i,e){return t=>{if(i[0]===i[1]||e[0]===e[1])return e[0];const s=(e[1]-e[0])/(i[1]-i[0]);return e[0]+s*(t-i[0])}}function _y(i,e){return i>0&&i<e}var s_=(i,e=()=>{})=>{let t={left:i.scrollLeft,top:i.scrollTop},s=0;return function n(){const r={left:i.scrollLeft,top:i.scrollTop},a=t.left!==r.left,l=t.top!==r.top;(a||l)&&e(),t=r,s=window.requestAnimationFrame(n)}(),()=>window.cancelAnimationFrame(s)};function gf(i,e){const t=Hi(i),s=N.useRef(0);return N.useEffect(()=>()=>window.clearTimeout(s.current),[]),N.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(t,e)},[t,e])}function zl(i,e){const t=Hi(e);hu(()=>{let s=0;if(i){const n=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(t)});return n.observe(i),()=>{window.cancelAnimationFrame(s),n.unobserve(i)}}},[i,t])}var ky=by,n_=yy,i_=jy;const Ty=N.forwardRef(({className:i,children:e,...t},s)=>o.jsxs(ky,{ref:s,className:be("relative overflow-hidden",i),...t,children:[o.jsx(n_,{className:"h-full w-full rounded-[inherit]",children:e}),o.jsx(Py,{}),o.jsx(i_,{})]}));Ty.displayName=ky.displayName;const Py=N.forwardRef(({className:i,orientation:e="vertical",...t},s)=>o.jsx(Zm,{ref:s,orientation:e,className:be("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",i),...t,children:o.jsx(Sy,{className:"relative flex-1 rounded-full bg-border"})}));Py.displayName=Zm.displayName;Ms.workerSrc=`//unpkg.com/pdfjs-dist@${Wm}/build/pdf.worker.min.mjs`;const r_=[{id:"1",title:"Основы генетического питания",author:"Никита Морачковский",description:"Полное руководство по персонализированному питанию на основе генетических данных",coverImage:"/lovable-uploads/3ff2d995-dd9d-496f-9fe9-49348a616e31.png",type:"pdf",previewPages:3,totalPages:120,subscription_required:"basic"},{id:"2",title:"Метаболизм и здоровье",author:"Никита Морачковский",description:"Глубокое понимание метаболических процессов для оптимизации здоровья",coverImage:"/lovable-uploads/4e6e84c7-600e-46c2-8395-3610512dbe41.png",type:"pdf",previewPages:5,totalPages:200,subscription_required:"advanced"},{id:"3",title:"Продвинутая нутригенетика",author:"Никита Морачковский",description:"Профессиональное руководство по применению генетических данных в практике",coverImage:"/lovable-uploads/6462592d-c9dd-4788-9e48-3497f1bccfdf.png",type:"word",previewPages:2,totalPages:180,subscription_required:"premium"}];function a_(){const{user:i}=Mi(),[e,t]=N.useState(null),[s,n]=N.useState(1),[r,a]=N.useState(null),l=p=>{if(!i)return!1;const x=i.subscription_tier,g=p.subscription_required,v={basic:1,advanced:2,premium:3};return v[x]>=v[g]},d=(p,x)=>p.previewPages&&x<=p.previewPages||l(p),h=({numPages:p})=>{a(p)},u=p=>{t(p),n(1)},f=p=>{e&&d(e,p)?n(p):B1.error("Для просмотра этой страницы необходима подписка")},m=p=>{switch(p){case"basic":return"bg-blue-500";case"advanced":return"bg-purple-500";case"premium":return"bg-amber-500";default:return"bg-gray-500"}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Литература"}),e&&o.jsxs(O,{variant:"outline",size:"sm",onClick:()=>t(null),children:[o.jsx(gg,{className:"w-4 h-4 mr-2"}),"Назад к списку"]})]}),e?o.jsx("div",{className:"space-y-4",children:o.jsxs(Y,{className:"bg-dark-surface p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-foreground",children:e.title}),o.jsx("p",{className:"text-sm text-muted-foreground",children:e.author})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(sc,{className:`${m(e.subscription_required)} text-white border-0`,children:e.subscription_required}),!l(e)&&o.jsxs(sc,{variant:"destructive",children:[o.jsx($f,{className:"w-3 h-3 mr-1"}),"Ограниченный доступ"]})]})]}),o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx(O,{variant:"outline",size:"sm",onClick:()=>f(s-1),disabled:s<=1,children:o.jsx(gg,{className:"w-4 h-4"})}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("span",{className:"text-sm text-muted-foreground",children:["Страница ",s," из ",r||e.totalPages]}),e.previewPages&&!l(e)&&o.jsxs("span",{className:"text-xs text-amber-500",children:["(доступно ",e.previewPages," стр.)"]})]}),o.jsx(O,{variant:"outline",size:"sm",onClick:()=>f(s+1),disabled:s>=(r||e.totalPages||1),children:o.jsx(gw,{className:"w-4 h-4"})})]}),o.jsx("div",{className:"border border-border rounded-lg overflow-hidden bg-white",children:e.type==="pdf"?o.jsx(Ty,{className:"h-[600px]",children:o.jsx("div",{className:"flex justify-center p-4",children:d(e,s)?o.jsx(RC,{file:e.fileUrl||"/sample.pdf",onLoadSuccess:h,loading:o.jsx("div",{className:"flex items-center justify-center h-96",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}),error:o.jsxs("div",{className:"flex flex-col items-center justify-center h-96 space-y-4",children:[o.jsx(jf,{className:"w-16 h-16 text-muted-foreground"}),o.jsxs("p",{className:"text-center text-muted-foreground",children:["PDF файл недоступен.",o.jsx("br",{}),"Это демо-версия просмотрщика."]})]}),children:o.jsx(HC,{pageNumber:s,width:Math.min(800,window.innerWidth-100),renderTextLayer:!1,renderAnnotationLayer:!1})}):o.jsxs("div",{className:"flex flex-col items-center justify-center h-96 space-y-4 bg-gray-100 rounded",children:[o.jsx($f,{className:"w-16 h-16 text-muted-foreground"}),o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"font-medium text-gray-900",children:"Страница заблокирована"}),o.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Для доступа к полному содержанию необходима подписка ",e.subscription_required]})]}),o.jsx(O,{children:"Оформить подписку"})]})})}):o.jsxs("div",{className:"flex flex-col items-center justify-center h-96 space-y-4",children:[o.jsx(jf,{className:"w-16 h-16 text-primary"}),o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"font-medium text-foreground",children:"Word документ"}),o.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:e.title})]}),l(e)?o.jsxs(O,{children:[o.jsx(Bf,{className:"w-4 h-4 mr-2"}),"Скачать документ"]}):o.jsxs("div",{className:"text-center space-y-2",children:[o.jsxs("p",{className:"text-sm text-amber-600",children:["Для скачивания необходима подписка ",e.subscription_required]}),o.jsx(O,{children:"Оформить подписку"})]})]})})]})}):o.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:r_.map(p=>o.jsxs(Y,{className:"bg-dark-surface overflow-hidden hover:shadow-lg transition-shadow",children:[o.jsxs("div",{className:"relative",children:[o.jsx("img",{src:p.coverImage,alt:p.title,className:"w-full h-48 object-cover"}),o.jsx("div",{className:"absolute top-2 right-2",children:o.jsx(sc,{className:`${m(p.subscription_required)} text-white border-0`,children:p.subscription_required})}),p.type==="word"&&o.jsx("div",{className:"absolute top-2 left-2",children:o.jsxs(sc,{variant:"secondary",children:[o.jsx(jf,{className:"w-3 h-3 mr-1"}),"Word"]})})]}),o.jsxs("div",{className:"p-4 space-y-3",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-foreground line-clamp-2",children:p.title}),o.jsx("p",{className:"text-sm text-muted-foreground",children:p.author})]}),o.jsx("p",{className:"text-sm text-muted-foreground line-clamp-3",children:p.description}),o.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[o.jsxs("span",{children:["Предпросмотр: ",p.previewPages," стр."]}),o.jsxs("span",{children:["Всего: ",p.totalPages," стр."]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(O,{size:"sm",className:"flex-1",onClick:()=>u(p),disabled:!l(p)&&!p.previewPages,children:[o.jsx(vw,{className:"w-4 h-4 mr-2"}),l(p)?"Читать":"Предпросмотр"]}),l(p)&&o.jsx(O,{size:"sm",variant:"outline",children:o.jsx(Bf,{className:"w-4 h-4"})})]})]})]},p.id))})]})}function o_(){const{user:i}=Mi(),e=Ss(),t=[{id:"1",title:"Основы генетического здоровья",description:"Введение в систему Морачковского. Понимание базовых принципов.",youtubeId:"ZU2yWlpmjNA",isLocked:!1,requiredTier:"basic"},{id:"2",title:"Правильное питание по генотипу",description:"Как составить персональный рацион на основе генетических данных.",youtubeId:"ZU2yWlpmjNA",isLocked:(i==null?void 0:i.subscription_tier)==="basic",requiredTier:"advanced"},{id:"3",title:"Метаболизм и гормоны",description:"Регуляция обмена веществ через питание и образ жизни.",youtubeId:"ZU2yWlpmjNA",isLocked:(i==null?void 0:i.subscription_tier)==="basic",requiredTier:"advanced"},{id:"4",title:"Детоксикация организма",description:"Естественные методы очищения организма от токсинов.",youtubeId:"ZU2yWlpmjNA",isLocked:(i==null?void 0:i.subscription_tier)==="basic",requiredTier:"advanced"},{id:"5",title:"Спорт и генетика",description:"Подбор физических нагрузок на основе генетических особенностей.",youtubeId:"ZU2yWlpmjNA",isLocked:(i==null?void 0:i.subscription_tier)!=="premium",requiredTier:"premium"},{id:"6",title:"Сон и восстановление",description:"Оптимизация сна для максимального восстановления организма.",youtubeId:"ZU2yWlpmjNA",isLocked:(i==null?void 0:i.subscription_tier)!=="premium",requiredTier:"premium"},{id:"7",title:"Стресс и психосоматика",description:"Управление стрессом через понимание генетических предрасположенностей.",youtubeId:"ZU2yWlpmjNA",isLocked:(i==null?void 0:i.subscription_tier)!=="premium",requiredTier:"premium"},{id:"8",title:"Долголетие и антиэйджинг",description:"Генетические факторы старения и методы их коррекции.",youtubeId:"ZU2yWlpmjNA",isLocked:(i==null?void 0:i.subscription_tier)!=="premium",requiredTier:"premium"}],s=[{id:"1",title:"Чек-лист базовых принципов",description:"PDF руководство с основными принципами здорового питания",fileUrl:"#",isLocked:!1,requiredTier:"basic"},{id:"2",title:"Таблица продуктов по ГИ",description:"Подробная таблица гликемических индексов продуктов",fileUrl:"#",isLocked:(i==null?void 0:i.subscription_tier)==="basic",requiredTier:"advanced"},{id:"3",title:"Рецепты здорового питания",description:"Сборник из 50 рецептов для здорового образа жизни",fileUrl:"#",isLocked:(i==null?void 0:i.subscription_tier)==="basic",requiredTier:"advanced"},{id:"4",title:"Персональный план детокса",description:"Индивидуальная программа детоксикации на 30 дней",fileUrl:"#",isLocked:(i==null?void 0:i.subscription_tier)!=="premium",requiredTier:"premium"}];return o.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[o.jsxs("div",{className:"bg-primary px-4 py-6",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx(O,{variant:"ghost",size:"sm",onClick:()=>e("/"),className:"text-primary-foreground hover:bg-white/10 p-2",children:o.jsx(Yu,{size:20})}),o.jsx("h1",{className:"text-xl font-bold text-primary-foreground",children:"Генетическая система Морачковского"})]}),o.jsx("p",{className:"text-primary-foreground/80 text-sm",children:"Темы / Меню / Чеклисты"})]}),o.jsxs("div",{className:"p-4 space-y-6",children:[o.jsxs(Y,{className:"bg-dark-surface p-4 space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Станьте частью клуба MisterMo"}),o.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[o.jsxs("div",{className:"relative h-24 overflow-hidden rounded-lg",children:[o.jsx("div",{className:"absolute inset-0",children:o.jsx("img",{src:"/lovable-uploads/01943daa-db09-4dcb-a70c-9df8145da00e.png",alt:"Сканер еды",className:"w-full h-full object-cover"})}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent"}),o.jsx("div",{className:"absolute bottom-1 left-1 right-1 z-10",children:o.jsx(O,{size:"sm",className:"w-full text-[8px] bg-primary text-black font-semibold hover:bg-primary/90 h-6",onClick:()=>e("/scanner"),children:"Сканер еды"})})]}),o.jsxs("div",{className:"relative h-24 overflow-hidden rounded-lg",children:[o.jsx("div",{className:"absolute inset-0",children:o.jsx("img",{src:"/lovable-uploads/90313f9c-2509-4cfa-a9b3-60432ef88b82.png",alt:"Группа поддержки",className:"w-full h-full object-cover"})}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent"}),o.jsx("div",{className:"absolute bottom-1 left-1 right-1 z-10",children:o.jsx(O,{size:"sm",className:"w-full text-[8px] bg-primary text-black font-semibold hover:bg-primary/90 h-6",onClick:()=>e("/chat"),children:"Группа поддержки"})})]}),o.jsxs("div",{className:"relative h-24 overflow-hidden rounded-lg",children:[o.jsx("div",{className:"absolute inset-0",children:o.jsx("img",{src:"/lovable-uploads/26f342d5-a3af-463a-9172-28bd4aafec13.png",alt:"Фитнес и фейсбилдинг",className:"w-full h-full object-cover"})}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent"}),o.jsx("div",{className:"absolute bottom-1 left-1 right-1 z-10",children:o.jsx(O,{size:"sm",className:"w-full text-[8px] bg-primary text-black font-semibold hover:bg-primary/90 h-6",onClick:()=>e("/workout"),children:"Фитнес и фейсбилдинг"})})]})]})]}),o.jsx(Y,{className:"overflow-hidden bg-gradient-to-r from-primary to-primary/80",children:o.jsxs("div",{className:"flex items-center p-6 min-h-[200px]",children:[o.jsxs("div",{className:"flex-1 text-primary-foreground",children:[o.jsx("h2",{className:"text-xl font-bold mb-2",children:"Морачковский Никита"}),o.jsxs("p",{className:"text-primary-foreground/90 text-sm leading-relaxed",children:["Ученый-исследователь.",o.jsx("br",{}),"Автор книг и методик.",o.jsx("br",{}),"Эксперт в области генетики и эндокринологии.",o.jsx("br",{}),"Студент Stanford Medicine.",o.jsx("br",{}),"Создатель одноименной системы Генетического здоровья.",o.jsx("br",{}),"Создатель системы по выходу из голода за один день."]})]}),o.jsxs("div",{className:"flex flex-col items-center ml-4",children:[o.jsx("div",{className:"w-44 h-full rounded-lg overflow-hidden bg-white/10 mb-3",children:o.jsx("img",{src:"/lovable-uploads/6462592d-c9dd-4788-9e48-3497f1bccfdf.png",alt:"Мистер Мо",className:"w-full h-full object-cover object-top"})}),o.jsxs("div",{className:"flex flex-col items-center gap-2",children:[o.jsx("img",{src:"/lovable-uploads/18820993-37f1-4303-ada6-f3e6af33c1cb.png",alt:"Morachkovskiy Academy",className:"w-36 h-auto"}),o.jsx("img",{src:"/lovable-uploads/94577d3d-a8f3-4e5d-b4e0-63445a47051f.png",alt:"Stanford Medicine",className:"h-9"})]})]})]})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Обучающие видео"}),o.jsx("div",{className:"grid grid-cols-1 gap-4",children:t.map((n,r)=>o.jsxs(Y,{className:"overflow-hidden",children:[o.jsx("div",{className:"relative",children:o.jsx("div",{className:"aspect-video relative",children:o.jsx("iframe",{src:`https://www.youtube.com/embed/${n.youtubeId}`,title:n.title,className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})}),o.jsxs("div",{className:"p-4",children:[o.jsx("h3",{className:"font-semibold mb-2",children:n.title}),o.jsx("p",{className:"text-sm text-muted-foreground",children:n.description})]})]},n.id))})]}),o.jsx(a_,{}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Материалы для скачивания"}),o.jsx("div",{className:"grid grid-cols-1 gap-3",children:s.map(n=>o.jsx(Y,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-medium mb-1",children:n.title}),o.jsx("p",{className:"text-sm text-muted-foreground",children:n.description})]}),o.jsx("div",{className:"ml-4",children:o.jsxs(O,{size:"sm",children:[o.jsx(Bf,{className:"w-4 h-4 mr-2"}),"Скачать"]})})]})},n.id))})]})]})]})}function l_(i){const e=N.useRef({value:i,previous:i});return N.useMemo(()=>(e.current.value!==i&&(e.current.previous=e.current.value,e.current.value=i),e.current.previous),[i])}var xf="Checkbox",[c_,R_]=ch(xf),[d_,tg]=c_(xf);function h_(i){const{__scopeCheckbox:e,checked:t,children:s,defaultChecked:n,disabled:r,form:a,name:l,onCheckedChange:d,required:h,value:u="on",internal_do_not_use_render:f}=i,[m,p]=ew({prop:t,defaultProp:n??!1,onChange:d,caller:xf}),[x,g]=N.useState(null),[v,y]=N.useState(null),S=N.useRef(!1),j=x?!!a||!!x.closest("form"):!0,E={checked:m,disabled:r,setChecked:p,control:x,setControl:g,name:l,form:a,value:u,hasConsumerStoppedPropagationRef:S,required:h,defaultChecked:kr(n)?!1:n,isFormControl:j,bubbleInput:v,setBubbleInput:y};return o.jsx(d_,{scope:e,...E,children:u_(f)?f(E):s})}var Ry="CheckboxTrigger",My=N.forwardRef(({__scopeCheckbox:i,onKeyDown:e,onClick:t,...s},n)=>{const{control:r,value:a,disabled:l,checked:d,required:h,setControl:u,setChecked:f,hasConsumerStoppedPropagationRef:m,isFormControl:p,bubbleInput:x}=tg(Ry,i),g=Os(n,u),v=N.useRef(d);return N.useEffect(()=>{const y=r==null?void 0:r.form;if(y){const S=()=>f(v.current);return y.addEventListener("reset",S),()=>y.removeEventListener("reset",S)}},[r,f]),o.jsx(Gt.button,{type:"button",role:"checkbox","aria-checked":kr(d)?"mixed":d,"aria-required":h,"data-state":Fy(d),"data-disabled":l?"":void 0,disabled:l,value:a,...s,ref:g,onKeyDown:Ht(e,y=>{y.key==="Enter"&&y.preventDefault()}),onClick:Ht(t,y=>{f(S=>kr(S)?!0:!S),x&&p&&(m.current=y.isPropagationStopped(),m.current||y.stopPropagation())})})});My.displayName=Ry;var sg=N.forwardRef((i,e)=>{const{__scopeCheckbox:t,name:s,checked:n,defaultChecked:r,required:a,disabled:l,value:d,onCheckedChange:h,form:u,...f}=i;return o.jsx(h_,{__scopeCheckbox:t,checked:n,defaultChecked:r,disabled:l,required:a,onCheckedChange:h,name:s,form:u,value:d,internal_do_not_use_render:({isFormControl:m})=>o.jsxs(o.Fragment,{children:[o.jsx(My,{...f,ref:e,__scopeCheckbox:t}),m&&o.jsx(Oy,{__scopeCheckbox:t})]})})});sg.displayName=xf;var Ly="CheckboxIndicator",Iy=N.forwardRef((i,e)=>{const{__scopeCheckbox:t,forceMount:s,...n}=i,r=tg(Ly,t);return o.jsx($l,{present:s||kr(r.checked)||r.checked===!0,children:o.jsx(Gt.span,{"data-state":Fy(r.checked),"data-disabled":r.disabled?"":void 0,...n,ref:e,style:{pointerEvents:"none",...i.style}})})});Iy.displayName=Ly;var Dy="CheckboxBubbleInput",Oy=N.forwardRef(({__scopeCheckbox:i,...e},t)=>{const{control:s,hasConsumerStoppedPropagationRef:n,checked:r,defaultChecked:a,required:l,disabled:d,name:h,value:u,form:f,bubbleInput:m,setBubbleInput:p}=tg(Dy,i),x=Os(t,p),g=l_(r),v=db(s);N.useEffect(()=>{const S=m;if(!S)return;const j=window.HTMLInputElement.prototype,C=Object.getOwnPropertyDescriptor(j,"checked").set,k=!n.current;if(g!==r&&C){const _=new Event("click",{bubbles:k});S.indeterminate=kr(r),C.call(S,kr(r)?!1:r),S.dispatchEvent(_)}},[m,g,r,n]);const y=N.useRef(kr(r)?!1:r);return o.jsx(Gt.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??y.current,required:l,disabled:d,name:h,value:u,form:f,...e,tabIndex:-1,ref:x,style:{...e.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});Oy.displayName=Dy;function u_(i){return typeof i=="function"}function kr(i){return i==="indeterminate"}function Fy(i){return kr(i)?"indeterminate":i?"checked":"unchecked"}const Vr=N.forwardRef(({className:i,...e},t)=>o.jsx(sg,{ref:t,className:be("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",i),...e,children:o.jsx(Iy,{className:be("flex items-center justify-center text-current"),children:o.jsx(fm,{className:"h-4 w-4"})})}));Vr.displayName=sg.displayName;const f_=()=>["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"][new Date().getDay()],p_=()=>[{id:"wake-up",title:"Утренний подъем до 7 утра"},{id:"weigh",title:"Взвесится"},{id:"shower",title:"Контрастный душ",hasVideo:!0,videoUrl:"/videos/contrast-shower.mp4"},{id:"workout",title:"Разминка 5 минут",hasVideo:!0,videoUrl:"/videos/workout.mp4"},{id:"supplements-morning",title:"Прием добавок",subtasks:[{id:"zma",title:"ZMA 3шт",hasInfo:!0,infoContent:"zma"},{id:"collagen",title:"COLLAGEN мерная ложка",hasInfo:!0,infoContent:"collagen"},{id:"vitamin-c",title:"VITAMIN C 1шт",hasInfo:!0,infoContent:"vitamin-c"}]},{id:"motivation",title:"Мотивирующее голосовое от меня",hasAudio:!0,audioUrl:"/audio/motivation-morning.mp3"},{id:"breathing",title:"Дыхательная гимнастика 10-15 минут",hasVideo:!0,videoUrl:"/videos/breathing.mp4"},{id:"work-time",title:"Время на сборы и работа"}],Nx=(i=!1)=>[{id:"social-share",title:"НЕ ЗАБЫВАЙТЕ ДЕЛИТЬСЯ В СОЦ.СЕТЯХ ВАШИМ ПРОГРЕССОМ. ДЕЛАЙТЕ СКРИНШОТ СВОЕГО ПРОГРЕССА, МОТИВИРУЙТЕ БЛИЗКИХ!!!",hasVideo:!0,videoUrl:"/videos/social-sharing.mp4"},...i?[{id:"lunch-fasting",title:"Во время обеда: представьте, вы супер мен! Вы можете легко не есть 2 дня 🥳"},{id:"walk-lunch",title:"20 минут прогулка",hasAudio:!0,audioUrl:"/audio/walk-motivation.mp3"}]:[{id:"lunch-prep",title:"Готовимся к обеду. Оцениваем усталость",hasVideo:!0,videoUrl:"/videos/inner-child.mp4"},{id:"apple-vinegar-lunch",title:"За 15 минут до приёма пищи: Яблочный уксус 1шт",hasInfo:!0,infoContent:"apple-vinegar"},{id:"berberin-lunch",title:"За 15 минут до приёма пищи: Berberin 1шт",hasInfo:!0,infoContent:"berberin"},{id:"lunch-time",title:"Время приёма пищи",hasVideo:!0,videoUrl:"/videos/plate-setup.mp4",subtasks:[{id:"omega3-lunch",title:"Омега3 - 4шт",hasInfo:!0,infoContent:"omega-3"},{id:"vitamin-d3-lunch",title:"Д3 по схеме",hasInfo:!0,infoContent:"d3-k2"},{id:"women-complex-lunch",title:"Женский комплекс 3шт",hasInfo:!0,infoContent:"women-complex"}]},{id:"mindful-eating-lunch",title:"Осознанно посмотреть на порцию. Оценить её"},{id:"slow-eating-lunch",title:"Едим не спеша. Не набираем ложку пока не прожевали и не проглотили"},{id:"walk-after-lunch",title:"После приема пищи, 5 минут прогулка",hasAudio:!0,audioUrl:"/audio/walk-motivation.mp3"}],...i?[{id:"evening-reflection",title:"Вечером оцениваем усталость по сравнению с днями когда едим"},{id:"walk-evening-fasting",title:"20 минут походить",hasAudio:!0,audioUrl:"/audio/evening-motivation.mp3"}]:[{id:"dinner-prep",title:"Готовимся к ужину. Оцениваем усталость"},{id:"apple-vinegar-dinner",title:"За 15 минут до приёма пищи: Яблочный уксус 1шт",hasInfo:!0,infoContent:"apple-vinegar"},{id:"berberin-dinner",title:"За 15 минут до приёма пищи: Berberin 1шт",hasInfo:!0,infoContent:"berberin"},{id:"dinner-time",title:"Время приёма пищи",hasVideo:!0,videoUrl:"/videos/plate-setup.mp4"},{id:"mindful-eating-dinner",title:"Осознанно посмотреть на порцию. Оценить её"},{id:"slow-eating-dinner",title:"Едим не спеша. Не набираем ложку пока не прожевали и не проглотили"},{id:"walk-after-dinner",title:"После приема пищи, 5 минут походить",hasAudio:!0,audioUrl:"/audio/evening-motivation.mp3"}]],Sx=()=>[{id:"fat-burner",title:"21:00 прием Жиросжигателя 2шт",hasInfo:!0,infoContent:"fat-burner"},{id:"evening-breathing",title:"Дыхательная гимнастика 10-15 минут",hasVideo:!0,videoUrl:"/videos/breathing.mp4"},{id:"good-habits",title:"Хорошие привычки перед сном",subtasks:[{id:"english",title:"Изучение английского 15 минут (memrise приложение)"},{id:"wikipedia",title:"Википедия - случайная статья"},{id:"morachkovsky",title:"Посмотреть одну тему Морачковского"}]},{id:"sleep",title:"Отбой не позже 23:00"}],m_=()=>[{id:"wake-up",title:"Утренний подъем до 7 утра"},{id:"weigh",title:"Взвесится"},{id:"shower",title:"Контрастный душ",hasVideo:!0,videoUrl:"/videos/contrast-shower.mp4"},{id:"workout",title:"Разминка 5 минут",hasVideo:!0,videoUrl:"/videos/workout.mp4"},{id:"supplements-morning",title:"Прием добавок",subtasks:[{id:"zma",title:"ZMA 3шт"},{id:"collagen",title:"COLLAGEN мерная ложка"},{id:"vitamin-c",title:"VITAMIN C 1шт"}]},{id:"reflection",title:"Подумать о том что это еще один день в вашей жизни, и он вас приближает к смерти, поэтому нужно прожить его полноценно и интересно - 2 минуты"},{id:"breathing",title:"Дыхательная гимнастика 10-15 минут",hasVideo:!0,videoUrl:"/videos/breathing.mp4"},{id:"work-time",title:"Время на сборы и работа"}];function g_(){const{todayProgress:i,toggleTask:e,getProgressPercentage:t,updateProgress:s}=Lm(),n=Ss(),[r,a]=N.useState(!1),[l,d]=N.useState(!1),[h,u]=N.useState(!1),[f,m]=N.useState(null),[p,x]=N.useState(null),[g,v]=N.useState(null),[y,S]=N.useState(null),[j,E]=N.useState(""),[C,k]=N.useState(!1),[_,T]=N.useState({chest:"",waist:"",hips:""});N.useEffect(()=>{const L=new Date().getDay();a(L===1),d(L===0)},[]);const R=r&&h?[{id:"morning",title:"Утреннее время",timeRange:"до 10:00",icon:wh,color:"from-yellow-500/20 to-orange-500/20 border-yellow-500/30",tasks:m_()},{id:"day",title:"Дневное время",timeRange:"10:00 - 21:00",icon:Hn,color:"from-blue-500/20 to-cyan-500/20 border-blue-500/30",tasks:Nx(!0)},{id:"evening",title:"Вечернее время",timeRange:"21:00 - 24:00",icon:bg,color:"from-purple-500/20 to-indigo-500/20 border-purple-500/30",tasks:Sx()}]:[{id:"morning",title:"Утреннее время",timeRange:"до 10:00",icon:wh,color:"from-yellow-500/20 to-orange-500/20 border-yellow-500/30",tasks:p_()},{id:"day",title:"Дневное время",timeRange:"10:00 - 21:00",icon:Hn,color:"from-blue-500/20 to-cyan-500/20 border-blue-500/30",tasks:Nx(!1)},{id:"evening",title:"Вечернее время",timeRange:"21:00 - 24:00",icon:bg,color:"from-purple-500/20 to-indigo-500/20 border-purple-500/30",tasks:Sx()}],M=(i==null?void 0:i.completed_tasks)||[],F=t(),$=L=>M.includes(L),B=L=>{e(L)},ee=async()=>{(_.chest||_.waist||_.hips)&&await s({chest_measurement:parseFloat(_.chest)||void 0,waist_measurement:parseFloat(_.waist)||void 0,hips_measurement:parseFloat(_.hips)||void 0})},I=async()=>{if(j)try{await s({weight:parseFloat(j)}),E(""),k(!1),B("weigh")}catch(L){console.error("Error saving weight:",L)}},D=({task:L,level:te=0})=>{var ue;return o.jsxs("div",{className:`space-y-2 ${te>0?"ml-6":""}`,children:[o.jsxs("div",{className:"flex items-start gap-3 p-3 bg-card/50 rounded-lg border border-border/50",children:[o.jsx(Vr,{checked:$(L.id),onCheckedChange:()=>B(L.id),className:"mt-1"}),o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsx("p",{className:`text-sm ${$(L.id)?"line-through text-muted-foreground":""}`,children:L.title}),o.jsxs("div",{className:"flex gap-2 flex-wrap",children:[L.id==="weigh"&&o.jsxs(O,{size:"sm",variant:"outline",onClick:()=>k(!0),className:"h-7 px-2 text-xs",children:[o.jsx(Cw,{className:"w-3 h-3 mr-1"}),"Записать вес"]}),L.hasVideo&&o.jsxs(O,{size:"sm",variant:"default",onClick:()=>m(L.videoUrl||""),className:"h-7 px-2 text-xs bg-primary hover:bg-primary/90 text-primary-foreground",children:[o.jsx(Xt,{className:"w-3 h-3 mr-1"}),"Видео"]}),L.hasAudio&&o.jsxs(O,{size:"sm",variant:"default",onClick:()=>x(L.audioUrl||""),className:"h-7 px-2 text-xs bg-primary hover:bg-primary/90 text-primary-foreground",children:[o.jsx(Xt,{className:"w-3 h-3 mr-1"}),"Аудио"]}),L.id==="social-share"&&o.jsxs("div",{className:"flex gap-2 flex-wrap mt-2",children:[o.jsxs(O,{size:"sm",variant:"default",onClick:()=>window.open("https://instagram.com/morachkovskiy","_blank"),className:"h-7 px-2 text-xs bg-primary hover:bg-primary/90 text-primary-foreground",children:[o.jsx(zx,{className:"w-3 h-3 mr-1"}),"Instagram"]}),o.jsxs(O,{size:"sm",variant:"default",onClick:()=>window.open("https://tiktok.com/@morachkovskiy","_blank"),className:"h-7 px-2 text-xs bg-primary hover:bg-primary/90 text-primary-foreground",children:[o.jsx(Iw,{className:"w-3 h-3 mr-1"}),"TikTok"]}),o.jsxs(O,{size:"sm",variant:"default",onClick:()=>window.open("https://youtube.com/@morachkovskiy","_blank"),className:"h-7 px-2 text-xs bg-primary hover:bg-primary/90 text-primary-foreground",children:[o.jsx(Aw,{className:"w-3 h-3 mr-1"}),"YouTube"]}),o.jsxs(O,{size:"sm",variant:"default",onClick:()=>window.open("https://t.me/morachkovskiy","_blank"),className:"h-7 px-2 text-xs bg-primary hover:bg-primary/90 text-primary-foreground",children:[o.jsx(_w,{className:"w-3 h-3 mr-1"}),"Telegram"]})]}),L.hasInfo&&o.jsxs(O,{size:"sm",variant:"default",onClick:()=>S(L.infoContent||""),className:"h-7 px-2 text-xs bg-primary hover:bg-primary/90 text-primary-foreground",children:[o.jsx(zf,{className:"w-3 h-3 mr-1"}),"Подробнее"]})]})]})]}),(ue=L.subtasks)==null?void 0:ue.map(q=>o.jsx("div",{className:"ml-6",children:o.jsxs("div",{className:"flex items-start gap-3 p-2 bg-muted/30 rounded-lg border border-border/30",children:[o.jsx(Vr,{checked:$(q.id),onCheckedChange:()=>B(q.id),className:"mt-1"}),o.jsxs("div",{className:"flex-1 space-y-1",children:[o.jsx("p",{className:`text-sm ${$(q.id)?"line-through text-muted-foreground":""}`,children:q.title}),q.hasInfo&&o.jsxs(O,{size:"sm",variant:"default",onClick:()=>S(q.infoContent||""),className:"h-6 px-2 text-xs bg-primary hover:bg-primary/90 text-primary-foreground",children:[o.jsx(zf,{className:"w-3 h-3 mr-1"}),"Подробнее"]})]})]})},q.id))]})},V=({block:L,index:te})=>{const ue=L.icon;return o.jsxs(Y,{className:`p-4 bg-gradient-to-br ${L.color} border-2 relative overflow-hidden`,children:[o.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 opacity-10",children:o.jsx(ue,{size:80,className:"text-current"})}),o.jsxs("div",{className:"relative z-10 space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"p-2 rounded-full bg-background/20",children:o.jsx(ue,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-lg",children:L.title}),o.jsx("p",{className:"text-sm text-muted-foreground",children:L.timeRange})]})]}),o.jsx("div",{className:"space-y-3",children:L.tasks.map((q,J)=>o.jsxs("div",{children:[o.jsx("div",{className:"flex items-center gap-2 mb-2",children:o.jsx("span",{className:"text-xs bg-primary/20 text-primary px-2 py-1 rounded-full font-medium",children:J+1})}),o.jsx(D,{task:q})]},q.id))})]})]})};return o.jsxs("div",{className:"min-h-screen bg-background p-4 pb-24",children:[o.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[o.jsxs(Y,{className:"bg-dark-surface p-4 space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Станьте частью клуба MisterMo"}),o.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[o.jsxs("div",{className:"relative h-24 overflow-hidden rounded-lg",children:[o.jsx("div",{className:"absolute inset-0",children:o.jsx("img",{src:"/lovable-uploads/01943daa-db09-4dcb-a70c-9df8145da00e.png",alt:"Сканер еды",className:"w-full h-full object-cover"})}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent"}),o.jsx("div",{className:"absolute bottom-1 left-1 right-1 z-10",children:o.jsx(O,{size:"sm",className:"w-full text-[8px] bg-primary text-black font-semibold hover:bg-primary/90 h-6",onClick:()=>n("/scanner"),children:"Сканер еды"})})]}),o.jsxs("div",{className:"relative h-24 overflow-hidden rounded-lg",children:[o.jsx("div",{className:"absolute inset-0",children:o.jsx("img",{src:"/lovable-uploads/90313f9c-2509-4cfa-a9b3-60432ef88b82.png",alt:"Группа поддержки",className:"w-full h-full object-cover"})}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent"}),o.jsx("div",{className:"absolute bottom-1 left-1 right-1 z-10",children:o.jsx(O,{size:"sm",className:"w-full text-[8px] bg-primary text-black font-semibold hover:bg-primary/90 h-6",onClick:()=>n("/chat"),children:"Группа поддержки"})})]}),o.jsxs("div",{className:"relative h-24 overflow-hidden rounded-lg",children:[o.jsx("div",{className:"absolute inset-0",children:o.jsx("img",{src:"/lovable-uploads/26f342d5-a3af-463a-9172-28bd4aafec13.png",alt:"Фитнес и фейсбилдинг",className:"w-full h-full object-cover"})}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent"}),o.jsx("div",{className:"absolute bottom-1 left-1 right-1 z-10",children:o.jsx(O,{size:"sm",className:"w-full text-[8px] bg-primary text-black font-semibold hover:bg-primary/90 h-6",onClick:()=>n("/workout"),children:"Фитнес и фейсбилдинг"})})]})]})]}),o.jsxs("div",{className:"text-center space-y-4",children:[o.jsx("h1",{className:"text-2xl font-bold",children:"Расписание дня"}),o.jsx("p",{className:"text-muted-foreground",children:f_()}),o.jsx(Y,{className:"p-4 bg-gradient-to-r from-primary/10 to-secondary/10 border-primary/20",children:o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{children:"Прогресс дня"}),o.jsxs("span",{className:"font-bold text-primary",children:[F,"%"]})]}),o.jsx(nf,{value:F,className:"w-full h-3"})]})})]}),r&&o.jsxs(Y,{className:"p-4 border-2 border-orange-500/30 bg-gradient-to-r from-orange-500/10 to-yellow-500/10",children:[o.jsx("h3",{className:"font-semibold mb-3 text-orange-800 dark:text-orange-200",children:"Выберите режим дня:"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Vr,{checked:h,onCheckedChange:L=>u(L)}),o.jsx("label",{className:"text-sm",children:"У меня сегодня день голода"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Vr,{checked:!h,onCheckedChange:L=>u(!L)}),o.jsx("label",{className:"text-sm",children:"Я не придерживаюсь голода"})]})]})]}),l&&o.jsxs(Y,{className:"p-4 border-2 border-green-500/30 bg-gradient-to-r from-green-500/10 to-emerald-500/10",children:[o.jsx("h3",{className:"font-semibold mb-3 text-green-800 dark:text-green-200",children:"Еженедельные измерения"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx(tt,{htmlFor:"chest",children:"Охват груди (см)"}),o.jsx(et,{id:"chest",type:"number",value:_.chest,onChange:L=>T(te=>({...te,chest:L.target.value})),placeholder:"Введите значение"})]}),o.jsxs("div",{children:[o.jsx(tt,{htmlFor:"waist",children:"Охват талии (см)"}),o.jsx(et,{id:"waist",type:"number",value:_.waist,onChange:L=>T(te=>({...te,waist:L.target.value})),placeholder:"Введите значение"})]}),o.jsxs("div",{children:[o.jsx(tt,{htmlFor:"hips",children:"Охват бедер (см)"}),o.jsx(et,{id:"hips",type:"number",value:_.hips,onChange:L=>T(te=>({...te,hips:L.target.value})),placeholder:"Введите значение"})]}),o.jsx(O,{onClick:ee,className:"w-full",children:"Сохранить измерения"})]})]}),o.jsx("div",{className:"space-y-6",children:R.map((L,te)=>o.jsxs("div",{children:[o.jsx(V,{block:L,index:te}),L.id==="day"&&o.jsxs(Y,{className:"bg-dark-surface p-4 space-y-4 mt-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Лечение и Профилактика"}),o.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[o.jsxs("div",{className:"relative h-24 overflow-hidden rounded-lg",children:[o.jsx("div",{className:"absolute inset-0",children:o.jsx("img",{src:"/lovable-uploads/68331990-8a00-47ce-9ce6-a7b7263f99a2.png",alt:"Диабет",className:"w-full h-full object-cover"})}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent"}),o.jsx("div",{className:"absolute bottom-1 left-1 right-1 z-10",children:o.jsx(O,{size:"sm",className:"w-full text-[8px] bg-primary text-black font-semibold hover:bg-primary/90 h-6",onClick:()=>n("/diabetes"),children:"ДИАБЕТ"})})]}),o.jsxs("div",{className:"relative h-24 overflow-hidden rounded-lg",children:[o.jsx("div",{className:"absolute inset-0",children:o.jsx("img",{src:"/lovable-uploads/d7360d5e-cd33-4d46-b260-0608445a7f43.png",alt:"Щитовидка",className:"w-full h-full object-cover"})}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent"}),o.jsx("div",{className:"absolute bottom-1 left-1 right-1 z-10",children:o.jsx(O,{size:"sm",className:"w-full text-[8px] bg-primary text-black font-semibold hover:bg-primary/90 h-6",onClick:()=>n("/thyroid"),children:"ЩИТОВИДКА"})})]}),o.jsxs("div",{className:"relative h-24 overflow-hidden rounded-lg",children:[o.jsx("div",{className:"absolute inset-0",children:o.jsx("img",{src:"/lovable-uploads/72380e98-7897-41c1-bd5a-a5572de46d58.png",alt:"Гепатоз",className:"w-full h-full object-cover"})}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent"}),o.jsx("div",{className:"absolute bottom-1 left-1 right-1 z-10",children:o.jsx(O,{size:"sm",className:"w-full text-[8px] bg-primary text-black font-semibold hover:bg-primary/90 h-6",onClick:()=>n("/hepatosis"),children:"ГЕПАТОЗ"})})]})]})]})]},L.id))}),l&&o.jsxs(Y,{className:"p-4 bg-gradient-to-r from-green-500/20 to-emerald-500/20 border-2 border-green-500/30",children:[o.jsx("h3",{className:"font-semibold mb-3 text-green-800 dark:text-green-200",children:"🥳 Воскресные задания"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(Vr,{}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-sm",children:"Поделиться отчётом прогресса за неделю (скриншот) в своих социальных сетях"}),o.jsxs(O,{size:"sm",variant:"outline",className:"mt-2 h-7 px-2 text-xs",children:[o.jsx(Xt,{className:"w-3 h-3 mr-1"}),"Видео: Как это сделать"]})]})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(Vr,{}),o.jsx("p",{className:"text-sm",children:"Написать отзыв!"})]})]})]}),o.jsx(Y,{className:"p-4 bg-gradient-to-r from-primary/10 to-secondary/10 border-primary/20",children:o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx("h3",{className:"font-semibold text-sm",children:"Нужна консультация?"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Свяжитесь с персональным менеджером"}),o.jsxs(O,{size:"sm",variant:"outline",onClick:()=>window.open("https://wa.me/77058838833","_blank"),className:"h-8 px-3 text-xs",children:[o.jsx(ns,{className:"w-3 h-3 mr-1"}),"WhatsApp: +7 705 883 88 33"]})]})})]}),o.jsx(Wr,{open:!!f,onOpenChange:()=>m(null),children:o.jsxs(Ui,{className:"max-w-md",children:[o.jsx(yo,{children:o.jsx(wo,{children:"Обучающее видео"})}),o.jsx("div",{className:"aspect-video bg-black rounded-lg flex items-center justify-center",children:o.jsxs("p",{className:"text-white",children:["Видео: ",f]})})]})}),o.jsx(Wr,{open:!!p,onOpenChange:()=>x(null),children:o.jsxs(Ui,{className:"max-w-md",children:[o.jsx(yo,{children:o.jsx(wo,{children:"Аудио сообщение"})}),o.jsx("div",{className:"p-4 bg-muted rounded-lg flex items-center justify-center",children:o.jsxs("p",{children:["Аудио: ",p]})})]})}),o.jsx(Wr,{open:!!g,onOpenChange:()=>v(null),children:o.jsxs(Ui,{className:"max-w-md",children:[o.jsx(yo,{children:o.jsx(wo,{children:"Подробная информация"})}),o.jsx("div",{className:"p-4",children:o.jsx("p",{className:"text-sm",children:g})})]})}),o.jsx(Wr,{open:!!y,onOpenChange:()=>S(null),children:o.jsx(Ui,{className:"max-w-2xl max-h-[95vh] overflow-y-auto",children:o.jsxs("div",{className:"space-y-6 pb-4",children:[y==="fat-burner"&&o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"bg-gradient-to-br from-orange-500/10 to-red-500/10 p-6 rounded-xl border border-orange-500/20",children:o.jsx("div",{className:"aspect-video bg-black rounded-lg flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Xt,{className:"w-12 h-12 mx-auto mb-2 text-white"}),o.jsx("p",{className:"text-white text-sm",children:"Видео о жиросжигателе"})]})})}),o.jsxs("div",{className:"flex gap-3",children:[o.jsxs(O,{className:"flex-1",onClick:()=>window.open("https://wa.me/77058838833","_blank"),children:[o.jsx(ns,{className:"w-4 h-4 mr-2"}),"Связаться с менеджером"]}),o.jsxs(O,{className:"flex-1",variant:"outline",onClick:()=>window.location.href="/shop",children:[o.jsx(Un,{className:"w-4 h-4 mr-2"}),"Купить"]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Что такое жиросжигатель ночной?"}),o.jsx("p",{className:"text-muted-foreground",children:"Жиросжигатель ночной - это натуральная добавка с Пиколинатом Хрома и Гарцинией, специально разработанная для ускорения метаболизма и контроля аппетита в ночное время."}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Состав:"}),o.jsxs("ul",{className:"space-y-2",children:[o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Пиколинат Хрома"})," - регулирует уровень сахара в крови"]})]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Гарциния"})," - подавляет аппетит и блокирует образование жира"]})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-primary/10 to-secondary/10 p-4 rounded-lg border border-primary/20",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[o.jsx(Hn,{className:"w-5 h-5"}),"Правила приема:"]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-2xl",children:"🌙"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Время:"})," 21:00 вечером"]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-2xl",children:"💊"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Дозировка:"})," 2 капсулы (для лучшего результата первые 2 недели - 4 капсулы)"]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-2xl",children:"💧"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Запивать:"})," достаточным количеством воды"]})]})]})]}),o.jsxs("div",{className:"bg-muted/30 p-4 rounded-lg",children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Почему именно вечером?"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Ночное время - это период активного восстановления и очищения организма. Прием жиросжигателя вечером помогает ускорить метаболизм во время сна и обеспечивает лучшее сжигание жиров."})]})]})]}),y==="vitamin-c"&&o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"bg-gradient-to-br from-orange-500/10 to-yellow-500/10 p-6 rounded-xl border border-orange-500/20",children:o.jsx("div",{className:"aspect-video bg-black rounded-lg flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Xt,{className:"w-12 h-12 mx-auto mb-2 text-white"}),o.jsx("p",{className:"text-white text-sm",children:"Видео о витамине C"})]})})}),o.jsxs("div",{className:"flex gap-3",children:[o.jsxs(O,{className:"flex-1",onClick:()=>window.open("https://wa.me/77058838833","_blank"),children:[o.jsx(ns,{className:"w-4 h-4 mr-2"}),"Связаться с менеджером"]}),o.jsxs(O,{className:"flex-1",variant:"outline",onClick:()=>window.location.href="/shop",children:[o.jsx(Un,{className:"w-4 h-4 mr-2"}),"Купить"]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Что такое Витамин C?"}),o.jsx("p",{className:"text-muted-foreground",children:"Витамин C 500мг - мощный антиоксидант, который защищает клетки от повреждений, укрепляет иммунную систему и способствует выработке коллагена."}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Действие:"}),o.jsxs("ul",{className:"space-y-2",children:[o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-2 h-2 bg-orange-500 rounded-full"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Антиоксидантная защита"})," - борьба со свободными радикалами"]})]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-2 h-2 bg-orange-500 rounded-full"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Поддержка иммунитета"})," - укрепление защитных сил организма"]})]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-2 h-2 bg-orange-500 rounded-full"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Синтез коллагена"})," - здоровье кожи и соединительной ткани"]})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-primary/10 to-secondary/10 p-4 rounded-lg border border-primary/20",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[o.jsx(wh,{className:"w-5 h-5"}),"Правила приема:"]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-2xl",children:"🌅"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Время:"})," утром с завтраком"]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-2xl",children:"💊"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Дозировка:"})," 1 капсула (500мг)"]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-2xl",children:"🍽️"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Прием:"})," с едой для лучшего усвоения"]})]})]})]})]})]}),y==="berberin"&&o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"bg-gradient-to-br from-green-500/10 to-emerald-500/10 p-6 rounded-xl border border-green-500/20",children:o.jsx("div",{className:"aspect-video bg-black rounded-lg flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Xt,{className:"w-12 h-12 mx-auto mb-2 text-white"}),o.jsx("p",{className:"text-white text-sm",children:"Видео о берберине"})]})})}),o.jsxs("div",{className:"flex gap-3",children:[o.jsxs(O,{className:"flex-1",onClick:()=>window.open("https://wa.me/77058838833","_blank"),children:[o.jsx(ns,{className:"w-4 h-4 mr-2"}),"Связаться с менеджером"]}),o.jsxs(O,{className:"flex-1",variant:"outline",onClick:()=>window.location.href="/shop",children:[o.jsx(Un,{className:"w-4 h-4 mr-2"}),"Купить"]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Что такое Берберин?"}),o.jsx("p",{className:"text-muted-foreground",children:"Берберин 500мг - натуральное растительное соединение, которое помогает нормализовать уровень глюкозы в крови и поддерживает здоровье пищеварительной системы."}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Действие:"}),o.jsxs("ul",{className:"space-y-2",children:[o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Нормализует уровень глюкозы"})," в крови"]})]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),o.jsx("span",{children:o.jsx("strong",{children:"Поддерживает сердечно-сосудистую систему"})})]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Детокс печени"})," и улучшение оттока желчи"]})]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),o.jsx("span",{children:o.jsx("strong",{children:"Улучшает пищеварение"})})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-primary/10 to-secondary/10 p-4 rounded-lg border border-primary/20",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[o.jsx(Hn,{className:"w-5 h-5"}),"Правила приема:"]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-2xl",children:"⏰"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Время:"})," за 15 минут до каждого приема пищи"]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-2xl",children:"💊"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Дозировка:"})," 1 капсула (500мг)"]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-2xl",children:"🍽️"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Строго натощак"})," (за 2 часа до или после еды)"]})]})]})]}),o.jsxs("div",{className:"bg-muted/30 p-4 rounded-lg",children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Почему именно натощак?"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Кальций из пищи может блокировать усвоение берберина. Прием натощак обеспечивает максимальную биодоступность минерала."})]})]})]}),y==="d3-k2"&&o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"bg-gradient-to-br from-yellow-500/10 to-green-500/10 p-6 rounded-xl border border-yellow-500/20",children:o.jsx("div",{className:"aspect-video bg-black rounded-lg flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Xt,{className:"w-12 h-12 mx-auto mb-2 text-white"}),o.jsx("p",{className:"text-white text-sm",children:"Видео о комплексе D3+K2"})]})})}),o.jsxs("div",{className:"flex gap-3",children:[o.jsxs(O,{className:"flex-1",onClick:()=>window.open("https://wa.me/77058838833","_blank"),children:[o.jsx(ns,{className:"w-4 h-4 mr-2"}),"Связаться с менеджером"]}),o.jsxs(O,{className:"flex-1",variant:"outline",onClick:()=>window.location.href="/shop",children:[o.jsx(Un,{className:"w-4 h-4 mr-2"}),"Купить"]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Что такое комплекс D3+K2?"}),o.jsx("p",{className:"text-muted-foreground",children:"Синергетическая комбинация витаминов D3 (5000 МЕ) и K2 (50 мкг), которая обеспечивает правильное усвоение кальция и укрепление костной системы."}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Действие:"}),o.jsxs("ul",{className:"space-y-2",children:[o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Усвоение кальция"})," - направляет кальций в кости, а не в артерии"]})]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),o.jsx("span",{children:o.jsx("strong",{children:"Укрепление костей и волос"})})]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),o.jsx("span",{children:o.jsx("strong",{children:"Профилактика аутоиммунных заболеваний"})})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-primary/10 to-secondary/10 p-4 rounded-lg border border-primary/20",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[o.jsx(Hn,{className:"w-5 h-5"}),"Правила приема:"]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-2xl",children:"📅"}),o.jsxs("span",{children:[o.jsx("strong",{children:"1-й месяц:"})," по 2 таблетки (10000 МЕ)"]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-2xl",children:"🔬"}),o.jsxs("span",{children:[o.jsx("strong",{children:"2-й месяц:"})," сдать анализ на витамин D"]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-2xl",children:"💊"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Удобно делить:"})," на порции по 1250 МЕ"]})]})]})]}),o.jsxs("div",{className:"bg-muted/30 p-4 rounded-lg",children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Почему важна комбинация D3+K2?"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Витамин D3 увеличивает усвоение кальция, а K2 направляет его именно в кости, предотвращая отложение в артериях и мягких тканях."})]})]})]}),y==="women-complex"&&o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"bg-gradient-to-br from-pink-500/10 to-purple-500/10 p-6 rounded-xl border border-pink-500/20",children:o.jsx("div",{className:"aspect-video bg-black rounded-lg flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Xt,{className:"w-12 h-12 mx-auto mb-2 text-white"}),o.jsx("p",{className:"text-white text-sm",children:"Видео о женском комплексе"})]})})}),o.jsxs("div",{className:"flex gap-3",children:[o.jsxs(O,{className:"flex-1",onClick:()=>window.open("https://wa.me/77058838833","_blank"),children:[o.jsx(ns,{className:"w-4 h-4 mr-2"}),"Связаться с менеджером"]}),o.jsxs(O,{className:"flex-1",variant:"outline",onClick:()=>window.location.href="/shop",children:[o.jsx(Un,{className:"w-4 h-4 mr-2"}),"Купить"]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Что такое женский комплекс?"}),o.jsx("p",{className:"text-muted-foreground",children:"Специально разработанный мультивитаминный комплекс с 30 активными ингредиентами для поддержки женского здоровья, красоты и гормонального баланса."}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Действие:"}),o.jsxs("ul",{className:"space-y-2",children:[o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-2 h-2 bg-pink-500 rounded-full"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Красота"})," - здоровье кожи, волос и ногтей"]})]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-2 h-2 bg-pink-500 rounded-full"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Гормональный баланс"})," - поддержка женской эндокринной системы"]})]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-2 h-2 bg-pink-500 rounded-full"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Иммунная поддержка"})," - 30 активных ингредиентов"]})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-primary/10 to-secondary/10 p-4 rounded-lg border border-primary/20",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[o.jsx(Hn,{className:"w-5 h-5"}),"Правила приема:"]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-2xl",children:"🍽️"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Время:"})," с едой 1 раз в день"]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-2xl",children:"💊"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Дозировка:"})," 3 капсулы за один прием"]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-2xl",children:"📦"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Упаковка:"})," 30 порций, 90 капсул"]})]})]})]})]})]}),y==="collagen"&&o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"bg-gradient-to-br from-blue-500/10 to-cyan-500/10 p-6 rounded-xl border border-blue-500/20",children:o.jsx("div",{className:"aspect-video bg-black rounded-lg flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Xt,{className:"w-12 h-12 mx-auto mb-2 text-white"}),o.jsx("p",{className:"text-white text-sm",children:"Видео о коллагене"})]})})}),o.jsxs("div",{className:"flex gap-3",children:[o.jsxs(O,{className:"flex-1",onClick:()=>window.open("https://wa.me/77058838833","_blank"),children:[o.jsx(ns,{className:"w-4 h-4 mr-2"}),"Связаться с менеджером"]}),o.jsxs(O,{className:"flex-1",variant:"outline",onClick:()=>window.location.href="/shop",children:[o.jsx(Un,{className:"w-4 h-4 mr-2"}),"Купить"]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Что такое коллаген?"}),o.jsx("p",{className:"text-muted-foreground",children:"Комплексная формула с коллагеном, глюкозамином, хондроитином и витамином C с приятным вкусом детского питания для поддержки красоты и здоровья суставов."}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Состав:"}),o.jsxs("ul",{className:"space-y-2",children:[o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Коллаген"})," - основной белок кожи и суставов"]})]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Глюкозамин + Хондроитин"})," - строительные блоки хрящевой ткани"]})]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Витамин C"})," - синтез собственного коллагена"]})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-primary/10 to-secondary/10 p-4 rounded-lg border border-primary/20",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[o.jsx(Hn,{className:"w-5 h-5"}),"Правила приема:"]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-2xl",children:"⏰"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Время:"})," в любое время с едой или без"]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-2xl",children:"🥄"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Профилактика:"})," 1 мерная ложка в день"]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-2xl",children:"🩹"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Лечение:"})," 2 мерные ложки в день"]})]})]})]}),o.jsxs("div",{className:"bg-muted/30 p-4 rounded-lg",children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Приятный вкус!"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Наш коллаген имеет приятный вкус детского питания, что делает его прием не только полезным, но и приятным каждый день."})]})]})]}),y==="omega-3"&&o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"bg-gradient-to-br from-blue-500/10 to-indigo-500/10 p-6 rounded-xl border border-blue-500/20",children:o.jsx("div",{className:"aspect-video bg-black rounded-lg flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Xt,{className:"w-12 h-12 mx-auto mb-2 text-white"}),o.jsx("p",{className:"text-white text-sm",children:"Видео об Омега-3"})]})})}),o.jsxs("div",{className:"flex gap-3",children:[o.jsxs(O,{className:"flex-1",onClick:()=>window.open("https://wa.me/77058838833","_blank"),children:[o.jsx(ns,{className:"w-4 h-4 mr-2"}),"Связаться с менеджером"]}),o.jsxs(O,{className:"flex-1",variant:"outline",onClick:()=>window.location.href="/shop",children:[o.jsx(Un,{className:"w-4 h-4 mr-2"}),"Купить"]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Что такое Омега-3?"}),o.jsx("p",{className:"text-muted-foreground",children:"Высококонцентрированные жирные кислоты EPA (720мг) и DHA (480мг) в маленьких капсулах, подходящих даже для детей."}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Состав:"}),o.jsxs("ul",{className:"space-y-2",children:[o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),o.jsxs("span",{children:[o.jsx("strong",{children:"EPA 720мг"})," - противовоспалительное действие"]})]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),o.jsxs("span",{children:[o.jsx("strong",{children:"DHA 480мг"})," - здоровье мозга и глаз"]})]})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Действие:"}),o.jsxs("ul",{className:"space-y-2",children:[o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-2 h-2 bg-indigo-500 rounded-full"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Здоровый мозг"})," - улучшение когнитивных функций"]})]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-2 h-2 bg-indigo-500 rounded-full"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Мышцы и кости"})," - поддержка опорно-двигательного аппарата"]})]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-2 h-2 bg-indigo-500 rounded-full"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Подходит для детей"})," - безопасная формула"]})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-primary/10 to-secondary/10 p-4 rounded-lg border border-primary/20",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[o.jsx(Hn,{className:"w-5 h-5"}),"Правила приема:"]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-2xl",children:"🍽️"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Время:"})," во время еды"]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-2xl",children:"💊"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Дозировка:"})," 4 капсулы в день"]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-2xl",children:"📦"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Упаковка:"})," 30 порций, 120 капсул"]})]})]})]}),o.jsxs("div",{className:"bg-muted/30 p-4 rounded-lg",children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Маленький размер капсул!"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Наши капсулы Омега-3 имеют маленький размер, что делает их удобными для приема даже детьми и людьми, которым сложно глотать большие капсулы."})]})]})]}),y==="apple-vinegar"&&o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"bg-gradient-to-br from-red-500/10 to-orange-500/10 p-6 rounded-xl border border-red-500/20",children:o.jsx("div",{className:"aspect-video bg-black rounded-lg flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Xt,{className:"w-12 h-12 mx-auto mb-2 text-white"}),o.jsx("p",{className:"text-white text-sm",children:"Видео о яблочном уксусе"})]})})}),o.jsxs("div",{className:"flex gap-3",children:[o.jsxs(O,{className:"flex-1",onClick:()=>window.open("https://wa.me/77058838833","_blank"),children:[o.jsx(ns,{className:"w-4 h-4 mr-2"}),"Связаться с менеджером"]}),o.jsxs(O,{className:"flex-1",variant:"outline",onClick:()=>window.location.href="/shop",children:[o.jsx(Un,{className:"w-4 h-4 mr-2"}),"Купить"]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Что такое яблочный уксус в капсулах?"}),o.jsx("p",{className:"text-muted-foreground",children:"Ферментированный яблочный уксус 500мг в удобной капсульной форме с улучшенной биодоступностью для поддержки пищеварения и метаболизма."}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Преимущества:"}),o.jsxs("ul",{className:"space-y-2",children:[o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Ферментированный"})," - лучшая биодоступность"]})]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Без вкуса и запаха"})," - в удобных капсулах"]})]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Поддержка пищеварения"})," - улучшает метаболизм"]})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-primary/10 to-secondary/10 p-4 rounded-lg border border-primary/20",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[o.jsx(Hn,{className:"w-5 h-5"}),"Правила приема:"]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-2xl",children:"⏰"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Время:"})," за 15 минут до еды вместе с берберином"]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-2xl",children:"💊"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Обычно:"})," 1 капсула перед каждым приемом пищи"]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-2xl",children:"🔬"}),o.jsxs("span",{children:[o.jsx("strong",{children:"При диабете/инсулинорезистентности:"})," 2 капсулы"]})]})]})]}),o.jsxs("div",{className:"bg-muted/30 p-4 rounded-lg",children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Почему вместе с берберином?"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Яблочный уксус и берберин работают синергетически, усиливая действие друг друга в нормализации уровня сахара в крови и улучшении пищеварения."})]})]})]}),y==="zma"&&o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"bg-gradient-to-br from-green-500/10 to-blue-500/10 p-6 rounded-xl border border-green-500/20",children:o.jsx("div",{className:"aspect-video bg-black rounded-lg flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Xt,{className:"w-12 h-12 mx-auto mb-2 text-white"}),o.jsx("p",{className:"text-white text-sm",children:"Видео о ZMA"})]})})}),o.jsxs("div",{className:"flex gap-3",children:[o.jsxs(O,{className:"flex-1",onClick:()=>window.open("https://wa.me/77058838833","_blank"),children:[o.jsx(ns,{className:"w-4 h-4 mr-2"}),"Связаться с менеджером"]}),o.jsxs(O,{className:"flex-1",variant:"outline",onClick:()=>window.location.href="/shop",children:[o.jsx(Un,{className:"w-4 h-4 mr-2"}),"Купить"]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Что такое ZMA?"}),o.jsx("p",{className:"text-muted-foreground",children:"ZMA - это синергетическая комбинация цинка, магния и витамина B6, специально разработанная для максимального усвоения и эффективности."}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Состав:"}),o.jsxs("ul",{className:"space-y-2",children:[o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Цинк"})," - поддержка иммунитета и гормонального баланса"]})]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Магний"})," - здоровье мышц и нервной системы"]})]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Витамин B6"})," - улучшение усвоения цинка и магния"]})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-primary/10 to-secondary/10 p-4 rounded-lg border border-primary/20",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[o.jsx(wh,{className:"w-5 h-5"}),"Правила приема:"]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-2xl",children:"🌅"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Время:"})," утром натощак"]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-2xl",children:"🍽️"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Строго натощак"})," (за 2 часа до или после еды)"]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-2xl",children:"💊"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Дозировка:"})," 3 капсулы"]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-2xl",children:"💧"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Запивать"})," большим количеством воды"]})]})]})]}),o.jsxs("div",{className:"bg-muted/30 p-4 rounded-lg",children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Почему именно натощак?"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Кальций из пищи может блокировать усвоение цинка и магния. Прием натощак обеспечивает максимальную биодоступность минералов."})]})]})]})]})})}),o.jsx(Wr,{open:C,onOpenChange:k,children:o.jsxs(Ui,{className:"max-w-md",children:[o.jsx(yo,{children:o.jsx(wo,{children:"Запись веса"})}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(tt,{htmlFor:"weight",children:"Введите ваш текущий вес (кг)"}),o.jsx(et,{id:"weight",type:"number",step:"0.1",value:j,onChange:L=>E(L.target.value),placeholder:"Например: 65.5",className:"text-center text-lg"})]}),o.jsx("div",{className:"text-xs text-muted-foreground text-center",children:"📊 Ваш вес будет сохранен для отслеживания динамики в личном кабинете"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(O,{variant:"outline",onClick:()=>k(!1),className:"flex-1",children:"Отмена"}),o.jsx(O,{onClick:I,disabled:!j,className:"flex-1",children:"Сохранить"})]})]})]})})]})}function x_(){const i=Ss(),[e,t]=N.useState(null),s=[{id:1,title:"Утренняя разминка",description:"Комплекс упражнений для бодрого начала дня",duration:"5 минут",youtubeUrl:"https://www.youtube.com/embed/dQw4w9WgXcQ"},{id:2,title:"Базовые упражнения",description:"Основные упражнения для поддержания формы",duration:"10 минут",youtubeUrl:"https://www.youtube.com/embed/dQw4w9WgXcQ"},{id:3,title:"Растяжка",description:"Упражнения для гибкости и расслабления",duration:"7 минут",youtubeUrl:"https://www.youtube.com/embed/dQw4w9WgXcQ"},{id:4,title:"Кардио тренировка",description:"Интенсивная тренировка для сердца",duration:"15 минут",youtubeUrl:"https://www.youtube.com/embed/dQw4w9WgXcQ"}];return o.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[o.jsx("div",{className:"bg-primary px-4 py-6 rounded-b-3xl",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(O,{variant:"ghost",size:"sm",onClick:()=>i("/"),className:"text-white hover:bg-white/10 p-2",children:o.jsx(Yu,{size:20})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl font-bold text-white",children:"Начать зарядку"}),o.jsx("p",{className:"text-sm text-white/80",children:"Комплексы упражнений"})]})]})}),o.jsxs("div",{className:"px-4 py-6 space-y-6",children:[o.jsxs(Y,{className:"bg-dark-surface p-4 space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Станьте частью клуба MisterMo"}),o.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[o.jsxs("div",{className:"relative h-24 overflow-hidden rounded-lg",children:[o.jsx("div",{className:"absolute inset-0",children:o.jsx("img",{src:"/lovable-uploads/01943daa-db09-4dcb-a70c-9df8145da00e.png",alt:"Сканер еды",className:"w-full h-full object-cover"})}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent"}),o.jsx("div",{className:"absolute bottom-1 left-1 right-1 z-10",children:o.jsx(O,{size:"sm",className:"w-full text-[8px] bg-primary text-black font-semibold hover:bg-primary/90 h-6",onClick:()=>i("/scanner"),children:"Сканер еды"})})]}),o.jsxs("div",{className:"relative h-24 overflow-hidden rounded-lg",children:[o.jsx("div",{className:"absolute inset-0",children:o.jsx("img",{src:"/lovable-uploads/90313f9c-2509-4cfa-a9b3-60432ef88b82.png",alt:"Группа поддержки",className:"w-full h-full object-cover"})}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent"}),o.jsx("div",{className:"absolute bottom-1 left-1 right-1 z-10",children:o.jsx(O,{size:"sm",className:"w-full text-[8px] bg-primary text-black font-semibold hover:bg-primary/90 h-6",onClick:()=>i("/chat"),children:"Группа поддержки"})})]}),o.jsxs("div",{className:"relative h-24 overflow-hidden rounded-lg",children:[o.jsx("div",{className:"absolute inset-0",children:o.jsx("img",{src:"/lovable-uploads/26f342d5-a3af-463a-9172-28bd4aafec13.png",alt:"Фитнес и фейсбилдинг",className:"w-full h-full object-cover"})}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent"}),o.jsx("div",{className:"absolute bottom-1 left-1 right-1 z-10",children:o.jsx(O,{size:"sm",className:"w-full text-[8px] bg-primary text-black font-semibold hover:bg-primary/90 h-6",onClick:()=>i("/workout"),children:"Фитнес и фейсбилдинг"})})]})]})]}),o.jsxs("div",{className:"relative rounded-2xl overflow-hidden",children:[o.jsx("img",{src:"/lovable-uploads/1dc79c40-a57d-47ca-9b05-2413071ae64a.png",alt:"Женщина выполняет упражнения дома",className:"w-full h-48 object-cover"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),o.jsxs("div",{className:"absolute bottom-4 left-4 text-white",children:[o.jsx("h2",{className:"text-lg font-semibold",children:"Начните свой день с зарядки"}),o.jsx("p",{className:"text-sm opacity-90",children:"Энергия и бодрость на весь день"})]})]}),o.jsxs(Y,{className:"bg-dark-surface p-4 space-y-3",children:[o.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Система Морачковского - Комплекс упражнений который помогает бороться с артериальным давлением, улучшает лимфооток, и запускает нейромышечные связи"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Специально разработанные комплексы упражнений для поддержания здоровья и формы в рамках генетической системы Морачковского. Все упражнения адаптированы под принципы здорового образа жизни."}),o.jsx("div",{className:"bg-primary/10 p-3 rounded-lg",children:o.jsx("p",{className:"text-xs text-primary",children:"💡 Рекомендуется выполнять упражнения утром после контрастного душа и перед приемом добавок"})})]}),o.jsxs(Y,{className:"bg-dark-surface p-4 space-y-3",children:[o.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Важно! ZMA Минералы"}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Для максимальной эффективности тренировок принимайте ZMA минералы:"}),o.jsxs("div",{className:"bg-primary/10 p-3 rounded-lg space-y-2",children:[o.jsx("p",{className:"text-sm text-primary font-medium",children:"⏰ Время приема:"}),o.jsx("p",{className:"text-sm text-foreground",children:"• В 9:00 утра (натощак)"}),o.jsx("p",{className:"text-sm text-foreground",children:"• В 21:00 вечера (натощак)"}),o.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"⚠️ Обязательно принимать без еды!"})]}),o.jsxs(O,{size:"sm",variant:"outline",onClick:()=>t("zma-details"),className:"w-full",children:[o.jsx(zf,{className:"w-4 h-4 mr-2"}),"Узнать подробнее о ZMA"]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Видео упражнения"}),s.map(n=>o.jsxs(Y,{className:"bg-dark-surface p-4 space-y-3",children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"font-medium text-foreground",children:n.title}),o.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:n.description}),o.jsxs("p",{className:"text-xs text-primary mt-2",children:["⏱️ ",n.duration]})]}),o.jsxs(O,{size:"sm",className:"ml-3",children:[o.jsx(Xt,{size:16,className:"mr-1"}),"Смотреть"]})]}),o.jsx("div",{className:"aspect-video bg-muted rounded-lg overflow-hidden",children:o.jsx("iframe",{src:n.youtubeUrl,title:n.title,className:"w-full h-full",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]},n.id))]}),o.jsxs(Y,{className:"bg-dark-surface p-4 space-y-3",children:[o.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Рекомендации"}),o.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[o.jsx("p",{children:"• Выполняйте упражнения на голодный желудок"}),o.jsx("p",{children:"• Обязательно разогрейтесь перед тренировкой"}),o.jsx("p",{children:"• Следите за дыханием во время упражнений"}),o.jsx("p",{children:"• После тренировки выпейте стакан воды"}),o.jsx("p",{children:"• Не забывайте отмечать выполнение в расписании дня"})]})]})]}),o.jsx(Wr,{open:e!==null,onOpenChange:()=>t(null),children:o.jsxs(Ui,{className:"max-w-lg mx-auto bg-dark-surface border-border max-h-[90vh] overflow-y-auto",children:[o.jsx(yo,{children:o.jsx(wo,{className:"text-foreground",children:"ZMA - Важный минеральный комплекс"})}),o.jsxs("div",{className:"space-y-4 text-sm pb-4",children:[o.jsx("div",{className:"flex justify-center",children:o.jsx("img",{src:"/lovable-uploads/e7fccbe8-40ce-49fd-8438-da3e9f88bc44.png",alt:"ZMA продукт - Цинк, Магний и Витамин B6",className:"w-48 h-auto rounded-lg shadow-md"})}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("h4",{className:"font-semibold text-foreground",children:"Что такое ZMA?"}),o.jsx("p",{className:"text-muted-foreground",children:"ZMA - это синергетическая комбинация цинка, магния и витамина B6, специально разработанная для максимального усвоения и эффективности."})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("h4",{className:"font-semibold text-foreground",children:"Состав:"}),o.jsxs("ul",{className:"text-muted-foreground space-y-1",children:[o.jsxs("li",{children:["• ",o.jsx("strong",{children:"Цинк"})," - поддержка иммунитета и гормонального баланса"]}),o.jsxs("li",{children:["• ",o.jsx("strong",{children:"Магний"})," - здоровье мышц и нервной системы"]}),o.jsxs("li",{children:["• ",o.jsx("strong",{children:"Витамин B6"})," - улучшение усвоения цинка и магния"]})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("h4",{className:"font-semibold text-foreground",children:"Правила приема:"}),o.jsxs("div",{className:"bg-primary/10 p-3 rounded-lg space-y-2",children:[o.jsx("p",{className:"text-primary font-medium",children:"⏰ Время: 9:00 или 21:00"}),o.jsx("p",{className:"text-foreground",children:"🍽️ Строго натощак (за 2 часа до или после еды)"}),o.jsx("p",{className:"text-foreground",children:"💊 Дозировка: 3 капсулы"}),o.jsx("p",{className:"text-foreground",children:"💧 Запивать большим количеством воды"})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("h4",{className:"font-semibold text-foreground",children:"Почему именно натощак?"}),o.jsx("p",{className:"text-muted-foreground",children:"Кальций из пищи может блокировать усвоение цинка и магния. Прием натощак обеспечивает максимальную биодоступность минералов."})]}),o.jsx("div",{className:"bg-yellow-500/10 p-3 rounded-lg",children:o.jsx("p",{className:"text-xs text-yellow-600",children:"⚠️ Важно: Не принимать вместе с кальцием, железом или кофеином"})})]})]})})]})}function b_(){const i=Ss(),[e,t]=N.useState(!1),[s,n]=N.useState("inhale"),[r,a]=N.useState(3),[l,d]=N.useState(0),[h,u]=N.useState(0),[f,m]=N.useState(0),[p,x]=N.useState(!0),g=N.useRef(null),v=N.useRef(null),y=[{duration:3,name:"Начинающий",time:"5 мин"},{duration:4,name:"Средний",time:"5 мин"},{duration:5,name:"Продвинутый",time:"5 мин"}],S={inhale:{label:"Вдох",color:"from-blue-500/20 to-cyan-500/20"},hold1:{label:"Задержка",color:"from-purple-500/20 to-indigo-500/20"},exhale:{label:"Выдох",color:"from-green-500/20 to-emerald-500/20"},hold2:{label:"Пауза",color:"from-yellow-500/20 to-orange-500/20"}},j=(T=800,P=200)=>{if(p)try{v.current||(v.current=new(window.AudioContext||window.webkitAudioContext));const R=v.current.createOscillator(),M=v.current.createGain();R.connect(M),M.connect(v.current.destination),R.frequency.value=T,R.type="sine",M.gain.setValueAtTime(.3,v.current.currentTime),M.gain.exponentialRampToValueAtTime(.01,v.current.currentTime+P/1e3),R.start(v.current.currentTime),R.stop(v.current.currentTime+P/1e3)}catch{console.log("Audio not available")}},E=()=>{const T=["inhale","hold1","exhale","hold2"],R=(T.indexOf(s)+1)%T.length,M=T[R],F=y[h].duration;n(M),a(F),M==="inhale"?(j(600,300),d($=>$+1)):M==="exhale"?j(400,300):j(500,150)};N.useEffect(()=>(e?g.current=setInterval(()=>{a(T=>T<=1?(E(),y[h].duration):((s==="hold1"||s==="hold2")&&T>1&&j(200,100),T-1)),m(T=>{const P=T+1;return P>=300&&h<2?(u(R=>R+1),0):P})},1e3):g.current&&clearInterval(g.current),()=>{g.current&&clearInterval(g.current)}),[e,s,h]);const C=()=>{t(!0),n("inhale"),a(y[h].duration),d(0),m(0),j(600,300)},k=()=>{t(!1),n("inhale"),a(y[h].duration),u(0),m(0)},_=()=>{const T=(y[h].duration-r)/y[h].duration,P=120,R=180;return s==="inhale"?P+(R-P)*T:s==="exhale"?R-(R-P)*T:s==="hold1"?R:P};return o.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[o.jsx("div",{className:"bg-primary px-4 py-6 rounded-b-3xl",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(O,{variant:"ghost",size:"sm",onClick:()=>i("/"),className:"text-white hover:bg-white/10 p-2",children:o.jsx(Yu,{size:20})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl font-bold text-white",children:"Начать дышать"}),o.jsx("p",{className:"text-sm text-white/80",children:"Квадратное дыхание"})]})]})}),o.jsxs("div",{className:"px-4 py-6 space-y-6",children:[o.jsxs(Y,{className:"bg-dark-surface p-4 space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Станьте частью клуба MisterMo"}),o.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[o.jsxs("div",{className:"relative h-24 overflow-hidden rounded-lg",children:[o.jsx("div",{className:"absolute inset-0",children:o.jsx("img",{src:"/lovable-uploads/01943daa-db09-4dcb-a70c-9df8145da00e.png",alt:"Сканер еды",className:"w-full h-full object-cover"})}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent"}),o.jsx("div",{className:"absolute bottom-1 left-1 right-1 z-10",children:o.jsx(O,{size:"sm",className:"w-full text-[8px] bg-primary text-black font-semibold hover:bg-primary/90 h-6",onClick:()=>i("/scanner"),children:"Сканер еды"})})]}),o.jsxs("div",{className:"relative h-24 overflow-hidden rounded-lg",children:[o.jsx("div",{className:"absolute inset-0",children:o.jsx("img",{src:"/lovable-uploads/90313f9c-2509-4cfa-a9b3-60432ef88b82.png",alt:"Группа поддержки",className:"w-full h-full object-cover"})}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent"}),o.jsx("div",{className:"absolute bottom-1 left-1 right-1 z-10",children:o.jsx(O,{size:"sm",className:"w-full text-[8px] bg-primary text-black font-semibold hover:bg-primary/90 h-6",onClick:()=>i("/chat"),children:"Группа поддержки"})})]}),o.jsxs("div",{className:"relative h-24 overflow-hidden rounded-lg",children:[o.jsx("div",{className:"absolute inset-0",children:o.jsx("img",{src:"/lovable-uploads/26f342d5-a3af-463a-9172-28bd4aafec13.png",alt:"Фитнес и фейсбилдинг",className:"w-full h-full object-cover"})}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent"}),o.jsx("div",{className:"absolute bottom-1 left-1 right-1 z-10",children:o.jsx(O,{size:"sm",className:"w-full text-[8px] bg-primary text-black font-semibold hover:bg-primary/90 h-6",onClick:()=>i("/workout"),children:"Фитнес и фейсбилдинг"})})]})]})]}),o.jsxs(Y,{className:"bg-dark-surface p-4 space-y-3",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("h2",{className:"text-lg font-semibold text-foreground",children:["Уровень: ",y[h].name]}),o.jsxs("span",{className:"text-sm text-muted-foreground",children:[y[h].duration," сек / фаза"]})]}),o.jsx("div",{className:"flex gap-2",children:y.map((T,P)=>o.jsx("div",{className:`flex-1 h-2 rounded-full ${P<h?"bg-primary":P===h?"bg-primary/50":"bg-muted"}`},P))}),o.jsxs("p",{className:"text-xs text-muted-foreground",children:["Прогресс уровня: ",Math.floor(f/60),":",(f%60).toString().padStart(2,"0")," / 5:00"]})]}),o.jsxs(Y,{className:"bg-dark-surface p-4 space-y-3",children:[o.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Дыхательная медитация"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Прогрессивная техника дыхания с тремя уровнями сложности. Каждый уровень длится 5 минут и автоматически переходит к следующему."}),o.jsx("div",{className:"bg-primary/10 p-3 rounded-lg",children:o.jsx("p",{className:"text-xs text-primary",children:"🧘‍♀️ Следуйте за квадратом и звуковыми сигналами для глубокой медитации"})})]}),o.jsxs(Y,{className:"bg-dark-surface p-8 flex flex-col items-center space-y-6",children:[o.jsx("div",{className:"relative flex items-center justify-center h-64 w-full",children:o.jsx("div",{className:`
                transition-all duration-1000 ease-in-out rounded-lg border-4 border-primary/50
                bg-gradient-to-br ${S[s].color}
                flex items-center justify-center
              `,style:{width:`${_()}px`,height:`${_()}px`},children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-3xl font-bold text-primary mb-2",children:r}),o.jsx("div",{className:"text-sm font-medium text-foreground",children:S[s].label})]})})}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(O,{onClick:e?k:C,size:"lg",className:"bg-primary text-black font-semibold hover:bg-primary/90",children:[e?o.jsx(Nw,{size:20}):o.jsx(Xt,{size:20}),o.jsx("span",{className:"ml-2",children:e?"Остановить":"Начать"})]}),o.jsx(O,{variant:"outline",size:"lg",onClick:()=>x(!p),children:p?o.jsx(Dw,{size:20}):o.jsx(Ow,{size:20})})]}),l>0&&o.jsx("div",{className:"text-center",children:o.jsxs("p",{className:"text-sm text-muted-foreground",children:["Циклов завершено: ",l]})})]}),o.jsxs(Y,{className:"bg-dark-surface p-4 space-y-3",children:[o.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Как выполнять"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"}),o.jsxs("div",{children:[o.jsxs("p",{className:"font-medium text-blue-400",children:["Вдох (",y[h].duration," сек)"]}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Медленно вдыхайте через нос"})]})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full mt-2"}),o.jsxs("div",{children:[o.jsxs("p",{className:"font-medium text-purple-400",children:["Задержка (",y[h].duration," сек)"]}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Держите дыхание"})]})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-2"}),o.jsxs("div",{children:[o.jsxs("p",{className:"font-medium text-green-400",children:["Выдох (",y[h].duration," сек)"]}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Медленно выдыхайте через рот"})]})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full mt-2"}),o.jsxs("div",{children:[o.jsxs("p",{className:"font-medium text-yellow-400",children:["Пауза (",y[h].duration," сек)"]}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Держите паузу перед следующим вдохом"})]})]})]})]}),o.jsxs(Y,{className:"bg-dark-surface p-4 space-y-3",children:[o.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Польза дыхательной гимнастики"}),o.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[o.jsx("p",{children:"• Снижает уровень стресса и тревожности"}),o.jsx("p",{children:"• Улучшает концентрацию и внимание"}),o.jsx("p",{children:"• Нормализует артериальное давление"}),o.jsx("p",{children:"• Помогает при бессоннице"}),o.jsx("p",{children:"• Активизирует парасимпатическую нервную систему"}),o.jsx("p",{children:"• Улучшает общее самочувствие"})]})]})]})]})}const v_=()=>{const i=ao();return N.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",i.pathname)},[i.pathname]),o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),o.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),o.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})};function y_(){const{user:i,loading:e,onboardingDone:t,subscriptionTier:s}=Mi();return typeof window<"u"&&console.log("App routing debug:",{user:i==null?void 0:i.id,onboardingDone:t,subscriptionTier:s,loading:e}),e?o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"Загрузка..."})]})}):o.jsx(IS,{children:o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsxs(_S,{children:[i?o.jsxs(o.Fragment,{children:[o.jsx(ct,{path:"/",element:t?s?o.jsx(Sh,{to:"/dashboard",replace:!0}):o.jsx(Sh,{to:"/pricing",replace:!0}):o.jsx(Sh,{to:"/onboarding",replace:!0})}),o.jsx(ct,{path:"/dashboard",element:o.jsx(sj,{})}),o.jsx(ct,{path:"/welcome",element:o.jsx(nj,{})}),o.jsx(ct,{path:"/onboarding",element:o.jsx(ij,{})}),o.jsx(ct,{path:"/pricing",element:o.jsx(aj,{})}),o.jsx(ct,{path:"/themes",element:o.jsx(o_,{})}),o.jsx(ct,{path:"/shop",element:o.jsx(cj,{})}),o.jsx(ct,{path:"/scanner",element:o.jsx(dj,{})}),o.jsx(ct,{path:"/chat",element:o.jsx(hj,{})}),o.jsx(ct,{path:"/profile",element:o.jsx(mj,{})}),o.jsx(ct,{path:"/schedule",element:o.jsx(g_,{})}),o.jsx(ct,{path:"/workout",element:o.jsx(x_,{})}),o.jsx(ct,{path:"/breathing",element:o.jsx(b_,{})})]}):o.jsxs(o.Fragment,{children:[o.jsx(ct,{path:"/",element:o.jsx(Sh,{to:"/login",replace:!0})}),o.jsx(ct,{path:"/login",element:o.jsx(WS,{})}),o.jsx(ct,{path:"/register",element:o.jsx(XS,{})})]}),o.jsx(ct,{path:"*",element:o.jsx(v_,{})})]}),i&&o.jsx(zS,{})]})})}const w_=()=>o.jsxs(DN,{children:[o.jsx(v1,{}),o.jsx(Z1,{}),o.jsx(y_,{})]});Ff.createRoot(document.getElementById("root")).render(o.jsx(H.StrictMode,{children:o.jsx(w_,{})}));
